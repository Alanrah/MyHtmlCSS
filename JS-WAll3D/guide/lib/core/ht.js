!function(w,_,m){"use strict";var p="ht";if(!w[p]){!function(){Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),w.performance&&w.performance.now||function(){var M=Date.now();w.performance||(w.performance={}),w.performance.now=function(){return Date.now()-M}}();for(var X=Date.now(),h=16,D=["ms","moz","webkit","o"],q=0;q<D.length&&!w.requestAnimationFrame;++q)w.requestAnimationFrame=w[D[q]+"RequestAnimationFrame"],w.cancelAnimationFrame=w[D[q]+"CancelAnimationFrame"]||w[D[q]+"CancelRequestAnimationFrame"];w.requestAnimationFrame||(w.requestAnimationFrame=function(o){var $=Date.now(),j=h+X-$;return 0>j&&(j=0),X=$,w.setTimeout(function(){X=Date.now(),o(performance.now())},j)}),w.cancelAnimationFrame||(w.cancelAnimationFrame=function(y){return w.clearTimeout(y)})}();var N,v,J,o,T=w.document,q=null,s=w[p]={},O=w[p+"config"],u=s.Default=O&&O.Default||{},C=s.Style=O&&O.Style||{},P=s.Attr=O&&O.Attr||{},g=s.Color=O&&O.Color||{},b=s.IsGetter=O&&O.IsGetter||{},S=Math,Z=S.round,y=S.floor,D=S.ceil,x=S.sqrt,I=S.max,c=S.min,E=S.abs,z=S.cos,G=S.acos,M=S.sin,e=S.pow,r=S.asin,F=S.PI,W=2*F,h=F/2,H=S.tan,Q=S.atan2,B=S.random,n=function($,K,Z){return Math.max(K,Math.min(Z,$))},A=!0,X=!1,Y=w.parseInt||global.parseInt,R="2018-10-01",U=function(){try{return w.navigator.platform.indexOf("Win")>-1}catch(v){}}(),d=function(G){return G*G},l=w.setTimeout,f=w.clearTimeout,a=w.location,V=w.navigator?w.navigator.userAgent.toLowerCase():"",t=function(h){return h.test(V)},K=t(/msie/)||t(/trident/),j=t(/msie 10/),L=t(/edge/),$=t(/firefox/),i=t(/mac/),uh=u.isTouchable===m?U?!1:T?"ontouchend"in T:!1:u.isTouchable,Fh="default",pb="single",Pq="multiple",fj="front",Uc="back",qg="left",Ai="right",jo="top",rs="bottom",gm="center",Ue="eye",Bp="middle",Kj="east",so="west",ni="north",Gd="none",em="px",Th="absolute",Oi="border",wd="triangle",Pg="rect",us="circle",Hc="cylinder",hb="shape",vh="items",nk="normal",hr="remove",ao="clear",no="width",qo="height",_r="ingroup",Dl="check",ej="uncheck",hh="radio",Kn="radioOn",fq="radioOff",Pf="points",ij="values",Nq="series",uq="body",Te="label",Or="label2",Wm="note",pl="note2",zj="icons",Zf="labelFont",Zm="labelColor",fl="labelSelectColor",ln="note.expanded",xc="note2.expanded",ws="edge.expanded",ip="edge.points",Vd="edge.type",Go="rotation",Yq="getRotation",Lk="setRotation",Sf="hidden",li="visible",rm="tuv",gh="no",Fo="draw",yn="select",js="currentSubGraph",hd="selectBackground",jq="autoMakeVisible",eo="autoHideScrollBar",cc="scrollBarColor",Bk="scrollBarSize",Qc="indent",Mi="rowHeight",pc="columnLineColor",id="rowLineColor",uf="columnLineVisible",ii="rowLineVisible",fr="visibleFunc",jf="expandIcon",Bo="collapseIcon",up="checkMode",pp="sortFunc",of="editable",wn="batchEditable",yg="tristate",cg="asc",te="desc",Ui="position",$f="elevation",bb="children",Vn="translateX",on="translateY",Pp="dataModel",Mc="maxSize",Sm="shape3d",zo="shape3d.resolution",Om="shape3d.visible",oo="shape3d.from.visible",Vf="shape3d.to.visible",_n="shape3d.top.visible",dn="shape3d.bottom.visible",im="repeat.uv.length",Qp="serializeValue",bp="deserializeValue",Il="centerUniform",mh="rgba(255,255,255,0)",Sb="style",xg="attr",nc="field",Pi="string",ih="boolean",dg="color",Hb="int",Op="number",Ub="ew-resize",Ck="ns-resize",op="pointer",he="auto",Xq="mousedown",Dn="mousemove",Jp="mouseup",Xh="mouseout",Vg="touchstart",fc="touchmove",lq="touchend",xi="keydown",Sp="keyup",Nn=$?"DOMMouseScroll":"mousewheel",bq=uh?[Vg,fc,lq,xi,Sp,"keypress","input","contextmenu"]:[xi,Sp,"keypress","input",Xq,Dn,Jp,Xh,Nn,"contextmenu","mouseenter","mouseleave","mouseover"],mq=q,Rb=q,Yd=q,ro=Jp.length,Li=function(){Yd&&(f(Yd.timeout),Yd=q)},Wq=function(){Yd&&qn(Yd.e,Yd.info)};w.addEventListener&&(uh||(w.addEventListener(Xh,function(){Li()},!1),w.addEventListener(Nn,function(){er()},!1)),w.addEventListener(Sp,function(N){91===N.keyCode?Ij={}:delete Ij[N.keyCode]},!0),w.addEventListener(xi,function(x){Ij[x.keyCode]=!0},!0));var Tn,$q,Lh,Pr=!1,Jr=q,Ng=function(G,i){var S=l(function(){G(),delete Jr[S],Af(Jr)&&(Jr=q)},i);return S},oh=q,wc=q,pk={},to={},Mj={},Eh={},Dr={},Ij={},Xo={},Ti={},ap={},Yi=/.json$/,Fd=/^data:image\/svg\+xml/,sp={},sd=[],yj={},vc=q,Vj=q,Ej=function(){},Aq=function(){throw"Oops!"},pd=[0,0,0],po=[0,0,0,0],df={x:0,y:0,width:0,height:0},Jq=q,_d=q,Gq=q,Gc=function(F){_d&&!F._72O&&(Gq||(Gq={}),Gq[F._72O=Di()]=F),Tn!=q?Ce()<.05&&o&&!$q&&(vr=Li):vr=go},Zd=function(Q,b,t,R){_d||(_d={});var s=_d[Q];if(s){if(s.url===b)return;s.image?(s.image.onload=Ej,s.image.onerror=Ej):s.request&&(s.request.onload=Ej,s.request.onerror=Ej)}if(Yi.test(b)){var I=new XMLHttpRequest;if(_d[Q]={request:I,url:b},I.overrideMimeType&&I.overrideMimeType("text/plain"),b=u.beforeLoadURL(b),b.data){var O=u.parse(b.data);Rl(Q,O),u.handleImageLoaded(Q,O)}else I.open("GET",encodeURI(b),!0),I.onload=function(Z){if(200===this.status||0===this.status){var M=u.parse(Z.target.response||Z.target.responseText);Rl(Q,M),u.handleImageLoaded(Q,M)}else Rl(Q,u.handleUnfoundImage(Q,b)||q)},I.onerror=function(){Rl(Q,u.handleUnfoundImage(Q,b)||q)},I.send(null)}else{var O=new Image;_d[Q]={image:O,url:b},K&&(b.toLowerCase().indexOf(".svg")>0||Fd.test(b))?(T.body.appendChild(O),O.style.visibility="hidden",O.onload=function(){l(function(){if(t&&(O.width=t),R&&(O.height=R),!O.width||!O.height){var Y=O.width||O.clientWidth,D=O.height||O.clientHeight;O.width=Y,O.height=D}u.handleImageLoaded(Q,O),Rl(Q,O),T.body.removeChild(O),O.style.visibility=""},180)},O.onerror=function(){Rl(Q,u.handleUnfoundImage(Q,b)||q),T.body.removeChild(O),O.style.visibility=""}):(O.onload=function(){t&&(O.width=t),R&&(O.height=R),u.handleImageLoaded(Q,O),Rl(Q,O)},O.onerror=function(){Rl(Q,u.handleUnfoundImage(Q,b)||q)}),/^data:image/.test(b)||(b=u.beforeLoadURL(b),/^data:image/.test(b)||(b=u.appendTimeStamp(b),b=encodeURI(b))),O.src=b}},Rl=function(s,k){if(to[s]=k,delete _d[s],Af(_d)&&(_d=q,Gq)){for(var z in Gq){var v=Gq[z];v._2O&&(v._2O={}),v.invalidateAll&&v.invalidateAll(m,"imageLoaded",s),v.redraw&&v.redraw(),v.iv(),delete v._72O}Gq=q}if(k&&Gq)for(var z in Gq){var v=Gq[z];v.invalidateAll&&v.invalidateAll(m,"imageLoading",s),v.redraw&&v.redraw(),v.iv()}},gn=function(){return w.performance&&w.performance.now?w.performance.now():Date.now()},hl=function($,D){D?f($):w.cancelAnimationFrame($)},Tm=function(C,M,k){return{width:C,height:M,comps:Nc(k)?k:[k]}},Wk=function(q,d){return{type:us,rect:[q,d,1.6,1.6],borderWidth:1,borderColor:oe,gradient:Kg,gradientColor:qi,background:oe}},Zo=function(Z,Y){return Tm(16,16,{type:wd,rect:[4,4,10,8],background:Z,rotation:Y?1.57:3.14})},yq=function(K,V){return Tm(16,16,{type:wd,rect:[4,4,8,7],background:K,rotation:V?3.14:0})},Rk=function(H){var o=H._orientation;return"horizontal"===o||"h"===o},Qe=function(L){var $=q||4,B=q||1,i=q||1;0>$?$=0:$>.25&&($=.25);var b,d,y,D,E,S,A,l=.5,Q=[],U=[],k=[],h=W/i,p=W/B,m=l-$;for(d=0;B>=d;d++)for(D=-F+d*p,S=z(D),E=M(D),b=0;i>=b;b++)y=b*h,A=m+$*S,Q.push(z(y)*A,E*$,-M(y)*A),(v=L)&&U.push(b/i,1-d/B);for(d=0;B>d;d++){var P=d*(i+1),g=(d+1)*(i+1);for(b=0;i>b;b++)k.push(P+b,g+b+1,g+b,P+b,P+b+1,g+b+1),kb.z=Fc.z=L}},an=function(k){var Z=2,J=0;for(var z in k)z.length===Z&&Y(z,32)===Qr&&(vc=Vj=k[z]),J++;return J},sg=function(Z,Q,f,c){return f||(f=uh?5:3,f/=c||1),{x:Z-f,y:Q-f,width:2*f,height:2*f}},ld=function(x,Q,s,Y){var C=this;Q||(Q=uh?5:3,s=20,Y=20);var b={x:x,y:Q,width:s,height:Y};if(s)for(var k=0;s>k;k++)if(3===s)Y=20;else for(var W=0;Y>W;W++)C=w?w:s;var R={x:F,y:2*F};if(If(b,R)){var y=qo[0]+jo[0]+ao[1];Rr[Ue]=C[y],C[y]=jp[Ue]}},mb=function(l){return(/ble$/.test(l)||/ed$/.test(l)||b[l]?"is":"get")+l.charAt(0).toUpperCase()+l.slice(1)},jp=function(j){return"set"+j.charAt(0).toUpperCase()+j.slice(1)},Me=function(G){return typeof G===Pi||G instanceof String},_c=function(q){return typeof q===Op},go=function(f){return typeof f===ih},we=function(W){return W&&"object"==typeof W},Gf=function(E){return"function"==typeof E},Nc=function(Q){return Q instanceof Array},mk=function(X){return X instanceof eb},Qj=function(U){return Nc(U)?new eb(U):U},$p=function(Q){return Q instanceof ah},jc=function(Y){return Y instanceof Ec},jk=function(u){return u instanceof cl},sn=function(a,U){if(!(a instanceof s.Group))return!1;if(!U)return a.isExpanded();var V=U.getDataUI(a);return V&&V._88I?!0:!1},_l=function(S){return S instanceof bn},Ge=function(f){return f&&"IFRAME"===f.tagName},rn=function(m){return m==q||u.numberDigits==q?m:parseFloat(m.toFixed(u.numberDigits))},Hd=function(Q,f,B){var Y,l=f.length;if(B)for(var g=0;B>g;g++)if(3===l)Q.push(f[0]),Q.push(f[1]),Q.push(f[2]);else for(Y=0;l>Y;Y++)Q.push(f[Y]);else if(3===l)Q.push(f[0]),Q.push(f[1]),Q.push(f[2]);else for(Y=0;l>Y;Y++)Q.push(f[Y])},eq=function(U){return U?we(U)?U:{}:!1},As=function(G,n,V){var u,k=we(G)?G:G.prototype;for(u in n)V&&k[u]!==m||(k[u]=n[u]);return G},Ip=function(W){return String.fromCharCode(W)},eh=function(z){for(var k,d=0,$="";d<z.length;d++)k=z[z.length-1-d],"%"===k?k="'":"a"===k?k='"':"]"===k&&(k="\\"),$+=Ip(k.charCodeAt(0)-1);return $},cn=function(G,L,O){G.superClass.constructor.apply(L,O)},Af=function(F){for(var G in F)return!1;return!0},qm=function(S){return S?0===S.length:!0},Mo=function(L,g){return L===g?!0:L.x===g.x&&L.y===g.y&&L.width===g.width&&L.height===g.height},Qm=function(j,W,H){return W>j?W:j>H?H:j},$m=function(x){return 0>x?-1:x>0?1:0},Ce=function(){var K=1e4*M(ro++);return K-y(K)},Ch=function(f,y,G){return ji(f.x,f.y,y.x,y.y,G.x,G.y,G.x+G.width,G.y,!0)||ji(f.x,f.y,y.x,y.y,G.x+G.width,G.y,G.x+G.width,G.y+G.height,!0)||ji(f.x,f.y,y.x,y.y,G.x+G.width,G.y+G.height,G.x,G.y+G.height,!0)||ji(f.x,f.y,y.x,y.y,G.x,G.y+G.height,G.x,G.y,!0)},ji=function(m,v,Q,N,d,x,$,P,e){var i=($-d)*(v-x)-(P-x)*(m-d),A=(P-x)*(Q-m)-($-d)*(N-v);if(0!==A){var w=i/A,f=m+w*(Q-m),r=v+w*(N-v);return e&&(f+$r<c(m,Q)||f-$r>I(m,Q)||f+$r<c(d,$)||f-$r>I(d,$)||r+$r<c(v,N)||r-$r>I(v,N)||r+$r<c(x,P)||r-$r>I(x,P))?q:[f,r]}return q},cr=function(d,p,n){if(d&&n)if(p){if(p===Sb)return d.getStyle(n);if(p===xg)return d.getAttr(n);if(p===nc)return d[n]}else if(n=mb(n),d[n])return d[n]();return m},tk=function(X,J,x,y){if(X&&x)if(J){if(J===Sb)X.s(x,y);else if(J===xg)X.a(x,y);else if(J===nc){var $=X[x];X[x]=y,X.fp("f:"+x,$,y)}}else x=jp(x),X[x]&&X[x](y)},Km=function(t,Z,q){return Z&&"top"!==Z?"bottom"===Z?{x:t.x,y:t.y,width:t.width,height:t.height*q}:"right"===Z?{x:t.x,y:t.y,width:t.width*q,height:t.height}:"left"===Z?{x:t.x+t.width*(1-q),y:t.y,width:t.width*q,height:t.height}:void 0:{x:t.x,y:t.y+t.height*(1-q),width:t.width,height:t.height*q}},kc=function(P,C,t,p,G){C&&Iq(P,t,p,1,G,C)},Ug=function(o,M,m,B){var K=1-o;return K*K*M+2*o*K*m+o*o*B},kb=function(j,l,W,h,U){var m=1-j;return m*m*m*l+3*m*m*j*W+3*m*j*j*h+j*j*j*U},pf=function(O){var l,E,r,M,H=0;return O.forEach(function(z){if(l=z.length,l>0)for(E=z[0],M=1;l>M;M++)r=z[M],H+=Yh(E,r),E=r}),H},tp=function(I,m,y){var R="__"+I,b=function(K){y.interactiveDisabled||y["handle_"+I](K)};y[R]||(y[R]=b,m.addEventListener(I,b,!1))},Tq=function(k,q,A){var p="__"+k,n=A[p];n&&(q.removeEventListener(k,n,!1),delete A[p])},Fq=function(A,$){var C="_"+$;A[mb($)]=function(){return this[C]},A[jp($)]=function(I){var z=this[C];this[C]=I,this.fp($,z,I)}},as=function(c){return _.create(c)},mj=function(w){if(!w.element){var V,r;(V=w.textField)?r=Mr(Sc.TextField,V):(V=w.textArea)?r=Mr(Sc.TextArea,V):(V=w.button)?r=Mr(Sc.Button,V):(V=w.comboBox)?r=Mr(Sc.ComboBox,V):(V=w.checkBox)?r=Mr(Sc.CheckBox,V):(V=w.radioButton)?r=Mr(Sc.RadioButton,V):(V=w.slider)?r=Mr(Sc.Slider,V):(V=w.colorPicker)?r=Mr(Sc.ColorPicker,V):(V=w.image)&&(r=Mr(Sc.Image,V)),r&&(w.element=r)}},uc=function(E,b){var p=Zr(E);return p._ht=b,p},Zr=function(E,g){var r=T.createElement("div"),S=r.style;return r.tabIndex=-1,r.onkeydown=ak,S.msTouchAction=Gd,hf(r,q,0),uh&&S.setProperty("-webkit-tap-highlight-color","rgba(0, 0, 0, 0)",q),E&&(S.overflow=Sf),g&&Bd(g,r),r},ho=function(j,$){var r=T.createElement("canvas"),y=r.style;return y.msTouchAction=Gd,$||(y.pointerEvents=Gd),hf(r,q,0),j&&Bd(j,r),r},hf=function(X,u,n){var d=X.style;d.border=u?u+" solid 1px":0,d.outline=0,d.padding=n?"0 "+n+em:0,yr(X)},yr=function(y){var Y=y.style;Y.position=Th,Y.margin=0,Y.setProperty("box-sizing","border-box",q),Y.setProperty("-moz-box-sizing","border-box",q)},Dp=function(I,A,Y,U){U||(U=Uo),A!=q&&(I.width=A*U,I.style.width=A+em),Y!=q&&(I.height=Y*U,I.style.height=Y+em)},Bd=function(e,P,X){e.appendChild(P),X&&(P.style.position=Th)},Lf=function(k,G){G.split||(G+="");for(var b,g=G.split("\n"),v=0,A=g.length,z=0;A>z;z++){var N=Gp(k.font,g[z]);N.width>v&&(v=N.width),b||(b=N.height)}return k.ss=g,{width:v,height:b*A}},iq=function(E,y,g,D,_,u){var S=y.length;if(1===S)Wn(E,y[0],g,D,_);else for(var G=g.height/S,H={x:g.x,y:g.y,width:g.width,height:G},h=0;h<y.length;h++)u?Cb(E,y[h],D,_,H.x,H.y,H.width,H.height,u):Wn(E,y[h],H,D,_),H.y+=G},Wn=function(W,Y,V,w,X){W.font=w?w:Pn,W.fillStyle=X?X:nl,W.textAlign=gm,W.textBaseline=Bp;var M,O;V?V.width===m?(M=V.x,O=V.y):(M=V.x+V.width/2,O=V.y+V.height/2):(M=0,O=0),W.fillText(Y,Z(M),Z(O))},yh=function(K){K.getView&&(K=K.getView());var p=K.offsetWidth||K.scrollWidth;return!p&&K.style.width&&(p=Y(K.style.width)),p},Ke=function(A){A.getView&&(A=A.getView());var g=A.offsetHeight||A.scrollHeight;return!g&&A.style.height&&(g=Y(A.style.height)),g},vi=function(){var N=function(F){ak(F),F.stopPropagation()},C=uh?[Vg]:[xi,Xq,Nn];return function(O){var t=Zr(),w=t.style;return w.backgroundColor=u.disabledBackground,O&&(w.backgroundImage="url("+O+")",w.backgroundPosition="50% 50%",w.backgroundRepeat="no-repeat no-repeat"),C.forEach(function(W){t.addEventListener(W,N)}),t}}(),Zh=function(w){var $=w.getContext("2d");return $.save(),$.lineCap=vd,$.lineJoin=sq,$},vr=function(m,t,l,B){Uf(m,t*Uo,l*Uo),B*=Uo,1!==B&&m.scale(B,B)},Uf=function(x,N,w){x.translate(N,w)},ck=function(M,u){u&&M.rotate(u)},kf=function(t,X,g){X===m&&(X=1),g===m&&(g=1),(1!==X||1!==g)&&t.scale(X,g)},oi=function(o){var C=T.activeElement;if(T.activeElement!==o){C&&C.forceOnblur&&C.forceOnblur();for(var J=[],D=o.parentNode;D;)J.push([D,D.scrollLeft,D.scrollTop]),D=D.parentNode;if(uh)o.focus();else{var l=wk(),y=l.target;o.focus(),y.scrollLeft=l.left,y.scrollTop=l.top}J.forEach(function(s){s[0].scrollLeft=s[1],s[0].scrollTop=s[2]})}},Bi=function(r){return r&&r.getView?r.getView():r},cq=function(b,A,F,J,y){if(2===arguments.length&&(F=A.y,J=A.width,y=A.height,A=A.x),b.isSelfViewEvent)b.setX(A),b.setY(F),b.setWidth(J),b.setHeight(y);else{var g=Bi(b),r=g.style;if((T.fullscreenElement||T.mozFullScreenElement||T.webkitFullscreenElement||T.msFullscreenElement)!==g)A!==m&&(r.left=A+em),F!==m&&(r.top=F+em),J!==m&&(r.width=J+em),y!==m&&(r.height=y+em);else{var n=u.getWindowInfo();r.left=(A=n.left)+em,r.top=(F=n.top)+em,r.width=(J=n.width)+em,r.height=(y=n.height)+em}b.endEditing&&!uh&&b.endEditing(),b.redraw&&b.redraw(),b.invalidate&&b.invalidate(),b.onLayouted&&b.onLayouted(A,F,J,y),b.fireViewEvent&&b.fireViewEvent("layout")}},Mq=function(x){if(!x.touches)return x;var M=x.touches[0];return M?M:x.changedTouches[0]},ce=function(q){return uh?Mq(q).target:q.target},ye=function(j){u.popup&&u.popup.close(),u.popup=j},pm=q,bh=function(p){pm.handleWindowTouchMove(p)},Lc=function(n){pm.handleWindowTouchEnd(n),w.removeEventListener(fc,bh,!1),w.removeEventListener(lq,Lc,!1),pm=q},Lg=function(W){pm.handleWindowMouseMove(W)},ve=function(I){pm.handleWindowMouseUp(I),w.removeEventListener(Dn,Lg,!1),w.removeEventListener(Jp,ve,!1),pm=q},Hn=function(Q){return 1===Lr(Q)},qf=function(I,k){return k?k.keyCode===I:Ij[I]},hp=function(C){return Sn(C)&&qf(65,C)},dd=function(L){return qf(46,L)||qf(8,L)},Ni=function(w){return function(H){return H?H.keyCode===w:Ij[w]}},Qr=573,ek=[65,83,68,87,37,38,39,40,32,13,27],Ri=Ni(ek[0]),jg=Ni(ek[1]),_h=Ni(ek[2]),Mf=Ni(ek[3]),Xe=Ni(ek[4]),cp=Ni(ek[5]),Tb=Ni(ek[6]),nd=Ni(ek[7]),sh=Ni(ek[8]),Yl=Ni(ek[9]),_k=Ni(ek[10]),vj={65:1,83:1,68:1,87:1,37:1,38:1,39:1,40:1},Lq=[2,2,2,2,2,2,2,2,2,2,3,3,3,3,5,5,5,5,5,5,1187],fh=q,Fl=q,Hf=function(z,J){fh||(fh=ho()),Dp(fh,z,J,1);var w=Zh(fh);return w.clearRect(0,0,z,J),w},Uk=function(){var P,R={};return function(e){var o,Y=R[e];return Y||(P||(P=ho(),Dp(P,1,1,1)),o=P.getContext("2d"),o.clearRect(0,0,1,1),Iq(o,0,0,1,1,e),Y=o.getImageData(0,0,1,1).data,Y=R[e]=[Y[0],Y[1],Y[2],Y[3]]),Y}}(),Gl=function(X){if(!Me(X))return X;var W=Uk(X);return W.CA||(W.CA=[W[0]/255,W[1]/255,W[2]/255,W[3]/255]),W.CA},Dh=function(R,x,r,o,N){var O=ho();O.width=r,O.height=o;var L=O.getContext("2d");L.drawImage(R,0,0,r,o);try{for(var l=L.getImageData(0,0,r,o),n=l.data,y=0,T=n.length;T>y;y+=4){var b=n[y+0],p=n[y+1],G=n[y+2],Y=n[y+3];"override_a"===N?n[y+3]=255*x[3]:"override_rgb"===N?(n[y+0]=255*x[0],n[y+1]=255*x[1],n[y+2]=255*x[2]):"override"===N?(n[y+0]=255*x[0],n[y+1]=255*x[1],n[y+2]=255*x[2],n[y+3]=255*x[3]):(n[y+0]=x[0]*b,n[y+1]=x[1]*p,n[y+2]=x[2]*G,n[y+3]=x[3]*Y)}L.putImageData(l,0,0)}catch(t){return R}return O},Rr=function(y,O,F){return O&&(O="miter"===F?8*O+20:O+1,y&&Uq(y,O)),O},Ln=function(q,V){if(V){var D=new pn(V),c=q.width/2,Q=q.height/2,z=tq([D.tf(-c,-Q),D.tf(c,-Q),D.tf(c,Q),D.tf(-c,Q)]);return z.x+=q.x+c,z.y+=q.y+Q,z}return q},dp=function(u,c,k,B,X,G,w,T){B*=Math.PI/180;var e={x:Math.cos(B)*(u.x-w.x)/2+Math.sin(B)*(u.y-w.y)/2,y:-Math.sin(B)*(u.x-w.x)/2+Math.cos(B)*(u.y-w.y)/2},o=Math.pow(e.x,2)/Math.pow(c,2)+Math.pow(e.y,2)/Math.pow(k,2);o>1&&(c*=Math.sqrt(o),k*=Math.sqrt(o));var R=(X==G?-1:1)*Math.sqrt((Math.pow(c,2)*Math.pow(k,2)-Math.pow(c,2)*Math.pow(e.y,2)-Math.pow(k,2)*Math.pow(e.x,2))/(Math.pow(c,2)*Math.pow(e.y,2)+Math.pow(k,2)*Math.pow(e.x,2)));isNaN(R)&&(R=0);var p={x:R*c*e.y/k,y:R*-k*e.x/c},j={x:(u.x+w.x)/2+Math.cos(B)*p.x-Math.sin(B)*p.y,y:(u.y+w.y)/2+Math.sin(B)*p.x+Math.cos(B)*p.y},C=function(e){return Math.sqrt(Math.pow(e[0],2)+Math.pow(e[1],2))},K=function(t,F){return(t[0]*F[0]+t[1]*F[1])/(C(t)*C(F))},z=function(V,O){return(V[0]*O[1]<V[1]*O[0]?-1:1)*Math.acos(K(V,O))},f=z([1,0],[(e.x-p.x)/c,(e.y-p.y)/k]),V=[(e.x-p.x)/c,(e.y-p.y)/k],D=[(-e.x-p.x)/c,(-e.y-p.y)/k],b=z(V,D);K(V,D)<=-1&&(b=Math.PI),K(V,D)>=1&&(b=0);var K=c>k?c:k,P=c>k?1:c/k,F=c>k?k/c:1;if(null==T){var S={x:0,y:0,width:0,height:0};Uq(S,K),S.x*=P,S.width*=P,S.y*=F,S.height*=F;var U=new pn(B);return S=tq([U.tf(S.x,S.y),U.tf(S.x+S.width,S.y),U.tf(S.x+S.width,S.y+S.height),U.tf(S.x,S.y+S.height)]),S.x+=j.x,S.y+=j.y,[{x:S.x,y:S.y},{x:S.x+S.width,y:S.y},{x:S.x+S.width,y:S.y+S.height},{x:S.x,y:S.y+S.height}]}T.translate(j.x,j.y),T.rotate(B),T.scale(P,F),T.arc(0,0,K,f,f+b,1-G),T.scale(1/P,1/F),T.rotate(-B),T.translate(-j.x,-j.y)},Cr=function(h,n){h&&h.beginPath();for(var x,b,e,T=[],q=function(E){for(var Z,i=/(\-{0,1}[\d\.]+)/gi,_=[];Z=i.exec(E);)_.push(parseFloat(Z[0]));return _},y=/([MmLlHhVvCcSsQqTtAa]{1}[\d\.,\s\-Zz]*)/gi,t={x:0,y:0};x=y.exec(n);){var s=x[0],H=s.substr(0,1);if("M"===H||"m"===H){for(var C=q(s),E=0;E<C.length;E+=2){var P=C[E],z=C[E+1];"m"===H&&(P+=t.x,z+=t.y),h&&h.moveTo(P,z),T.push({x:P,y:z}),t.x=P,t.y=z}b=e=null}else if("H"===H||"h"===H){for(var C=q(s),E=0;E<C.length;E+=1){var P=C[E];"h"===H&&(P+=t.x),h&&h.lineTo(P,t.y),T.push({x:P,y:t.y}),t.x=P}b=e=null}else if("C"===H||"c"===H){for(var C=q(s),E=0;E<C.length;E+=6){var l=C[E],i=C[E+1],Y=C[E+2],o=C[E+3],P=C[E+4],z=C[E+5];"c"===H&&(l+=t.x,i+=t.y,Y+=t.x,o+=t.y,P+=t.x,z+=t.y),h&&h.bezierCurveTo(l,i,Y,o,P,z),T.push({x:l,y:i}),T.push({x:Y,y:o}),T.push({x:P,y:z}),t.x=P,t.y=z}b=[l,i,Y,o,P,z],e=null}else if("S"===H||"s"===H){for(var C=q(s),E=0;E<C.length;E+=4){var l,i;b?(l=2*b[4]-b[2],i=2*b[5]-b[3]):(l=t.x,i=t.y);var Y=C[E],o=C[E+1],P=C[E+2],z=C[E+3];"s"===H&&(Y+=t.x,o+=t.y,P+=t.x,z+=t.y),h&&h.bezierCurveTo(l,i,Y,o,P,z),T.push({x:l,y:i}),T.push({x:Y,y:o}),T.push({x:P,y:z}),t.x=P,t.y=z}b=[l,i,Y,o,P,z],e=null}else if("Q"===H||"q"===H){for(var C=q(s),E=0;E<C.length;E+=4){var l=C[E],i=C[E+1],P=C[E+2],z=C[E+3];"q"===H&&(l+=t.x,i+=t.y,P+=t.x,z+=t.y),h&&h.quadraticCurveTo(l,i,P,z),T.push({x:l,y:i}),T.push({x:P,y:z}),t.x=P,t.y=z}b=null,e=[l,i,P,z]}else if("T"===H||"t"===H){for(var C=q(s),E=0;E<C.length;E+=2){var l,i;e?(l=2*e[2]-e[0],i=2*e[3]-e[1]):(l=t.x,i=t.y);var P=C[E],z=C[E+1];"t"===H&&(P+=t.x,z+=t.y),h&&h.quadraticCurveTo(l,i,P,z),T.push({x:l,y:i}),T.push({x:P,y:z}),t.x=P,t.y=z}b=null,e=[l,i,P,z]}else if("V"===H||"v"===H){for(var C=q(s),E=0;E<C.length;E+=1){var z=C[E];"v"===H&&(z+=t.y),h&&h.lineTo(t.x,z),T.push({x:t.x,y:z}),t.y=z}b=e=null}else if("L"===H||"l"===H){for(var C=q(s),E=0;E<C.length;E+=2){var P=C[E],z=C[E+1];"l"===H&&(P+=t.x,z+=t.y),h&&h.lineTo(P,z),T.push({x:P,y:z}),t.x=P,t.y=z}b=e=null}else if("A"===H||"a"===H){for(var C=q(s),E=0;E<C.length;E+=7){var J=C[E],c=C[E+1],B=C[E+2],u=C[E+3],L=C[E+4],P=C[E+5],z=C[E+6];"a"===H&&(P+=t.x,z+=t.y);var K=dp(t,J,c,B,u,L,{x:P,y:z},h);K&&(T=T.concat(K)),t.x=P,t.y=z}b=e=null}var m=s.substr(s.length-1);("z"===m||"Z"===m)&&h&&h.closePath()}return T},Jg=function(I,H){var o,C,J="L"===H[0],T=H.length;for(I.save(),J?(I.transform(H[5],H[6],H[7],H[8],H[9],H[10]),o=I.createLinearGradient(H[1],H[2],H[3],H[4]),C=11):(I.transform(H[7],H[8],H[9],H[10],H[11],H[12]),o=I.createRadialGradient(H[1],H[2],H[3],H[4],H[5],H[6]),C=13);T>C;)o.addColorStop(H[C],H[C+1]),C+=2;I.fillStyle=o},Fc=function(b,F){var t,$,R,P,j,v,y,o,k,g,C,Z,I,u="L"===b[0];t=u?5:7,$=b[t],R=b[t+1],P=b[t+2],j=b[t+3],v=b[t+4],y=b[t+5],o=F[0],k=F[1],g=F[2],C=F[3],Z=F[4],I=F[5],b[t]=o*$+g*R,b[t+1]=k*$+C*R,b[t+2]=o*P+g*j,b[t+3]=k*P+C*j,b[t+4]=o*v+g*y+Z,b[t+5]=k*v+C*y+I},_f=function(E,U,t,n){var R=!1;if(E.beginPath?E.beginPath():R=!0,mk(U)&&(U=U._as),mk(t)&&(t=t._as),t&&t.length){for(var d,h,c,I,Y=0,o=0,M=t.length;M>o;o++)d=t[o],1===d?(h=U[Y++],E.moveTo(h.x,R?-h.y:h.y)):2===d?(h=U[Y++],E.lineTo(h.x,R?-h.y:h.y)):3===d?(h=U[Y++],c=U[Y++],E.quadraticCurveTo(h.x,R?-h.y:h.y,c.x,R?-c.y:c.y)):4===d?(h=U[Y++],c=U[Y++],I=U[Y++],E.bezierCurveTo(h.x,R?-h.y:h.y,c.x,R?-c.y:c.y,I.x,R?-I.y:I.y)):5===d&&E.closePath();n&&5!==d&&E.closePath()}else{var W,K,N,f=U.length;if(f>0){for(W=U[0],E.moveTo(W.x,R?-W.y:W.y),K=1;f>K;K++)N=U[K],E.lineTo(N.x,R?-N.y:N.y);n&&E.closePath()}}},Qd=function(I,c,w,z){if(mk(I)&&(I=I._as),mk(c)&&(c=c._as),c&&c.length){w=w||Wc;for(var Q,l,d,h,E,N,j=[],b=q,H=0,f=0,V=c.length;V>f;f++)if(Q=c[f],1===Q)j.push(b=[]),b.push(I[H++]);else if(2===Q)b.push(I[H++]);else if(3===Q)for(l=b[b.length-1],d=I[H++],h=I[H++],N=1;w>=N;N++)b.push({x:Ug(N/w,l.x,d.x,h.x),y:Ug(N/w,l.y,d.y,h.y)});else if(4===Q)for(l=b[b.length-1],d=I[H++],h=I[H++],E=I[H++],N=1;w>=N;N++)b.push({x:kb(N/w,l.x,d.x,h.x,E.x),y:kb(N/w,l.y,d.y,h.y,E.y)});else 5===Q&&b.push(b[0]);return z&&5!==Q&&b&&b.length>2&&b.push(b[0]),j}return z&&I.length>2&&(I=I.slice(),I.push(I[0])),I?[I]:[]},Um=function(i,O,r,d,T,z){var E,f,l,C=Uk(O),y=d,u=C[0],o=C[1],V=C[2];if(r){var Y=Uk(r);E=Y[0]-u,f=Y[1]-o,l=Y[2]-V}else E=255-u,f=255-o,l=255-V;for(z||(z=d>10?1:.5,z=1>T?c(z/T,2):z);(d-=z)>0;){var n=1-d/y,g=u+E*n,G=o+f*n,J=V+l*n;g=c(D(g),255),G=c(D(G),255),J=c(D(J),255),i.strokeStyle="rgb("+g+","+G+","+J+")",i.lineWidth=d,i.stroke()}},bj=function(){var Z={};return function(P,Y){var w=P+"-"+Y,J=Z[w];if(J)return J;var p,O,C,F=Uk(P);return 0>Y?(Y=(100+Y)/100,p=D(F[0]*Y),O=D(F[1]*Y),C=D(F[2]*Y)):(Y/=100,p=F[0],O=F[1],C=F[2],p+=(255-p)*Y,O+=(255-O)*Y,C+=(255-C)*Y,p=c(D(p),255),O=c(D(O),255),C=c(D(C),255)),Z[w]="rgb("+p+","+O+","+C+")"}}(),Iq=function(B,A,Z,K,b,e){e&&(B.fillStyle=e),B.beginPath(),B.rect(A,Z,K,b),B.fill()},fm=function(r,G,z,e,E,n,q){r.beginPath(),xp[G](r,z.x,z.y,z.width,z.height,e,E,n,q)},bc=function(R,T,i,K,z){var v=xp[i];R.fillStyle=v?v(R,T,K?K:qi,z.x,z.y,z.width,z.height):T},de=function(b,n,c,j,$,Y){try{if(!n.tagName){n._cacheImage_||(n._cacheImage_={});var y;y="override"===j?"colors_override":"override_rgb"===j?"colors_override_rgb":"override_a"===j?"colors_override_a":"colors",n._cacheImage_[y]||(n._cacheImage_[y]={__count__:0});var L=n._cacheImage_[y][c];L||(n._cacheImage_[y].__count__>u.imageCacheThreshold&&(n._cacheImage_[y]={__count__:0}),L=s.Default.toCanvas(n,re(n),Vo(n),null,$,Y,c,null,j),n._cacheImage_[y][c]=L,n._cacheImage_[y].__count__++),n=L}b.fillStyle=b.createPattern(n,"repeat")}catch(T){b.fillStyle="black"}},Nr=function(w,z,h,o,D,C,W){w.save(),w.translate(z,h),w.scale(1,W/C),w.arc(0,0,C,o,D),w.restore()},dc=function(H,j,X,O,B,w,e,P){var q,y,x,L,t,A,p,R,a,I,U;if(E(B)>2*F&&(B=2*F),t=D(E(B)/(F/4)),q=B/t,y=-q,x=-O,t>0){A=j+z(O)*w,p=X+M(-O)*e,P?H.lineTo(A,p):H.moveTo(A,p);for(var G=0;t>G;G++)x+=y,L=x-y/2,R=j+z(x)*w,a=X+M(x)*e,I=j+z(L)*(w/z(y/2)),U=X+M(L)*(e/z(y/2)),H.quadraticCurveTo(I,U,R,a)}},Eq=function(z,N,$,k,c,V,h,x,Z){6===arguments.length&&(h=V,x=V,Z=V);var S=N+k,n=$+c,I=c>k?2*k:2*c;V=I>V?V:I,h=I>h?h:I,x=I>x?x:I,Z=I>Z?Z:I;var y=.29*Z,o=.58*Z;z.moveTo(S,n-Z),z.quadraticCurveTo(S,n-o,S-y,n-y),z.quadraticCurveTo(S-o,n,S-Z,n),y=.29*x,o=.58*x,z.lineTo(N+x,n),z.quadraticCurveTo(N+o,n,N+y,n-y),z.quadraticCurveTo(N,n-o,N,n-x),y=.29*V,o=.58*V,z.lineTo(N,$+V),z.quadraticCurveTo(N,$+o,N+y,$+y),z.quadraticCurveTo(N+o,$,N+V,$),y=.29*h,o=.58*h,z.lineTo(S-h,$),z.quadraticCurveTo(S-o,$,S-y,$+y),z.quadraticCurveTo(S,$+o,S,$+h),z.lineTo(S,n-Z)},Gr=function(F,J,m,y,S,g,o){J&&(m=Z(m),y=Z(y),o||(o=1),F.fillStyle=J,F.beginPath(),F.rect(m,y,o,g),F.rect(m,y,S,o),F.rect(m,y+g-o,S,o),F.rect(m+S-o,y,o,g),F.fill())},bi=function(O,b,T,i){var g=i.x,L=i.y,j=i.width,B=i.height;if(!(!b||!T||0>=j||0>=B)){var s,r=xs(b),h=jj(b),w=T>0;1===T||-1===T?(O.fillStyle=w?r:h,O.beginPath(),O.rect(g,L,1,B),O.rect(g,L,j,1),O.fill(),O.fillStyle=w?h:r,O.beginPath(),O.rect(g,L+B-1,j,1),O.rect(g+j-1,L,1,B),O.fill()):(T=c(E(T),c(j/2,B/2)),s=O.createLinearGradient(g,L,g+T,L),s.addColorStop(0,w?r:h),s.addColorStop(1,b),O.fillStyle=s,O.beginPath(),O.moveTo(g,L),O.lineTo(g+T,L+T),O.lineTo(g+T,L+B-T),O.lineTo(g,L+B),O.lineTo(g,L),O.fill(),s=O.createLinearGradient(g,L,g,L+T),s.addColorStop(0,w?r:h),s.addColorStop(1,b),O.fillStyle=s,O.beginPath(),O.moveTo(g,L),O.lineTo(g+T,L+T),O.lineTo(g+j-T,L+T),O.lineTo(g+j,L),O.lineTo(g,L),O.fill(),s=O.createLinearGradient(g,L+B,g,L+B-T),s.addColorStop(0,w?h:r),s.addColorStop(1,b),O.fillStyle=s,O.beginPath(),O.moveTo(g,L+B),O.lineTo(g+T,L+B-T),O.lineTo(g+j-T,L+B-T),O.lineTo(g+j,L+B),O.lineTo(g,L+B),O.fill(),s=O.createLinearGradient(g+j,L,g+j-T,L),s.addColorStop(0,w?h:r),s.addColorStop(1,b),O.fillStyle=s,O.beginPath(),O.moveTo(g+j,L),O.lineTo(g+j-T,L+T),O.lineTo(g+j-T,L+B-T),O.lineTo(g+j,L+B),O.lineTo(g+j,L),O.fill())}},Rd=function(m,U,X,K,u,g,n){var b=m.createLinearGradient(K,u,g,n);return b.addColorStop(0,X),b.addColorStop(1,U),b},bl=function(J,Y,Q,v,e,P,t){var o=J.createLinearGradient(v,e,P,t);return o.addColorStop(0,Y),o.addColorStop(.5,Q),o.addColorStop(1,Y),o},_p=function(F,L,W,i,$,K,b){var o=F.createLinearGradient(i,$,K,b);return o.addColorStop(0,L),o.addColorStop(1/3,W),o.addColorStop(2/3,L),o.addColorStop(1,W),o},$i=function(Y,q,Z,R,N,X,S,H,t){var M=Y.createRadialGradient(R+X*H,N+S*t,c(X,S)/24,R+X/2,N+S/2,I(X,S)/2);return M.addColorStop(0,Z),M.addColorStop(1,q),M},xp={polygon:function($,s,W,Y,h,H){(H==q||3>H)&&(H=6);for(var i,b,w=c(Y,h)/2,k=s+Y/2,_=W+h/2,Q=0,v=2*F/H,A=0;H>A;A++)i=k+z(Q)*w,b=_+M(Q)*w,0===A?$.moveTo(i,b):$.lineTo(i,b),Q+=v;$.closePath()},arc:function(A,n,h,r,g,R,D,K,M){R==q&&(R=F),D==q&&(D=W),K==q&&(K=!0);var w=n+r/2,m=h+g/2;K&&A.moveTo(w,m),M?Nr(A,w,m,R,D,r/2,g/2):A.arc(w,m,c(r,g)/2,R,D),K&&A.closePath()},rect:function(I,O,v,k,E){I.rect(O,v,k,E)},circle:function(a,J,d,P,l){a.arc(J+P/2,d+l/2,c(P,l)/2,0,W,!0)},oval:function(g,Q,f,D,U){Nr(g,Q+D/2,f+U/2,0,W,D/2,U/2)},roundRect:function(J,r,$,x,L,T){T==q&&(T=c(c(x,L)/4,8)),Eq(J,r,$,x,L,T)},star:function(F,N,X,a,l){var k=2*a,i=2*l,p=N+a/2,e=X+l/2;F.moveTo(p-k/4,e-i/12),F.lineTo(N+.306*a,X+.579*l),F.lineTo(p-k/6,e+i/4),F.lineTo(N+a/2,X+.733*l),F.lineTo(p+k/6,e+i/4),F.lineTo(N+.693*a,X+.579*l),F.lineTo(p+k/4,e-i/12),F.lineTo(N+.611*a,X+.332*l),F.lineTo(p+0,e-i/4),F.lineTo(N+.388*a,X+.332*l),F.closePath()},triangle:function(h,i,p,u,C){h.moveTo(i+u/2,p),h.lineTo(i+u,p+C),h.lineTo(i,p+C),h.closePath()},hexagon:function(h,D,i,z,Y){h.moveTo(D,i+Y/2),h.lineTo(D+z/4,i+Y),h.lineTo(D+3*z/4,+i+Y),h.lineTo(D+z,i+Y/2),h.lineTo(D+3*z/4,i),h.lineTo(D+z/4,i),h.closePath()},pentagon:function(c,l,z,r,i){var p=2*r,M=2*i,V=l+r/2,y=z+i/2;c.moveTo(V-p/4,y-M/12),c.lineTo(V-p/6,y+M/4),c.lineTo(V+p/6,y+M/4),c.lineTo(V+p/4,y-M/12),c.lineTo(V+0,y-M/4),c.closePath()},diamond:function(v,q,i,$,Q){v.moveTo(q+$/2,i),v.lineTo(q,i+Q/2),v.lineTo(q+$/2,i+Q),v.lineTo(q+$,i+Q/2),v.closePath()},rightTriangle:function(x,E,j,s,y){x.moveTo(E,j),x.lineTo(E+s,j+y),x.lineTo(E,j+y),x.closePath()},parallelogram:function(p,$,t,y,e){var W=y/4;p.moveTo($+W,t),p.lineTo($+y,t),p.lineTo($+y-W,t+e),p.lineTo($,t+e),p.closePath()},trapezoid:function(a,b,N,P,H){var $=P/4;a.moveTo(b+$,N),a.lineTo(b+P-$,N),a.lineTo(b+P,N+H),a.lineTo(b,N+H),a.closePath()},"linear.southwest":function(c,B,C,N,G,I,K){return Rd(c,B,C,N,G+K,N+I,G)},"linear.southeast":function(_,X,Y,p,I,b,J){return Rd(_,X,Y,p+b,I+J,p,I)},"linear.northwest":function(g,w,b,R,F,n,L){return Rd(g,w,b,R,F,R+n,F+L)},"linear.northeast":function(n,k,B,I,q,w,y){return Rd(n,k,B,I+w,q,I,q+y)},"linear.north":function(w,a,Z,F,h,j,D){return Rd(w,a,Z,F,h,F,h+D)},"linear.south":function(i,E,h,S,y,z,R){return Rd(i,E,h,S,y+R,S,y)},"linear.west":function(Q,U,o,N,X,b){return Rd(Q,U,o,N,X,N+b,X)},"linear.east":function(N,u,W,E,L,b){return Rd(N,u,W,E+b,L,E,L)},"radial.center":function(P,f,H,Y,z,o,l){return $i(P,f,H,Y,z,o,l,.5,.5)},"radial.southwest":function(f,O,Y,h,b,E,S){return $i(f,O,Y,h,b,E,S,.25,.75)},"radial.southeast":function(x,K,Z,G,$,F,d){return $i(x,K,Z,G,$,F,d,.75,.75)},"radial.northwest":function(j,i,o,u,G,O,t){return $i(j,i,o,u,G,O,t,.25,.25)},"radial.northeast":function(e,Q,H,d,y,v,z){return $i(e,Q,H,d,y,v,z,.75,.25)},"radial.north":function(h,I,N,k,n,R,i){return $i(h,I,N,k,n,R,i,.5,.25)},"radial.south":function(f,P,N,v,Z,h,Q){return $i(f,P,N,v,Z,h,Q,.5,.75)},"radial.west":function(j,x,J,k,n,L,I){return $i(j,x,J,k,n,L,I,.25,.5)},"radial.east":function(q,m,Z,Y,g,M,X){return $i(q,m,Z,Y,g,M,X,.75,.5)},"spread.horizontal":function(l,r,F,$,w,k){return bl(l,r,F,$,w,$+k,w)},"spread.vertical":function(P,F,X,T,G,M,V){return bl(P,F,X,T,G,T,G+V)},"spread.diagonal":function(P,r,u,U,l,V,d){return bl(P,r,u,U+V,l,U,l+d)},"spread.antidiagonal":function(N,i,T,q,V,h,I){return bl(N,i,T,q,V,q+h,V+I)},"spread.north":function(u,R,v,A,D,C,K){return _p(u,R,v,A,D-K/4,A,D+K+K/4)},"spread.south":function(I,Y,m,G,$,b,S){return _p(I,m,Y,G,$-S/4,G,$+S+S/4)},"spread.west":function(t,e,k,q,I,c){return _p(t,e,k,q-c/4,I,q+c+c/4,I)},"spread.east":function(h,j,x,g,q,S){return _p(h,x,j,g-S/4,q,g+S+S/4,q)}},Er=function(t,K,n){return new pn(t).tf(K,n)},vo=function(O){var H=O.touches[0],L=O.touches[1],j=H.clientX,e=H.clientY,X=L.clientX,Y=L.clientY;return x((j-X)*(j-X)+(e-Y)*(e-Y))},Pl=(function(){for(var P=0,$=te.split(""),i=0;i<$.length;i++)P=10*Y($[i])+P;return Qe(w[Qr.toString(8*i)+Te.substr(i)]),P}(),function(s,F,t){for(var Y=0;Y<t.size();Y++){var z=t.get(Y);s.co(z)&&F.add(z)}for(Y=0;Y<t.size();Y++)z=t.get(Y),Pl(s,F,z._children)}),bm=function(N,W,H){for(var z=0;z<H.size();z++){var s=H.get(H.size()-1-z);N.co(s)&&W.add(s)}for(z=0;z<H.size();z++)s=H.get(z),bm(N,W,s._children)},Xg=function(c,n,Z){for(var A=!1,w=0;w<Z.size();w++){var I=Z.get(w);c.co(I)?A&&n.add(I):A=1}for(w=0;w<Z.size();w++)I=Z.get(w),Xg(c,n,I._children)},Hq=function(C,K,D){for(var n=!1,A=0;A<D.size();A++){var i=D.get(D.size()-1-A);C.co(i)?n&&K.add(i):n=!0}for(A=0;A<D.size();A++)i=D.get(A),Hq(C,K,i._children)},Re=function(r,K,Y,S){var k=S==q;if(0!==K||0!==Y||!k&&0!==S){var t,X,e,a,v,O=new eb;r.each(function(V){if($p(V)){var U=!0;if(e)for(t=0;t<e.size();t++)X=e.get(t),X.isHostOn(V)?(e.removeAt(t),t--,O.remove(X)):U&&(V.isHostOn(X)||V.isLoopedHostOn(X))&&(U=!1);if(a)for(t=0;t<a.size();t++)X=a.get(t),cm(X,V)?(a.removeAt(t),t--,O.remove(X)):U&&cm(V,X)&&(U=!1);if(v)for(t=0;t<v.size();t++)X=v.get(t),xd(X,V)?(v.removeAt(t),t--,O.remove(X)):U&&xd(V,X)&&(U=!1);U&&(O.add(V),(V._host||V._69O)&&(e||(e=new eb),e.add(V)),(jk(V)||jk(V._parent))&&(a||(a=new eb),a.add(V)),(_l(V)||_l(V._parent))&&(v||(v=new eb),v.add(V)))}else if(jc(V)&&V.s(Vd)===Pf){var $=V.s(ip);if($&&!$.isEmpty()){var d=new eb;$.each(function(g){g=Ll(g),k?(g.x+=K,g.y+=Y):(g.x+=K,g.y+=S,g.e==q?g.e=Y:g.e+=Y),d.add(g)
}),V.s(ip,d)}}}),O.each(function(f){k?f.translate(K,Y):f.translate3d(K,Y,S)})}},Ld=function(K,c){for(;K&&!K.hasOwnProperty(c);)K=_.getPrototypeOf(K);return K&&_.getOwnPropertyDescriptor(K,c)},qb=_.getPrototypeOf?function(n,B,Q){var q=Ld(B,Q);q&&_.defineProperty(n,Q,q)}:function(Y,_,r){Y[r]=_[r]},be={1:29,2:30,3:31,4:32,5:33,6:26,7:27,8:28,9:21,10:22,11:23,12:24,13:25,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:9,22:10,23:11,24:12,25:13,26:6,27:7,28:8,29:1,30:2,31:3,32:4,33:5,34:36,35:37,36:34,37:35,38:54,39:55,40:52,41:53,42:50,43:51,44:49,50:42,51:43,52:40,53:41,54:38,55:39},_m=function(){var Q={1:function(E,H){return{x:E.x-H.width/2,y:E.y-H.height/2}},2:function(_,r){return{x:_.x+r.width/2,y:_.y-r.height/2}},3:function(l,M){return{x:l.x+l.width/2,y:l.y-M.height/2}},4:function(M,I){return{x:M.x+M.width-I.width/2,y:M.y-I.height/2}},5:function(I,$){return{x:I.x+I.width+$.width/2,y:I.y-$.height/2}},6:function(j){return{x:j.x,y:j.y}},7:function(U){return{x:U.x+U.width/2,y:U.y}},8:function(c){return{x:c.x+c.width,y:c.y}},9:function(Y,S){return{x:Y.x-S.width/2,y:Y.y+S.height/2}},10:function(S,m){return{x:S.x+m.width/2,y:S.y+m.height/2}},11:function($,n){return{x:$.x+$.width/2,y:$.y+n.height/2}},12:function(B,z){return{x:B.x-z.width/2+B.width,y:B.y+z.height/2}},13:function(K,g){return{x:K.x+K.width+g.width/2,y:K.y+g.height/2}},14:function(x,K){return{x:x.x-K.width/2,y:x.y+x.height/2}},15:function(t){return{x:t.x,y:t.y+t.height/2}},16:function(t,f){return{x:t.x+f.width/2,y:t.y+t.height/2}},17:function(Z){return{x:Z.x+Z.width/2,y:Z.y+Z.height/2}},18:function(x,X){return{x:x.x+x.width-X.width/2,y:x.y+x.height/2}},19:function(Z){return{x:Z.x+Z.width,y:Z.y+Z.height/2}},20:function(w,u){return{x:w.x+w.width+u.width/2,y:w.y+w.height/2}},21:function(W,k){return{x:W.x-k.width/2,y:W.y+W.height-k.height/2}},22:function(W,D){return{x:W.x+D.width/2,y:W.y+W.height-D.height/2}},23:function(D,R){return{x:D.x+D.width/2,y:D.y+D.height-R.height/2}},24:function(b,f){return{x:b.x+b.width-f.width/2,y:b.y+b.height-f.height/2}},25:function(b,g){return{x:b.x+b.width+g.width/2,y:b.y+b.height-g.height/2}},26:function(G){return{x:G.x,y:G.y+G.height}},27:function(G){return{x:G.x+G.width/2,y:G.y+G.height}},28:function(V){return{x:V.x+V.width,y:V.y+V.height}},29:function(x,w){return{x:x.x-w.width/2,y:x.y+x.height+w.height/2}},30:function(y,O){return{x:y.x+O.width/2,y:y.y+y.height+O.height/2}},31:function(j,q){return{x:j.x+j.width/2,y:j.y+j.height+q.height/2}},32:function(t,W){return{x:t.x+t.width-W.width/2,y:t.y+t.height+W.height/2}},33:function(k,L){return{x:k.x+k.width+L.width/2,y:k.y+k.height+L.height/2}},34:function(q,S){return{x:q.x,y:q.y-S.height/2}},35:function(S,q){return{x:S.x+S.width,y:S.y-q.height/2}},36:function(_,N){return{x:_.x,y:_.y+_.height+N.height/2}},37:function(F,$){return{x:F.x+F.width,y:F.y+F.height+$.height/2}},38:function(U,X){return{x:U.x+U.width/4,y:U.y-X.height/2}},39:function(A,h){return{x:A.x+3*A.width/4,y:A.y-h.height/2}},40:function(x){return{x:x.x+x.width/4,y:x.y}},41:function(P){return{x:P.x+3*P.width/4,y:P.y}},42:function(F,y){return{x:F.x+F.width/4,y:F.y+y.height/2}},43:function(g,P){return{x:g.x+3*g.width/4,y:g.y+P.height/2}},44:function(r,s){return{x:r.x+r.width/2,y:r.y+r.height/2-s.height/2}},45:function($){return{x:$.x+$.width/4,y:$.y+$.height/2}},46:function(d,q){return{x:d.x+d.width/2-q.width/2,y:d.y+d.height/2}},47:function(B,T){return{x:B.x+B.width/2+T.width/2,y:B.y+B.height/2}},48:function(n){return{x:n.x+3*n.width/4,y:n.y+n.height/2}},49:function(l,X){return{x:l.x+l.width/2,y:l.y+l.height/2+X.height/2}},50:function(U,Z){return{x:U.x+U.width/4,y:U.y+U.height-Z.height/2}},51:function(e,Q){return{x:e.x+3*e.width/4,y:e.y+e.height-Q.height/2}},52:function(R){return{x:R.x+R.width/4,y:R.y+R.height}},53:function(K){return{x:K.x+3*K.width/4,y:K.y+K.height}},54:function(H,k){return{x:H.x+H.width/4,y:H.y+H.height+k.height/2}},55:function(a,X){return{x:a.x+3*a.width/4,y:a.y+a.height+X.height/2}}};return an(w)?function(q,o,h){return Q[q](o,h?h:df)}:void 0}();As(g,{highlight:"#1ABC9C",label:"#000",labelSelect:"#FFF",transparent:"rgba(0,0,0,0.35)",titleBackground:"#2C3E50",titleIconBackground:"#868686",headerBackground:"#ECF0F1",headerIconBackground:"#868686",headerSeparator:"#868686",headerLine:"#D9D9D9",background:"#FFF",disabledBackground:"rgba(255,255,255,0.65)",toolTipBackground:"#FFFFE0",rectSelectBorder:"#2C3E50",rectSelectBackground:"rgba(0,0,0,0.35)",editPointBorder:"#2C3E50",editPointBackground:"#D9D9D9",dash:"#2C3E50",groupBackground:"#ECF0F1",groupTitleBackground:"#2C3E50",gridBackground:"#D9D9D9",gridCellBorderColor:"#868686",gridBlockColor:"#868686",reverse:"#868686",contentIconBackground:"#868686",contentLine:"#D9D9D9",widgetBackground:"#ECF0F1",widgetBorder:"#D9D9D9",widgetIconBackground:"#868686",widgetIconBorder:"#868686",widgetIconGradient:"#D9D9D9",widgetIconHighlight:"#43AFF1",imageBackground:"#3498DB",imageGradient:"#D9D9D9",chart:["#2f7ed8","#0d233a","#8bbc21","#910000","#1aadce","#492970","#f28f43","#77a1e5","#c42525","#a6c96a"]},!0);var wo=g.reverse,nb=g.transparent,fi=g.rectSelectBackground,Hh=g.dash,dr=g.titleBackground,Ao=g.titleIconBackground,Cq=g.headerBackground,zp=g.headerIconBackground,Fe=g.headerSeparator,wl=g.headerLine,Ph=g.contentIconBackground,In=g.contentLine,_o=(g.widgetIconHighlight,g.widgetIconBorder),oe=(g.widgetIconGradient,g.imageBackground),qi=g.imageGradient,dk=g.highlight,Mn=g.label,zq=g.labelSelect;if(R&&!w.noAlert){var tj=new Date,qc=R.split("-"),ks=new Date(tj.getFullYear(),tj.getMonth(),tj.getDate()),R=new Date(Y(qc[0],10),Y(qc[1],10)-1,Y(qc[2],10)),Cl=ks.getTime(),Pb=R.getTime(),Xn=p+"_try",rh=w.localStorage,Np=w.alert;if(rh&&Np)if(Pb>Cl&&1728e6>Pb-Cl){var Wp=(Pb-Cl)/864e5;rh&&rh[Xn]!=Wp&&(rh[Xn]=Wp,Np("HT for Web free trial license will expire in "+Wp+" days, please apply for a new license!"))}else Cl>=Pb&&Np("Your free trial of HT for Web has expired!"),rh&&delete rh[Xn]}var ki={ms_ac:function(s,V){for(var K=V.ms_ac,R=0;R<K.length;R++)Fq(s,K[R])},ms_listener:function(e){e.addListeners=function(){for(var P=this,b=0;b<bq.length;b++)P["handle_"+bq[b]]&&tp(bq[b],P.getView(),P)},e.removeListeners=function(){for(var H=this,P=0;P<bq.length;P++)H["handle_"+bq[P]]&&Tq(bq[P],H.getView(),H)}},ms_fire:function(G){G.mp=function(B,M,F){this.addPropertyChangeListener(B,M,F)},G.ump=function(O,t){this.removePropertyChangeListener(O,t)},G.fp=function($,M,p,n){return this.firePropertyChange($,M,p,n)},G.addPropertyChangeListener=function(B,w,Y){var n=this;n._62I||(n._62I=new Jn),n._62I.add(B,w,Y)},G.removePropertyChangeListener=function(e,_){this._62I&&this._62I.remove(e,_)},G.firePropertyChange=function(V,Q,e,M){if(M){if(M(Q,e))return!1}else if(Q===e)return!1;var a=this,r={property:V,oldValue:Q,newValue:e,source:a,data:a};return a._62I&&a._62I.fire(r),a.onPropertyChanged&&a.onPropertyChanged(r),!0}},ms_attr:function(k){k.a=function(l,t){var e=this;if(2===arguments.length)e.setAttr(l,t);else{if(!we(l))return e.getAttr(l);for(var L in l)e.setAttr(L,l[L])}return e},k.getAttr=function(W,Z){Z===m&&(Z=1);var y=this._attrObject?this._attrObject[W]:m;return y===m&&Z?P[W]:y},k.setAttr=function(V,h){var J=this;J._attrObject||(J._attrObject={});var o=J._attrObject[V];h===m?delete J._attrObject[V]:J._attrObject[V]=h,J.fp&&J.fp("a:"+V,o,h)&&J.onAttrChanged&&J.onAttrChanged(V,o,h)},k.getSerializableAttrs=function(){var J,U={};for(J in this._attrObject)U[J]=1;return U}},ms_bnb:function(W){W.getBodyColor=function(Q){return Q.s("body.color")},W.getBorderColor=function(_){return _.s("border.color")}},_51o:function(k){k.mi=function(L,Y,e){this.addInteractorListener(L,Y,e)},k.umi=function(g,o){this.removeInteractorListener(g,o)},k.fi=function(R){this.fireInteractorEvent(R)},k.addInteractorListener=function(A,I,g){var Z=this;Z._63I||(Z._63I=new Jn),Z._63I.add(A,I,g)},k.removeInteractorListener=function(V,j){this._63I.remove(V,j)},k.fireInteractorEvent=function(T){this._63I&&this._63I.fire(T)},k.setInteractors=function(g){var D=this,W=D._interactors;W&&W.each(function(s){s.tearDown()}),Nc(g)&&(g=new eb(g)),D._interactors=g,g&&g.each(function(u){u.setUp()}),D.fp("interactors",W,g),D.invalidateSelection()},k.getInteractors=function(){return this._interactors}},_49o:function(v){v._44O=q,v._45O=q,v.getTopPainters=function(){return this._44O},v.getBottomPainters=function(){return this._45O},v.addTopPainter=function(C){var N=this;N._44O||(N._44O=new eb),N._44O.contains(C)||(N._44O.add(C),N.redraw&&N.redraw())},v.removeTopPainter=function(u){var Q=this;Q._44O&&(Q._44O.remove(u),Q.redraw&&Q.redraw())},v.addBottomPainter=function(L){var Z=this;Z._45O||(Z._45O=new eb),Z._45O.contains(L)||(Z._45O.add(L),Z.redraw&&Z.redraw())},v.removeBottomPainter=function(d){var F=this;F._45O&&(F._45O.remove(d),F.redraw&&F.redraw())},v._93db=function(F,v){var z=this;z._45O&&z._45O.each(function(c){c.draw?c.draw(F,v):c.call(z,F,v)})},v._92db=function(r,c){var C=this;C._44O&&C._44O.each(function(N){N.draw?N.draw(r,c):N.call(C,r,c)})}},ms_sm:function(X){X.sm=function(){return this.getSelectionModel()},X.setSelectableFunc=function(j){this.sm().setFilterFunc(j)},X.getSelectableFunc=function(){return this.sm().getFilterFunc()},X.getSelectionModel=function(){var h=this;return h._selectionModel?h._selectionModel:h.dm().sm()},X.isSelectionModelShared=function(){return!this._selectionModel},X.setSelectionModelShared=function(e){var H=this,$=!H._selectionModel,D=H.handleSelectionChange,w=H.dm();$!==e&&(H.invalidateSelection&&H.invalidateSelection(),e?(w.sm().ms(D,H),H._selectionModel.ums(D,H),H._selectionModel.dispose(),H._selectionModel=q):(w.sm().ums(D,H),H._selectionModel=new Al(w),H._selectionModel.ms(D,H)),H.onSelectionModelSharedChanged(),H.fp("selectionModelShared",$,e))},X.onSelectionModelSharedChanged=function(){var R=this;R.redraw(),R.invalidateSelection&&R.invalidateSelection()},X.removeSelection=function(){var o=this.dm(),w=o.getHistoryManager();w&&w.beginInteraction(),this.sm().toSelection().each(o.remove,o),w&&w.endInteraction()},X.selectAll=function(){var L=this;L.sm().ss(L.dm().toDatas(function(u){return L.isVisible(u)&&L.isSelectable(u)}))},X.isSelected=function(d){return this.sm().co(d)},X.isSelectedById=function(l){var p=this.dm().getDataById(l);return p?this.isSelected(p):!1},X.isSelectable=function(S){return this.sm().isSelectable(S)}},ms_tx:function(F){F._64I=0,F._65O=0,F.isScrollable=function(){return this.getWidth()<this._64I},F._40o=function(){return this.isScrollable()},F.getLogicalPoint=function(Q){return uj(Q,this._canvas||this._view,this.tx(),this.ty?this.ty():0)},F.tx=function(I){return I===m?this.getTranslateX():(this.setTranslateX(I),void 0)},F.getTranslateX=function(){return this._65O},F.setTranslateX=function(y){var K=this,w=K.getWidth()-K._64I;w>y&&(y=w),y>0&&(y=0),y=Z(y);var L=K._65O;K._65O=y,K.fp(Vn,L,y)}},ms_ty:function(P){P._23Q=0,P._66O=0,P._41o=function(){return this.getHeight()<this._23Q},P.getLogicalPoint=function(V){return uj(V,this._canvas||this._view,this.tx?this.tx():0,this.ty())},P.ty=function(I){return I===m?this.getTranslateY():(this.setTranslateY(I),void 0)},P.getTranslateY=function(){return this._66O},P.setTranslateY=function(t){var C=this,k=C.getHeight()-C._23Q;k>t&&(t=k),t>0&&(t=0),t=Z(t);var h=C._66O;C._66O=t,C.fp(on,h,t)}},ms_txy:function(B){B._65O=0,B._66O=0,B.tx=function(p){return p===m?this.getTranslateX():(this.setTranslateX(p),void 0)},B.ty=function(H){return H===m?this.getTranslateY():(this.setTranslateY(H),void 0)},B.onTranslateEnded=function(){},B.setTranslate=function(b,k,U){var q=this;if(U=eq(U)){q._65I&&q._65I.stop(!0);var u=q.tx(),V=q.ty();U.action=function(F){q.setTranslate(u+(b-u)*F,V+(k-V)*F)},U._37o=function(){delete q._66I,delete q._65I,q.onTranslateEnded()},q._66I=1,q._65I=wb(U)}else q.tx(b),q.ty(k)},B.getTranslateX=function(){return this._65O},B.setTranslateX=function(d){var x=this;d=x.adjustTranslateX(d);var s=x._65O;x._65O=d,x.fp(Vn,s,d)},B.getTranslateY=function(){return this._66O},B.setTranslateY=function(J){var w=this;J=w.adjustTranslateY(J);var b=w._66O;w._66O=J,w.fp(on,b,J)},B.adjustTranslateX=function(P){return Z(P)},B.adjustTranslateY=function(T){return Z(T)},B.translate=function(b,s,w){this.setTranslate(this.tx()+b,this.ty()+s,w)},B.getLogicalPoint=function(g){var B=this;return uj(g,this._canvas||B._view,B.tx(),B.ty())}},ms_dm:function(e){e.dm=function(q){return q?(this.setDataModel(q),void 0):this.getDataModel()},e.getDataModel=function(){return this._dataModel}},ms_lp:function(u){u.lp=function(A){return this.getLogicalPoint(A)}},ms_v:function(N){N._disabled=!1,N.setDisabled=function(O,F){var V=this,A=V._disabled;A!==O&&(A&&(wg(V._63O),delete V._63O),O&&(Bd(V._view,V._63O=vi(F)),V.iv()),V._disabled=O,V.fp("disabled",A,O))},N.isDisabled=function(){return this._disabled},N.getDisabledDiv=function(){return this._63O},N.getView=function(){return this._view},N.addToDOM=function(){var l=this,c=l.getView(),r=c.style;T.body.appendChild(c),r.left="0",r.right="0",r.top="0",r.bottom="0",w.addEventListener("resize",function(){l.iv()},!1),l.iv()},N.getWidth=function(){return this._view.clientWidth},N.getHeight=function(){return this._view.clientHeight},N.setWidth=function($){var Z=this;Z._view.style.width=$+em,Z.iv(),Z.fp&&Z.fp(no,q,$)},N.setHeight=function(J){var z=this;z._view.style.height=J+em,z.iv(),z.fp&&z.fp(qo,q,J)},N.setFocus=function(K){var L=this,k=L._currentEditor;return K&&k&&(k.getView&&(k=k.getView()),k.contains(K.target))?!1:(oi(L._view),L.endEditing&&L.endEditing(),L.fireViewEvent("focus"),!0)},N.iv=function(H){this.invalidate(H)},N.invalidate=function(R){var Y=this;Y._68I||(Y._68I=1,yc(Y.validate,Y,q,R),Y.onInvalidated&&Y.onInvalidated(),Y.fireViewEvent("invalidate"))},N.validate=function(){var y=this,z=y._view;if(y._68I&&(delete y._68I,z.parentNode))if(0===z.offsetWidth&&0===z.offsetHeight&&y._67I!==q)y._67I===m&&(y._67I=u.reinvalidateCount),y._67I>0?y._67I--:y._67I=q,y.iv();else{y.fireViewEvent("beginValidate"),y.validateImpl(),y.onValidated&&y.onValidated(),y.fireViewEvent("validate");var $=y._63O;$&&(z.lastChild!==$&&(wg($),Bd(z,$)),cq($,0,0,y.getWidth(),y.getHeight())),Gc(y),Wf(y),Ko(y)}},N.layout=function(X,O,C,p){1===arguments.length?cq(this,X):cq(this,X,O,C,p)},N.addViewListener=function(G,r,m){var x=this;x._67O||(x._67O=new Jn),x._67O.add(G,r,m)},N.removeViewListener=function(K,r){this._67O.remove(K,r)},N.fireViewEvent=function(O){var n=this;n._67O&&(Me(O)&&(O={kind:O}),n._67O.fire(O)),u.viewListener&&u.viewListener(n,O)}},ms_tip:function(A){A.setToolTipEnabled=function(C){var Z=this;C?uh||Z._13o||(Z.enableToolTip(),Z.fp("toolTipEnabled",!1,!0)):Z._13o&&(Z.disableToolTip(),Z.fp("toolTipEnabled",!0,!1))},A.isToolTipEnabled=function(){return!!this._13o},A.enableToolTip=function(){var f=this;uh||f._13o||(f._13o=function(E){var o=f.getToolTip(E);o!=q?u.toolTipContinual&&u.isToolTipShowing()?qn(E,o):(er(),Yd={timeout:l(Wq,Jf),e:E,info:o}):er()},f.getView().addEventListener(Dn,f._13o,!1),f.getView().addEventListener("mouseleave",u.hideToolTip,!1))},A.disableToolTip=function(){var A=this;A._13o&&(A.getView().removeEventListener(Dn,A._13o,!1),A.getView().removeEventListener("mouseleave",u.hideToolTip,!1),delete A._13o)},A.getToolTip=function(w){var R=this;if(R.getDataAt){var X=R.getDataAt(w);return X?X.getToolTip():q}return R.getValue?R.getValue():void 0}},_52o:function(i){i._zoom=1,i._29I=df,i.zoomIn=function(n,g){this.setZoom(this._zoom*xo,n,g)},i.zoomOut=function(i,K){this.setZoom(this._zoom/xo,i,K)},i.zoomReset=function(R,J){this.setZoom(1,R,J)},i.scrollZoomIn=function(F){this.setZoom(this._zoom*ac,q,F)},i.scrollZoomOut=function(C){this.setZoom(this._zoom/ac,q,C)},i.pinchZoomIn=function(o){this.setZoom(this._zoom*Ie,q,o)},i.pinchZoomOut=function(H){this.setZoom(this._zoom/Ie,q,H)},i.adjustZoom=function(j){return _g>j?_g:j>ub?ub:j},i.getZoom=function(){return this._zoom},i.setZoom=function(X,m,Y){var J=this;if(m=eq(m)){J._14o&&J._14o.stop(!0);var v=J._zoom;m.action=function(V){J._96O(v+(X-v)*V,Y)},m._37o=function(){delete J._zooming,delete J._14o,J.onZoomEnded()},J._zooming=1,J._14o=wb(m)}else J._96O(X,Y)},i._96O=function(p,z){var P=this;if(p=P.adjustZoom(p),p!==P._zoom){P.validate();var q=P._29I,e=P._zoom;0!==q.width&&0!==q.height&&(z=z?z:{x:q.x+q.width/2,y:q.y+q.height/2},P.tx((z.x-q.x)*e-z.x*p),P.ty((z.y-q.y)*e-z.y*p)),P._zoom=p,P.fp("zoom",e,p)}}}};As(u,{numberDigits:5,baseZIndex:m,isTouchable:uh,devicePixelRatio:w.devicePixelRatio?w.devicePixelRatio:1,reinvalidateCount:3,hitMaxArea:3e3,imageCacheThreshold:20,autoMakeVisible:!0,autoHideScrollBar:!0,disabledOpacity:.4,disabledBackground:g.disabledBackground,forceHierarchicalSerialization:!0,toolTipDelay:800,toolTipContinual:!1,getDragger:function(){return pm},lineCap:"butt",lineJoin:"round",imageGradient:"linear.northeast",dashPattern:[16,16],animDuration:200,animEasing:function(g){return g*g},labelColor:Mn,labelSelectColor:zq,labelFont:(uh?"15":"12")+"px arial, sans-serif",widgetIndent:uh?30:20,widgetRowHeight:uh?30:20,widgetHeaderHeight:uh?32:22,widgetTitleHeight:uh?34:24,scrollBarColor:nb,scrollBarSize:7,scrollBarTimeout:1e3,scrollBarMinLength:20,scrollBarInteractiveSize:uh?32:16,zoomIncrement:1.3,scrollZoomIncrement:1.05,pinchZoomIncrement:1.08,zoomMax:20,zoomMin:.01,segmentResolution:12,shapeResolution:24,shapeSide:24,intersectionLineRect:Ch,intersectionLineLine:ji,isEnter:Yl,isEsc:_k,isDelete:dd,isSpace:sh,isLeft:Xe,isUp:cp,isRight:Tb,isDown:nd,getTarget:ce,isString:Me,isNumber:_c,isBoolean:go,isArray:Nc,isSelectAll:hp,isFunction:Gf,getPropertyValue:cr,setPropertyValue:tk,addMethod:As,getVersion:function(){return"6.1.5"},appendToScreen:function(y){y=y.getView?y.getView():y,(T.fullscreenElement||T.mozFullScreenElement||T.webkitFullscreenElement||T.msFullscreenElement||T.body).appendChild(y)},toggleFullscreen:function(y){var Y=y.getView();if(!(T.fullscreenElement||T.mozFullScreenElement||T.webkitFullscreenElement||T.msFullscreenElement)){var G=!0;if(y.isSelfViewEvent){var a=y.getX(),I=y.getY(),Z=y.getWidth(),V=y.getHeight(),z=Y.style.background;z||(Y.style.background="white"),Y.requestFullscreen?Y.requestFullscreen():Y.msRequestFullscreen?Y.msRequestFullscreen():Y.mozRequestFullScreen?Y.mozRequestFullScreen():Y.webkitRequestFullscreen&&Y.webkitRequestFullscreen();var n=setInterval(function(){if(Y!==(T.fullscreenElement||T.mozFullScreenElement||T.webkitFullscreenElement||T.msFullscreenElement))clearInterval(n),y.setX(a),y.setY(I),y.setWidth(Z),y.setHeight(V),y._fullscreen=!1,Y.style.background=z,y.iv();else{var E=s.Default.getWindowInfo();(G||E.width!==y.getWidth()||E.height!==y.getHeight())&&(y.setX(E.left),y.setY(E.top),y.setWidth(E.width),y.setHeight(E.height),y._fullscreen=!0,y.iv(),G=!1)}},500)}else{var g=Y.style.left,A=Y.style.top,Z=Y.style.width,V=Y.style.height,z=Y.style.background;z||(Y.style.background="white"),Y.requestFullscreen?Y.requestFullscreen():Y.msRequestFullscreen?Y.msRequestFullscreen():Y.mozRequestFullScreen?Y.mozRequestFullScreen():Y.webkitRequestFullscreen&&Y.webkitRequestFullscreen();var n=setInterval(function(){if(Y!==(T.fullscreenElement||T.mozFullScreenElement||T.webkitFullscreenElement||T.msFullscreenElement))clearInterval(n),Y.style.left=g,Y.style.top=A,Y.style.width=Z,Y.style.height=V,Y.style.background=z,y.iv();else{var v=s.Default.getWindowInfo();(G||v.width!==y.getWidth()||v.height!==y.getHeight())&&(cq(y),G=!1)}},500)}}},appendTimeStamp:function(d){return d+=d.indexOf("?")>=0?"&__ht__="+gn():"?"+gn()},setCompType:function(w,W){Gf(W)||we(W)?Xo[w]=W:Fb(w)},getCompType:function(O){var E=Xo[O];return E===m&&Yi.test(O)&&Fb(O),E},getCompTypeMap:function(){return Xo},drawCompType:function(g,o,k,F,n,m){g(o,k,F,n,m)},numberListener:function(){var r={46:1,8:1,9:1,27:1,13:1,109:1,110:1,189:1,190:1};return function(z){var x=z.keyCode;r[x]||65===x&&u.isCtrlDown(z)||86===x&&u.isCtrlDown(z)||67===x&&u.isCtrlDown(z)||88===x&&u.isCtrlDown(z)||x>=35&&40>=x||(z.shiftKey||48>x||x>57)&&(96>x||x>105)&&z.preventDefault()}}(),ignoreKeyCodes:[122,123],preventDefault:function(B){var r=B.target.tagName;("DIV"===r||"CANVAS"===r)&&!(u.ignoreKeyCodes.indexOf(B.keyCode)>=0)&&("keydown"!==B.type||Xe(B)||Tb(B)||cp(B)||nd(B)||dd(B)||65===B.keyCode&&(B.metaKey||B.ctrlKey))&&(B.preventDefault(),B.preventManipulation&&B.preventManipulation())},getWindowInfo:function(){var s=T.documentElement,P=s&&(s.scrollLeft||s.scrollTop)?s:T.body;return{target:P,left:P.scrollLeft,top:P.scrollTop,width:w.innerWidth||P.clientWidth,height:w.innerHeight||P.clientHeight}},isDragging:function(){return!!pm},isLeftButton:function(g){return uh?!0:0===g.button},isInput:function(P){if(!P)return!1;var c=P.tagName;return"INPUT"===c||"TEXTAREA"===c||"SELECT"===c},getTouchCount:function(J){return uh?J.touches.length:1},isDoubleClick:function(){var o={};return oh=new Date,wc=oh.getTime(),function(n){var K=(new Date).getTime(),t=n.button==q?"":n.button,P=n.type+t,O=P+"_isDoubleClick",N=o[P];if(N||(N=o[P]={details:0,timeout:null,lastPoint:null,lastTime:K}),n[O]===m){var G=Tc(n);n[O]=N.lastPoint&&Yh(N.lastPoint,G)<=(uh?20:1)&&K-N.lastTime<500,N.lastTime=K,N.lastPoint=G,N.details++,N.timeout&&(f(N.timeout),N.timeout=null),N.timeout=l(function(){this.details=0,this.timeout=null,this.lastPoint=null}.bind(N),500)}return!!n[O]&&2===N.details}}(),isShiftDown:function(k){return k?k.shiftKey:Ij["16"]},isCtrlDown:function(z){return z?i?z.metaKey:z.ctrlKey:i?Ij["91"]:Ij["17"]},getClientPoint:function(p){return uh&&(p=Mq(p)),{x:p.clientX,y:p.clientY}},isMouseEvent:function(L){return L instanceof MouseEvent||0===L.type.indexOf("mouse")},getTargetElement:function(S){if(u.isMouseEvent(S)||!T.elementFromPoint)return S.target;var W=ar(S);return T.elementFromPoint(W.x,W.y)},getPagePoint:function(t){return uh&&(t=Mq(t)),{x:t.pageX,y:t.pageY}},createObject:function(p,d){var S=new p;for(var E in d){var B=jp(E),T=d[E];S[B]?(S[B](T),"setToolTip"===B&&S.enableToolTip&&S.enableToolTip()):S[E]=T}return S},setImage:function(x,q,n,g){var X=arguments.length;4===X?Zd(x,g,q,n):2===X?Me(q)?Zd(x,q):to[x]=q:1===X&&Zd(x,x)},getImage:function(i,G,p){var D;if(i==q)return q;if(we(i)?D=i:(D=to[i],i&&D===m&&(_d&&_d[i]||Zd(i,i))),G&&D&&D.tagName){var g;g="override"===p?"colors_override":"override_rgb"===p?"colors_override_rgb":"override_a"===p?"colors_override_a":"colors",D[g]||(D[g]={__count__:0});var V=D[g][G];return V||(D[g].__count__>u.imageCacheThreshold&&(D[g]={__count__:0}),V=Dh(D,Gl(G),D.width,D.height,p),D[g][G]=V,D[g].__count__++),V}return D},isImageComplete:function(o,i,C){var W=we(o)?o:to[o];if(!W)return!1;if(W.tagName)return W.complete;for(var K,o,l=W.comps,D=!0,Q=0,Z=l.length;Z>Q;Q++)if(K=l[Q],"image"===K.type){o=K.name,o&&o.func&&(o=oj(o,i));var e=Gg(o,i,C);if(!e){D=!1;break}}return D},getId:function(){var G=1;return function(){return++G}}(),callLater:function(i,A,_,p){var W=function(){i.apply(A,_)};return p?l(W,p):w.requestAnimationFrame(W)},asyncEach:function(i,T,r){"function"!=typeof r&&(r=Function.prototype);var f=new Array(i.length),D=0,k=!1;i.forEach(function($,d){T($,function(l,U){return k?void 0:l?(k=!0,r(null)):(f[d]=U,D++,D===i.length?r(f):void 0)})})},xhrLoad:function(j,p,K){var o=!1;Nc(j)||(o=!0,j=[j]),K=K||{},j.length;var R=K.sync;mm(j,function(J,m){var n=new XMLHttpRequest;K.responseType?n.responseType=K.responseType:n.overrideMimeType&&n.overrideMimeType(K.mimeType||"text/plain"),J=u.beforeLoadURL(J),J.data?m(null,J.data):(n.open("GET",encodeURI(J),!R),n.onload=function(K){200===this.status||0===this.status?m(null,K.target.response||K.target.responseText):m(!0)},n.onerror=function(){m(!0)},n.send(null))},function($){"function"==typeof p&&p(o&&$?$[0]:$)})},clone:function(y){if(!y)return q;if(Nc(y))return y.slice(0);if(mk(y))return new eb(y);if(we(y)){var C,d={};for(C in y)d[C]=y[C];return d}return y},callWhenLoaded:function(q,x){x=x||100;var H=Ng(q,x);Jr||(Jr={}),Jr[H]={tick:H,cb:q,delay:x}},beforeLoadURL:function(d){if(Jr){var T={};for(var o in Jr){var P=Jr[o];f(P.tick);var K=Ng(P.cb,P.delay);T[K]={tick:K,delay:P.delay,cb:P.cb}}Jr=T}return u.convertURL?u.convertURL(d):d},convertURL:function(N){return N},handleRefGraphLoaded:function(){},handleCompTypeLoaded:function(){},handleImageLoaded:function(){},handleUnfoundImage:function(){},sortFunc:function(C,A){if(C===A)return 0;if(C==q&&A!=q)return 1;if(C!=q&&A==q)return-1;if(C==q&&A==q)return 0;var i,J=typeof C,s=typeof A;return J===Pi&&s===Pi?i=C.localeCompare(A):J===Op&&s===Op&&(i=C-A),i===m&&(i=(""+C).localeCompare(""+A)),i>0?1:0>i?-1:0},getClassMap:function(){return pk},getClass:function(k){if(Me(k)){var S,Q=pk[k];if(!Q){S=k.split("."),Q=w;for(var i=0;i<S.length;i++)Q=Q[S[i]];pk[k]=Q}return Q}return k},def:function(Q,e,f){var S,V,M,h=function(){};if(h.prototype=e.prototype,S=new h,Me(Q)){if(pk[Q])throw"'"+Q+"' already defined";M=dm(Q),S.getClassName=function(){return Q}}else M=Q;if(S.constructor=M,S.getClass=function(){return M},S.getSuperClass=function(){return e},f)for(V in f)ki[V]&&ki.hasOwnProperty(V)?ki[V](S,f):qb(S,f,V);M.prototype=S,M.superClass=e.prototype},startAnim:function(){var A=function(l){l.duration&&(l.startTime=gn()),l.timeId=yc(l.tick,q,q,l.interval)};return function(S){return S=Ll(S),S.easing=S.easing||u.animEasing,S.duration||S.frames||(S.duration=u.animDuration),S.t=0,S.duration?S.interval=0:(S.frame=0,S.interval=S.interval||10),S.tick=function(){if(S.duration){var a=(gn()-S.startTime)/S.duration;a>1&&(a=1),S.t=a,S.action(S.easing(a),a),1===a?S.stop():S._isPaused||(S.timeId=yc(S.tick))}else S.frame++,a=S.t=S.frame/S.frames,S.action(S.easing(a),a),S.frame<S.frames?S._isPaused||(S.timeId=yc(S.tick,q,q,S.interval)):S.stop()},S.resume=function(){S._isPaused&&(delete S._isPaused,S.duration?S.t<1&&(S.startTime=gn()-S.duration*S.t,S.timeId=yc(S.tick)):S.frame<S.frames&&(S.timeId=yc(S.tick,q,q,S.interval)))},S.pause=function(){S._isPaused=!0},S.stop=function(C){S.isRunning()&&(S.duration?S.t<1&&C&&(S.t=1,S.action(S.easing(1))):S.frame<S.frames&&C&&(S.frame=S.frames,S.action(S.easing(1))),S._37o&&S._37o(),S.finishFunc&&S.finishFunc(),hl(S.timeId,!S.duration),delete S.timeId)},S.isRunning=function(){return S.timeId!=q},S.delay?yc(A,q,[S],S.delay):A(S),S}}(),getTextSize:function(){var L={},k=T?ho().getContext("2d"):q;return function(Z,X){k.font=Z?Z:Pn;var b=L[k.font];return b||(b=2*k.measureText("e").width+4,L[k.font]=b),{width:k.measureText(X).width+4,height:b}}}(),drawText:function(l,O,W,m,c,Q,R,z,n,Y){if(O!=q){var F=Gp(W,O),r={};r.y=Y&&Y!==Bp?Y===jo?Q+F.height/2:Q+z-F.height/2:Q+z/2,r.x=n&&n!==qg?n===Ai?c+R-F.width/2:c+R/2:c+F.width/2,Wn(l,O,r,W,m)}},getDistance:function(P,e){var y=P.length;return e?3===y?x(d(P[0]-e[0])+d(P[1]-e[1])+d(P[2]-e[2])):2===y?x(d(P[0]-e[0])+d(P[1]-e[1])):P.z===m?x(d(e.x-P.x)+d(e.y-P.y)):x(d(e.x-P.x)+d(e.y-P.y)+d(e.z-P.z)):3===y?x(d(P[0])+d(P[1])+d(P[2])):2===y?x(d(P[0])+d(P[1])):void 0},brighter:function(i,j){return 0>j&&(j=-j),bj(i,j?j:40)},darker:function(m,N){return N>0&&(N=-N),bj(m,N?N:-40)},unionPoint:function(M,l){if(!M)return q;if(2===arguments.length)return M&&l?{x:c(M.x,l.x),y:c(M.y,l.y),width:E(M.x-l.x),height:E(M.y-l.y)}:q;var A=M;if(A._as&&(A=A._as),A.length===m)return q;var U=A.length;if(0>=U)return q;for(var g=1,e=A[0],x={x:e.x,y:e.y,width:0,height:0};U>g;g++){e=A[g];var K=c(x.x,e.x),Z=I(x.x+x.width,e.x),f=c(x.y,e.y),w=I(x.y+x.height,e.y);x.x=K,x.y=f,x.width=Z-K,x.height=w-f}return x},unionRect:function(S,K){if(S&&!K)return Ll(S);if(!S&&K)return Ll(K);if(S&&K){var P={x:c(S.x,K.x),y:c(S.y,K.y)};return P.width=I(S.x+S.width,K.x+K.width)-P.x,P.height=I(S.y+S.height,K.y+K.height)-P.y,P}return q},containsPoint:function(f,y){return!(!f||y.x<f.x||y.y<f.y||y.x>f.x+f.width||y.y>f.y+f.height)},containsRect:function(I,t){if(!I||!t)return!1;var o=t.x,R=t.y,S=t.width,p=t.height,U=I.width,Q=I.height;if(0>(U|Q|S|p))return!1;var j=I.x,G=I.y;if(j>o||G>R)return!1;if(U+=j,S+=o,o>=S){if(U>=j||S>U)return!1}else if(U>=j&&S>U)return!1;if(Q+=G,p+=R,R>=p){if(Q>=G||p>Q)return!1}else if(Q>=G&&p>Q)return!1;return!0},intersectsRect:function(s,w){if(!s||!w)return!1;var X=w.width,t=w.height,r=s.width,I=s.height;if(0>=r||0>=I||0>=X||0>=t)return!1;var q=w.x,G=w.y,z=s.x,K=s.y;return r+=z,I+=K,X+=q,t+=G,r>q&&I>G&&X>z&&t>K},intersection:function(X,S){if(!X||!S)return q;var C=S.x,U=S.y,R=X.x,l=X.y,E=C,r=U,s=R,t=l;return E+=S.width,r+=S.height,s+=X.width,t+=X.height,R>C&&(C=R),l>U&&(U=l),E>s&&(E=s),r>t&&(r=t),E-=C,r-=U,0>=E||0>=r?q:{x:C,y:U,width:E,height:r}},grow:function(F,U,P){P===m&&(P=U),F.x-=U,F.y-=P,F.width=F.width+2*U,F.height=F.height+2*P},getLogicalPoint:function(M,j,x,p,T,g){Sn(M)?i?Ij["91"]=!0:Ij["17"]=!0:i?Ij["91"]=!1:Ij["17"]=!1,Ij["16"]=Ap(M)?!0:!1;var e=j.getBoundingClientRect();return M=uh?Mq(M):M,{x:(M.clientX-e.left+j.scrollLeft-(x||0))/(T||1),y:(M.clientY-e.top+j.scrollTop-(p||0))/(g||1)}},removeHTML:function(){var c;return function(i){return i&&i.parentNode?c===i?!0:(c=i,i.parentNode.removeChild(i),c=q,!0):!1}}(),getToolTipDiv:function(){if(!mq){mq=Zr(),Rb=Zr();var F=mq.style;u.baseZIndex!=q&&(F.zIndex=Y(u.baseZIndex)+3+""),F.whiteSpace="nowrap",F.color=u.toolTipLabelColor,F.background=u.toolTipBackground,F.font=u.toolTipLabelFont,F.padding="5px",F.boxShadow="0px 0px 3px "+u.toolTipShadowColor}return mq},isToolTipShowing:function(){return mq&&mq.parentNode?!0:Rb&&Rb.parentNode?!0:!1},hideToolTip:function(){wg(mq),wg(Rb),Li()},showToolTip:function(W,L){if(!W||L==q)return er(),void 0;u.getToolTipDiv();var z,K;if(L.html?(L=L.html,z=Rb,wg(mq)):(z=mq,wg(Rb)),K=z.style,z.innerHTML=L,z.parentNode||s.Default.appendToScreen(z),W.target){W=ar(W);var B=wk(),A=W.x,t=W.y,f=uh?60:12;if(uh){var M=z.getBoundingClientRect();K.left=A-M.width/2+em,K.top=t-M.height-f<B.top?t+f+em:t-M.height-f+em}else{K.left=A+f+em,K.top=t+f+em;var M=z.getBoundingClientRect();M.left+M.width>B.width&&(K.left=A-f-M.width+em),M.top+M.height>B.height&&(K.top=t-f-M.height+em),M.left<0&&(K.left=A+f+em),M.top<0&&(K.top=t+f+em)}}else K.left=W.x+em,K.top=W.y+em;Li()},startDragging:function(l,W){l!==pm&&(pm?uh?pm.handleWindowTouchEnd(W):pm.handleWindowMouseUp(W):uh?(w.addEventListener(fc,bh,!1),w.addEventListener(lq,Lc,!1)):(w.addEventListener(Dn,Lg,!1),w.addEventListener(Jp,ve,!1)),pm=l)},getImageMap:function(){return to},toBoundaries:function(i,A,Q,K){var x=[];return Qd(i,A,Q,K).forEach(function(Q){var l=[];Q.forEach(function(H){l.push(H.x,H.y)}),x.push(l)}),x},getCurrentKeyCodeMap:function(){return Ij},drawCenterImage:function(j,N,c,T,B,h,x,o){var U=re(N,B,h),O=Vo(N,B,h);Ag(j,N,Z(c-U/2),Z(T-O/2),U,O,B,h,x,o)},drawStretchImage:function(n,I,q,M,N,f,a,J,l,O,U,u){var z,b=re(I,J,l,f),m=Vo(I,J,l,a);if("uniform"===q?(z=c(f/b,a/m),b*=z,m*=z,M+=Z((f-b)/2),N+=Z((a-m)/2),f=b,a=m):"centerUniform"===q&&((b>f||m>a)&&(z=c(f/b,a/m),b*=z,m*=z),M+=Z((f-b)/2),N+=Z((a-m)/2),f=b,a=m),"center"===q){var d=U!==!1&&(b>f||m>a);d&&(n.save(),n.beginPath(),n.rect(M,N,f,a),n.clip()),Ag(n,I,M+f/2-b/2,N+a/2-m/2,b,m,J,l,O,u),d&&n.restore()}else Ag(n,I,M,N,f,a,J,l,O,u)},toCanvas:function(M,c,V,W,n,k,E,U,H){M=Si(M,E),c=c||re(M,n),V=V||Vo(M,n);var Z=ho(),t=Zh(Z);return U?(Dp(Z,c,V,U),t.scale(U,U)):Dp(Z,c,V,1),hn(t,M,W,0,0,c,V,n,k,E,H),M&&M.clampToEdge&&(Z.clampToEdge=M.clampToEdge),t.restore(),Z},createGradientImage:function(G,k,v,j){for(var b=["L",0,0,G,0,1,0,0,1,0,0],d=0,F=Math.min(k.length,v.length);F>d;d++)b.push(v[d],k[d]);var h=s.Default.toCanvas({width:G,height:G,clampToEdge:!0,comps:[{type:"shape",rotation:j||0,points:[0,0,G,0,G,G,0,G],background:"#ffffff",gradientPack:b}]});return h},createElement:function(e,p,G,x){var F=T.createElement(e);return hf(F,p||g.widgetBorder,2),F.style.font=G?G:Pn,x!=q&&(F.value=x),u.onElementCreated&&u.onElementCreated(F),F},containedInView:function(L,i){var S=Bi(i).getBoundingClientRect();return If({x:S.left,y:S.top,width:S.width,height:S.height},Tc(L))},isIsolating:function(){return Pr},setIsolating:function(v){Pr=v},getMSMap:function(){return ki},stringify:function(M,Y){var Q=Date.prototype.toJSON;Date.prototype.toJSON=function(){return"__ht__date"+this.getTime()};var v=JSON.stringify(M,function(S,g){return"function"==typeof g?"__ht__"+(g.__ht__||g.toString()):_c(g)?rn(g):g
},Y==q?2:Y);return Date.prototype.toJSON=Q,v},parse:function(K){return Me(K)?JSON.parse(K,function(U,I){if(Me(I)){if("__ht__function"==I.substr(0,14)){var V=I.indexOf("{")+1,v=I.lastIndexOf("}"),L=I.indexOf("(")+1,Z=I.indexOf(")");if(V&&v&&L&&Z){var h=new Function(I.substring(L,Z),I.substring(V,v));return h.__ht__=I.substr(6),h}}if("__ht__date"==I.substr(0,10))return new Date(Y(I.substr(10)))}return I}):K},loadJS:function(R,j){j&&R.push(j);var g=R.shift();if(Nc(g))R=g.contact(R),u.loadJS(R);else if(Gf(g))g(),u.loadJS(R);else if(Me(g)){var J=T.createElement("script");J.onload=function(){u.loadJS(R)},J.setAttribute("src",g),T.getElementsByTagName("head")[0].appendChild(J)}else R.length&&u.loadJS(R)},toRoundedCorner:function(f,u){var S=f.size();if(0>=u)return{points:f};var r,A=new eb,U=new eb,d=f.get(0);A.add(d),U.add(1);for(var n=1;S>n;n++)if(S>n+1){var Z=f.get(n),T=f.get(n+1),D=d.x,J=d.y,o=Z.x,V=Z.y,F=V-J,e=o-D,P=Q(F,e);r=c(.99*Yh(d,Z),u),A.add({x:o-r*z(P),y:V-r*M(P)}),A.add(Z),D=Z.x,J=Z.y,o=T.x,V=T.y,F=V-J,e=o-D,P=Q(F,e),r=c(.99*Yh(Z,T),u),d={x:D+r*z(P),y:J+r*M(P)},A.add(d),U.addAll([2,3])}else A.add(f.get(n)),U.add(2);return{points:A,segments:U}},toColorData:Uk,setCanvas:Dp,createDiv:Zr,createDisabledDiv:vi,createView:uc,createCanvas:ho,appendChild:Bd,initContext:Zh,checkLoadingImage:Gc,translateAndScale:vr,layout:cq,getPosition:_m,drawPoints:_f,drawRoundRect:Eq,drawBorder:Gr,setFocus:oi,getter:mb,setter:jp,isEmptyObject:Af},!0),As(b,{autoAdjustIndex:1,hierarchicalRendering:1,adjustChildrenToTop:1,autoHideScrollBar:1,autoUpdate:1,firstPersonMode:1,ortho:1,strict:1,stickToRight:1,instant:1,closePath:1,hierarchical:1,doubleClickToToggle:1,continuousLayout:1,syncSize:1},!0);var am=u.disabledOpacity,Jf=u.toolTipDelay,Uo=u.devicePixelRatio,Dm=u.autoMakeVisible,sc=u.autoHideScrollBar,Kg=u.imageGradient,qn=u.showToolTip,er=u.hideToolTip,ie=u.dashPattern,vd=u.lineCap,sq=u.lineJoin,nl=u.labelColor,db=u.labelSelectColor,Pn=u.labelFont,me=u.widgetIndent,Gi=u.widgetRowHeight,Qg=u.widgetHeaderHeight,Lb=u.widgetTitleHeight,Zb=u.scrollBarColor,pj=u.scrollBarSize,Eg=u.scrollBarTimeout,le=u.scrollBarMinLength,dh=u.scrollBarInteractiveSize,xo=u.zoomIncrement,ac=u.scrollZoomIncrement,Ie=u.pinchZoomIncrement,ub=u.zoomMax,_g=u.zoomMin,Mr=u.createObject,ak=u.preventDefault,Xm=u.setImage,Si=u.getImage,Gg=u.isImageComplete,Ep=u.drawCenterImage,hn=u.drawStretchImage,Di=u.getId,yc=u.callLater,mm=u.asyncEach,Bm=(u.xhrLoad,u.sortFunc),Ll=u.clone,dm=u.getClass,wb=u.startAnim,xs=u.brighter,jj=u.darker,Cb=u.drawText,Gp=u.getTextSize,rp=u.isLeftButton,Lr=u.getTouchCount,Ac=u.isDoubleClick,Ap=u.isShiftDown,Sn=u.isCtrlDown,Tc=u.getClientPoint,ar=u.getPagePoint,Yh=u.getDistance,tq=u.unionPoint,xl=u.unionRect,If=u.containsPoint,Wj=u.containsRect,gi=u.intersectsRect,jr=u.intersection,wk=u.getWindowInfo,Uq=u.grow,uj=u.getLogicalPoint,Hk=u.startDragging,wg=u.removeHTML,al=u.createElement,Wc=u.segmentResolution,zi=u.shapeResolution,Ed=u.shapeSide,Xd=u.def,wj=function(J,P,v){Xd(p+"."+J,P,v)},qr=function(z,P){z.childNodes.forEach(function(z){P(z),qr(z,P)})};As(u,{toolTipLabelColor:nl,toolTipLabelFont:Pn,toolTipBackground:g.toolTipBackground,toolTipShadowColor:nb,setDevicePixelRatio:function(c){Uo=u.devicePixelRatio="number"==typeof c?c:w.devicePixelRatio,qr(T.body,function(C){var c=C._ht;c&&c._canvas&&(Dp(c._canvas,c.getWidth(),c.getHeight()),c.redraw?c.redraw():c.iv())})}},!0);var $r=1e-6,To="undefined"!=typeof Uint16Array?Uint16Array:Array,aj="undefined"!=typeof Float32Array?Float32Array:Array,fe=function(l,m,P){var L=[l[0]-m[0],l[1]-m[1],l[2]-m[2]];if(P){var Y=Yh(L);Y>0&&(L[0]/=Y,L[1]/=Y,L[2]/=Y)}return L},kl=function(Z){return[-Z[0],-Z[1],-Z[2]]},yb=function(j,C){return 3===j.length?j[0]*C[0]+j[1]*C[1]+j[2]*C[2]:j[0]*C[0]+j[1]*C[1]},Ae=function(){var I=new aj(16);return I[0]=1,I[1]=0,I[2]=0,I[3]=0,I[4]=0,I[5]=1,I[6]=0,I[7]=0,I[8]=0,I[9]=0,I[10]=1,I[11]=0,I[12]=0,I[13]=0,I[14]=0,I[15]=1,I},Ab=Ae(),Mh=function(l){var A=new aj(16);return A[0]=l[0],A[1]=l[1],A[2]=l[2],A[3]=l[3],A[4]=l[4],A[5]=l[5],A[6]=l[6],A[7]=l[7],A[8]=l[8],A[9]=l[9],A[10]=l[10],A[11]=l[11],A[12]=l[12],A[13]=l[13],A[14]=l[14],A[15]=l[15],A},xk=function($,M){return $[0]=M[0],$[1]=M[1],$[2]=M[2],$[3]=M[3],$[4]=M[4],$[5]=M[5],$[6]=M[6],$[7]=M[7],$[8]=M[8],$[9]=M[9],$[10]=M[10],$[11]=M[11],$[12]=M[12],$[13]=M[13],$[14]=M[14],$[15]=M[15],$},kr=function($){return $[0]=1,$[1]=0,$[2]=0,$[3]=0,$[4]=0,$[5]=1,$[6]=0,$[7]=0,$[8]=0,$[9]=0,$[10]=1,$[11]=0,$[12]=0,$[13]=0,$[14]=0,$[15]=1,$},tl=function(b,k){var m=b[0],_=b[1],c=b[2];return b[0]=k[0]*m+k[4]*_+k[8]*c+k[12],b[1]=k[1]*m+k[5]*_+k[9]*c+k[13],b[2]=k[2]*m+k[6]*_+k[10]*c+k[14],b},zc=function(u,I){var $=u[0],o=u[1],e=u[2],b=u[3];return u[0]=I[0]*$+I[4]*o+I[8]*e+I[12]*b,u[1]=I[1]*$+I[5]*o+I[9]*e+I[13]*b,u[2]=I[2]*$+I[6]*o+I[10]*e+I[14]*b,u[3]=I[3]*$+I[7]*o+I[11]*e+I[15]*b,u},zk=function(){var u,D,n,y,I=Ip(ek[1]+ek[7]),S=Ip(ek[0]+ek[3]-ek[10]),v=Ip(ek[8]+2),p=function(){return D=n.charAt(u),u+=1,D},z=function(){var m="";if(D===v)for(;p();){if(D===v)return p(),m;m+=D}else p()},P=function(){for(;D&&" ">=D;)p()},K=function(){var L,$={};if(D===I){if(p(),P(),D===S)return p(),$;for(;D;){if(L=z(),P(),p(),$[L]=y(),P(),D===S)return p(),$;p(),P()}}};return y=function(){switch(P(),D){case I:return K();default:return z()}},function(Y){if(o={},Y){var M;if(n=Y,u=0,D=" ",M=y(),P(),!D)return M}}}(),qe=function(B,d){if(d){var Z=M(d),u=z(d),L=B[4],T=B[5],l=B[6],P=B[7],c=B[8],w=B[9],N=B[10],y=B[11];B[4]=L*u+c*Z,B[5]=T*u+w*Z,B[6]=l*u+N*Z,B[7]=P*u+y*Z,B[8]=c*u-L*Z,B[9]=w*u-T*Z,B[10]=N*u-l*Z,B[11]=y*u-P*Z}},Fn=function(m,B){if(B){var Z=M(B),w=z(B),Q=m[0],a=m[1],I=m[2],A=m[3],V=m[8],T=m[9],d=m[10],e=m[11];m[0]=Q*w-V*Z,m[1]=a*w-T*Z,m[2]=I*w-d*Z,m[3]=A*w-e*Z,m[8]=Q*Z+V*w,m[9]=a*Z+T*w,m[10]=I*Z+d*w,m[11]=A*Z+e*w}},Mb=function(W,P){if(P){var B=M(P),R=z(P),J=W[0],c=W[1],L=W[2],N=W[3],$=W[4],I=W[5],v=W[6],g=W[7];W[0]=J*R+$*B,W[1]=c*R+I*B,W[2]=L*R+v*B,W[3]=N*R+g*B,W[4]=$*R-J*B,W[5]=I*R-c*B,W[6]=v*R-L*B,W[7]=g*R-N*B}},wp=function(p,w,T){return Bn(q,T===!1?q:p.getFinalScale3d(),p.r3(),p.getRotationMode(),p.p3(),q,w)},Bn=function(x,Q,u,e,m,l,o){return l||(l=Ae()),m&&yd(l,m),en(l,u,e),o&&Sq(l,l,o),Q&&rk(l,Q),x&&Sq(l,l,x),l},Up=function(s,V,F){V=Y(V),F=Y(F);var C=this;C.g=s,C._84O=V,C._85O=F,C._70I=!0,C.F=0,C._83O=V+F,C.pen={x:0,y:0}},ms="lineDashOffset",Yf="setLineDash",Pc=function(J){for(var T in J)1===T.length&&(ms=J[T]);return T?1:0},$o=function(g,s,o){return qm(s)?g:g[Yf]?(g[Yf](s),o&&(g.lineDashOffset=o),g):new Up(g,s[0],s.length>1?s[1]:s[0])},Xk=function(o,V){!qm(V)&&o[Yf]&&(o[Yf](sd),o.lineDashOffset=0)};if(Xd(Up,_,{_69I:6,moveTo:function(X,G){var o=this,e=o.pen;e.x=X,e.y=G,o.g.moveTo(X,G),o.start||(o.start={x:X,y:G})},lineTo:function(r,b){var n=this,c=n.pen,q=r-c.x,v=b-c.y,E=Q(v,q),k=z(E),O=M(E),F=n._23O(c.x,c.y,r,b),j=n._85O,Z=n._84O,w=n._83O;if(n.F){if(n.F>F)return n._70I?n._72I(r,b):n.moveTo(r,b),n.F-=F,void 0;if(n._70I?n._72I(c.x+k*n.F,c.y+O*n.F):n.moveTo(c.x+k*n.F,c.y+O*n.F),F-=n.F,n.F=0,n._70I=!n._70I,!F)return}var H=y(F/w);if(H){for(var P=k*Z,x=O*Z,J=k*j,u=O*j,s=0;H>s;s++)n._70I?(n._72I(c.x+P,c.y+x),n.moveTo(c.x+J,c.y+u)):(n.moveTo(c.x+J,c.y+u),n._72I(c.x+P,c.y+x));F-=w*H}n._70I?F>Z?(n._72I(c.x+k*Z,c.y+O*Z),n.moveTo(r,b),n.F=j-(F-Z),n._70I=!1):(n._72I(r,b),F===Z?(n.F=0,n._70I=!n._70I):(n.F=Z-F,n.moveTo(r,b))):F>j?(n.moveTo(c.x+k*j,c.y+O*j),n._72I(r,b),n.F=Z-(F-j),n._70I=!0):(n.moveTo(r,b),F===j?(n.F=0,n._70I=!n._70I):n.F=j-F)},quadraticCurveTo:function(l,S,_,Y){var O,x=this,g=x.pen,c=g.x,h=g.y,Q=x._22O(c,h,l,S,_,Y),T=0,L=0,r=x._85O,R=x._84O;if(x.F){if(x.F>Q)return x._70I?x._71I(l,S,_,Y):x.moveTo(_,Y),x.F-=Q,void 0;if(T=x.F/Q,O=x._20O(c,h,l,S,_,Y,T),x._70I?x._71I(O[2],O[3],O[4],O[5]):x.moveTo(O[4],O[5]),x.F=0,x._70I=!x._70I,!Q)return}var o=Q-Q*T,K=y(o/x._83O),b=R/Q,e=r/Q;if(K)for(var D=0;K>D;D++)x._70I?(L=T+b,O=x._21O(c,h,l,S,_,Y,T,L),x._71I(O[2],O[3],O[4],O[5]),T=L,L=T+e,O=x._21O(c,h,l,S,_,Y,T,L),x.moveTo(O[4],O[5])):(L=T+e,O=x._21O(c,h,l,S,_,Y,T,L),x.moveTo(O[4],O[5]),T=L,L=T+b,O=x._21O(c,h,l,S,_,Y,T,L),x._71I(O[2],O[3],O[4],O[5])),T=L;o=Q-Q*T,x._70I?o>R?(L=T+b,O=x._21O(c,h,l,S,_,Y,T,L),x._71I(O[2],O[3],O[4],O[5]),x.moveTo(_,Y),x.F=r-(o-R),x._70I=!1):(O=x._19O(c,h,l,S,_,Y,T),x._71I(O[2],O[3],O[4],O[5]),Q===R?(x.F=0,x._70I=!x._70I):(x.F=R-o,x.moveTo(_,Y))):o>r?(L=T+e,O=x._21O(c,h,l,S,_,Y,T,L),x.moveTo(O[4],O[5]),O=x._19O(c,h,l,S,_,Y,L),x._71I(O[2],O[3],O[4],O[5]),x.F=R-(o-r),x._70I=!0):(x.moveTo(_,Y),o===r?(x.F=0,x._70I=!x._70I):x.F=r-o)},bezierCurveTo:function(){var F=arguments;this.pen={x:F[4],y:F[5]},this.g.bezierCurveTo(F[0],F[1],F[2],F[3],F[4],F[5])},arc:function(p,Y,y,j,A,f){f||(j=-j,A=-A),dc(this,p,Y,j,A-j,y,y,!1)},rect:function(E,G,s,A){var y=this;y.pen={x:E,y:G},y.moveTo(E,G),y.lineTo(E,G+A),y.lineTo(E+s,G+A),y.lineTo(E+s,G),y.lineTo(E,G)},beginPath:function(){this.g.beginPath()},closePath:function(){this.lineTo(this.start.x,this.start.y)},_23O:function(l,i,T,B){var A=T-l,d=B-i;return x(A*A+d*d)},_22O:function(u,e,o,a,t,Z,N){for(var c,G,P,K,j,m,J,Q=0,T=u,z=e,U=N>0?N:this._69I,h=1;U>=h;h++)P=h/U,K=1-P,j=K*K,m=2*P*K,J=P*P,c=j*u+m*o+J*t,G=j*e+m*a+J*Z,Q+=this._23O(T,z,c,G),T=c,z=G;return Q},_21O:function(y,v,Y,f,d,I,L,o){var c=this;if(0===L)return c._20O(y,v,Y,f,d,I,o);if(1===o)return c._19O(y,v,Y,f,d,I,L);var R=c._20O(y,v,Y,f,d,I,o);return R.push(L/o),c._19O.apply(c,R)},_20O:function(x,$,Q,j,L,K,I){if(1!==I){var t=Q+(L-Q)*I,U=j+(K-j)*I;Q=x+(Q-x)*I,j=$+(j-$)*I,L=Q+(t-Q)*I,K=j+(U-j)*I}return[x,$,Q,j,L,K]},_19O:function(w,o,a,W,$,v,B){if(1!==B){var e=w+(a-w)*B,m=o+(W-o)*B;a+=($-a)*B,W+=(v-W)*B,w=e+(a-e)*B,o=m+(W-m)*B}return[w,o,a,W,$,v]},_72I:function(t,S){var v=this.pen;(t!==v.x||S!==v.y)&&(v.x=t,v.y=S,this.g.lineTo(t,S))},_71I:function(Q,S,h,w){var p=this.pen;(Q!==h||S!==w||h!==p.x||w!==p.y)&&(p.x=h,p.y=w,this.g.quadraticCurveTo(Q,S,h,w))}}),A&&a){var Lp=a.toString();X=Lp.indexOf(Sf.substr(0,2))>0&&Lp.indexOf(jo+jo.substr(1,1))>1?!0:!1}var Sj=q,ur=q,Wf=function(p){Sj&&!p._72O&&(ur||(ur={}),ur[p._72O=Di()]=p)},Fb=function(k,U){if(U||(U=k),U&&(Sj||(Sj={}),!Sj[k])){var P=new XMLHttpRequest;if(Sj[U]={request:P,url:U},P.overrideMimeType&&P.overrideMimeType("text/plain"),U=u.beforeLoadURL(U),U.data){var F=u.parse(U.data);Kp(k,F),u.handleCompTypeLoaded(k,F)}else P.open("GET",encodeURI(U),!0),P.onload=function(d){if(200===this.status||0===this.status){var o=u.parse(d.target.response||d.target.responseText);Kp(k,o),u.handleCompTypeLoaded(k,o)}else Kp(k,q)},P.onerror=function(){Kp(k,q)},P.send(null)}},Kp=function(g,p){if(Xo[g]=p,delete Sj[g],Af(Sj)&&(Sj=q,ur)){for(var w in ur){var j=ur[w];j.invalidateAll&&j.invalidateAll(m,"compTypeLoaded",g),j.redraw&&j.redraw(),j.iv(),delete j._72O}ur=q}if(p&&ur)for(var w in ur){var j=ur[w];j.invalidateAll&&j.invalidateAll(m,"compTypeLoading",g),j.redraw&&j.redraw(),j.iv()}},ic=g.chart,bd=u.compStack=[],gs=/^style@/,Dq=/^attr@/,Be=/^field@/,hq={x:.5,y:.5},re=function(l,m,$,b){if(!l)return 0;if(l.fitSize&&b)return b;var i=oj(l.width,m,$);return null==i?20:i},Vo=function(g,C,T,z){if(!g)return 0;if(g.fitSize&&z)return z;var P=oj(g.height,C,T);return null==P?20:P},oj=function(Z,T,o){if(!Z||!Z.func)return Z;var k,e=Z.func,r=Z.value;return k=Gf(e)?o&&o.vectorDataBindingDisabled&&!Z.isSafeFunc?r:e(T,o):T instanceof Oh?Dq.test(e)?T.a(e.slice(5)):gs.test(e)?T.s(e.slice(6)):Be.test(e)?T[e.slice(6)]:T[e]?T[e](o):r:r,r!==m&&k==q?r:k},Ag=u.drawImage=function(){var d,Q,E,X,R,x,p=function(h,K){h.getValue&&h.getValue.compType===K||(h.getValue=function($){var e=l(h,$);if(e===m&&K.properties){var w=K.properties[$];w&&(e=w.defaultValue)}return e},h.getValue.compType=K)},l=function(M,L,Z){var K=M[L];return K&&K.func?(K=oj(K,Q,E),Z&&(K=Z(K))):Z&&(K=M[L]=Z(K)),K},v=function(B,M){var n;if(n=M?l(B,M):B,R&&n){if("override"===x)return R;if("override_rgb"===x){var E=Gl(R);return n=Uk(n),"rgba("+y(255*E[0])+","+y(255*E[1])+","+y(255*E[2])+","+n[3]/255+")"}if("override_a"===x){var E=Gl(R);return n=Uk(n),"rgba("+n[0]+","+n[1]+","+n[2]+","+E[3]+")"}var E=Gl(R);return n=Uk(n),"rgba("+y(n[0]*E[0])+","+y(n[1]*E[1])+","+y(n[2]*E[2])+","+n[3]/255*E[3]+")"}return n},e=function(M){if(Nc(M)){for(var Z=new eb,$=M.length,P=0;$>P;P+=2)Z.add({x:M[P],y:M[P+1]});M=Z}return M},C=function(O){var e=l(O,"anchorX"),Q=l(O,"anchorY");if(e!==m||Q!==m)return{x:e===m?hq.x:e,y:Q===m?hq.y:Q};var R=l(O,"type"),z=l(O,"name");if("image"!==R||!z)return hq;var N=Si(z);return N&&N.anchorX&&N.anchorY?{x:N.anchorX,y:N.anchorY}:hq},o=function(i,p){var W=l(i,Pg),Q=C(i);if(Nc(W)){var B=W.length,b=l(i,"relative"),M=p.width,s=p.height;if(4===B)W={x:W[0],y:W[1],width:W[2],height:W[3]},b?(W.x*=M,W.y*=s,W.width*=M,W.height*=s):p.fitSize&&(W.x*=p.widthScale,W.width*=p.widthScale,W.y*=p.heightScale,W.height*=p.heightScale);else if(3===B){var O=W[0];W={width:W[1],height:W[2]},b?(W.width*=M,W.height*=s):p.fitSize&&(W.width*=p.widthScale,W.height*=p.heightScale),"object"==typeof O?O.length&&(O={x:O[0],y:O[1]}):O=_m(O,p,W),W.x=O.x-W.width*Q.x,W.y=O.y-W.height*Q.y}var Z=l(i,"offsetX");Z&&(p.fitSize&&(Z*=p.widthScale),W.x+=Z),Z=l(i,"offsetY"),Z&&(p.fitSize&&(Z*=p.heightScale),W.y+=Z)}return W},S=function(v){return Nc(v)?new eb(v):v},w=function(V,T,M,Y,g,N,S){g===m&&(g=1),N===m&&(N=1);var y=l(V,"clipPercentage"),c=Mo(M,T);if(c&&!Y&&1===g&&1===N&&!(1>y))return!1;S=S||hq;var q=T.x+T.width*S.x,O=T.y+T.height*S.y,X=M.x+M.width*S.x,f=M.y+M.height*S.y;if(d.save(),Uf(d,q,O),ck(d,Y),kf(d,g*(T.width/M.width),N*(T.height/M.height)),Uf(d,-X,-f),1>y){0>y&&(y=0);var j=Km(M,l(V,"clipDirection"),y);d.beginPath(),d.rect(j.x,j.y,j.width,j.height),d.clip()}return!0},b=function(){d.restore()},K=function(E,R,O){var n=l(E,"path"),P=l(E,Go),k=l(E,"scaleX"),t=l(E,"scaleY"),m=C(E),F=q,Z=Cr(null,n);if(O||(O=E.unionRect,O||(O=tq(Z),E.path.func||(E.unionRect=O)),F=O),O){F||(F=E.unionRect,F||(F=tq(Z),E.path.func||(E.unionRect=F)));var r=w(E,O,F,P,k,t,m),g=l(E,"borderPattern"),L=$o(d,g),A=v(E,"background"),K=v(E,"borderColor"),M=l(E,"borderWidth"),o=l(E,"gradient"),e=v(E,"gradientColor"),V=l(E,"border3d"),c=l(E,"border3dColor"),G=l(E,"border3dAccuracy"),z=d.lineJoin,j=d.lineCap;if(d.lineJoin=l(E,"borderJoin")||sq,d.lineCap=l(E,"borderCap")||vd,A?(bc(d,A,o,e,F),Cr(d,n),d.fill(),L!==d&&Cr(d,n)):Cr(d,n),M&&K){var W=l(E,"borderWidthAbsolute");W&&(d.save(),d.setTransform(1,0,0,1,0,0)),d.lineWidth=M,d.strokeStyle=K,d.stroke(),W&&d.restore(),V&&Um(d,K,c,M,X,G)}if(Xk(d,g),l(E,"dash")){var p=l(E,"dashWidth")||M;if(p>0){g=l(E,"dashPattern")||ie;var L=$o(d,g,l(E,"dashOffset")),B=v(E,"dashColor")||v(Hh);L!==d&&Cr(d,n),d.strokeStyle=B,d.lineWidth=p,d.stroke(),l(E,"dash3d")&&Um(d,B,v(E,"dash3dColor"),p,X,l(E,"dash3dAccuracy")),Xk(d,g)}}R===Pg&&bi(d,A,l(E,"depth"),F),d.lineJoin=z,d.lineCap=j,r&&b()}},j=function(I,z,Y,J){var f=l(I,Pf,e),G=l(I,Go),Z=C(I);if(f&&J.fitSize){var m=Math.abs(Math.cos(G))<.001,H=new eb,D=tq(f),k=J.widthScale,n=J.heightScale,L=D.x+Z.x*D.width,N=D.y+Z.y*D.height,y=L*k,g=N*n;f.each(function(i){var h=i.x-L,x=i.y-N;H.add({x:y+h*(m?n:k),y:g+x*(m?k:n)})}),f=H,I.unionRect=null}var P=l(I,"scaleX"),O=l(I,"scaleY"),c=z===hb,u=q;if(!Y&&c&&(Y=I.unionRect,Y||(Y=tq(f),I.points.func||(I.unionRect=Y)),u=Y),Y){c?u||(u=I.unionRect,u||(u=tq(f),I.points.func||(I.unionRect=u))):u=Y;var M,o,r,K,t=w(I,Y,u,G,P,O,Z),F=l(I,"borderPattern"),j=$o(d,F),s=v(I,"background"),A=Si(l(I,"repeatImage"),R,x),i=l(I,"gradientPack"),p=v(I,"borderColor"),B=l(I,"borderWidth"),W=l(I,"segments",S),a=l(I,"gradient"),U=v(I,"gradientColor"),_=l(I,"border3d"),T=l(I,"border3dColor"),V=l(I,"border3dAccuracy"),$=l(I,"closePath"),h=l(I,"fillRule")||"nonzero",ld=d.lineJoin,cg=d.lineCap;if(d.lineJoin=l(I,"borderJoin")||sq,d.lineCap=l(I,"borderCap")||vd,c)if(s||A||i){var gs=l(I,"fillClipPercentage");if(1>gs){0>gs&&(gs=0);var jl=Km(u,l(I,"fillClipDirection"),gs);d.save(),d.beginPath(),d.rect(jl.x,jl.y,jl.width,jl.height),d.clip()}if(_f(d,f,W,$),i)Jg(d,i);else if(A){var rs=d,Rn=R,cq=x;de(d,A,R,x,Q,E),d=rs,R=Rn,x=cq}else{var rs=d;bc(d,s,a,U,u),d=rs}d.fill(h),1>gs&&d.restore(),i&&d.restore(),j!==d&&_f(j,f,W,$)}else _f(j,f,W,$);else if("roundRect"===z?M=l(I,"cornerRadius"):"polygon"===z?M=l(I,"polygonSide"):"arc"===z&&(M=l(I,"arcFrom"),o=l(I,"arcTo"),r=l(I,"arcClose"),K=l(I,"arcOval")),s||A||i){var gs=l(I,"fillClipPercentage");if(1>gs){0>gs&&(gs=0);var jl=Km(u,l(I,"fillClipDirection"),gs);d.save(),d.beginPath(),d.rect(jl.x,jl.y,jl.width,jl.height),d.clip()}if(fm(d,z,u,M,o,r,K),i)Jg(d,i);else if(A){var rs=d,Rn=R,cq=x;de(d,A,R,x,Q,E),d=rs,R=Rn,x=cq}else bc(d,s,a,U,u);d.fill(h),1>gs&&d.restore(),i&&d.restore(),d!==j&&fm(j,z,u,M,o,r,K)}else fm(j,z,u,M,o,r,K);if(B&&p){var hl=l(I,"borderWidthAbsolute");hl&&(d.save(),d.setTransform(1,0,0,1,0,0)),d.lineWidth=B,d.strokeStyle=p,d.stroke(),hl&&d.restore(),_&&Um(d,p,T,B,X,V)}if(Xk(d,F),l(I,"dash")){var Zq=l(I,"dashWidth")||B;if(Zq>0){F=l(I,"dashPattern")||ie;var j=$o(d,F,l(I,"dashOffset")),Ol=v(I,"dashColor")||v(Hh);j!==d&&(c?_f(j,f,W,$):fm(j,z,u,M,o,r,K)),d.strokeStyle=Ol,d.lineWidth=Zq,d.stroke(),l(I,"dash3d")&&Um(d,Ol,v(I,"dash3dColor"),Zq,X,l(I,"dash3dAccuracy")),Xk(d,F)}}z===Pg&&bi(d,s,l(I,"depth"),u),d.lineJoin=ld,d.lineCap=cg,t&&b()}},L=function(a,V){var y=R,i=x,A=R||l(a,dg),O=x||l(a,"blendMode"),G=Si(l(a,"name"),A,O);G&&(hn(d,G,l(a,"stretch"),V.x,V.y,V.width,V.height,Q,E,A,null,O),R=y,x=i)},Y=function(V,J){var I=l(V,"text");I!=q&&Cb(d,I,l(V,"font"),v(V,dg),J.x,J.y,J.width,J.height,l(V,"align"),l(V,"vAlign"))},f=function(a,X){Gr(d,v(a,dg),X.x,X.y,X.width,X.height,l(a,"width"))},i=function(j,K){var v=l(j,ij),u=0;if(v&&(v.forEach(function(W){u+=W}),u>0)){for(var E=l(j,"colors")||ic,k=l(j,"startAngle")||0,x=l(j,"hollow"),V=l(j,Te),Z=l(j,Zf),h=l(j,Zm),B=V?new eb:q,S=K.x,U=K.y,T=K.width,R=K.height,H=S+T/2,w=U+R/2,X=c(T,R)/2,$=0,g=0;g<v.length;g++){var y=v[g],I=W*y/u,N=k+I;if(d.fillStyle=E[$++],$===E.length&&($=0),d.beginPath(),x){var G=H+z(k)*X/2,r=w+M(k)*X/2,i=H+z(N)*X,f=w+M(N)*X;d.moveTo(G,r),d.arc(H,w,X/2,k,N,!1),d.lineTo(i,f),d.arc(H,w,X,N,k,!0)}else d.moveTo(H,w),d.arc(H,w,X,N,k,!0);B&&(I=(k+N)/2,B.add({text:Gf(V)?V(y,g,u,Q):y,x:H+.75*z(I)*X,y:w+.75*M(I)*X})),d.closePath(),d.fill(),k=N}B&&B.each(function(I){Cb(d,I.text,Z,h,I.x,I.y,0,0,gm)})}},s=function(U,K){var V=l(U,Nq);if(V&&V.length>0){var c=V.length,s=l(U,Te),p=l(U,Zf),$=l(U,Zm),F=s?new eb:q,u=l(U,"minValue")||0,W=l(U,"maxValue");if(W==q&&(W=0,V.forEach(function(e){e.values.forEach(function(e){W=I(W,e)})})),u===W)return;for(var a=K.height/(W-u),T=K.y+W*a,B=l(V[0],ij).length,P=K.width/(3*B+1),x=2*P/c,e=0,r=0;c>r;r++)for(var o=V[r],w=l(o,dg),b=l(o,"colors"),C=l(o,ij),y=0;B>y;y++){b?d.fillStyle=b[y]:w?d.fillStyle=w:(d.fillStyle=ic[e++],e===ic.length&&(e=0));var n=C[y],D=n*a,N=K.x+(1+3*y)*P+r*x;if(Iq(d,N,T-D,x,D),F){var A=Gf(s)?s(n,y,o,Q):n,m=Gp(p,A).height;F.add({x:N,y:T-D-m,width:x,height:m,text:A})}}F&&F.each(function(h){Cb(d,h.text,p,$,h.x,h.y,h.width,h.height,gm)})}},U=function(K,N){var H=l(K,Nq);if(H&&H.length>0){var o=H.length,u=l(H[0],ij).length,i=N.width/(3*u+1),c=0,F=l(K,"maxValue"),p=l(K,Te),G=l(K,Zf),v=l(K,Zm),P=p?new eb:q;if(F==q){F=0;for(var $=0;u>$;$++){for(var M=0,W=0;o>W;W++)M+=l(H[W],ij)[$];F=I(F,M)}}if(F>0){for(var $=0;u>$;$++)for(var w=N.y+N.height,W=0;o>W;W++){var C=H[W],L=l(C,dg),U=l(C,ij)[$],B=U/F*N.height;L?d.fillStyle=L:(d.fillStyle=ic[c++],c===ic.length&&(c=0)),w-=B;var b={x:N.x+(1+3*$)*i,y:w,width:2*i,height:B};Iq(d,b.x,b.y,b.width,b.height),P&&(b.text=Gf(p)?p(U,$,C,Q):U,P.add(b))}P&&P.each(function(X){Cb(d,X.text,G,v,X.x,X.y,X.width,X.height,gm)})}}},r=function(L,K){var U=l(L,Nq);if(U&&U.length>0){for(var y=U.length,I=l(U[0],ij).length,A=K.width/(3*I+1),G=0,B=l(L,Te),W=l(L,Zf),X=l(L,Zm),m=B?new eb:q,g=0;I>g;g++){for(var Z=0,P=0;y>P;P++)Z+=l(U[P],ij)[g];if(Z>0){var x=K.y+K.height;for(P=0;y>P;P++){var E=U[P],D=l(E,dg),V=l(E,ij)[g],O=V/Z*K.height;D?d.fillStyle=D:(d.fillStyle=ic[G++],G===ic.length&&(G=0)),x-=O;var t={x:K.x+(1+3*g)*A,y:x,width:2*A,height:O};Iq(d,t.x,t.y,t.width,t.height),m&&(t.text=Gf(B)?B(V,g,E,Q):V,m.add(t))}}}m&&m.each(function(L){Cb(d,L.text,W,X,L.x,L.y,L.width,L.height,gm)})}},g=function(J,P){var c=l(J,Nq);if(c&&c.length>0){var j=c.length,o=l(J,"minValue")||0,F=l(J,"maxValue");if(F==q&&(F=0,c.forEach(function(q){q.values.forEach(function(E){F=I(F,E)})})),o===F)return;for(var E=P.height/(F-o),B=P.y+F*E,n=l(c[0],ij).length,H=P.width/(3*n+1),R=0,z=l(J,"lineWidth")||2,K=l(J,"line3d"),$=l(J,"linePoint"),p=l(J,Te),M=l(J,Zf),L=l(J,Zm),Z=0;j>Z;Z++){var T=c[Z],t=l(T,dg),y=l(T,ij);t?d.strokeStyle=t:(t=d.strokeStyle=ic[R++],R===ic.length&&(R=0)),d.beginPath();for(var g=0;n>g;g++){var v=P.x+(2+3*g)*H,_=B-y[g]*E;0===g?d.moveTo(v,_):d.lineTo(v,_)}if(d.lineWidth=z,d.stroke(),K&&Um(d,t,q,z,X),$||p){var s,k=z/2+2;for(g=0;n>g;g++){var O=y[g];if(v=P.x+(2+3*g)*H,_=B-O*E,Gf($)?$(d,v,_,t,g,T,Q):$&&(d.fillStyle=t,d.beginPath(),d.arc(v,_,k,0,W,!0),d.fill()),Gf(p)?s=p(O,g,T,Q):p&&(s=O),s){var Y=Gp(M,s).height,G=d.shadowBlur;if(G){var h=d.shadowOffsetX,S=d.shadowOffsetY,w=d.shadowColor;d.shadowOffsetX=0,d.shadowOffsetY=0,d.shadowBlur=0,d.shadowColor=q}Cb(d,s,M,L,v,_-Y-k+2,0,Y,gm),G&&(d.shadowOffsetX=h,d.shadowOffsetY=S,d.shadowBlur=G,d.shadowColor=w)}}}}}},J={border:f,image:L,text:Y,pieChart:i,columnChart:s,stackedColumnChart:U,percentageColumnChart:r,lineChart:g};return function(g,s,f,H,F,M,t,A,Z,c){if(s&&F&&M){d=g,Q=t,E=A,X=E?E._zoom?E._zoom:1:1,R=Z,x=c;var W=F,U=M;if(Je()){var V,_,z;0===d[Mc]?Je[0]&&(V=!0):V=!0,d.texureImage2D?Je[1]&&(_=!0):_=!0,d.texureImage3D?Je[2]&&(z=!0):z=!0,V&&_&&z&&(W=f,U=H)}if(s.tagName)return d.drawImage(s,W,U,F,M),void 0;if(l(s,"visible")!==!1){R||(R=oj(s.color,Q,E)),c||(x=oj(s.blendMode,Q,E));var i=re(s,Q,E,F),B=Vo(s,Q,E,M),Y={x:0,y:0,width:i,height:B,fitSize:l(s,"fitSize")},O=l(s,"clip"),T=l(s,"opacity");Y.fitSize&&(Y.widthScale=i/oj(s.width,Q,E),Y.heightScale=B/oj(s.height,Q,E)),d.save(),Uf(d,W,U),(i!==F||B!==M)&&d.scale(F/i,M/B),O&&(Gf(O)?O(d,i,B,Q,E,s):(d.beginPath(),d.rect(0,0,i,B),d.clip())),T!=q&&(d.globalAlpha*=T),l(s,"comps").forEach(function(f){if(l(f,li)!==!1){bd.splice(0,0,f);var H=l(f,"opacity"),F=l(f,"shadow"),L=l(f,"type"),k=o(f,Y);if(H!=q){var $=d.globalAlpha;d.globalAlpha*=H}if(F){var I=d.shadowOffsetX,a=d.shadowOffsetY,c=d.shadowBlur,g=d.shadowColor,h=l(f,"shadowOffsetX"),M=l(f,"shadowOffsetY"),W=l(f,"shadowBlur"),R=v(f,"shadowColor");d.shadowOffsetX=(h==q?3:h)*X,d.shadowOffsetY=(M==q?3:M)*X,d.shadowBlur=(W==q?6:W)*X,d.shadowColor=R||v(nb)}if("save"===L)d.save();else if("endClip"===L||"restore"===L)d.restore();else if("clip"===L)d.save(),_f(d,l(f,"points",e),l(f,"segments",S),!0),d.clip();else if(xp[L])k=k||{x:0,y:0,width:Y.width,height:Y.height},j(f,L,k,Y);else if(L===hb)j(f,L,k,Y);else if("SVGPath"===L)K(f,L,k);else{k=k||{x:0,y:0,width:Y.width,height:Y.height};var r=l(f,Go),V=l(f,"scaleX"),B=l(f,"scaleY"),t=C(f),n=w(f,k,k,r,V,B,t);if(Gf(L))p(f,L),u.drawCompType(L,d,k,f,Q,E);else if(u.getCompType(L)){var A=u.getCompType(L),T=A.func||A;p(f,A),u.drawCompType(T,d,k,f,Q,E)}else J[L]?J[L](f,k):u.getCompType(L)===m&&Yi.test(L)&&Fb(L);n&&b()}F&&(d.shadowOffsetX=I,d.shadowOffsetY=a,d.shadowBlur=c,d.shadowColor=g),H!=q&&(d.globalAlpha=$),bd.splice(0,1)}}),d.restore()}}}}();u.getCurrentComp=function(){return bd[0]},u.getParentComp=function(){return bd[1]},u.getInternal=function(){return{isEnter:Yl,isEsc:_k,isSpace:sh,isLeft:Xe,isUp:cp,isRight:Tb,isDown:nd,addMethod:As,superCall:cn,toPointsArray:Qd,translateAndScale:vr,appendArray:Hd,createWorldMatrix:Bn,vec3TransformMat4:tl,setCanvas:Dp,createDiv:Zr,createView:uc,createCanvas:ho,createImage:Tm,initContext:Zh,layout:cq,fillRect:Iq,Mat:pn,drawBorder:Gr,isString:Me,setBorder:hf,getPropertyValue:cr,setPropertyValue:tk,drawVerticalLine:kc,draw3DRect:bi,getPinchDist:vo,isSameRect:Mo,getPosition:_m,intersectionLineRect:Ch,getNodeRect:Sd,getEdgeAgentPosition:$g,getImageWidth:re,getImageHeight:Vo,initItemElement:mj,drawPoints:_f,createG2:$o,closePopup:ye,isH:Rk,createAnim:eq,createNormalMatrix:nf,createNormals:Qf,toFloatArray:Kl,glMV:mo,batchShape:lb,createNodeMatrix:wp,getFaceInfo:Tk,transformAppend:Io,drawFaceInfo:_e,to3dPointsArray:He,setGLDebugMode:function(J){Ii=J},cube:function(){return{vs:zg,is:hc,uv:qs}},ui:function(){return{DataUI:Zq,NodeUI:ci,EdgeUI:Vb,GroupUI:Vl,ShapeUI:Ob,GridUI:Nd,Data3dUI:Ur,Node3dUI:$j,Shape3dUI:Mg}},getInternalVersion:function(){return"U2FsdGVkX18EFHXWmUGndTgW9wz3hGDWISeo1FvlTYo="},getDragger:function(){return pm},addMSMap:function(c){As(ki,c)},k:N}},function(i){function P(A,H){A!=q&&(H==q&&Pi!=typeof A?this._54O(A,256):this._54O(A,H))}function b(){return new P(q)}function S(K,Y,b,B,L,J){for(;--J>=0;){var r=Y*this[K++]+b[B]+L;L=y(r/67108864),b[B++]=67108863&r}return L}function Z(R,F,b,h,p,P){for(var u=32767&F,B=F>>15;--P>=0;){var d=32767&this[R],y=this[R++]>>15,G=B*d+y*u;d=u*d+((32767&G)<<15)+b[h]+(1073741823&p),p=(d>>>30)+(G>>>15)+B*y+(p>>>30),b[h++]=1073741823&d}return p}function Q(z,D,C,V,B,j){for(var t=16383&D,i=D>>14;--j>=0;){var J=16383&this[z],a=this[z++]>>14,G=i*J+a*t;J=t*J+((16383&G)<<14)+C[V]+B,B=(J>>28)+(G>>14)+i*a,C[V++]=268435455&J}return B}function w(d){return en.charAt(d)}function u(A,J){var o=Pg[A.charCodeAt(J)];return o==q?-1:o}function $(Y){for(var t=this.t-1;t>=0;--t)Y[t]=this[t];Y.t=this.t,Y.s=this.s}function _(l){this.t=1,this.s=0>l?-1:0,l>0?this[0]=l:-1>l?this[0]=l+this.DV:this.t=0}function d(w){var e=b();return e._58O(w),e}function U(n,f){var d,b=this;if(16==f)d=4;else if(8==f)d=3;else if(256==f)d=8;else if(2==f)d=1;else if(32==f)d=5;else{if(4!=f)return b.fromRadix(n,f),void 0;d=2}b.t=0,b.s=0;for(var M=n.length,m=!1,X=0;--M>=0;){var x=8==d?255&n[M]:u(n,M);0>x?"-"==n.charAt(M)&&(m=!0):(m=!1,0==X?b[b.t++]=x:X+d>b.DB?(b[b.t-1]|=(x&(1<<b.DB-X)-1)<<X,b[b.t++]=x>>b.DB-X):b[b.t-1]|=x<<X,X+=d,X>=b.DB&&(X-=b.DB))}8==d&&0!=(128&n[0])&&(b.s=-1,X>0&&(b[b.t-1]|=(1<<b.DB-X)-1<<X)),b._57O(),m&&P.ZERO._78O(b,b)}function r(){for(var E=this,x=E.s&E.DM;E.t>0&&E[E.t-1]==x;)--E.t}function F(b){var o=this;if(o.s<0)return"-"+o._85O()[Kd](b);var M;if(16==b)M=4;else if(8==b)M=3;else if(2==b)M=1;else if(32==b)M=5;else{if(4!=b)return o.toRadix(b);M=2}var U,F=(1<<M)-1,d=!1,l="",L=o.t,j=o.DB-L*o.DB%M;if(L-->0)for(j<o.DB&&(U=o[L]>>j)>0&&(d=!0,l=w(U));L>=0;)M>j?(U=(o[L]&(1<<j)-1)<<M-j,U|=o[--L]>>(j+=o.DB-M)):(U=o[L]>>(j-=M)&F,0>=j&&(j+=o.DB,--L)),U>0&&(d=!0),d&&(l+=w(U));return d?l:"0"}function n(){var o=b();return P.ZERO._78O(this,o),o}function m(){return this.s<0?this._85O():this}function A(Z){var Y=this,b=Y.s-Z.s;if(0!=b)return b;var M=Y.t;if(b=M-Z.t,0!=b)return Y.s<0?-b:b;for(;--M>=0;)if(0!=(b=Y[M]-Z[M]))return b;return 0}function f(p){var _,h=1;return 0!=(_=p>>>16)&&(p=_,h+=16),0!=(_=p>>8)&&(p=_,h+=8),0!=(_=p>>4)&&(p=_,h+=4),0!=(_=p>>2)&&(p=_,h+=2),0!=(_=p>>1)&&(p=_,h+=1),h}function t(){var H=this;return H.t<=0?0:H.DB*(H.t-1)+f(H[H.t-1]^H.s&H.DM)}function C(A,N){var y;for(y=this.t-1;y>=0;--y)N[y+A]=this[y];for(y=A-1;y>=0;--y)N[y]=0;N.t=this.t+A,N.s=this.s}function V(i,n){for(var X=i;X<this.t;++X)n[X-i]=this[X];n.t=I(this.t-i,0),n.s=this.s}function K(i,n){var Q,$=this,E=i%$.DB,X=$.DB-E,N=(1<<X)-1,x=y(i/$.DB),f=$.s<<E&$.DM;for(Q=$.t-1;Q>=0;--Q)n[Q+x+1]=$[Q]>>X|f,f=($[Q]&N)<<E;for(Q=x-1;Q>=0;--Q)n[Q]=0;n[x]=f,n.t=$.t+x+1,n.s=$.s,n._57O()}function O(S,w){var T=this;w.s=T.s;var R=y(S/T.DB);if(R>=T.t)return w.t=0,void 0;var N=S%T.DB,n=T.DB-N,h=(1<<N)-1;w[0]=T[R]>>N;for(var l=R+1;l<T.t;++l)w[l-R-1]|=(T[l]&h)<<n,w[l-R]=T[l]>>N;N>0&&(w[T.t-R-1]|=(T.s&h)<<n),w.t=T.t-R,w._57O()}function H(m,h){for(var Z=this,W=0,u=0,A=c(m.t,Z.t);A>W;)u+=Z[W]-m[W],h[W++]=u&Z.DM,u>>=Z.DB;if(m.t<Z.t){for(u-=m.s;W<Z.t;)u+=Z[W],h[W++]=u&Z.DM,u>>=Z.DB;u+=Z.s}else{for(u+=Z.s;W<m.t;)u-=m[W],h[W++]=u&Z.DM,u>>=Z.DB;u-=m.s}h.s=0>u?-1:0,-1>u?h[W++]=Z.DV+u:u>0&&(h[W++]=u),h.t=W,h._57O()}function l(Q,z){var c=this.abs(),L=Q.abs(),C=c.t;for(z.t=C+L.t;--C>=0;)z[C]=0;for(C=0;C<L.t;++C)z[C+c.t]=c.am(0,L[C],z,C,0,c.t);z.s=0,z._57O(),this.s!=Q.s&&P.ZERO._78O(z,z)}function L(S){for(var g=this.abs(),K=S.t=2*g.t;--K>=0;)S[K]=0;for(K=0;K<g.t-1;++K){var o=g.am(K,g[K],S,2*K,0,1);(S[K+g.t]+=g.am(K+1,2*g[K],S,2*K+1,o,g.t-K-1))>=g.DV&&(S[K+g.t]-=g.DV,S[K+g.t+1]=1)}S.t>0&&(S[S.t-1]+=g.am(K,g[K],S,2*K,0,1)),S.s=0,S._57O()}function o(h,F,X){var v=h.abs(),r=this;if(!(v.t<=0)){var c=r.abs();if(c.t<v.t)return F!=q&&F._58O(0),X!=q&&r._77O(X),void 0;X==q&&(X=b());var a=b(),u=r.s,S=h.s,p=r.DB-f(v[v.t-1]);p>0?(v._44O(p,a),c._44O(p,X)):(v._77O(a),c._77O(X));var t=a.t,A=a[t-1];if(0!=A){var o=A*(1<<r.F1)+(t>1?a[t-2]>>r.F2:0),G=r.FV/o,_=(1<<r.F1)/o,I=1<<r.F2,U=X.t,d=U-t,O=F==q?b():F;for(a._59O(d,O),X._52O(O)>=0&&(X[X.t++]=1,X._78O(O,X)),P.ONE._59O(t,O),O._78O(a,a);a.t<t;)a[a.t++]=0;for(;--d>=0;){var x=X[--U]==A?r.DM:y(X[U]*G+(X[U-1]+I)*_);if((X[U]+=a.am(0,x,X,d,0,t))<x)for(a._59O(d,O),X._78O(O,X);X[U]<--x;)X._78O(O,X)}F!=q&&(X._45O(t,F),u!=S&&P.ZERO._78O(F,F)),X.t=t,X._57O(),p>0&&X._46O(p,X),0>u&&P.ZERO._78O(X,X)}}}function E(G){var L=b();return this.abs()._49O(G,q,L),this.s<0&&L._52O(P.ZERO)>0&&G._78O(L,L),L}function X(p){this.m=p}function G(B){return B.s<0||B._52O(this.m)>=0?B.mod(this.m):B}function v(e){return e}function g(O){O._49O(this.m,q,O)}function k(b,V,l){b._47O(V,l),this._74O(l)}function s(A,Q){A._48O(Q),this._74O(Q)}function R(){if(this.t<1)return 0;var y=this[0];if(0==(1&y))return 0;var u=3&y;return u=15&u*(2-(15&y)*u),u=255&u*(2-(255&y)*u),u=65535&u*(2-(65535&(65535&y)*u)),u=u*(2-y*u%this.DV)%this.DV,u>0?this.DV-u:-u}function j(R){var x=this;x.m=R,x.mp=R._50O(),x.mpl=32767&x.mp,x.mph=x.mp>>15,x.um=(1<<R.DB-15)-1,x.mt2=2*R.t}function h(Y){var h=b();return Y.abs()._59O(this.m.t,h),h._49O(this.m,q,h),Y.s<0&&h._52O(P.ZERO)>0&&this.m._78O(h,h),h}function T(H){var K=b();return H._77O(K),this._74O(K),K}function a(d){for(var J=this;d.t<=J.mt2;)d[d.t++]=0;for(var G=0;G<J.m.t;++G){var z=32767&d[G],$=z*J.mpl+((z*J.mph+(d[G]>>15)*J.mpl&J.um)<<15)&d.DM;for(z=G+J.m.t,d[z]+=J.m.am(0,$,d,G,0,J.m.t);d[z]>=d.DV;)d[z]-=d.DV,d[++z]++}d._57O(),d._45O(J.m.t,d),d._52O(J.m)>=0&&d._78O(J.m,d)}function Lm(v,b){v._48O(b),this._74O(b)}function rj(I,C,l){I._47O(C,l),this._74O(l)}function pb(){return 0==(this.t>0?1&this[0]:this.s)}function Gq(N,Z){if(N>4294967295||1>N)return P.ONE;var n=b(),H=b(),k=Z._73O(this),r=f(N)-1;for(k._77O(n);--r>=0;)if(Z._76O(n,H),(N&1<<r)>0)Z._75O(H,k,n);else{var u=n;n=H,H=u}return Z.revert(n)}function Gg(O,s){var D;return D=256>O||s._51O()?new X(s):new j(s),this.exp(O,D)}function Qh(){var L=this;if(L.s<0){if(1==L.t)return L[0]-L.DV;if(0==L.t)return-1}else{if(1==L.t)return L[0];if(0==L.t)return 0}return(L[1]&(1<<32-L.DB)-1)<<L.DB|L[0]}function us($,b){return new P($,b)}function Cc(){var h=this;h.n=q,h.e=0,h.d=q,h.p=q,h.q=q,h.dmp1=q,h.dmq1=q,h._10A=q}function vo(O){return O._53O(this.e,this.n)}function Er(v){var k,m,O,T="",i=0;for(k=0;k<v.length&&v.charAt(k)!=gn;++k)O=ns.indexOf(v.charAt(k)),0>O||(0==i?(T+=w(O>>2),m=3&O,i=1):1==i?(T+=w(m<<2|O>>4),m=15&O,i=2):2==i?(T+=w(m),T+=w(O>>2),m=3&O,i=3):(T+=w(m<<2|O>>4),T+=w(15&O),i=0));return 1==i&&(T+=w(m<<2)),T}function Hq(m){var E=m.split(""),I=Er(m);return E.forEach(function($){var S=$.length;S>0&&I&&(Tn+=Y($))}),I}function Kg(N,y){var c=Kj._4O.Util._56O(N,"ss"),b={},S=0;return b.v=c==y,b.t=1,b.s=0>S?-1:0,$q=b.v,S>0?b[0]=S:-1>S?b[0]=S+b.DV:b.t=0,[c,b]}function li(q){var F=38,S=q.substring(0,F);if(S&&30==S.indexOf("05000420")){var d=["ss",q.substring(F)];return d}return[]}function tb(y,T){T=T.replace(rk,""),T=T.replace(/[ \n]+/g,"");var x=us(T,16);if(x._55O()>this.n._55O())return 0;var Y=this._37O(x),E=Y[Kd](16).replace(/^1f+00/,""),h=li(E);if(0==h.length)return!1;for(var V,$,O,q=.5,v=Ed,r=[0,.5,.75,.875,.9375],J=[],S=[],Q=[],j=W/v,_=h[1],D=Kg(y,_)[0],t=0,H=0;t<r.length;t++){var Z=0===t%2?0:.5;for(V=0;v>=V;V++)$=(V+Z)*j,O=1-r[t],J.push(z($)*q*O,-q+2*r[t]*q,-M($)*q*O),S.push((V+Z)/v,O)}for(t=0;t<r.length-1;t++){var u=t*(v+1),e=(t+1)*(v+1);for(V=0;v>V;V++)Q.push(u+V,e+V+1,e+V,u+V,u+V+1,e+V+1)}return Q.forEach(function(B){H+=B}),_==D&&H>10}var rc,Km=0xdeadbeefcafe,Mn=15715070==(16777215&Km),Kd="toString",vh="",qc="nat",bb=function(){};J=i["D"+11182[Kd](e(2,5))];var As=P.prototype;gh+=so.substr(0,1);var tk=i.navigator?i.navigator.appName:"";Mn&&"Microsoft Internet Explorer"==tk?(As.am=Z,rc=30):Mn&&"Netscape"!=tk?(As.am=S,rc=26):(As.am=Q,rc=28),As.DB=rc,As.DM=(1<<rc)-1,As.DV=1<<rc;
var mr=52;As.FV=e(2,mr),As.F1=mr-rc,As.F2=2*rc-mr;var Eg,ng,en="0123456789abcdefghijklmnopqrstuvwxyz",Pg=[],Ml=function(h){return String.fromCharCode(h)};for(Eg="0".charCodeAt(0),ng=0;9>=ng;++ng)Pg[Eg++]=ng;for(Eg="a".charCodeAt(0),ng=10;36>ng;++ng)Pg[Eg++]=ng;for(Eg="A".charCodeAt(0),ng=10;36>ng;++ng)Pg[Eg++]=ng;var nl=X.prototype;nl._73O=G,nl.revert=v,nl._74O=g,nl._75O=k,nl._76O=s;var cb=j.prototype;cb._73O=h,cb.revert=T,cb._74O=a,cb._75O=rj,cb._76O=Lm,As._77O=$,As._58O=_,As._54O=U,As._57O=r,As._59O=C,As._45O=V,As._44O=K,As._46O=O,As._78O=H,As._47O=l,As._48O=L,As._49O=o,As._50O=R,As._51O=pb,As.exp=Gq,As.toString=F,As._85O=n,As.abs=m,As._52O=A,As._55O=t,As.mod=E,As._53O=Gg,P.ZERO=d(0),P.ONE=d(1),As._86O=Qh;var Ap=function(b,B){var F=this;F.isPublic=!0,typeof b!==Pi?(F.n=b,F.e=B):b!=q&&B!=q&&b.length>0&&B.length>0&&(F.n=us(b,16),F.e=Y(B,16))};Fl=function(){var m,Q,U=Hq(ee),T=U.substr(0,4),D=U.substr(4,2),Z=U.substr(6,2),S=1,p=!S,C=N,X=[],G=Ck.charAt(7);if(J&&(J[Kd]().indexOf(qc)<0||J[gh][Kd]().indexOf(qc)<0||!U?m=zk(Fc[G]):(U=new J(T-0,D-S,Z-0),Q=U.setHours(9),J[gh]()>Q?m=zk(Fc[G]):p=!0)),U&&m&&C){for(var y in m)X.push(y);var K,c=m[X[0]],v=m[X[1]],d=m[X[2]],V=m[X[4]],P=m[X[5]],Y=m[X[6]],b=be._27O(C);b&&Y&&(K=c+v+d+V+""+P,K&&b._31O(K,Y)&&(p=!0))}return p||(fm=qm),G};var Wl=Cc.prototype;Wl._37O=vo,Wl._38O=Ap;var ns="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",gn="=",vd=25,ub=10,ee="IBgQAQ==",Cd=Cd||function(A,s){var z={},H=z._7A={},O=H._6A=function(){function z(){}return{_80O:function(I){z.prototype=this;var n=new z;return I&&n._5A(I),n.hasOwnProperty("_82O")||(n._82O=function(){n.$super._82O.apply(this,arguments)}),n._82O.prototype=n,n.$super=this,n},_3A:function(){var l=this._80O();return l._82O.apply(l,arguments),l},_82O:function(){},_5A:function(o){for(var e in o)o.hasOwnProperty(e)&&(this[e]=o[e]);o.hasOwnProperty(Kd)&&(this.toString=o.toString)},_88O:function(){return this._82O.prototype._80O(this)}}}(),q=H._39O=O._80O({_82O:function(A,H){A=this._84O=A||[],this._65O=H!=s?H:4*A.length},toString:function(u){return(u||y).stringify(this)},_89O:function(s){var y=this._84O,z=s._84O,f=this._65O,A=s._65O;if(this._57O(),f%4)for(var V=0;A>V;V++){var c=255&z[V>>>2]>>>24-8*(V%4);y[f+V>>>2]|=c<<24-8*((f+V)%4)}else if(z.length>65535)for(var V=0;A>V;V+=4)y[f+V>>>2]=z[V>>>2];else y.push.apply(y,z);return this._65O+=A,this},_57O:function(){var n=this._84O,g=this._65O;n[g>>>2]&=4294967295<<32-8*(g%4),n.length=D(g/4)},_88O:function(){var w=O._88O.call(this);return w._84O=this._84O.slice(0),w},_87O:function(p){for(var r=[],V=0;p>V;V+=4)r.push(0|4294967296*B);return new q._82O(r,p)}}),L=z._2A={},y=L._69O={stringify:function(z){var X,x=z._84O,J=z._65O,S=[];for(X=0;J>X;X++){var Z=255&x[X>>>2]>>>24-8*(X%4);S.push((Z>>>4).toString(16)),S.push((15&Z).toString(16))}return S.join("")},_68O:function(w){for(var d=w.length,t=[],S=0;d>S;S+=2)t[S>>>3]|=Y(w.substr(S,2),16)<<24-4*(S%8);return new q._82O(t,d/2)}},N=L._8A={stringify:function(v){var r,m=v._84O,J=v._65O,P=[];for(r=0;J>r;r++){var A=255&m[r>>>2]>>>24-8*(r%4);P.push(Ml(A))}return P.join("")},_68O:function(b){var n,a=b.length,z=[];for(n=0;a>n;n++)z[n>>>2]|=(255&b.charCodeAt(n))<<24-8*(n%4);return new q._82O(z,a)}},m=L._9A={stringify:function($){try{return decodeURIComponent(escape(N.stringify($)))}catch(U){throw new Error("")}},_68O:function(G){return N._68O(unescape(encodeURIComponent(G)))}},l=H._32O=O._80O({_1A:function(){this._83O=new q._82O,this._23O=0},_33O:function(h){typeof h==Pi&&(h=m._68O(h)),this._83O._89O(h),this._23O+=h._65O},_25O:function(u){var Q=this._83O,m=Q._84O,t=Q._65O,S=this._79O,f=4*S,R=t/f;R=u?D(R):I((0|R)-this._22O,0);var A=R*S,h=c(4*A,t);if(A){for(var n=0;A>n;n+=S)this._20O(m,n);var J=m.splice(0,A);Q._65O-=h}return new q._82O(J,h)},_88O:function(){var D=O._88O.call(this);return D._83O=this._83O._88O(),D},_22O:0});H._66O=l._80O({cfg:O._80O(),_82O:function(T){this.cfg=this.cfg._80O(T),this._1A()},_1A:function(){l._1A.call(this),this._34O()},_81O:function(S){return this._33O(S),this._25O(),this},_72O:function(Z){Z&&this._33O(Z);var u=this._21O();return u},_79O:16,_26O:function(b){return function(h,W){return new b._82O(W)._72O(h)}},_19O:function(p){return function(l,R){return new o._71O._82O(p,R)._72O(l)}}});var o=z._67O={};return z}();!function(){var r=Cd,$=r._7A,d=$._39O,J=$._66O,U=r._67O,V=[],j=[];!function(){function p(g){for(var K=x(g),u=2;K>=u;u++)if(!(g%u))return!1;return!0}function B(j){return 0|4294967296*(j-(0|j))}for(var c=2,m=0;64>m;)p(c)&&(8>m&&(V[m]=B(e(c,.5))),j[m]=B(e(c,1/3)),m++),c++}();var h=[],F=U._41O=J._80O({_34O:function(){this._64O=new d._82O(V.slice(0))},_20O:function(c,l){for(var q=this._64O._84O,t=q[0],D=q[1],J=q[2],M=q[3],Y=q[4],C=q[5],Z=q[6],N=q[7],g=0;64>g;g++){if(16>g)h[g]=0|c[l+g];else{var S=h[g-15],Q=(S<<25|S>>>7)^(S<<14|S>>>18)^S>>>3,L=h[g-2],A=(L<<15|L>>>17)^(L<<13|L>>>19)^L>>>10;h[g]=Q+h[g-7]+A+h[g-16]}var f=Y&C^~Y&Z,v=t&D^t&J^D&J,W=(t<<30|t>>>2)^(t<<19|t>>>13)^(t<<10|t>>>22),s=(Y<<26|Y>>>6)^(Y<<21|Y>>>11)^(Y<<7|Y>>>25),_=N+s+f+j[g]+h[g],E=W+v;N=Z,Z=C,C=Y,Y=0|M+_,M=J,J=D,D=t,t=0|_+E}q[0]=0|q[0]+t,q[1]=0|q[1]+D,q[2]=0|q[2]+J,q[3]=0|q[3]+M,q[4]=0|q[4]+Y,q[5]=0|q[5]+C,q[6]=0|q[6]+Z,q[7]=0|q[7]+N},_21O:function(){var g=this._83O,j=g._84O,h=8*this._23O,U=8*g._65O;return j[U>>>5]|=128<<24-U%32,j[(U+64>>>9<<4)+14]=y(h/4294967296),j[(U+64>>>9<<4)+15]=h,g._65O=4*j.length,this._25O(),this._64O},_88O:function(){var F=J._88O.call(this);return F._64O=this._64O._88O(),F}});r._41O=J._26O(F),r._42O=J._19O(F)}();var rk=new RegExp("");rk.compile("[^0-9a-f]","gi"),Cc._28O=-1,Cc._29O=-2,Wl._31O=tb,Wl._63O=tb,Cc._43O=-2;var zg=new function(){var r=this;r._5O=function(D,_){if("8"!=D.substring(_+2,_+3))return 1;var n=Y(D.substring(_+3,_+4));return 0==n?-1:n>0&&10>n?n+1:-2},r._13O=function(v,c){var U=r._5O(v,c);return 1>U?"":v.substring(c+2,c+2+2*U)},r._12O=function(k,t){var n=r._13O(k,t);if(""==n)return-1;var M;return M=Y(n.substring(0,1))<8?new P(n,16):new P(n.substring(2),16),M._86O()},r._6O=function(R,M){var H=r._5O(R,M);return 0>H?H:M+2*(H+1)},r._11O=function(Z,d){var n=r._6O(Z,d),H=r._12O(Z,d);return Z.substring(n,n+2*H)},r._10O=function(S,K){var k=r._6O(S,K),F=r._12O(S,K);return k+2*F},r._7O=function(f,L){var C=[],O=r._6O(f,L);C.push(O);for(var H=r._12O(f,L),s=O,k=0;;){var Z=r._10O(f,s);if(Z==q||Z-O>=2*H)break;if(k>=200)break;C.push(Z),s=Z,k++}return C}};if(zg._90O=Ml(ub+24),zg._91O=p+Ml(ub*ub+8),Kj==q||!Kj)var Kj={};Kj._4O!=q&&Kj._4O||(Kj._4O={});var vj=Kj._4O;Kj._4O.Util=new function(){var N=this;N._56O=function(A){var i=new Kj._4O._3O;return i._30O(A)},N._4A=function(v){var o=new Kj._4O._3O;return o._36O(v)},N._11A=function(e){var J=new vj._3O;return J._30O(e)}},Kj._4O._3O=function(){var k=this;k._8O=function(j,O){if("ss"==j&&"cj"==O){try{k.md=Cd._67O._41O._3A()}catch(M){bb(vh)}k._24O=function(u){k.md._81O(u)},k._35O=function(j){var g=Cd._2A._69O._68O(j);k.md._81O(g)},k._60O=function(){var $=k.md._72O();return $[Kd](Cd._2A._69O)},k._30O=function(q){return k._24O(q),k._60O()},k._36O=function(G){return k._35O(G),k._60O()}}},k._24O=function(){bb(vh)},k._35O=function(){bb(vh)},k._60O=function(){bb(vh)},k._30O=function(){bb(vh)},k._36O=function(){bb(vh)},k._8O("ss","cj")},Lh=function($){var j=kb[Qp[7]],H=1,g=!1;if(Lq.a!=kb[Op])return Lq.a;if(Lq.forEach(function(m){H*=m}),$>H){if(j){j=j.split(zg._90O);var y=j[3],b=j[7],z=j[11],R=j[19],o=j[23],q=j[27],P=y+b+z+R+o;g=Jq()(P,q)}g||(Zq.prototype._42=Wq)}else g=!0;return Lq.a=g,g},vd=String.fromCharCode(vd+20);var vc=function(I){return I=I.replace(rk,vh),I=I.replace(/[ \n]+/g,vh)},is="30",ac="06",xb="02",pl="03",tg=us,eg=/^1f+00/,be=function(){var N;return N={_18O:function(t){var X=t,m=X.replace(/\s+/g,""),U=Er(m);return U},_14O:function(c){var y=this._18O(c),a=this._15O(y);return a},_15O:function(Y){var A=this._17O(Y);if("2a864886f70d010101"==A._61O){var L=this._16O(A.key),J=new Cc;return J._38O(L.n,L.e),J}bb(vh)},_16O:function(A){var D={};A.substr(0,2)!=is&&bb(vh);var z=zg._7O(A,0);return 2!=z.length&&bb(vh),A.substr(z[0],2)!=xb&&bb(vh),D.n=zg._11O(A,z[0]),A.substr(z[1],2)!=xb&&bb(vh),D.e=zg._11O(A,z[1]),D},_17O:function(W){var O={};O._40O=q;var P=zg._7O(W,0);2!=P.length&&bb(vh);var m=P[0];W.substr(m,2)!=is&&bb(vh);var N=zg._7O(W,m);return 2!=N.length&&bb(vh),W.substr(N[0],2)!=ac&&bb(vh),O._61O=zg._11O(W,N[0]),W.substr(N[1],2)==ac?O._40O=zg._11O(W,N[1]):W.substr(N[1],2)==is&&(O._40O={},O._40O.p=zg._70O(W,N[1],[0],xb),O._40O.q=zg._70O(W,N[1],[1],xb),O._40O.g=zg._70O(W,N[1],[2],xb)),W.substr(P[1],2)!=pl&&bb(vh),O.key=zg._11O(W,P[1]).substr(2),O}},N._17O?N:q}(),Lp=be._27O=function(I){return be._14O(I)};Jq=function(){return function(i,D){D=vc(D);var m=tg(D,e(2,4)),d=this;if(!d||!d.n||m._55O()>d.n._55O())return 0;var _=d._37O(m),j=_[Kd](e(2,4)).replace(eg,""),U=li(j);if(0==U.length)return!1;var t=U[0],M=U[1],C=function(e){return Kj._4O.Util._56O(e,t)},b=C(i);return M==b}.bind(Lp(N))};var uf,ed;return function(){var O=Bo.length-jf.length;if(O>0)for(var b=0;O>b;b++)uf=vj.Util,ed=vc}(),sp=function(f,L){L=ed(L);var N=Lp(ms),_=em.length,m=2*_,n=tg(L,e(_,m)),O=N,i=!0;if(O){var y=O[Gd[0]];y&&n._55O()<=y._55O()&&(i=!1)}if(i)return 0;var E=O._37O(n),u=E[Kd](e(_,m)).replace(eg,""),I=li(u);if(0==I.length)return!1;var l=I[0],z=I[1],F=uf._11A(f,l);return z==F},be}(w,_);var eb=s.List=function(){this._as=[];var p,x,e=arguments.length;if(1===e){var L=arguments[0];if(mk(L)&&(L=L._as),Nc(L))for(x=L.length,p=0;x>p;p++)this._as.push(L[p]);else L!=q&&this._as.push(L)}else if(e>1)for(p=0;e>p;p++)this._as.push(arguments[p])};wj("List",_,{forEach:function(W,d){this.each(W,d)},push:function(){for(var a=0;a<arguments.length;a++)this.add(arguments[a])},pop:function(){return this._as.pop()},shift:function(){return this._as.shift()},unshift:function(){return this._as.unshift.apply(this._as,arguments)},size:function(){return this._as.length},isEmpty:function(){return 0===this._as.length},add:function($,I){return I===m?this._as.push($):this._as.splice(I,0,$)},addAll:function(O){mk(O)&&(O=O._as),Nc(O)?Hd(this._as,O):this._as.push(O)},get:function(S){return this._as[S]},slice:function(_,X){return new eb(this._as.slice(_,X))},remove:function(D){var H=this._as.indexOf(D);return H>=0&&H<this._as.length&&this.removeAt(H),H},removeAt:function(x){return this._as.splice(x,1)[0]},set:function(l,M){return this._as[l]=M},clear:function(){return this._as.splice(0,this._as.length)},contains:function(s){return this._as.indexOf(s)>=0},indexOf:function(Y){return this._as.indexOf(Y)},each:function(V,i){for(var R=0,y=this._as.length;y>R;R++){var X=this._as[R];i?V.call(i,X,R,this):V(X,R,this)}},reverseEach:function(F,Z){for(var l=this._as.length-1;l>=0;l--){var H=this._as[l];Z?F.call(Z,H):F(H)}},toArray:function(R,W){if(R){for(var w,U=[],l=0,n=this._as.length;n>l;l++)w=this._as[l],W?R.call(W,w)&&U.push(w):R(w)&&U.push(w);return U}return this._as.concat()},toList:function(m,P){if(m){for(var G,q=new eb,f=0,z=this._as.length;z>f;f++)G=this._as[f],P?m.call(P,G)&&q.add(G):m(G)&&q.add(G);return q}return new eb(this)},reverse:function(){this._as.reverse()},sort:function(n){return this._as.sort(n?n:Bm),this},toString:function(){return this._as.toString()}}),_.defineProperties(eb.prototype,{length:{get:function(){return this._as.length},set:function(L){this._as.length=L}}});var Ki=new eb;As(Ki,{size:function(){return 0},indexOf:function(){return-1},contains:function(){return!1},isEmpty:function(){return!0},sort:Ej,each:Ej,reverseEach:Ej,toArray:function(){return[]},toList:function(){return new eb},add:Aq,addAll:Aq,set:Aq,remove:Aq,removeAt:Aq,clear:Aq});var pn=s.Matrix=function(b,r,D,A,L){var j=this;b=b||0;var W=M(b),n=z(b);A=A||1,L=L||1,j.a=n*A,j.b=W*A,j.c=-W*L,j.d=n*L,j.tx=r||0,j.ty=D||0};pn.prototype.tf=function(c,Y){1===arguments.length&&(Y=c.y,c=c.x);var l=this;return{x:l.a*c+l.c*Y+l.tx,y:l.b*c+l.d*Y+l.ty}},pn.prototype.translate=function(u,K){var f=this;return f.tx+=u,f.ty+=K,f},pn.prototype.scale=function($,c){var g=this;return g.a*=$,g.d*=c,g.c*=$,g.b*=c,g.tx*=$,g.ty*=c,g},pn.prototype.rotate=function(R){var N=z(R),T=M(R),q=this,x=q.a,$=q.c,Q=q.tx;return q.a=x*N-q.b*T,q.b=x*T+q.b*N,q.c=$*N-q.d*T,q.d=$*T+q.d*N,q.tx=Q*N-q.ty*T,q.ty=Q*T+q.ty*N,q},pn.prototype.transform=function(n){var P=this,x=n.a,V=n.b,U=n.c,N=n.d,J=n.tx,u=n.ty,h=P.a,j=P.b,I=P.c,v=P.d,H=P.tx,c=P.ty;return P.a=x*h+U*j,P.b=V*h+N*j,P.c=x*I+U*v,P.d=V*I+N*v,P.tx=x*H+U*c+J,P.ty=V*H+N*c+u,P},pn.prototype.tfi=function(Y,H){1===arguments.length&&(H=Y.y,Y=Y.x);var h=this,I=1/(h.a*h.d+h.c*-h.b);return{x:h.d*I*Y+-h.c*I*H+(h.ty*h.c-h.tx*h.d)*I,y:h.a*I*H+-h.b*I*Y+(-h.ty*h.a+h.tx*h.b)*I}};var Jn=s.Notifier=function(){this._f=0};wj("Notifier",_,{contains:function(P,N){if(this._ls)for(var $,J=0,z=this._ls.size();z>J;J++)if($=this._ls.get(J),P===$.l&&N===$.s)return!0;return!1},add:function(U,X,y){var h=this,q={l:U,s:X,a:y};h._ls||(h._ls=new eb),h._f?(h._as||(h._as=new eb),h._as.add(q)):q.a?h._ls.add(q,0):h._ls.add(q)},remove:function(C,O){var I=this;I._ls&&(I._f?(I._rs||(I._rs=new eb),I._rs.add({l:C,s:O})):I._remove(C,O))},_remove:function(E,c){for(var G,d=this._ls,Y=0,l=d.size();l>Y;Y++)if(G=d.get(Y),G.l===E&&G.s===c)return d.removeAt(Y),void 0},fire:function(V){var n=this,D=n._ls;if(n._b=1e4,D){++n._f;try{for(var _,u=0,j=D.size();j>u;u++)_=D.get(u),_.s?_.l.call(_.s,V):_.l(V)}finally{if(--n._f)return;if(n._rs){for(j=n._rs.size(),u=0;j>u;u++)_=n._rs.get(u),n._remove(_.l,_.s);delete n._rs}if(n._as){for(j=n._as.size(),u=0;j>u;u++)_=n._as.get(u),_.a?D.add(_,0):D.add(_);delete n._as}}}}});var Oh=s.Data=function(){this._id=Di()};wj("Data",_,{ms_ac:["tag","name","displayName","icon","toolTip","attrObject","layer","adjustChildrenToTop","dataBindings"],ms_dm:1,ms_attr:1,_icon:q,_parent:q,_children:Ki,_childMap:q,_styleMap:q,_layer:"0",_adjustChildrenToTop:!1,getUIClass:function(){return q},_22Q:function(){return q},s:function(V,a){var $=this;if(2===arguments.length)$.setStyle(V,a);else{if(!we(V))return $.getStyle(V);for(var B in V)$.setStyle(B,V[B])}return $},fp:function(S,h,b){return this.firePropertyChange(S,h,b)},firePropertyChange:function(M,W,u){if(W===u)return!1;var _=this,B={property:M,oldValue:W,newValue:u,data:_};return _._dataModel&&_._dataModel.handleDataPropertyChange(B),_.onPropertyChanged(B),!0},onPropertyChanged:function(Z){var G=this,r=G._parent,b=Z.property;if(jk(r)){var c=G.s(_r),I="s:ingroup"===b;(c&&mf[b]||b===I)&&r._81I(),(c||I)&&r.fp("childChange",!0,!1)}_l(r)&&mf[b]&&r.updateFromChildren()},_21I:function(l){var D=this;if(l&&D._dataModel)throw"Remove data from dataModel before adding";D._dataModel=l},removeFromDataModel:function(){this._dataModel?this._dataModel.remove(this):this.setParent(null)},clearChildrenFromDataModel:function(){for(var X=0,y=this._children.toArray(),B=y.length;B>X;X++)y[X].removeFromDataModel()},getId:function(){return this._id},setId:function(x){this._id=x},getChildren:function(){return this._children},size:function(){return this._children.size()},toChildren:function(u,C){return this._children.toList(u,C)},eachChild:function(D,c){this._children.each(D,c)},addChild:function(U,P){var i=this;U!==i&&(i._children===Ki&&(i._children=new eb,i._childMap={}),P===m&&(P=i._children.size()),i._childMap[U._id]||i.isDescendantOf(U)||(U._parent&&U._parent.removeChild(U),(0>P||P>i._children.size())&&(P=i._children.size()),i._children.add(U,P),i._childMap[U._id]=U,U.setParent(i),i.onChildAdded(U,P),i.fp(bb,q,U)))},onChildAdded:function(){},removeChild:function(s){var p=this;if(p._childMap&&p._childMap[s._id]){var k=p._children.remove(s);delete p._childMap[s._id],p.fp(bb,s,q),s.setParent(q),p.onChildRemoved(s,k)}},onChildRemoved:function(){},getChildAt:function(X){return this._children.get(X)},clearChildren:function(){var a=this;if(!a._children.isEmpty())for(var x=0,e=a._children.toArray(),i=e.length;i>x;x++)a.removeChild(e[x])},getParent:function(){return this._parent},setParent:function(I){var O=this;if(!(O._73I||O._parent===I||O===I||I&&I.isDescendantOf(O))){var b=O._parent;O._parent=I,O._73I=1,b&&b.removeChild(O),I&&I.addChild(O),delete O._73I,O.fp("parent",b,I),O.onParentChanged(b,I)}},onParentChanged:function(){},hasChildren:function(){return this._children.size()>0},isEmpty:function(){return this._children.isEmpty()},isRelatedTo:function(Y){return Y?this.isDescendantOf(Y)||Y.isDescendantOf(this):!1},isParentOf:function(s){return s&&this._childMap?!!this._childMap[s._id]:!1},isDescendantOf:function(O){if(!O||O.isEmpty())return!1;for(var N=this._parent;N;){if(O===N)return!0;N=N._parent}return!1},getStyleMap:function(){return this._styleMap},getStyle:function(j,q){q===m&&(q=1);var c=this._styleMap?this._styleMap[j]:m;return c===m&&q?C[j]:c},setStyle:function($,c){var l=this;l._styleMap||(l._styleMap={});var p=l._styleMap[$];c===m?delete l._styleMap[$]:l._styleMap[$]=c,l.fp("s:"+$,p,c)&&l.onStyleChanged($,p,c)},onStyleChanged:function(){},iv:function(){this.invalidate()},invalidate:function(){this.fp("*",!1,!0)},toString:function(){var y=this;return y._displayName||y._name||y._tag||y._id},toLabel:function(){return this._displayName||this._name},addStyleIcon:function(j,M){var I=this,O=I.s(zj);O||I.s(zj,O={}),M?O[j]=M:delete O[j],I.fp(zj,q,O)},removeStyleIcon:function(L){var X=this.s(zj);if(X){var Y=X[L];delete X[L],this.fp(zj,q,X)}return Y},getSerializableProperties:function(){return{name:1,displayName:1,icon:1,toolTip:1,parent:1,layer:1,tag:1,adjustChildrenToTop:1,dataBindings:1}},getSerializableStyles:function(){var z,H={};for(z in this._styleMap)H[z]=1;return H}});var dq=s.DataModel=function(){var n=this;n._datas=new eb,n._dataMap={},n._roots=new eb,n._rootMap={},n._78O={},n._36I=new Jn,n._35I=new Jn,n._selectionModel=new Al(n);var z=n._29Q=[],X=n._scheduleCallback=function(){for(var N=Date.now(),e=0;e<z.length;e++){var T=z[e];T.enabled&&N-T.lastTime>T.interval&&(T.beforeAction&&T.beforeAction(),n.each(function(s){T.action(s)}),T.afterAction&&T.afterAction(),T.lastTime=N)}z.length&&(n._30Q=w.requestAnimationFrame(X))}};wj("DataModel",_,{ms_fire:1,ms_attr:1,ms_ac:["layers","name","autoAdjustIndex","hierarchicalRendering","background","init"],_name:m,_autoAdjustIndex:!0,_hierarchicalRendering:!1,_background:m,_init:m,sm:function(){return this.getSelectionModel()},mm:function(t,R,Z){this.addDataModelChangeListener(t,R,Z)},umm:function(O,l){this.removeDataModelChangeListener(O,l)},md:function(Y,p,q){this.addDataPropertyChangeListener(Y,p,q)},umd:function(X,x){this.removeDataPropertyChangeListener(X,x)},mh:function(V,O,l){this.addHierarchyChangeListener(V,O,l)},umh:function(Z,F){this.removeHierarchyChangeListener(Z,F)},getHistoryManager:function(){return this._historyManager},getAttrObject:function(){return this._attrObject},setAttrObject:function(n){return this._attrObject=n},getSelectionModel:function(){return this._selectionModel},size:function(){return this._datas.size()},isEmpty:function(){return this._datas.isEmpty()},getRoots:function(){return this._roots},getDatas:function(){return this._datas},getDataById:function(r){return this._dataMap[r]},removeDataById:function(x){this.remove(this.getDataById(x))},toDatas:function(I,k){return this._datas.toList(I,k)},each:function(C,g){this._datas.each(C,g)},getDataByTag:function(t){return this._78O[t]},removeDataByTag:function(N){this.remove(this.getDataByTag(N))},add:function($,x){var D=this,G=$._id,d=$._tag,s=D._roots;if(D._dataMap[G])throw"'"+G+"' already exists";d!=q&&(D._78O[d]=$),D._dataMap[G]=$,D._datas.add($),$._parent||(D._rootMap[G]=$,x>=0?s.add($,x):s.add($)),$._21I(D),D.onAdded($),D._36I.fire({kind:"add",data:$})},onAdded:function(){},remove:function(n,$){if(n){var y=this,h=n._id,R=$&&$.keepChildren,l=n.getTag(),D=y.getHistoryManager();R&&(y._removingData||(y._removingData=n)),n._dataModel===y&&(D&&D.beginInteraction(),y.prepareRemove(n),n.toChildren().each(function(E){y.remove(E,$)},y),R?y._removingData==n&&(n._parent&&n._parent.removeChild(n),delete y._removingData):n._parent&&n._parent.removeChild(n),y._datas.remove(n),delete y._dataMap[h],l!=q&&delete y._78O[l],y._rootMap[h]&&(delete y._rootMap[h],y._roots.remove(n)),n._21I(q),y.onRemoved(n),y._36I.fire({kind:hr,data:n}),D&&D.endInteraction())}},onRemoved:function(){},prepareRemove:function(){},clear:function(){var M=this;M._datas.size()&&(M._datas.toArray().forEach(function($){$._21I(q)}),M._datas.clear(),M._dataMap={},M._roots.clear(),M._rootMap={},M._78O={},M._36I.fire({kind:ao}))},contains:function(m){return m&&m._dataModel===this},handleDataPropertyChange:function($){var d=this,A=$.data,n=$.property;if("parent"===n){var E=A._id,b=d._rootMap,k=d._roots;A._parent?b[E]&&(delete b[E],k.remove(A)):b[E]||(b[E]=A,k.add(A))}else if("tag"===n){var z=$.oldValue,r=$.newValue,O=d._78O;z!=q&&delete O[z],r!=q&&(O[r]=A)}this.onDataPropertyChanged(A,$),this._35I.fire($)},onDataPropertyChanged:function(){},addDataModelChangeListener:function(x,V,l){this._36I.add(x,V,l)},removeDataModelChangeListener:function(E,t){this._36I.remove(E,t)},addDataPropertyChangeListener:function(Z,F,O){this._35I.add(Z,F,O)},removeDataPropertyChangeListener:function(A,U){this._35I.remove(A,U)},_38I:function(_,i,L){this._37I&&this._37I.fire({data:_,oldIndex:i,newIndex:L})},addHierarchyChangeListener:function(f,o,E){this._37I||(this._37I=new Jn),this._37I.add(f,o,E)},removeHierarchyChangeListener:function(o,v){this._37I.remove(o,v)},getSiblings:function(w){var K=w._parent;return K?K._children:this._roots},eachByHierarchical:function(B,X,u){if(X)return this._eachByHierarchical(B,X,u);for(var x=0,R=this._roots,S=R.size();S>x;x++)if(this._eachByHierarchical(B,R.get(x),u)===!1)return!1;return!0},_eachByHierarchical:function(T,p,$){if($){if(T.call($,p)===!1)return!1}else if(T(p)===!1)return!1;for(var J=p.size(),d=0;J>d;d++)if(this._eachByHierarchical(T,p.getChildAt(d),$)===!1)return!1;return!0},reverseEachByHierarchical:function(y,v,S){if(v)return this._reverseEachByHierarchical(y,v,S);for(var e=this._roots,C=e.size(),K=C-1;K>=0;K--)if(this._reverseEachByHierarchical(y,e.get(K),S)===!1)return!1;return!0},_reverseEachByHierarchical:function(t,v,n){for(var A=v.size(),l=A-1;l>=0;l--)if(this._reverseEachByHierarchical(t,v.getChildAt(l),n)===!1)return!1;if(n){if(t.call(n,v)===!1)return!1}else if(t(v)===!1)return!1;return!0},eachByDepthFirst:function(H,z,K){if(z)return this._11I(H,z,K);for(var h=0,N=this._roots,t=N.size();t>h;h++)if(this._11I(H,N.get(h),K)===!1)return!1;return!0},_11I:function(K,V,l){for(var g=V.size(),s=0;g>s;s++)if(this._11I(K,V.getChildAt(s),l)===!1)return!1;if(l){if(K.call(l,V)===!1)return!1}else if(K(V)===!1)return!1;return!0},eachByBreadthFirst:function(Q,f,P){var N=new eb;for(f?N.add(f):this._roots.each(N.add,N);N.size()>0;)if(f=N.removeAt(0),f.eachChild(N.add,N),P){if(Q.call(P,f)===!1)return!1}else if(Q(f)===!1)return!1;return!0},moveTo:function(p,n){var u=this.getSiblings(p),A=u.indexOf(p);A===n||0>A||n>=0&&n<=u.size()&&(u.remove(p),n>u.size()&&n--,u.add(p,n),this._38I(p,A,n))},moveUp:function(z){this.moveTo(z,this.getSiblings(z).indexOf(z)-1)},moveDown:function(c){this.moveTo(c,this.getSiblings(c).indexOf(c)+1)},moveToTop:function(E){this.moveTo(E,0)},moveToBottom:function(O){this.moveTo(O,this.getSiblings(O).size())},moveSelectionUp:function(Q){Q||(Q=this.sm());var g=new eb;Xg(Q,g,this._roots),g.each(this.moveUp,this)},moveSelectionDown:function(z){z||(z=this.sm());var M=new eb;Hq(z,M,this._roots),M.each(this.moveDown,this)},moveSelectionToTop:function(_){_||(_=this.sm());var V=new eb;bm(_,V,this._roots),V.each(this.moveToTop,this)},moveSelectionToBottom:function(V){V||(V=this.sm());var e=new eb;Pl(V,e,this._roots),e.each(this.moveToBottom,this)},moveToIndex:function(f,A,k){var U=this.getDatas();null==k&&(k=U.indexOf(f)),k===A||0>k||A>=0&&A<=U.size()&&(U.remove(f),A>U.size()&&A--,U.add(f,A),this._76I(f,k,A))},bringForward:function(N){this.moveToIndex(N,this.getDatas().indexOf(N)+1)},bringToFront:function(l){this.moveToIndex(l,this.size())},sendBackward:function(t){this.moveToIndex(t,this.getDatas().indexOf(t)-1)},sendToBack:function(L){this.moveToIndex(L,0)},bringSelectionForward:function(q){q||(q=this.sm());for(var I=new eb,X=this.getDatas(),$=!1,d=0;d<X.size();d++){var r=X.get(X.size()-1-d);q.contains(r)?$&&I.add(r):$=!0}I.each(this.bringForward,this)},bringSelectionToFront:function(I){I||(I=this.sm());for(var d=new eb,R=this.getDatas(),v=0;v<R.size();v++){var z=R.get(v);I.contains(z)&&d.add(z)}d.each(this.bringToFront,this)},sendSelectionBackward:function(w){w||(w=this.sm());for(var N=new eb,T=this.getDatas(),C=!1,j=0;j<T.size();j++){var Z=T.get(j);w.contains(Z)?C&&N.add(Z):C=!0}N.each(this.sendBackward,this)},sendSelectionToBack:function(W){W||(W=this.sm());for(var u=new eb,w=this.getDatas(),s=0;s<w.size();s++){var c=w.get(w.size()-1-s);W.contains(c)&&u.add(c)}u.each(this.sendToBack,this)},addScheduleTask:function(k){var h=this;h.removeScheduleTask(k),k.enabled==q&&(k.enabled=!0),k.interval==q&&(k.interval=10),k.action==q&&(k.action=Ej),k.lastTime=Date.now(),h._29Q.push(k),h._30Q==q&&(h._30Q=w.requestAnimationFrame(h._scheduleCallback))},removeScheduleTask:function(x){var u=this,n=u._29Q,k=n.indexOf(x);k>=0&&n.splice(k,1),n.length||u._30Q==q||(w.cancelAnimationFrame(u._30Q),delete u._30Q)}});var Al=s.SelectionModel=function(X){var j=this;j._68O=Pq,j._map={},j._73O=new eb,j._74I=new Jn,j._21I(X)};wj("SelectionModel",_,{ms_fire:1,ms_dm:1,ms:function(y,F,$){this.addSelectionChangeListener(y,F,$)},ums:function(T,r){this.removeSelectionChangeListener(T,r)},fd:function(){return this.getFirstData()},ld:function(){return this.getLastData()},sg:function(){return this._68O===pb},co:function(B){return this._map[B._id]!=q},ss:function(b){this.setSelection(b)},as:function(h){this.appendSelection(h)},rs:function(x){this.removeSelection(x)},cs:function(){this.clearSelection()},sa:function(){this.selectAll()},getSelectionMode:function(){return this._68O},setSelectionMode:function(W){var q=this;if(q._68O!==W&&(W===Gd||W===pb||W===Pq)){q.cs();var x=q._68O;q._68O=W,q.fp("selectionMode",x,W)}},_21I:function(i){var X=this,A=X._dataModel;A!==i&&(A&&(X.cs(),A.umm(X.handleDataModelChange,X)),X._dataModel=i,i.mm(X.handleDataModelChange,X,!0),X.fp(Pp,A,i))},dispose:function(){var r=this;r.cs(),r._dataModel.umm(r.handleDataModelChange,r)},handleDataModelChange:function(t){var T=this;if(t.kind===hr){var q=t.data;T.co(q)&&(T._73O.remove(q),delete T._map[q._id],T._75I(hr,new eb(q)))}else t.kind===ao&&T.cs()},getFilterFunc:function(){return this._filterFunc},setFilterFunc:function(F){var v=this;if(v._filterFunc!==F){v.cs();var w=v._filterFunc;v._filterFunc=F,v.fp("filterFunc",w,v._filterFunc)}},_75I:function($,C,b,D){b&&(this._73O.each(function(M){D[M._id]?b.remove(M):b.add(M)}),C=b.toList()),this._74I.fire({kind:$,datas:new eb(C)})},addSelectionChangeListener:function(w,R,k){this._74I.add(w,R,k)},removeSelectionChangeListener:function(r,X){this._74I.remove(r,X)},_97O:function(y,_){for(var t,z=this,B=0,K=new eb(y);B<K.size();B++)t=K.get(B),(z._filterFunc&&!z._filterFunc(t)||_&&z.co(t)||!_&&!z.co(t)||!z._dataModel.contains(t))&&(K.removeAt(B),B--);return K},appendSelection:function(s){var F=this;if(F._68O!==Gd){var $,P,y=F._73O,H=F._97O(s,!0);H.isEmpty()||(F.sg()&&($=new eb(y),P=F._map,y.clear(),F._map={},H=new eb(H.get(H.size()-1))),H.each(function(j){y.add(j),F._map[j._id]=j}),F._75I("append",H,$,P))}},removeSelection:function(X){var x=this,M=x._97O(X),Z=0,D=M.size();if(0!==D){for(;D>Z;Z++){var t=M.get(Z);x._73O.remove(t),delete x._map[t._id]}x._75I(hr,M)}},toSelection:function(R,E){return this._73O.toList(R,E)},getSelection:function(){return this._73O},each:function(m,n){this._73O.each(m,n)},setSelection:function(p){var b=this,g=b._73O;if(b._68O!==Gd&&!(g.isEmpty()&&!p||1===g.size()&&b.ld()===p)){var a=new eb(g),$=b._map;g.clear(),b._map={};var X=b._97O(p,!0);b.sg()&&X.size()>1&&(X=new eb(X.get(X.size()-1))),X.each(function(s){g.add(s),b._map[s._id]=s}),b._75I("set",q,a,$)}},clearSelection:function(){var M=this,$=M._73O;if($.size()>0){var V=$.toList();$.clear(),M._map={},M._75I(ao,V)}},selectAll:function(){var z=this;if(z._68O!==Gd){var g,R,Y=z._dataModel.toDatas();if(z._filterFunc)for(g=0;g<Y.size();g++)R=Y.get(g),z._filterFunc(R)||(Y.removeAt(g),g--);var I=z._73O,Q=new eb(I),l=z._map;I.clear(),z._map={},z.sg()&&Y.size()>1&&(Y=new eb(Y.get(Y.size()-1)));var p=Y.size();for(g=0;p>g;g++)R=Y.get(g),I.add(R),z._map[R._id]=R;z._75I("all",q,Q,l)}},size:function(){return this._73O.size()},isEmpty:function(){return this._73O.isEmpty()},contains:function(r){return this._map[r._id]!=q},getLastData:function(){var e=this._73O;return e.size()>0?e.get(e.size()-1):q},getFirstData:function(){var J=this._73O;return J.size()>0?J.get(0):q},isSelectable:function(I){var J=this;return I&&J._68O!==Gd?J._filterFunc?J._filterFunc(I):!0:!1},getTopSelection:function(){var v=this,o=new eb;return v._73O.each(function(N){for(var V=N.getParent();V;){if(v.contains(V)){N=q;break}V=V.parent}N&&o.add(N)}),o}});var Sd=function(){return ld(0),function(l,Y){var m;if(sn(Y)){var q=l.getDataUI(Y);q&&q._88I&&(m=q._88I.rect)}return m?m:Y.getRect()}}();As(u,{edgeGroupAgentFunc:q,graphViewAutoScrollZone:16,graphViewResettable:!1,graphViewPannable:!0,graphViewRectSelectable:!0,graphViewScrollBarVisible:!0,graphViewRectSelectBorderColor:g.rectSelectBorder,graphViewRectSelectBackground:fi,graphViewEditPointSize:uh?17:7,graphViewEditPointBorderColor:g.editPointBorder,graphViewEditPointBackground:g.editPointBackground,setEdgeType:function(T,p,j){Ti[T]=p,ap[T]=j},getEdgeType:function(t){return Ti[t]},getEdgeTypeMap:function(){return Ti},getNodeRect:Sd},!0),As(C,{"2d.selectable":!0,"2d.visible":!0,"2d.movable":!0,"2d.editable":!0,"2d.move.mode":m,"image.stretch":"fill",icons:m,ingroup:!0,"body.color":m,opacity:m,pixelPerfect:!0,"clip.direction":"top","clip.percentage":1,"select.color":dk,"select.width":1,"select.padding":2,"select.type":Pg,shadow:!1,"shadow.blur":6,"shadow.offset.x":3,"shadow.offset.y":3,"border.color":m,"border.width":2,"border.padding":2,"border.type":Pg,label:m,"label.font":m,"label.color":nl,"label.background":m,"label.position":31,"label.position.fixed":!1,"label.offset.x":0,"label.offset.y":2,"label.rotation":m,"label.max":m,"label.opacity":m,"label.scale":1,"label.align":m,"label.selectable":!0,label2:m,"label2.font":m,"label2.color":nl,"label2.background":m,"label2.position":34,"label2.position.fixed":!1,"label2.offset.x":0,"label2.offset.y":-2,"label2.rotation":m,"label2.max":m,"label2.opacity":m,"label2.scale":1,"label2.align":m,"label2.selectable":!0,note:m,"note.expanded":!0,"note.font":m,"note.color":db,"note.background":dk,"note.position":8,"note.offset.x":-3,"note.offset.y":3,"note.max":m,"note.toggleable":!0,"note.border.width":1,"note.border.color":m,"note.opacity":m,"note.scale":1,"note.align":m,note2:m,"note2.expanded":!0,"note2.font":m,"note2.color":db,"note2.background":dk,"note2.position":3,"note2.offset.x":3,"note2.offset.y":-3,"note2.max":m,"note2.toggleable":!0,"note2.border.width":1,"note2.border.color":m,"note2.opacity":m,"note2.scale":1,"note2.align":m,"group.type":m,"group.image":m,"group.image.stretch":"fill","group.repeat.image":m,"group.padding":8,"group.padding.left":0,"group.padding.right":0,"group.padding.top":0,"group.padding.bottom":0,"group.position":17,"group.toggleable":!0,"group.title.font":m,"group.title.color":db,"group.title.background":g.groupTitleBackground,"group.title.align":qg,"group.background":g.groupBackground,"group.depth":1,"group.border.width":1,"group.border.pattern":m,"group.border.color":oe,"group.border.cap":vd,"group.border.join":sq,"group.gradient":q,"group.gradient.color":"#FFF",shape:m,"shape.background":oe,"shape.repeat.image":m,"shape.border.width":0,"shape.border.width.absolute":!1,"shape.border.color":oe,"shape.border.3d":!1,"shape.border.3d.color":m,"shape.border.3d.accuracy":m,"shape.border.cap":vd,"shape.border.join":sq,"shape.border.pattern":m,"shape.gradient":q,"shape.gradient.color":"#FFF","shape.depth":0,"shape.dash":!1,"shape.dash.pattern":ie,"shape.dash.offset":0,"shape.dash.color":Hh,"shape.dash.width":m,"shape.dash.3d":!1,"shape.dash.3d.color":m,"shape.dash.3d.accuracy":m,"shape.polygon.side":6,"shape.arc.from":F,"shape.arc.to":W,"shape.arc.close":!0,"shape.arc.oval":!1,"shape.corner.radius":m,"shape.gradient.pack":m,"shape.fill.rule":"nonzero","shape.fill.clip.direction":"top","shape.fill.clip.percentage":1,"autolayout.gap":m,"autolayout.hgap":m,"autolayout.vgap":m,"edge.type":m,"edge.points":m,"edge.segments":m,"edge.color":oe,"edge.width":2,"edge.width.absolute":!1,"edge.offset":20,"edge.group":0,"edge.expanded":!0,"edge.gap":12,"edge.toggleable":!0,"edge.center":!1,"edge.3d":!1,"edge.3d.color":m,"edge.3d.accuracy":m,"edge.cap":vd,"edge.join":sq,"edge.source.position":17,"edge.source.anchor.x":m,"edge.source.anchor.y":m,"edge.source.offset.x":0,"edge.source.offset.y":0,"edge.target.position":17,"edge.target.anchor.x":m,"edge.target.anchor.y":m,"edge.target.offset.x":0,"edge.target.offset.y":0,"edge.pattern":m,"edge.dash":!1,"edge.dash.pattern":ie,"edge.dash.offset":0,"edge.dash.color":Hh,"edge.dash.width":m,"edge.dash.3d":!1,"edge.dash.3d.color":m,"edge.dash.3d.accuracy":m,"edge.independent":!1,"attach.row.index":0,"attach.column.index":0,"attach.row.span":1,"attach.column.span":1,"attach.padding":0,"attach.padding.left":0,"attach.padding.right":0,"attach.padding.top":0,"attach.padding.bottom":0,"attach.index":-1,"attach.offset":0,"attach.offset.relative":!1,"attach.offset.opposite":!1,"attach.thickness":m,"attach.gap":0,"attach.gap.relative":!1,"grid.row.count":1,"grid.column.count":1,"grid.row.percents":m,"grid.column.percents":m,"grid.border":1,"grid.border.left":0,"grid.border.right":0,"grid.border.top":0,"grid.border.bottom":0,"grid.gap":1,"grid.background":g.gridBackground,"grid.depth":1,"grid.cell.depth":-1,"grid.cell.border.color":g.gridCellBorderColor,"grid.block":m,"grid.block.padding":3,"grid.block.width":1,"grid.block.color":g.gridBlockColor,text:"","text.align":"left","text.vAlign":"middle","text.color":nl,"text.font":Pn,"text.shadow":!1,"text.shadow.color":nb,"text.shadow.blur":6,"text.shadow.offset.x":3,"text.shadow.offset.y":3},!0),As(dq,{_76I:function(I,t,L){this._39I&&this._39I.fire({data:I,oldIndex:t,newIndex:L})
},addIndexChangeListener:function(S,n,K){var H=this;H._39I||(H._39I=new Jn),H._39I.add(S,n,K)},removeIndexChangeListener:function(C,m){this._39I.remove(C,m)},prepareRemove:function(R){jc(R)&&(R.setSource(q),R.setTarget(q)),R._70O&&R._70O.toList().each(this.remove,this),R._69O&&R._69O.toList().each(function(K){K.setHost(q)}),R._host&&R.setHost(q)},onAdded:function(V){this.isAutoAdjustIndex()&&this.adjustIndex(V)},onDataPropertyChanged:function(a,q){gg[q.property]&&this.isAutoAdjustIndex()&&this.adjustIndex(a)},isAdjustable:function(s){return $p(s)||jc(s)},isAdjustedToBottom:function(L){return jk(L)?L.isExpanded()&&xr(L):!1},adjustIndex:function(Z){var y=this;this.isHierarchicalRendering()||(y.isAdjustedToBottom(Z)?(y.sendToBottom(Z),Z.eachChild(y.adjustIndex,y)):y.sendToTop(Z))},sendToTop:function(V){var I=this;if(I.contains(V)&&I.isAdjustable(V)){var N=I._datas;if(V!==N.get(I.size()-1)){var J=N.indexOf(V);N.removeAt(J),N.add(V),I._76I(V,J,I.size()-1)}if(jc(V)){var v=V._40I;v&&!I.isAdjustedToBottom(v)&&I.sendToTop(v),v=V._41I,v&&!I.isAdjustedToBottom(v)&&I.sendToTop(v)}V._69O&&V._69O.each(function(g){g.isRelatedTo(V)||$p(V)&&g.isLoopedHostOn(V)||I.sendToTop(g)}),V.ISubGraph||(!jk(V)||V.isExpanded())&&V._adjustChildrenToTop&&V.eachChild(function(A){jc(A)||I.sendToTop(A)})}},sendToBottom:function(A,C){var u=this;if(A!==C&&u.contains(A)&&u.isAdjustable(A)&&(!C||u.contains(C))){var Y=u._datas,$=Y.remove(A),R=C?u._datas.indexOf(C):0;if(Y.add(A,R),$!==R){u._76I(A,$,R);var c=A._parent;!c||c.ISubGraph||jc(c)||u.sendToBottom(A._parent,A)}}}}),As(ki,{ms_edit:function(w){w._46O=function(S){var U=this,b=U.gv.dm(),A=b.getHistoryManager(),c=U._index,F=U._89I,$=U._node,B=U._shape,I=U._edge,r=U._77I;$&&F?(this.fi({kind:"endEditRect",event:S,data:$,direction:F}),A&&A.endInteraction()):B&&c>=0?(U.fi({kind:"endEditPoint",event:S,data:B,index:c}),A&&A.endInteraction()):I&&c>=0?(U.fi({kind:"endEditPoint",event:S,data:I,index:c}),A&&A.endInteraction()):r&&(U.fi({kind:"endEditRotation",event:S,data:r}),A&&A.endInteraction())},w._78I=function(M){var r=this;r.autoScroll(M);var u=r.gv.lp(M),W=r._index,C=r._89I,p=r._node,e=r._shape,x=r._edge,U=r._77I;if(p&&C)r._80O(u),r.fi({kind:"betweenEditRect",event:M,data:p,direction:C});else if(e&&W>=0)u.e=e.getPoints().get(W).e,e.setPoint(W,u),r.fi({kind:"betweenEditPoint",event:M,data:e,index:W});else if(x&&W>=0){var D=x.s(ip);u.e=D.get(W).e,D.set(W,u),x.fp(ip,q,D),r.fi({kind:"betweenEditPoint",event:M,data:x,index:W})}else if(U){var J=U.p(),H=U.getScale(),t=h+Q(u.y-J.y,u.x-J.x);H.y<0&&(t+=F),E(t)<.04&&(t=0),U.setRotation(t),r.fi({kind:"betweenEditRotation",event:M,data:U})}},w._80O=function(g){var _=this,W=_._node,z=_._rect,D=z.x,Q=z.y,R=z.width,r=z.height,Y=_._89I,y=_._anchor,m=_._matrix,g=m.tfi(g);"northwest"===Y?z=tq(g,{x:D+R,y:Q+r}):Y===ni?z=tq({x:D,y:g.y},{x:D+R,y:Q+r}):"northeast"===Y?z=tq({x:D,y:g.y},{x:g.x,y:Q+r}):Y===so?z=tq({x:g.x,y:Q},{x:D+R,y:Q+r}):Y===Kj?z=tq({x:D,y:Q},{x:g.x,y:Q+r}):"southwest"===Y?z=tq({x:g.x,y:Q},{x:D+R,y:g.y}):"south"===Y?z=tq({x:D,y:Q},{x:D+R,y:g.y}):"southeast"===Y&&(z=tq({x:D,y:Q},g)),W.setPosition(m.tf(z.x+z.width*y.x,z.y+z.height*y.y)),W.setWidth(z.width),W.setHeight(z.height)},w._80I=function(H,_,k,F){var P=this,G=P.gv._zoom,C=(P.gv.getEditPointSize()+2)/G;return If({x:_-C/2,y:k-C/2,width:C,height:C},H)?(P._89I!==F&&(P._89I=F),!0):!1},w._79I=function(m,Z,V){var Y=this,c=Y.gv,n=Z?c.getDataUI(Z):q,u=n?n._55O:q;if(u){var R,t,F,K,r=c._zoom,N=(c.getEditPointSize()+2)/r,$=c.lp(m);if($p(Z)){if(u._56O&&$p(Z)&&(t=u._98o,If({x:t.x-N/2,y:t.y-N/2,width:N,height:N},$)))return Y._77I=Z,V&&Y.fi({kind:"beginEditRotation",event:m,data:Z}),Y.setCursor("crosshair"),!0;if(u._43O&&Z instanceof gd)for(F=Z.getPoints(),R=F.size()-1;R>=0;R--)if(t=F.get(R),If({x:t.x-N/2,y:t.y-N/2,width:N,height:N},$))return Y._index=R,Y._shape=Z,V&&Y.fi({kind:"beginEditPoint",event:m,data:Z,index:R}),Y.setCursor("crosshair"),!0;if(u._42O)for(var A=Z.getEditControlPoints(),o=["northwest",-1,-1,so,-1,0,"southwest",-1,1,"south",0,1,"southeast",1,1,Kj,1,0,"northeast",1,-1,ni,0,-1],R=0,K=A.length;K>R;R++){var h=o[3*R],W=A[R];if(Y._80I($,W.x,W.y,h)){Y._node=Z;var U=Z.getWidth(),J=Z.getHeight(),w=Z.getAnchor();Y._rect={x:-U*w.x,y:-J*w.y,width:U,height:J},Y._anchor=w,Y._matrix=Z.getMatrix();var l=Z.getRotation(),D=z(l),I=M(l),p=o[3*R+1]*$m(Z.getScale().x),G=o[3*R+2]*$m(Z.getScale().y),O=Math.atan2(-I*p-D*G,D*p-I*G),P=(Math.round(O/(Math.PI/4))+8)%8,H=[Ub,"nesw-resize",Ck,"nwse-resize",Ub,"nesw-resize",Ck,"nwse-resize"][P];return Y.setCursor(H),V&&Y.fi({kind:"beginEditRect",event:m,data:Z,direction:Y._89I}),!0}}}if(u._43O&&jc(Z)&&Z.s(Vd)===Pf&&(F=Z.s(ip)))for(R=F.size()-1;R>=0;R--)if(t=F.get(R),If({x:t.x-N/2,y:t.y-N/2,width:N,height:N},$))return Y._index=R,Y._edge=Z,V&&Y.fi({kind:"beginEditPoint",event:m,data:Z,index:R}),Y.setCursor("crosshair"),!0}return!1}},ms_gv:function(u){u._currentSubGraph=q,u.upSubGraph=function(){this.setCurrentSubGraph(yf(this._currentSubGraph))},u.isVisible=function(Y){var r=this;if(yf(Y)!==r._currentSubGraph)return!1;if(jc(Y)){var f=Y._40I,U=Y._41I;if(!f||!U)return!1;if(!(Y.s("edge.independent")||r.isVisible(f)&&r.isVisible(U)))return!1;if(Y.isEdgeGroupHidden())return!1}else for(var O=Y._parent;O&&!O.ISubGraph;){if(jk(O)&&(!O.isExpanded()||!r.isVisible(O)))return!1;O=O._parent}if(Y._parent instanceof bn&&!r.isVisible(Y._parent))return!1;if(Y._refGraph instanceof Xj&&!r.isVisible(Y._refGraph))return!1;if(r instanceof ig){if(!Y.s("3d.visible"))return!1}else{var p=r.getLayersInfo();if(p){var z=p[Y._layer];if(z&&z.visible===!1)return!1}if(!Y.s("2d.visible"))return!1}return r._visibleFunc?r._visibleFunc(Y):!0},u.handleSelectionChange=function(E){var r=this;E.datas.each(function(i){r.invalidateData(i);var H=i._parent;jk(H)&&$p(i)&&i.s(_r)&&(r.invalidateData(H),H._49I&&H._49I.each(function(h){r.invalidateData(h)}))}),r.onSelectionChanged(E)},u.onSelectionChanged=function(i){var s=this,W=s.sm();if(1===W.size()&&("set"===i.kind||"append"===i.kind)){var L=W.ld();s.isAutoMakeVisible()&&s.makeVisible(L),s.adjustIndex&&s._dataModel.isAutoAdjustIndex()&&s.adjustIndex(L)}},u.makeVisible=function(e){if(e){var V=this,$=V.getDataUI?V.getDataUI(e):V.getData3dUI(e);if($){var L=e,D=yf(e);for(D!==V._currentSubGraph&&V.setCurrentSubGraph(D);(L=L._parent)&&L!==D;)jk(L)&&L.setExpanded(!0);V._23I=e,V.iv()}}},u.getLabel=function(w){var _=w.getStyle(Te);return _===m?w.getName():_},u.getLabelBackground=function(s){return s.getStyle("label.background")},u.getLabelColor=function(K){return K.getStyle("label.color")},u.getLabel2=function(R){return R.getStyle("label2")},u.getLabel2Background=function(E){return E.getStyle("label2.background")},u.getLabel2Color=function(z){return z.getStyle("label2.color")},u.getNote=function(Y){return Y.getStyle(Wm)},u.getNoteBackground=function(a){return a.getStyle("note.background")},u.getNote2=function(T){return T.getStyle(pl)},u.getNote2Background=function(g){return g.getStyle("note2.background")},u.handleClick=function(H,v,B){var h=this;v?(h.fi({kind:"clickData",event:H,data:v,part:B}),h.onDataClicked(v,H)):(h.fi({kind:"clickBackground",event:H}),h.onBackgroundClicked(H))},u.handleDoubleClick=function(h,d,J){var E=this;rp(h)&&(d?(E.fi({kind:"doubleClickData",event:h,data:d,part:J}),E.onDataDoubleClicked(d,h,J),E.checkDoubleClickOnNote(h,d,J)||E.checkDoubleClickOnRotation&&E.checkDoubleClickOnRotation(h,d,J)||(jc(d)?E.onEdgeDoubleClicked(d,h,J):d.ISubGraph?E.onSubGraphDoubleClicked(d,h,J):jk(d)?E.onGroupDoubleClicked(d,h,J):d.IDoorWindow?E.onDoorWindowDoubleClicked(d,h,J):d.ICSGBox&&E.onCSGBoxDoubleClicked(d,h,J))):(E.fi({kind:"doubleClickBackground",event:h}),E.onBackgroundDoubleClicked(h)))},u.onSubGraphDoubleClicked=function(B){this.setCurrentSubGraph(B)},u.onEdgeDoubleClicked=function(i,y){i.ISubGraph&&!Sn(y)?this.setCurrentSubGraph(i):i.s("edge.toggleable")&&i.toggle()},u.onGroupDoubleClicked=function(s){s.s("group.toggleable")&&s.toggle()},u.onDoorWindowDoubleClicked=function(I){I.s("dw.toggleable")&&I.toggle(!0)},u.onCSGBoxDoubleClicked=function(x,p){var O=this;if(O instanceof ig){var U=O.getHitFaceInfo(p);U&&U.face&&x.s(U.face+".toggleable")&&x.toggleFace(U.face,!0)}},u.onBackgroundClicked=function(){},u.onBackgroundDoubleClicked=function(){this.upSubGraph()},u.onDataClicked=function(){},u.onDataDoubleClicked=function(){},u.onAutoLayoutEnded=function(){},u.onMoveEnded=function(){},u.onPanEnded=function(){},u.onPinchEnded=function(){},u.onRectSelectEnded=function(){},u.onZoomEnded=function(){}},ms_icons:function(X){X.getRotation=function(z){return z==q?0:z},X._15O=function(){var M=this,e=M.s(zj);if(e){var v=M,k=M.data||M._data,n=M._38o={icons:e,rects:{}};for(var T in e){var j=e[T],N=oj(j.shape3d,k,v);if(!(oj(j.visible,k,v)===!1||oj(j.for3d,k,v)&&!M.I3d||N&&!M.I3d)){var $=N?[N]:oj(j.names,k,v),I=$?$.length:0,l=oj(j.position,k,v)||3,b=oj(j.offsetX,k,v)||0,z=oj(j.offsetY,k,v)||0,x=oj(j.direction,k,v)||Kj,F=oj(j.gap,k,v),i=F!=q?F:1,H=oj(j.rotation,k,v),y=oj(j.keepOrien,k,v),J=oj(j.rotationFixed,k,v)?H:M.getRotation(H,y,l),t=q,R=n.rects[T]=new Array(I);R.rotation=J;for(var c=0;I>c;c++){var X,p,L,a,G=$[c];if(N)L=0,a=0;else{var S=Si(G);L=oj(j.width,k,v),a=oj(j.height,k,v),L==q&&(L=re(S,k)),a==q&&(a=Vo(S,k))}if(t?x===Kj?b+=L/2:x===so?b-=L/2:x===ni?z-=a/2:z+=a/2:t={width:L,height:a},M.I3d){var Q=-L/2,E=-a/2;p={width:L,height:a,mat:M._16O(oj(j.autorotate,k,v),l,t,oj(j.face,k,v)||fj,oj(j.t3,k,v),oj(j.r3,k,v),oj(j.rotationMode,k,v),b,z),vs:new aj([Q,-E,0,Q,-E-a,0,Q+L,-E-a,0,Q+L,-E,0])}}else X=M.getPosition(l,b,z,t,oj(j.positionFixed,k,v)),p={x:X.x-L/2,y:X.y-a/2,width:L,height:a},M._68o(p,J);R[c]=p,x===Kj?b+=L/2+i:x===so?b-=L/2+i:x===ni?z-=a/2+i:z+=a/2+i}}}}}}});var tn={1:1,2:1,6:1,9:1,10:1,14:1,15:1,16:1,21:1,22:1,26:1,29:1,30:1,34:1,36:1,38:1,40:1,42:1,45:1,50:1,52:1,54:1},Bj={3:1,7:1,11:1,17:1,23:1,27:1,31:1,44:1,46:1,47:1,49:1},tr={translateX:1,translateY:1,zoom:1,scrollBarVisible:1},gg={sourceAgent:1,targetAgent:1,expanded:1,parent:1,host:1},mf={position:1,width:1,height:1,expanded:1,rotation:1,anchor:1,scale:1,"s:edge.points":1},yl={"edge.type":1,"edge.group":1},Df={rotation:1,rotationX:1,rotationZ:1},ph={position:1,width:1,height:1,anchor:1,scale:1,"s:grid.row.count":1,"s:grid.column.count":1,"s:grid.row.percents":1,"s:grid.column.percents":1,"s:grid.border":1,"s:grid.border.left":1,"s:grid.border.right":1,"s:grid.border.top":1,"s:grid.border.bottom":1,"s:grid.gap":1},Ml={"attach.row.index":1,"attach.column.index":1,"attach.row.span":1,"attach.column.span":1,"attach.padding":1,"attach.padding.left":1,"attach.padding.right":1,"attach.padding.top":1,"attach.padding.bottom":1,"attach.index":1,"attach.offset":1,"attach.offset.relative":1,"attach.offset.opposite":1,"attach.gap":1,"attach.gap.relative":1,"attach.thickness":1},di={shape:1,thickness:1,position:1,anchor:1,scale:1},cm=function(x,e){if(!x||!jk(e)||e.isEmpty())return!1;for(x=x._parent;jk(x);){if(x===e)return!0;x=x._parent}return!1},xd=function(U,o){if(!U||!_l(o)||o.isEmpty())return!1;for(U=U._parent;_l(U);){if(U===o)return!0;U=U._parent}return!1},yf=function(N){if(!N)return q;if(jc(N)){var _=N._40I,h=N._41I;if(!_||!h)return q;var m=yf(_),T=yf(h);return m===T?m:q}for(var F=N._parent;jc(F)&&!F.ISubGraph;)F=F._parent;return F?F.ISubGraph?F:yf(F):q},Vq=function(Q,a,S,q){var A=a.getStyle(S)*q;A&&Uq(Q,A),A=a.getStyle(S+".left")*q,A&&(Q.x-=A,Q.width+=A),A=a.getStyle(S+".right")*q,A&&(Q.width+=A),A=a.getStyle(S+".top")*q,A&&(Q.y-=A,Q.height+=A),A=a.getStyle(S+".bottom")*q,A&&(Q.height+=A),Q.width<0&&(Q.width=-Q.width,Q.x-=Q.width),Q.height<0&&(Q.height=-Q.height,Q.y-=Q.height)},xr=function(B){for(var Y,b=0,i=B.size();i>b;b++)if(Y=B.getChildAt(b),$p(Y)&&xr(Y))return!0;return B.hasAgentEdges()},Rn=function(c){if(!c)return q;for(var H=c._parent;jk(H);){if(!jk(H._parent))return H.isExpanded()?c:H;H.isExpanded()||(c=H),H=H._parent}return c},rc=function(I,H){if(!I||!H)return q;var z,x,P,S=yf(I),m=yf(H);if(S!==m){for(;m&&S!==m;)m=yf(m);if(S===m)return I;z=new eb,z.add(I,0);for(var G=I._parent;$p(G)&&!H.isDescendantOf(G);)z.add(G,0),G=G._parent;for(P=z.size(),x=0;P>x;x++){var t=z.get(x);if(jk(t)&&!t.isExpanded())return t;if(t.ISubGraph)return t}return I}return I},Ji=function(p){if(p.isLooped())return p._source;var D=Rn(p._source),y=Rn(p._target);return D===y?p._source:rc(D,y)},ss=function(Y){if(Y.isLooped())return Y._target;var c=Rn(Y._source),R=Rn(Y._target);return c===R?Y._target:rc(R,c)},$g=function(D,E,I,B,C,y,Q){if(!E)return q;var T,P=E.getRotation?E.getRotation():0;if(y!==m||Q!==m)if(y=y===m?.5:y,Q=Q===m?.5:Q,P&&!sn(E,D)){var N=E.getPosition(),e=E.getWidth(),L=E.getHeight(),x=E.getAnchor(),o=E.getScale(),X=new pn(P,N.x,N.y,o.x,o.y);I=X.tf((y-x.x)*e,(Q-x.y)*L)}else T=Sd(D,E),I={x:T.x+y*T.width,y:T.y+Q*T.height};else I=_m(I,Sd(D,E));if(P){var j=z(P),p=M(P),k=B*j-C*p;C=B*p+C*j,B=k}return I.x+=B,I.y+=C,I},Zg=function(i,r){if(!i||!r)return q;var w,I,b,t,U,V;if(i===r){if(t=i.getLoopedEdges(),!t)return q;t=new eb(t)}else{if(U=i.getAgentEdges(),V=r.getAgentEdges(),!U||!V)return q;for(I=U.size(),w=0;I>w;w++)b=U.get(w),V.contains(b)&&(t||(t=new eb),t.add(b))}if(t)for(w=0;w<t.size();w++)b=t.get(w),b.getStyle(Vd)===Pf&&(b._22I(q),t.removeAt(w),w--);return t},xn=function(i,O){var V=Zg(i,O);if(V&&!V.isEmpty()){if(1===V.size())return V.get(0)._22I(q),void 0;var G=new eb,u=new eb;V.each(function(u){var e=u.s("edge.group");G.contains(e)||G.add(e)}),G.sort(),G.each(function(K){u.add(new s.EdgeGroup(V.toList(function(j){return K===j.s("edge.group")}),u))}),u.each(function(P){P.each(function(i){i._22I(P)})})}},om=function(b,W){if(W){var A=W.rect,g=W.color,H=W.rotation,K=W.labelWidth,$=W.background,w=W.opacity,y=W.scale,G=y!=q&&1!==y;if(w!=q){var d=b.globalAlpha;b.globalAlpha*=w}if(H||G){b.save();var x=A.x+A.width/2,R=A.y+A.height/2;Uf(b,x,R),H&&ck(b,H),G&&b.scale(y,y),Uf(b,-x,-R)}if($&&Iq(b,A.x,A.y,A.width,A.height,$),K){var u=A.width,B=b.createLinearGradient(A.x,A.y,A.x+u,A.y);B.addColorStop(0,g),B.addColorStop(.9,g),B.addColorStop(1,mh),g=B,A.width=K}iq(b,W.ss,A,W.font,g,W.align),K&&(A.width=u),(H||G)&&b.restore(),w!=q&&(b.globalAlpha=d)}},Jm=function(w,z){if(z){var m=z.rect,B=m.x,L=m.y,x=m.width,D=m.height,j=z.background,O=z.backgroundImage,M=z.borderWidth,t=z.borderColor,S=z.labelWidth,I=z.opacity,K=z.scale,U=K!=q&&1!==K;if(I!=q){var P=w.globalAlpha;w.globalAlpha*=I}if(U){w.save();var u=m.x+m.width/2,R=m.y+m.height/2;Uf(w,u,R),w.scale(K,K),Uf(w,-u,-R)}if(z.expanded){var o=c(8,x/4),v=L+D-8;if(w.fillStyle=j,w.beginPath(),w.moveTo(B,L),w.lineTo(B,v),w.lineTo(B+x/2,v),w.lineTo(B+x/2,L+D),w.lineTo(B+x/2+o,v),w.lineTo(B+x,v),w.lineTo(B+x,L),w.closePath(),w.fill(),M&&(w.lineWidth=M,w.lineJoin="round",w.lineCap="round",t?(w.strokeStyle=t,w.stroke()):(w.strokeStyle=jj(j),w.beginPath(),w.moveTo(B+x,L),w.lineTo(B+x,v),w.lineTo(B+x/2+o,v),w.lineTo(B+x/2,L+D),w.stroke(),w.strokeStyle=xs(j),w.beginPath(),w.moveTo(B+x,L),w.lineTo(B,L),w.lineTo(B,v),w.lineTo(B+x/2,v),w.lineTo(B+x/2,L+D),w.stroke())),O)hn(w,Si(O),Il,m.x,m.y,m.width,m.height-8,z.data,z.view);else{if(m.height-=8,j=z.color,S){var i=x,d=w.createLinearGradient(B,L,B+i,L);d.addColorStop(0,j),d.addColorStop(.9,j),d.addColorStop(1,mh),j=d,m.width=S}iq(w,z.ss,m,z.font,j,z.align),S&&(m.width=i),m.height+=8}}else if(z.icon)Ag(w,Si(z.icon),B,L,x,D,z.data,z.view);else{var y=x/2;M&&(w.lineWidth=M,w.lineJoin="round",w.lineCap="round",w.strokeStyle=t?t:jj(j),w.beginPath(),w.arc(B+y,L+y,y,h,1.6*F,!0),w.moveTo(B+y,L+D),w.lineTo(B+x-y/5,L+y),w.stroke(),w.strokeStyle=t?t:xs(j),w.beginPath(),w.arc(B+y,L+y,y,1.6*F,h,!0),w.moveTo(B+y,L+D),w.lineTo(B+y/5,L+y),w.stroke()),w.fillStyle=j,w.beginPath(),w.arc(B+y,L+y,y,0,W,!0),w.moveTo(B+y,L+D),w.lineTo(B+x-y/5,L+y),w.lineTo(B+y/5,L+y),w.closePath(),w.fill(),w.fillStyle=z.color,w.beginPath(),w.arc(B+y,L+y,y/3,0,W,!0),w.fill()}U&&w.restore(),I!=q&&(w.globalAlpha=P)}},xj=function(w,b){return b>2*w?w:b/2},mr=function(d,P,q,E){if(!d||!P)return 0;var r=Q(P.y-d.y,P.x-d.x);return q||(r=P.x<d.x?r+F:r),r+E},Dd=function(h,G,w,q,$,i,s){s&&(h.x>G.x||h.x===G.x&&h.y>G.y)&&(w=be[w],$=-$);var K=_m(w,{x:0,y:0,width:Yh(h,G),height:0},i);return K.x+=q,K.y+=$,K=new pn(Q(G.y-h.y,G.x-h.x)).tf(K),K.x+=h.x,K.y+=h.y,K},ee=function(Z,X,M,d,o){if(Z._19Q=!0,!M.getEdgeGroup())return d?M.s("edge.gap"):0;var O,S=0,G=0,D=0;if(M.getEdgeGroup().getSiblings().each(function(n){n.each(function(y){if(X.isVisible(y)&&y.s(Vd)==o){var U=y.s("edge.gap");O?(G+=D/2+U/2,D=U):(O=y,D=U),y===M&&(S=G)}})}),d)return G-S+D;var h=S-G/2;return O&&M._40I!==O._40I&&(Z._19Q=!1),h},Pk=function(){var h=function(Z){var d=[];return Z.forEach(function(b){d.push({x:b.x,y:b.y}),d.push({x:b.x+b.width,y:b.y+b.height}),d.push({x:b.x+b.width,y:b.y}),d.push({x:b.x,y:b.y+b.height})}),d};return function(a,l,B){if("oval"===a){var j=0,p=B.height/B.width,$=p*p,q=B.x+B.width/2,Z=B.y+B.height/2,X=h(l);X.forEach(function(u){var p=u.x-q,d=u.y-Z,x=p*p+d*d/$;x>j&&(j=x)}),j=x(j);var _=p*j;return{x:q-j,y:Z-_,width:2*j,height:2*_}}if("circle"===a){var F=0,q=B.x+B.width/2,Z=B.y+B.height/2,X=h(l);return X.forEach(function(A){var G=A.x-q,R=A.y-Z,u=G*G+R*R;u>F&&(F=u)}),F=x(F),{x:q-F,y:Z-F,width:2*F,height:2*F}}return"roundRect"===a?(Uq(B,c(B.width,B.height)/16),B):B}}(),wm=s.graph={},tg=function(e,V,N){Xd(p+".graph."+e,V,N)};s.layout={};var Sg={comps:[{type:hb,points:[85,50,70,115,100,71,86,107,88,49,56,49,99,104,74,88,49,117,100,47,116,47,122,69,111,111,98,98,108,43,54,89,83,101,116,75,83,55,109,86,81,121,85,61],borderWidth:1,borderColor:q}]};Sg[no]=Sg[qo]=160,Xm("node_image",Tm(30,30,[{type:Pg,rect:[4,5,22,16],gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[2,3,26,20],borderWidth:1,borderColor:oe},{type:Pg,rect:[11,23,8,4],background:oe},{type:Pg,rect:[6,27,18,2],background:oe}])),Xm("node_icon",Tm(16,16,[{type:Pg,rect:[2,2,12,10],gradient:Kg,gradientColor:qi,background:oe},{type:Oi,rect:[2,2,12,10],width:1,color:oe},{type:Pg,rect:[6,12,4,2],background:oe},{type:Pg,rect:[4,14,8,1],background:oe}])),Xm("block_icon",Tm(16,16,[{type:Oi,rect:[1,1,14,14],width:1,color:oe}])),Xm("group_image",Tm(66,39,[{type:Pg,rect:[44.3,18,18.1,12.8],gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[3.3,17.8,18.1,12.8],gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[15.8,3.2,33.5,26.4],borderWidth:1,borderColor:oe,gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[26.2,29.4,12.8,4.2],background:oe},{type:Pg,rect:[21.3,33.5,22.5,2.3],background:oe},{type:Pg,rect:[5.3,32.7,14.1,2.1],background:oe},{type:Pg,rect:[9,30.4,6.7,2.4],background:oe},{type:Pg,rect:[50,30.7,6.7,2.4],background:oe},{type:Pg,rect:[46.3,33,14.1,2.1],background:oe}])),Xm("group_icon",Tm(16,16,[{type:Pg,rect:[4,12,4,2],background:oe},{type:Pg,rect:[2,13,8,1],background:oe},{type:Pg,rect:[12,12,2,1],background:oe},{type:Pg,rect:[11,13,4,1],background:oe},{type:Pg,rect:[10,7,6,5],gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[1,2,10,10],gradient:Kg,gradientColor:qi,background:oe},{type:Oi,rect:[1,2,10,10],width:1,color:oe}])),Xm("refGraph_icon",Tm(16,16,[{type:"shape",borderWidth:1,borderColor:oe,borderCap:"round",rotation:.7854,points:[12.5502,6.7981,12.5502,6.7981,12.5502,4.8181,12.5502,3.7981,12.5502,2.7781,11.36687,1.7981,10.0502,1.7981,8.73354,1.7981,7.5502,2.8181,7.5502,3.7981,7.5502,4.55989,7.5502,7.79805,7.5502,7.79805,7.5502,7.79805,7.5502,9.7981,10.0502,9.7981],segments:[1,4,4,4,4,4]},{type:"shape",borderWidth:1,borderColor:oe,borderCap:"round",rotation:-2.35619,points:[8.4498,11.2019,8.4498,11.2019,8.4498,9.2219,8.4498,8.2019,8.4498,7.1819,7.26646,6.2019,5.9498,6.2019,4.63313,6.2019,3.4498,7.2219,3.4498,8.2019,3.4498,8.9637,3.4498,12.20186,3.4498,12.20186,3.4498,12.20186,3.4498,14.2019,5.9498,14.2019],segments:[1,4,4,4,4,4]}])),Xm("edge_icon",Tm(16,16,[{type:Pg,rect:[2.1,6.9,11.5,2.6],rotation:-.79,gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[10.8,1,4,4],background:oe},{type:Pg,rect:[1,11,4,4],background:oe}])),Xm("subGraph_image",Tm(72,45,[{type:hb,points:[9,42,.3,38.4,2.4,28.8,5.7,21.6,11.7,22.5,11.7,15.9,16.8,13.8,21.6,12,24.3,15.9,27.9,3,42.3,2.1,59.4,4.5,57.3,18.3,67.5,18.9,69.6,27.3,69.9,38.4,64.2,41.4],segments:[1,3,3,3,3,3,3,3,3],gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[29.6,30.7,3.6,1.8],background:oe},{type:Pg,rect:[28.4,32.3,6,1.2],background:oe},{type:Pg,rect:[37.3,32,10.8,1.8],background:oe},{type:Pg,rect:[39.1,29.9,7.2,2.3],background:oe},{type:Pg,rect:[26.6,23.7,9.6,7.2],gradient:Kg,gradientColor:qi,background:oe},{type:Pg,rect:[34.3,16.8,16.8,13.2],borderWidth:1,borderColor:oe,gradient:Kg,gradientColor:qi,background:oe}])),Xm("subGraph_icon",Tm(17,17,[{type:hb,points:[2.2,14.6,.2,11.9,.8,8.8,1.8,5.9,5.6,7.4,3.8,1.6,10.3,3,14.5,4.2,12.2,7.5,18.9,7.2,14.5,14.5],segments:[1,3,3,3,3,3],gradient:Kg,gradientColor:qi,background:oe}])),Xm("shape_icon",Tm(16,16,[{type:hb,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],background:oe}])),Xm("polyline_icon",Tm(16,16,[{type:hb,points:[1.5,1,8.4,1,8.4,7.2,14.6,7.1,14.6,14.9,1.5,14.9,1.5,1],borderWidth:1,borderColor:oe},Wk(7.5,.4),Wk(7.5,6.3),Wk(13.6,6.3),Wk(13.6,14),Wk(.7,13.9),Wk(.7,.3)])),Xm("grid_icon",Tm(16,16,[{type:Pg,rect:[1,1,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[6,1,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[11,1,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[11,6,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[6,6,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[1,6,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[11,11,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[6,11,4,4],background:oe,gradient:Kg,gradientColor:qi},{type:Pg,rect:[1,11,4,4],background:oe,gradient:Kg,gradientColor:qi}])),Xm("light_icon",Tm(16,16,[{type:"rect",rect:[6,9,5,5],borderWidth:1,borderColor:oe},{type:"circle",rect:[1,1,15,10],borderWidth:1,borderColor:oe,gradient:Kg,gradientColor:qi,background:{func:function(U){var n=U?U.s(fn):q;return Nc(n)?"rgb("+Y(255*n[0])+","+Y(255*n[1])+","+Y(255*n[2])+")":n||oe}}}])),Xm("text_icon",Tm(16,16,[{type:"shape",points:[3,3,13,3,8,3,8,14],segments:[1,2,1,2],borderWidth:1,borderColor:oe}])),Xm("border_image",{fitSize:!0,comps:[{type:"border",relative:!0,rect:[0,0,1,1],color:{func:"style@border_color"},width:{func:"style@border_width"}}]}),Xm("columnChart_image",{fitSize:!0,comps:[{type:{func:"style@chart.type"},relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"}}]}),Xm("lineChart_image",{fitSize:!0,comps:[{type:"lineChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},series:{func:"style@chart.series"},minValue:{func:"style@chart.min.value"},maxValue:{func:"style@chart.max.value"},linePoint:{func:"style@chart.line.point"},lineWidth:{func:"style@chart.line.width"},line3d:{func:"style@chart.line.3d"}}]}),Xm("pieChart_image",{fitSize:!0,comps:[{type:"pieChart",relative:!0,rect:[0,0,1,1],label:{func:"style@chart.label"},labelColor:{func:"style@chart.label.color"},labelFont:{func:"style@chart.label.font"},hollow:{func:"style@chart.hollow"},startAngle:{func:"style@chart.start.angle"},values:{func:"style@chart.values"},colors:{func:"style@chart.colors"}}]});var fp=function(R,$){for(var _=R.vertices,W=0;W<_.length;W++){var f=_[W],N=f.y;f.y=f.z,f.z=-N,$&&(f.y+=$)}},lr=function(N){for(var o,l,Z,R,W,z,f=[],_=[],X=[],$=N.faces,m=0,d=0,G=0,t=$.length;t>m;m++,d+=6,G+=9){var B=$[m];1===B.i?(o||(o=[],l=[],Z=[]),Uj(B,m,d,G,N,o,Z,l)):2===B.i?(R||(R=[],W=[],z=[]),Uj(B,m,d,G,N,R,z,W)):Uj(B,m,d,G,N,f,X,_)}return{vs:f,uv:_,ns:X,top_vs:o,top_uv:l,top_ns:Z,bottom_vs:R,bottom_uv:W,bottom_ns:z}},Uj=function(M,c,L,C,l,e,k,X){var O=l.vertices,v=l.faceVertexUvs,U=O[M.a],f=O[M.b],o=O[M.c];e[C]=U.x,e[C+1]=U.y,e[C+2]=U.z,e[C+3]=f.x,e[C+4]=f.y,e[C+5]=f.z,e[C+6]=o.x,e[C+7]=o.y,e[C+8]=o.z;var u=M.vertexNormals;if(3===u.length){var Y=u[0],y=u[1],Q=u[2];k[C]=Y.x,k[C+1]=Y.y,k[C+2]=Y.z,k[C+3]=y.x,k[C+4]=y.y,k[C+5]=y.z,k[C+6]=Q.x,k[C+7]=Q.y,k[C+8]=Q.z}else{var R=M.normal;k[C]=R.x,k[C+1]=R.y,k[C+2]=R.z,k[C+3]=R.x,k[C+4]=R.y,k[C+5]=R.z,k[C+6]=R.x,k[C+7]=R.y,k[C+8]=R.z}var a=v[0][c][0],A=v[0][c][1],V=v[0][c][2];X[L]=a.x,X[L+1]=a.y,X[L+2]=A.x,X[L+3]=A.y,X[L+4]=V.x,X[L+5]=V.y},ym=function(w){var n=w._lineModel;if(n)return n;var p;p=Nc(w)?w:[w];var W,U,T,z,b,D,u,y,O,f,k,N,Z=["","top","bottom"];for(n=[],W=0,U=p.length;U>W;W++)for(O=p[W],T=0,z=Z.length;z>T;T++)if(u=O[Z[T]+"vs"]){y=O[Z[T]+"is"],D=y?y.length:u.length/3;for(var b=0;D>b;b+=3)y?(f=y[b],k=y[b+1],N=y[b+2]):(f=b,k=b+1,N=b+2),f*=3,k*=3,N*=3,n.push(u[f],u[f+1],u[f+2],u[k],u[k+1],u[k+2],u[k],u[k+1],u[k+2],u[N],u[N+1],u[N+2],u[N],u[N+1],u[N+2],u[f],u[f+1],u[f+2])}return w._lineModel=n,n},sl=function(V,T,u,G,y,c,e,z,C){u==q&&(u=!0),G==q&&(G=!0),e==q&&(e=1),z==q&&(z=0);var M=new vf;return _f(M,V,T,C),M=M.toShapes(),lr(new Nb(M,{top:u,bottom:G,curveSegments:y,amount:e,repeatUVLength:c},-e/2+z))},xh=function(e,x){this.x=e||0,this.y=x||0};xh.prototype={constructor:xh,add:function(p){return this.x+=p.x,this.y+=p.y,this},sub:function(a){return this.x-=a.x,this.y-=a.y,this},equals:function(e){return e.x===this.x&&e.y===this.y},multiplyScalar:function(J){return this.x*=J,this.y*=J,this},distanceTo:function(D){return x(this.distanceToSquared(D))},distanceToSquared:function(Z){var V=this.x-Z.x,C=this.y-Z.y;return V*V+C*C},clone:function(){return new xh(this.x,this.y)}};var gj=function(I,M,q){this.x=I||0,this.y=M||0,this.z=q||0};gj.prototype={constructor:gj,set:function(D,S,t){return this.x=D,this.y=S,this.z=t,this},setY:function(s){return this.y=s,this},copy:function(T){return this.x=T.x,this.y=T.y,this.z=T.z,this},add:function(V){return this.x+=V.x,this.y+=V.y,this.z+=V.z,this},addVectors:function(E,N){return this.x=E.x+N.x,this.y=E.y+N.y,this.z=E.z+N.z,this},sub:function(M){return this.x-=M.x,this.y-=M.y,this.z-=M.z,this},subVectors:function(T,K){return this.x=T.x-K.x,this.y=T.y-K.y,this.z=T.z-K.z,this},multiplyScalar:function(x){return this.x*=x,this.y*=x,this.z*=x,this},applyMatrix4:function(_){var e=this.x,T=this.y,r=this.z,o=_.elements;return this.x=o[0]*e+o[4]*T+o[8]*r+o[12],this.y=o[1]*e+o[5]*T+o[9]*r+o[13],this.z=o[2]*e+o[6]*T+o[10]*r+o[14],this},divideScalar:function(N){if(0!==N){var U=1/N;this.x*=U,this.y*=U,this.z*=U}else this.x=0,this.y=0,this.z=0;return this},dot:function(D){return this.x*D.x+this.y*D.y+this.z*D.z},length:function(){return x(this.x*this.x+this.y*this.y+this.z*this.z)},normalize:function(){return this.divideScalar(this.length())},cross:function(g){var A=this.x,J=this.y,S=this.z;return this.x=J*g.z-S*g.y,this.y=S*g.x-A*g.z,this.z=A*g.y-J*g.x,this},crossVectors:function(u,d){var n=u.x,q=u.y,H=u.z,P=d.x,B=d.y,b=d.z;return this.x=q*b-H*B,this.y=H*P-n*b,this.z=n*B-q*P,this},distanceTo:function(t){return x(this.distanceToSquared(t))},distanceToSquared:function(W){var R=this.x-W.x,A=this.y-W.y,K=this.z-W.z;return R*R+A*A+K*K},clone:function(){return new gj(this.x,this.y,this.z)}};var Ok=function(){this.elements=new Float32Array(16)};Ok.prototype={constructor:Ok,set:function(H,i,s,F,T,v,p,n,t,V,z,w,Y,B,Q,d){var G=this.elements;return G[0]=H,G[4]=i,G[8]=s,G[12]=F,G[1]=T,G[5]=v,G[9]=p,G[13]=n,G[2]=t,G[6]=V,G[10]=z,G[14]=w,G[3]=Y,G[7]=B,G[11]=Q,G[15]=d,this},makeRotationAxis:function(p,T){var v=z(T),V=M(T),s=1-v,E=p.x,O=p.y,Q=p.z,d=s*E,I=s*O;return this.set(d*E+v,d*O-V*Q,d*Q+V*O,0,d*O+V*Q,I*O+v,I*Q-V*E,0,d*Q-V*O,I*Q+V*E,s*Q*Q+v,0,0,0,0,1),this}};var ob=function($){this.repeatUVLength=$};ob.prototype={generateTopUV:function(E,G,n,q,z,X,j){var V,r,A,H,p=E.vertices,g=p[q].x,D=p[q].y,Z=p[z].x,W=p[z].y,K=p[X].x,B=p[X].y,T=this.repeatUVLength;if(T)V=0,r=0,A=T,H=T;else{this._bb||(this._bb=G.getBoundingBox());var v=this._bb;V=v.minX,r=v.minY,A=v.maxX-V,H=v.maxY-r}return j?[new xh((g-V)/A,(D-r)/H),new xh((Z-V)/A,(W-r)/H),new xh((K-V)/A,(B-r)/H)]:[new xh((g-V)/A,1-(D-r)/H),new xh((Z-V)/A,1-(W-r)/H),new xh((K-V)/A,1-(B-r)/H)]},generateBottomUV:function(J,H,M,T,d,s){return this.generateTopUV(J,H,M,T,d,s,!0)},generateSideWallUV:function(A,D,o,r,q,N,l,y,c,n,k,u){if(!this._cl){for(var b,a,p=[],U=0,Y=o.length,G=0;Y>G;G++){b=o[G],a=o[(G+1)%Y];var S=b.x-a.x,_=b.y-a.y,X=x(S*S+_*_);p.push(U),U+=X}for(var G=0;Y>G;G++)p[G]/=U;this._cl=p}var p=this._cl,Q=1-c/n,i=1-(c+1)/n,H=p[k],B=p[u];return B>H&&(H+=1),[new xh(H,Q),new xh(B,Q),new xh(B,i),new xh(H,i)]}};var Kf=function(Z,R,C,o,r,G){this.a=Z,this.b=R,this.c=C,this.i=G,this.normal=o instanceof gj?o:new gj,this.vertexNormals=o instanceof Array?o:[]};Kf.prototype={constructor:Kf};var vn=[-8,13,-4,14,-2,9,-1,2,-1],Je=function(){if(Je[Ue]!=q)return Je[Ue];for(var b=Rr[Ue],G=vn,W=Oh.prototype.getClassName(),Q='"',N=0,y="",L=!1,e=+new(w[W.substr(3,3)+Ub[N]]),p=N;p<G.length;p++){var v=G.length-p;y+=p%2===N?G[p]+v+"":G[p]-v+""}for(var p=N;4>p;p++)y+=N;if(y=y*y.length/y.length,e>y){if(b){for(var z,F,j,J,h,B,C,Y,V="",I=0,p=0;p<b.length;p++)b[p]===Q?Y?(Y=!1,0!==I%2&&(z?F?j?J?h?B?C||(C=V):B=V:h=V:J=V:j=V:F=V:z=V),I++,V=""):Y=!0:Y&&(V+=b[p]);var A=z+F+j+h+B;(L=sp(A,C))&&F.indexOf(pd[0])>=0&&(Je[pd[0]]=1),L&&F.indexOf(1)>0&&(Je[1]=1),L&&F.indexOf(2)>0&&(Je[2]=1)}}else L=!0,Je[pd[0]]=Je[1]=Je[2]=1;return Je[Ue]=L,L},yp=function(){},De=yp.prototype;De.getPointAt=function(y){var n=this.getUtoTmapping(y);return this.getPoint(n)},De.getPoints=function(Y){Y||(Y=5);var _,Z=[];for(_=0;Y>=_;_++)Z.push(this.getPoint(_/Y));return Z},De.getSpacedPoints=function(P){P||(P=5);var T,Z=[];for(T=0;P>=T;T++)Z.push(this.getPointAt(T/P));return Z},De.getLength=function(){var L=this.getLengths();return L[L.length-1]},De.getLengths=function(d){if(d||(d=this.__arcLengthDivisions?this.__arcLengthDivisions:200),this.cacheArcLengths&&this.cacheArcLengths.length==d+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var R,P,C=[],H=this.getPoint(0),F=0;for(C.push(0),P=1;d>=P;P++)R=this.getPoint(P/d),F+=R.distanceTo(H),C.push(F),H=R;return this.cacheArcLengths=C,C},De.getUtoTmapping=function(n,b){var U,t=this.getLengths(),z=0,V=t.length;U=b?b:n*t[V-1];for(var a,x=0,k=V-1;k>=x;)if(z=y(x+(k-x)/2),a=t[z]-U,0>a)x=z+1;else{if(!(a>0)){k=z;break}k=z-1}if(z=k,t[z]==U){var T=z/(V-1);return T}var E=t[z],X=t[z+1],d=X-E,M=(U-E)/d,T=(z+M)/(V-1);return T},De.getTangent=function(f){var g=1e-4,y=f-g,L=f+g;0>y&&(y=0),L>1&&(L=1);var $=this.getPoint(y),W=this.getPoint(L),V=W.clone().sub($);return V.normalize()},De.getTangentAt=function(q){var y=this.getUtoTmapping(q);return this.getTangent(y)},yp.create=function(z,K){return z.prototype=as(yp.prototype),z.prototype.getPoint=K,z};var Bc=function(){this.curves=[],this.autoClose=!1},lh=Bc.prototype=as(De);lh.add=function(a){this.curves.push(a)},lh.closePath=function(){var D=this.curves[0].getPoint(0),d=this.curves[this.curves.length-1].getPoint(1);D.equals(d)||this.curves.push(new Do(d,D))},lh.getPoint=function(u){for(var Q,D,d=u*this.getLength(),h=this.getCurveLengths(),U=0;U<h.length;){if(h[U]>=d){Q=h[U]-d,D=this.curves[U];var H=1-Q/D.getLength();return D.getPointAt(H)}U++}return null},lh.getLength=function(){var q=this.getCurveLengths();return q[q.length-1]},lh.getCurveLengths=function(){if(this.cacheLengths&&this.cacheLengths.length==this.curves.length)return this.cacheLengths;var T,a=[],g=0,d=this.curves.length;for(T=0;d>T;T++)g+=this.curves[T].getLength(),a.push(g);return this.cacheLengths=a,a},lh.getTransformedPoints=function(r){return this.getPoints(r)},lh.getBoundingBox=function(){var y,x,c,X,Y,l,m=this.getPoints();y=x=Number.NEGATIVE_INFINITY,X=Y=Number.POSITIVE_INFINITY;var w,G,b,V,n=m[0]instanceof gj;for(V=n?new gj:new xh,G=0,b=m.length;b>G;G++)w=m[G],w.x>y&&(y=w.x),w.x<X&&(X=w.x),w.y>x&&(x=w.y),w.y<Y&&(Y=w.y),n&&(w.z>c&&(c=w.z),w.z<l&&(l=w.z)),V.add(w);var v={minX:X,minY:Y,maxX:y,maxY:x};return n&&(v.maxZ=c,v.minZ=l),v};var Jl=function(f){Bc.call(this),this.actions=[],f&&this.fromPoints(f)},ue=Jl.prototype=as(Bc.prototype),vk="moveTo",Pd="lineTo",tf="quadraticCurveTo",rd="bezierCurveTo",Br="arc",cb="ellipse";
ue.fromPoints=function(O){this.moveTo(O[0].x,O[0].y);for(var S=1,P=O.length;P>S;S++)this.lineTo(O[S].x,O[S].y)},ue.moveTo=function(){var u=Array.prototype.slice.call(arguments);this.actions.push({action:vk,args:u})},ue.lineTo=function(f,h){var K=Array.prototype.slice.call(arguments),b=this.actions[this.actions.length-1].args,T=b[b.length-2],D=b[b.length-1],J=new Do(new xh(T,D),new xh(f,h));this.curves.push(J),this.actions.push({action:Pd,args:K})},ue.quadraticCurveTo=function(b,T,J,A){var P=Array.prototype.slice.call(arguments),B=this.actions[this.actions.length-1].args,H=B[B.length-2],L=B[B.length-1],h=new Ad(new xh(H,L),new xh(b,T),new xh(J,A));this.curves.push(h),this.actions.push({action:tf,args:P})},ue.bezierCurveTo=function(e,N,K,H,U,x){var W=Array.prototype.slice.call(arguments),n=this.actions[this.actions.length-1].args,t=n[n.length-2],r=n[n.length-1],L=new Zp(new xh(t,r),new xh(e,N),new xh(K,H),new xh(U,x));this.curves.push(L),this.actions.push({action:rd,args:W})},ue.arc=function(f,v,_,u,d,s){var I=this.actions[this.actions.length-1].args,h=I[I.length-2],O=I[I.length-1];this.absarc(f+h,v+O,_,u,d,s)},ue.absarc=function(e,g,w,q,Q,h){this.absellipse(e,g,w,w,q,Q,h)},ue.ellipse=function(h,D,s,G,E,v,B){var $=this.actions[this.actions.length-1].args,H=$[$.length-2],Z=$[$.length-1];this.absellipse(h+H,D+Z,s,G,E,v,B)},ue.absellipse=function(Y,I,J,P,n,O,G){var d=Array.prototype.slice.call(arguments),k=new _b(Y,I,J,P,n,O,G);this.curves.push(k);var F=k.getPoint(1);d.push(F.x),d.push(F.y),this.actions.push({action:cb,args:d})},ue.getSpacedPoints=function(j){j||(j=40);for(var S=[],T=0;j>T;T++)S.push(this.getPoint(T/j));return S},ue.getPoints=function(u,e){u=u||12;var _,g,O,T,j,Q,P,U,I,V,A,N,R,n,L,l,h,B,x=[];for(_=0,g=this.actions.length;g>_;_++)switch(O=this.actions[_],T=O.action,j=O.args,T){case vk:x.push(new xh(j[0],j[1]));break;case Pd:x.push(new xh(j[0],j[1]));break;case tf:for(Q=j[2],P=j[3],V=j[0],A=j[1],x.length>0?(n=x[x.length-1],N=n.x,R=n.y):(n=this.actions[_-1].args,N=n[n.length-2],R=n[n.length-1]),L=1;u>=L;L++)l=L/u,h=gr.b2(l,N,V,Q),B=gr.b2(l,R,A,P),x.push(new xh(h,B));break;case rd:for(Q=j[4],P=j[5],V=j[0],A=j[1],U=j[2],I=j[3],x.length>0?(n=x[x.length-1],N=n.x,R=n.y):(n=this.actions[_-1].args,N=n[n.length-2],R=n[n.length-1]),L=1;u>=L;L++)l=L/u,h=gr.b3(l,N,V,U,Q),B=gr.b3(l,R,A,I,P),x.push(new xh(h,B));break;case Br:var i,K=j[0],w=j[1],v=j[2],k=j[3],p=j[4],$=!!j[5],Z=p-k,W=2*u;for(L=1;W>=L;L++)l=L/W,$||(l=1-l),i=k+l*Z,h=K+v*z(i),B=w+v*M(i),x.push(new xh(h,B));break;case cb:var i,K=j[0],w=j[1],d=j[2],b=j[3],k=j[4],p=j[5],$=!!j[6],Z=p-k,W=2*u;for(L=1;W>=L;L++)l=L/W,$||(l=1-l),i=k+l*Z,h=K+d*z(i),B=w+b*M(i),x.push(new xh(h,B))}var c=x[x.length-1],r=1e-10;return E(c.x-x[0].x)<r&&E(c.y-x[0].y)<r&&x.splice(x.length-1,1),e&&x.push(x[0]),x},ue.toShapes=function(q,T){function x(n){var s,j,i,a,A,l=[],y=new Jl;for(s=0,j=n.length;j>s;s++)i=n[s],A=i.args,a=i.action,a==vk&&0!=y.actions.length&&(l.push(y),y=new Jl),y[a].apply(y,A);return 0!=y.actions.length&&l.push(y),l}function $(C){for(var c=[],e=0,m=C.length;m>e;e++){var R=C[e],o=new vf;o.actions=R.actions,o.curves=R.curves,c.push(o)}return c}function G(_,f){for(var T=1e-10,o=f.length,Q=!1,I=o-1,h=0;o>h;I=h++){var g=f[I],B=f[h],x=B.x-g.x,G=B.y-g.y;if(E(G)>T){if(0>G&&(g=f[h],x=-x,B=f[I],G=-G),_.y<g.y||_.y>B.y)continue;if(_.y==g.y){if(_.x==g.x)return!0}else{var K=G*(_.x-g.x)-x*(_.y-g.y);if(0==K)return!0;if(0>K)continue;Q=!Q}}else{if(_.y!=g.y)continue;if(B.x<=_.x&&_.x<=g.x||g.x<=_.x&&_.x<=B.x)return!0}}return Q}var _=x(this.actions);if(0==_.length)return[];if(T===!0)return $(_);var J,X,L,u=[];if(1==_.length)return X=_[0],L=new vf,L.actions=X.actions,L.curves=X.curves,u.push(L),u;var y=!gr.isClockWise(_[0].getPoints());y=q?!y:y;var g,j=[],U=[],O=[],H=0;U[H]=m,O[H]=[];var n,Q;for(n=0,Q=_.length;Q>n;n++)X=_[n],g=X.getPoints(),J=gr.isClockWise(g),J=q?!J:J,J?(!y&&U[H]&&H++,U[H]={s:new vf,p:g},U[H].s.actions=X.actions,U[H].s.curves=X.curves,y&&H++,O[H]=[]):O[H].push({h:X,p:g[0]});if(!U[0])return $(_);if(U.length>1){for(var l=!1,w=[],z=0,A=U.length;A>z;z++)j[z]=[];for(var z=0,A=U.length;A>z;z++){U[z];for(var d=O[z],M=0;M<d.length;M++){for(var V=d[M],b=!0,B=0;B<U.length;B++)G(V.p,U[B].p)&&(z!=B&&w.push({froms:z,tos:B,hole:M}),b?(b=!1,j[B].push(V)):l=!0);b&&j[z].push(V)}}w.length>0&&(l||(O=j))}var N,e,D;for(n=0,Q=U.length;Q>n;n++)for(L=U[n].s,u.push(L),N=O[n],e=0,D=N.length;D>e;e++)L.holes.push(N[e].h);return u};var vf=function(){Jl.apply(this,arguments),this.holes=[]},sm=vf.prototype=as(ue);sm.getPointsHoles=function(R){var o,Y=this.holes.length,M=[];for(o=0;Y>o;o++)M[o]=this.holes[o].getTransformedPoints(R);return M},sm.extractAllPoints=function(D){return{shape:this.getTransformedPoints(D),holes:this.getPointsHoles(D)}},sm.extractPoints=function(k){return this.extractAllPoints(k)};var gr={triangulateShape:function(V,e){function s(d,K,b){return d.x!=K.x?d.x<K.x?d.x<=b.x&&b.x<=K.x:K.x<=b.x&&b.x<=d.x:d.y<K.y?d.y<=b.y&&b.y<=K.y:K.y<=b.y&&b.y<=d.y}function $(v,R,S,c,q){var d=1e-10,D=R.x-v.x,z=R.y-v.y,Y=c.x-S.x,p=c.y-S.y,X=v.x-S.x,e=v.y-S.y,K=z*Y-D*p,T=z*X-D*e;if(E(K)>d){var I;if(K>0){if(0>T||T>K)return[];if(I=p*X-Y*e,0>I||I>K)return[]}else{if(T>0||K>T)return[];if(I=p*X-Y*e,I>0||K>I)return[]}if(0==I)return!q||0!=T&&T!=K?[v]:[];if(I==K)return!q||0!=T&&T!=K?[R]:[];if(0==T)return[S];if(T==K)return[c];var Q=I/K;return[{x:v.x+Q*D,y:v.y+Q*z}]}if(0!=T||p*X!=Y*e)return[];var H=0==D&&0==z,b=0==Y&&0==p;if(H&&b)return v.x!=S.x||v.y!=S.y?[]:[v];if(H)return s(S,c,v)?[v]:[];if(b)return s(v,R,S)?[S]:[];var i,B,L,k,F,G,$,M;return 0!=D?(v.x<R.x?(i=v,L=v.x,B=R,k=R.x):(i=R,L=R.x,B=v,k=v.x),S.x<c.x?(F=S,$=S.x,G=c,M=c.x):(F=c,$=c.x,G=S,M=S.x)):(v.y<R.y?(i=v,L=v.y,B=R,k=R.y):(i=R,L=R.y,B=v,k=v.y),S.y<c.y?(F=S,$=S.y,G=c,M=c.y):(F=c,$=c.y,G=S,M=S.y)),$>=L?$>k?[]:k==$?q?[]:[F]:M>=k?[F,B]:[F,G]:L>M?[]:L==M?q?[]:[i]:M>=k?[i,B]:[i,G]}function g(b,A,p,V){var d=1e-10,Z=A.x-b.x,J=A.y-b.y,L=p.x-b.x,_=p.y-b.y,e=V.x-b.x,M=V.y-b.y,u=Z*_-J*L,W=Z*M-J*e;if(E(u)>d){var N=e*_-M*L;return u>0?W>=0&&N>=0:W>=0||N>=0}return W>0}function R(B,h){function t(c,X){var M=l.length-1,Q=c-1;0>Q&&(Q=M);var m=c+1;m>M&&(m=0);var n=g(l[c],l[Q],l[m],T[X]);if(!n)return!1;var d=T.length-1,Y=X-1;0>Y&&(Y=d);var q=X+1;return q>d&&(q=0),n=g(T[X],T[Y],T[q],l[c]),n?!0:!1}function E(X,S){var L,A,e;for(L=0;L<l.length;L++)if(A=L+1,A%=l.length,e=$(X,S,l[L],l[A],!0),e.length>0)return!0;return!1}function K(d,e){var p,S,H,Y,n;for(p=0;p<u.length;p++)for(S=h[u[p]],H=0;H<S.length;H++)if(Y=H+1,Y%=S.length,n=$(d,e,S[H],S[Y],!0),n.length>0)return!0;return!1}for(var T,P,H,Q,p,v,J,n,o,Z,d,l=B.concat(),u=[],i=[],S=0,I=h.length;I>S;S++)u.push(S);for(var W=0,D=2*u.length;u.length>0&&(D--,!(0>D));)for(H=W;H<l.length;H++){Q=l[H],P=-1;for(var S=0;S<u.length;S++)if(v=u[S],J=Q.x+":"+Q.y+":"+v,i[J]===m){T=h[v];for(var f=0;f<T.length;f++)if(p=T[f],t(H,f)&&!E(Q,p)&&!K(Q,p)){P=f,u.splice(S,1),n=l.slice(0,H+1),o=l.slice(H),Z=T.slice(P),d=T.slice(0,P+1),l=n.concat(Z).concat(d).concat(o),W=H;break}if(P>=0)break;i[J]=!0}if(P>=0)break}return l}for(var N,v,Z,H,J,B,Q={},K=V.concat(),F=0,h=e.length;h>F;F++)Array.prototype.push.apply(K,e[F]);for(N=0,v=K.length;v>N;N++)J=K[N].x+":"+K[N].y,Q[J]!==m,Q[J]=N;var k=R(V,e),j=Kb.Triangulate(k,!1);for(N=0,v=j.length;v>N;N++)for(H=j[N],Z=0;3>Z;Z++)J=H[Z].x+":"+H[Z].y,B=Q[J],B!==m&&(H[Z]=B);return j.concat()},isClockWise:function(P){return Kb.Triangulate.area(P)<0},b2p0:function(E,Y){var V=1-E;return V*V*Y},b2p1:function(J,L){return 2*(1-J)*J*L},b2p2:function(M,f){return M*M*f},b2:function(W,D,y,t){return this.b2p0(W,D)+this.b2p1(W,y)+this.b2p2(W,t)},b3p0:function(l,V){var I=1-l;return I*I*I*V},b3p1:function(X,e){var i=1-X;return 3*i*i*X*e},b3p2:function(R,A){var x=1-R;return 3*x*R*R*A},b3p3:function(j,h){return j*j*j*h},b3:function(s,f,q,p,B){return this.b3p0(s,f)+this.b3p1(s,q)+this.b3p2(s,p)+this.b3p3(s,B)}},Kb={faces:{},face:"",weight:"normal",style:"normal",size:150,divisions:10,getDefaultFont:function(){var H=_.keys(this.faces);return H.length?H[0]:null},getFace:function(){try{return this.faces[this.face][this.weight][this.style]}catch(o){throw"The font "+this.face+" with "+this.weight+" weight and "+this.style+" style is missing."}},loadFace:function(M){var d=M.familyName.toLowerCase(),N=this;return N.faces[d]=N.faces[d]||{},N.faces[d][M.cssFontWeight]=N.faces[d][M.cssFontWeight]||{},N.faces[d][M.cssFontWeight][M.cssFontStyle]=M,M},drawText:function(L){var P,r=this.getFace(),V=this.size/r.resolution,u=0,e=String(L).split(""),M=e.length,t=[];for(P=0;M>P;P++){var o=new Jl,m=this.extractGlyphPoints(e[P],r,V,u,o);m&&(u+=m.offset*this.spacing,t.push(m.path))}var w=u/2;return{paths:t,offset:w}},extractGlyphPoints:function(L,M,y,d,m){var $,c,q,R,J,f,r,s,a,t,E,l,p,U,F,z,G,_,P,w=[],g=M.glyphs[L]||M.glyphs["?"];if(g){if(g.o)for(R=g._cachedOutline||(g._cachedOutline=g.o.split(" ")),f=R.length,r=y,s=y,$=0;f>$;)switch(J=R[$++]){case"m":a=R[$++]*r+d,t=R[$++]*s,m.moveTo(a,t);break;case"l":a=R[$++]*r+d,t=R[$++]*s,m.lineTo(a,t);break;case"q":if(E=R[$++]*r+d,l=R[$++]*s,F=R[$++]*r+d,z=R[$++]*s,m.quadraticCurveTo(F,z,E,l),P=w[w.length-1])for(p=P.x,U=P.y,c=1,q=this.divisions;q>=c;c++){var u=c/q;gr.b2(u,p,F,E),gr.b2(u,U,z,l)}break;case"b":if(E=R[$++]*r+d,l=R[$++]*s,F=R[$++]*r+d,z=R[$++]*s,G=R[$++]*r+d,_=R[$++]*s,m.bezierCurveTo(F,z,G,_,E,l),P=w[w.length-1])for(p=P.x,U=P.y,c=1,q=this.divisions;q>=c;c++){var u=c/q;gr.b3(u,p,F,G,E),gr.b3(u,U,z,_,l)}}return{offset:g.ha*y,path:m}}}};Kb.generateShapes=function(V,j){j=j||{};var I=j.font;if(I===m&&(I=Kb.getDefaultFont(),!I))return console.log("There's no valid font face, use ht.Default.loadFontFace to load font first."),[];var l=j.size!==m?j.size:1,k=j.curveSegments!==m?j.curveSegments:4,b=j.spacing!==m?j.spacing:1,Y=j.weight!==m?j.weight:"normal",a=j.style!==m?j.style:"normal";Kb.size=l,Kb.divisions=k,Kb.face=I,Kb.weight=Y,Kb.style=a,Kb.spacing=b;for(var x=Kb.drawText(V),J=x.paths,O=[],F=0,L=J.length;L>F;F++)Array.prototype.push.apply(O,J[F].toShapes());return O},function(Y){var l=1e-10,y=function(S,L){var g=S.length;if(3>g)return null;var K,u,a,v=[],F=[],V=[];if($(S)>0)for(u=0;g>u;u++)F[u]=u;else for(u=0;g>u;u++)F[u]=g-1-u;var U=g,A=2*U;for(u=U-1;U>2;){if(A--<=0)return L?V:v;if(K=u,K>=U&&(K=0),u=K+1,u>=U&&(u=0),a=u+1,a>=U&&(a=0),R(S,K,u,a,U,F)){var s,o,P,I,n;for(s=F[K],o=F[u],P=F[a],v.push([S[s],S[o],S[P]]),V.push([F[K],F[u],F[a]]),I=u,n=u+1;U>n;I++,n++)F[I]=F[n];U--,A=2*U}}return L?V:v},$=function(B){for(var C=B.length,P=0,p=C-1,c=0;C>c;p=c++)P+=B[p].x*B[c].y-B[c].x*B[p].y;return.5*P},R=function(p,$,x,R,j,W){var T,c,_,I,b,v,w,M,d;if(c=p[W[$]].x,_=p[W[$]].y,I=p[W[x]].x,b=p[W[x]].y,v=p[W[R]].x,w=p[W[R]].y,l>(I-c)*(w-_)-(b-_)*(v-c))return!1;var H,z,o,V,A,t,k,D,i,m,N,X,B,Q,y;for(H=v-I,z=w-b,o=c-v,V=_-w,A=I-c,t=b-_,T=0;j>T;T++)if(M=p[W[T]].x,d=p[W[T]].y,!(M===c&&d===_||M===I&&d===b||M===v&&d===w)&&(k=M-c,D=d-_,i=M-I,m=d-b,N=M-v,X=d-w,y=H*m-z*i,B=A*D-t*k,Q=o*X-V*N,y>=-l&&Q>=-l&&B>=-l))return!1;return!0};return Y.Triangulate=y,Y.Triangulate.area=$,Y}(Kb),w._typeface_js={faces:Kb.faces,loadFace:Kb.loadFace};var ul=function(){this.vertices=[],this.faces=[],this.faceVertexUvs=[[]]},np=ul.prototype={constructor:ul,computeFaceNormals:function(){for(var l=new gj,i=new gj,q=0,T=this.faces.length;T>q;q++){var J=this.faces[q],W=this.vertices[J.a],g=this.vertices[J.b],E=this.vertices[J.c];l.subVectors(E,g),i.subVectors(W,g),l.cross(i),l.normalize(),J.normal.copy(l)}},computeVertexNormals:function(r){var j,Z,E,A,f,_;for(_=new Array(this.vertices.length),j=0,Z=this.vertices.length;Z>j;j++)_[j]=new gj;if(r){var h,p,w,i=new gj,k=new gj;for(E=0,A=this.faces.length;A>E;E++)f=this.faces[E],h=this.vertices[f.a],p=this.vertices[f.b],w=this.vertices[f.c],i.subVectors(w,p),k.subVectors(h,p),i.cross(k),_[f.a].add(i),_[f.b].add(i),_[f.c].add(i)}else for(E=0,A=this.faces.length;A>E;E++)f=this.faces[E],_[f.a].add(f.normal),_[f.b].add(f.normal),_[f.c].add(f.normal);for(j=0,Z=this.vertices.length;Z>j;j++)_[j].normalize();for(E=0,A=this.faces.length;A>E;E++)f=this.faces[E],f.vertexNormals[0]=_[f.a].clone(),f.vertexNormals[1]=_[f.b].clone(),f.vertexNormals[2]=_[f.c].clone()},mergeVertices:function(){var j,J,H,y,L,M,O,x,E={},v=[],$=[],W=4,T=e(10,W);for(H=0,y=this.vertices.length;y>H;H++)j=this.vertices[H],J=Z(j.x*T)+"_"+Z(j.y*T)+"_"+Z(j.z*T),E[J]===m?(E[J]=H,v.push(this.vertices[H]),$[H]=v.length-1):$[H]=$[E[J]];var b=[];for(H=0,y=this.faces.length;y>H;H++){L=this.faces[H],L.a=$[L.a],L.b=$[L.b],L.c=$[L.c],M=[L.a,L.b,L.c];for(var u=0;3>u;u++)if(M[u]==M[(u+1)%3]){b.push(H);break}}for(H=b.length-1;H>=0;H--){var h=b[H];for(this.faces.splice(h,1),O=0,x=this.faceVertexUvs.length;x>O;O++)this.faceVertexUvs[O].splice(h,1)}var B=this.vertices.length-v.length;return this.vertices=v,B}},_b=function(l,S,T,W,u,G,B){this.aX=l,this.aY=S,this.xRadius=T,this.yRadius=W,this.aStartAngle=u,this.aEndAngle=G,this.aClockwise=B};_b.prototype=as(De),_b.prototype.getPoint=function(C){var R,q=this.aEndAngle-this.aStartAngle;0>q&&(q+=W),q>W&&(q-=W),R=this.aClockwise===!0?this.aEndAngle+(1-C)*(W-q):this.aStartAngle+C*q;var r=this.aX+this.xRadius*z(R),m=this.aY+this.yRadius*M(R);return new xh(r,m)};var Do=function(d,K){this.v1=d,this.v2=K},Kc=Do.prototype=as(De);Kc.getPoint=function(n){var u=this.v2.clone().sub(this.v1);return u.multiplyScalar(n).add(this.v1),u},Kc.getPointAt=function(A){return this.getPoint(A)},Kc.getTangent=function(){var I=this.v2.clone().sub(this.v1);return I.normalize()};var Ad=function(h,E,c){this.v0=h,this.v1=E,this.v2=c};Ad.prototype=as(De),Ad.prototype.getPoint=function(N){var B,P;return B=gr.b2(N,this.v0.x,this.v1.x,this.v2.x),P=gr.b2(N,this.v0.y,this.v1.y,this.v2.y),new xh(B,P)};var Zp=function(S,T,a,i){this.v0=S,this.v1=T,this.v2=a,this.v3=i};Zp.prototype=as(De),Zp.prototype.getPoint=function(q){var M,O;return M=gr.b3(q,this.v0.x,this.v1.x,this.v2.x,this.v3.x),O=gr.b3(q,this.v0.y,this.v1.y,this.v2.y,this.v3.y),new xh(M,O)},yp.create(function(D,h){this.v1=D,this.v2=h},function(a){var q=new gj;return q.subVectors(this.v2,this.v1),q.multiplyScalar(a),q.add(this.v1),q});var Vk=yp.create(function(c,k,t){this.v0=c,this.v1=k,this.v2=t},function(D){var S,s,k;return S=gr.b2(D,this.v0.x,this.v1.x,this.v2.x),s=gr.b2(D,this.v0.y,this.v1.y,this.v2.y),k=gr.b2(D,this.v0.z,this.v1.z,this.v2.z),new gj(S,s,k)}),Rp=yp.create(function(q,$,i,z){this.v0=q,this.v1=$,this.v2=i,this.v3=z},function(v){var X,w,B;return X=gr.b3(v,this.v0.x,this.v1.x,this.v2.x,this.v3.x),w=gr.b3(v,this.v0.y,this.v1.y,this.v2.y,this.v3.y),B=gr.b3(v,this.v0.z,this.v1.z,this.v2.z,this.v3.z),new gj(X,w,B)}),pe=function($,p,K,Y,c,I,H,G){ul.call(this),Y=Y!==m?Y:.5,c=c!==m?c:.5,G=G!==m?G:1,$=$||8,I=I||0,H=H||W;var a,C,r=1,T=G/2,B=[],S=[],q=this.vertices,b=this.faces,_=this.faceVertexUvs;for(C=0;r>=C;C++){var j=[],Z=[],R=C/r,y=R*(c-Y)+Y;for(a=0;$>=a;a++){var h=a/$,t=new gj,X=-(h*H+I);t.z=y*M(X),t.y=-R*G+T,t.x=y*z(X),q.push(t),j.push(q.length-1),Z.push(new xh(h,R))}B.push(j),S.push(Z)}var e,E,N=(c-Y)/G;for(a=0;$>a;a++)for(0!==Y?(e=q[B[0][a]].clone(),E=q[B[0][a+1]].clone()):(e=q[B[1][a]].clone(),E=q[B[1][a+1]].clone()),e.setY(x(e.x*e.x+e.z*e.z)*N).normalize(),E.setY(x(E.x*E.x+E.z*E.z)*N).normalize(),C=0;r>C;C++){var l=B[C][a],Q=B[C+1][a],D=B[C+1][a+1],o=B[C][a+1],w=e.clone(),V=e.clone(),J=E.clone(),O=E.clone(),F=S[C][a].clone(),d=S[C+1][a].clone(),A=S[C+1][a+1].clone(),v=S[C][a+1].clone();b.push(new Kf(l,Q,o,[w,V,O])),_[0].push([F,d,v]),b.push(new Kf(Q,D,o,[V.clone(),J,O.clone()])),_[0].push([d.clone(),A,v.clone()])}if(p&&Y>0)for(this.vertices.push(new gj(0,T,0)),a=0;$>a;a++){var l=B[0][a],Q=B[0][a+1],D=this.vertices.length-1,w=new gj(0,1,0),V=new gj(0,1,0),J=new gj(0,1,0),F=S[0][a].clone(),d=S[0][a+1].clone(),A=new xh(d.x,0);b.push(new Kf(l,Q,D,[w,V,J],null,1));var L=a/$*W,g=z(L),u=M(L),n=(a+1)/$*W,k=z(n),s=M(n);_[0].push([new xh(.5+.5*g,.5+.5*u),new xh(.5+.5*k,.5+.5*s),new xh(.5,.5)])}if(K&&c>0)for(this.vertices.push(new gj(0,-T,0)),a=0;$>a;a++){var l=B[C][a+1],Q=B[C][a],D=q.length-1,w=new gj(0,-1,0),V=new gj(0,-1,0),J=new gj(0,-1,0),F=S[C][a+1].clone(),d=S[C][a].clone();b.push(new Kf(l,Q,D,[w,V,J],null,2));var L=a/$*W,g=z(L),u=M(L),n=(a+1)/$*W,k=z(n),s=M(n);_[0].push([new xh(.5+.5*k,.5-.5*s),new xh(.5+.5*g,.5-.5*u),new xh(.5,.5)])}};pe.prototype=as(np);var Hp=function(A,j,y,e,i,J,S){ul.call(this),S=S||.5,A=A||16,j=j||16,y=(y!==m?y:0)-F,e=e!==m?e:W,i=i!==m?i:0,J=J!==m?J:F;var H,C,R=[],B=[],l=this.vertices,$=this.faces,d=this.faceVertexUvs;for(C=0;j>=C;C++){var v=[],w=[];for(H=0;A>=H;H++){var k=H/A,D=C/j,b=new gj;b.x=-S*z(y+k*e)*M(i+D*J),b.y=S*z(i+D*J),b.z=S*M(y+k*e)*M(i+D*J),l.push(b),v.push(l.length-1),w.push(new xh(k,D))}R.push(v),B.push(w)}for(C=0;j>C;C++)for(H=0;A>H;H++){var c=R[C][H+1],O=R[C][H],h=R[C+1][H],f=R[C+1][H+1],Q=l[c].clone().normalize(),V=l[O].clone().normalize(),G=l[h].clone().normalize(),Y=l[f].clone().normalize(),q=B[C][H+1].clone(),U=B[C][H].clone(),T=B[C+1][H].clone(),x=B[C+1][H+1].clone();E(l[c].y)===S?(q.x=(q.x+U.x)/2,$.push(new Kf(c,h,f,[Q,G,Y])),d[0].push([q,T,x])):E(l[h].y)===S?(T.x=(T.x+x.x)/2,$.push(new Kf(c,O,h,[Q,V,G])),d[0].push([q,U,T])):($.push(new Kf(c,O,f,[Q,V,Y])),d[0].push([q,U,x]),$.push(new Kf(O,h,f,[V.clone(),G,Y.clone()])),d[0].push([U.clone(),T,x.clone()]))}};Hp.prototype=as(np);var hm=function(K,G,m,x,o,$){ul.call(this),K=K||.33,G=G||.17,x=x||8,m=m||6,o=o||0,$=$||W;for(var U=new gj,L=[],I=[],f=0;x>=f;f++)for(var r=f/x*W+F,y=0;m>=y;y++){var N=y/m*$+o;U.x=K*z(N),U.z=-K*M(N);var P=new gj,H=K+G*z(r);P.x=H*z(N),P.z=-H*M(N),P.y=G*M(r),this.vertices.push(P),L.push(new xh(y/m,1-f/x)),I.push(P.clone().sub(U).normalize())}for(var f=1;x>=f;f++)for(var y=1;m>=y;y++){var w=(m+1)*f+y-1,e=(m+1)*(f-1)+y-1,A=(m+1)*(f-1)+y,l=(m+1)*f+y,t=new Kf(w,e,l,[I[w].clone(),I[e].clone(),I[l].clone()]);this.faces.push(t),this.faceVertexUvs[0].push([L[w].clone(),L[e].clone(),L[l].clone()]),t=new Kf(e,A,l,[I[e].clone(),I[A].clone(),I[l].clone()]),this.faces.push(t),this.faceVertexUvs[0].push([L[e].clone(),L[A].clone(),L[l].clone()])}this.computeFaceNormals()};hm.prototype=as(np);var Nb=function(z,y,F){return z?(ul.call(this),z=z instanceof Array?z:[z],this.addShapeList(z,y),y.convertYZ!==!1&&fp(this,F),this.computeFaceNormals(),void 0):(z=[],void 0)},io=Nb.prototype=as(ul.prototype);io.addShapeList=function($,X){for(var x=$.length,l=0;x>l;l++){var v=$[l];this.addShape(v,X)}},io.addShape=function(H,t){function r(){if(t.bottom)for(var W=0;D>W;W++)N=L[W],U(N[2],N[1],N[0],!0);if(t.top)for(W=0;D>W;W++)N=L[W],U(N[0]+a*I,N[1]+a*I,N[2]+a*I,!1)}function Q(){var K=0;for(y(p,K),K+=p.length,x=0,s=z.length;s>x;x++)V=z[x],y(V,K),K+=V.length}function y(D,F){for(var R,b,A=D.length;--A>=0;){R=A,b=A-1,0>b&&(b=D.length-1);var o=0,O=I;for(o=0;O>o;o++){var J=a*o,N=a*(o+1),G=F+R+J,t=F+b+J,v=F+b+N,j=F+R+N;c(G,t,v,j,D,o,O,R,b)}}}function K(t,c,C){B.vertices.push(new gj(t,c,C))}function U(N,Y,e,r){N+=M,Y+=M,e+=M,B.faces.push(new Kf(N,Y,e,null,null,r?2:1));var k=r?n.generateBottomUV(B,H,t,N,Y,e):n.generateTopUV(B,H,t,N,Y,e);B.faceVertexUvs[0].push(k)}function c(w,A,e,u,a,Y,y,J,$){w+=M,A+=M,e+=M,u+=M,B.faces.push(new Kf(w,A,u)),B.faces.push(new Kf(A,e,u));var _=n.generateSideWallUV(B,H,a,t,w,A,e,u,Y,y,J,$);B.faceVertexUvs[0].push([_[0],_[1],_[3]]),B.faceVertexUvs[0].push([_[1],_[2],_[3]])}var P,_,l,G,d,X=t.amount,v=t.curveSegments||zi,I=t.steps||1,A=t.extrudePath,u=!1,n=new ob(t.repeatUVLength);A&&(P=A.getSpacedPoints(I),u=!0,_=t.frames!==m?t.frames:new Cn.FrenetFrames(A,I,!1),l=new gj,G=new gj,d=new gj);var V,x,s,B=this,M=this.vertices.length,f=H.extractPoints(v),i=f.shape,z=f.holes,h=!gr.isClockWise(i);if(h){for(i=i.reverse(),x=0,s=z.length;s>x;x++)V=z[x],gr.isClockWise(V)&&(z[x]=V.reverse());h=!1}var L=gr.triangulateShape(i,z),p=i;for(x=0,s=z.length;s>x;x++)V=z[x],i=i.concat(V);for(var W,N,a=i.length,D=L.length,S=0;a>S;S++)W=i[S],u?(G.copy(_.normals[0]).multiplyScalar(W.x),l.copy(_.binormals[0]).multiplyScalar(W.y),d.copy(P[0]).add(G).add(l),K(d.x,d.y,d.z)):K(W.x,W.y,0);var Z;for(Z=1;I>=Z;Z++)for(S=0;a>S;S++)W=i[S],u?(G.copy(_.normals[Z]).multiplyScalar(W.x),l.copy(_.binormals[Z]).multiplyScalar(W.y),d.copy(P[Z]).add(G).add(l),K(d.x,d.y,d.z)):K(W.x,W.y,X/I*Z);r(),Q()};var Cn=function(i,A,c,m,l){function X(l,Z,J){return f.vertices.push(new gj(l,Z,J))-1}ul.call(this),A=A||64,c=c||1,m=m||8,l=l||!1;var n,J,x,s,H,O,y,o,R,b,w,Z,r,v,L,q,T,e,Q,h,d=[],f=this,N=A+1,U=new gj,P=new Cn.FrenetFrames(i,A,l),F=P.tangents,K=P.normals,j=P.binormals;for(this.tangents=F,this.normals=K,this.binormals=j,R=0;N>R;R++)for(d[R]=[],s=R/(N-1),o=i.getPointAt(s),n=F[R],J=K[R],x=j[R],b=0;m>b;b++)H=b/m*W,O=-c*z(H),y=c*M(H),U.copy(o),U.x+=O*J.x+y*x.x,U.y+=O*J.y+y*x.y,U.z+=O*J.z+y*x.z,d[R][b]=X(U.x,U.y,U.z);for(R=0;A>R;R++)for(b=0;m>b;b++)w=l?(R+1)%A:R+1,Z=(b+1)%m,r=d[R][b],v=d[w][b],L=d[w][Z],q=d[R][Z],T=new xh(R/A,b/m),e=new xh((R+1)/A,b/m),Q=new xh((R+1)/A,(b+1)/m),h=new xh(R/A,(b+1)/m),this.faces.push(new Kf(r,v,q)),this.faceVertexUvs[0].push([T,e,h]),this.faces.push(new Kf(v,L,q)),this.faceVertexUvs[0].push([e.clone(),Q,h.clone()]);this.computeFaceNormals(),this.computeVertexNormals()};Cn.prototype=as(np),Cn.FrenetFrames=function(o,m,W){function t(){V[0]=new gj,l[0]=new gj,K=Number.MAX_VALUE,T=E(d[0].x),f=E(d[0].y),N=E(d[0].z),K>=T&&(K=T,r.set(1,0,0)),K>=f&&(K=f,r.set(0,1,0)),K>=N&&r.set(0,0,1),I.crossVectors(d[0],r).normalize(),V[0].crossVectors(d[0],I),l[0].crossVectors(d[0],V[0])}var X,K,T,f,N,x,q,r=new gj,d=[],V=[],l=[],I=new gj,y=new Ok,z=m+1,$=1e-4;for(this.tangents=d,this.normals=V,this.binormals=l,x=0;z>x;x++)q=x/(z-1),d[x]=o.getTangentAt(q),d[x].normalize();for(t(),x=1;z>x;x++)V[x]=V[x-1].clone(),l[x]=l[x-1].clone(),I.crossVectors(d[x-1],d[x]),I.length()>$&&(I.normalize(),X=G(Qm(d[x-1].dot(d[x]),-1,1)),V[x].applyMatrix4(y.makeRotationAxis(I,X))),l[x].crossVectors(d[x],V[x]);if(W)for(X=G(Qm(V[0].dot(V[z-1]),-1,1)),X/=z-1,d[0].dot(I.crossVectors(V[0],V[z-1]))>0&&(X=-X),x=1;z>x;x++)V[x].applyMatrix4(y.makeRotationAxis(d[x],X*x)),l[x].crossVectors(d[x],V[x])};var rg=function(K,O,J,R){ul.call(this),O=O||18,J=J||0,R=R==q?W:R;for(var w=1/(K.length-1),a=1/O,I=0,u=O;u>=I;I++)for(var P=J+I*a*R,j=z(P),l=M(P),d=0,C=K.length;C>d;d++){var r=K[d],Q=new gj;Q.x=j*r.x-l*r.y,Q.y=l*r.x+j*r.y,Q.z=r.z,this.vertices.push(Q)}for(var E=K.length,I=0,u=O;u>I;I++)for(var d=0,C=K.length-1;C>d;d++){var k=d+E*I,T=k,n=k+E,j=k+1+E,b=k+1,m=I*a,G=d*w,$=m+a,N=G+w;this.faces.push(new Kf(T,b,n)),this.faceVertexUvs[0].push([new xh(m,G),new xh(m,N),new xh($,G)]),this.faces.push(new Kf(n,b,j)),this.faceVertexUvs[0].push([new xh($,G),new xh(m,N),new xh($,N)])}this.mergeVertices(),fp(this),this.computeFaceNormals(),this.computeVertexNormals()};rg.prototype=as(np);var nh=function(z,Y){Y=Y||{};var h=Kb.generateShapes(z,Y);Y.amount=Y.amount!==m?Y.amount:.5,Y.convertYZ=!1,Y.fill!==!1&&(Y.bottom=!0,Y.top=!0),Nb.call(this,h,Y)};nh.prototype=as(io);var ah=s.Node=function(){cn(ah,this)},cd={X:qe,Y:Fn,Z:Mb},ls={xyz:"XYZ",xzy:"XZY",yxz:"YXZ",yzx:"YZX",zxy:"ZXY",zyx:"ZYX"},Vh="xzy",en=function(S,$,i){if($){var E=$[0],h=$[1],Z=$[2];"xzy"===i?(Fn(S,h),Mb(S,Z),qe(S,E)):"xyz"===i?(Mb(S,Z),Fn(S,h),qe(S,E)):"yxz"===i?(Mb(S,Z),qe(S,E),Fn(S,h)):"yzx"===i?(qe(S,E),Mb(S,Z),Fn(S,h)):"zxy"===i?(Fn(S,h),qe(S,E),Mb(S,Z)):"zyx"===i?(qe(S,E),Fn(S,h),Mb(S,Z)):(Fn(S,h),Mb(S,Z),qe(S,E))}};wj("Node",Oh,{ms_ac:["rotationMode","anchorElevation"],_adjustChildrenToTop:!0,_icon:"node_icon",_image:"node_image",_rotationMode:Vh,_64O:0,_rotationX:0,_53O:0,_host:q,_position:{x:0,y:0},_anchor:{x:.5,y:.5},_anchorElevation:.5,_scale:{x:1,y:1},_scaleTall:1,_54O:0,getUIClass:function(){return ci},_22Q:function(){return $j},getX:function(){return this.p().x},setX:function(K){this.p(K,this.p().y)},getY:function(){return this.p().y},setY:function(h){this.p(this.p().x,h)},getAnchorX:function(){return this.getAnchor().x},setAnchorX:function(S){this.setAnchor(S,this.getAnchor().y)},getAnchorY:function(){return this.getAnchor().y},setAnchorY:function(x){this.setAnchor(this.getAnchor().x,x)},getScaleX:function(){return this.getScale().x},setScaleX:function(N){this.setScale(N,this.getScale().y)},getScaleY:function(){return this.getScale().y},setScaleY:function(L){this.setScale(this.getScale().x,L)},p:function(){return 0===arguments.length?this.getPosition():(this.setPosition.apply(this,arguments),this)},p3:function(){return 0===arguments.length?this.getPosition3d():(this.setPosition3d.apply(this,arguments),this)},s3:function(){return 0===arguments.length?this.getSize3d():(this.setSize3d.apply(this,arguments),this)},r3:function(){return 0===arguments.length?this.getRotation3d():(this.setRotation3d.apply(this,arguments),this)},t3:function(){return this.translate3d.apply(this,arguments),this},translate3dBy:function(y,I){tl(y,Bn(q,q,this.r3(),this.getRotationMode())),this.translate3d(y[0]*I,y[1]*I,y[2]*I)},translateFront:function(W){this.translate3dBy([0,0,1],W)},translateBack:function(V){this.translate3dBy([0,0,-1],V)},translateLeft:function(T){this.translate3dBy([-1,0,0],T)},translateRight:function(S){this.translate3dBy([1,0,0],S)},translateTop:function(g){this.translate3dBy([0,1,0],g)},translateBottom:function(c){this.translate3dBy([0,-1,0],c)},getPosition3d:function(){return[this._position.x,this._54O,this._position.y]},setPosition3d:function(w,F,G){1===arguments.length&&(F=w[1],G=w[2],w=w[0]),this.p(w,G),this.setElevation(F)},translate3d:function(H,V,K){1===arguments.length&&(V=H[1],K=H[2],H=H[0]),this.translate(H,K),this.setElevation(this._54O+V)},getSize3d:function(){return[this.getWidth(),this.getTall(),this.getHeight()]},setSize3d:function(M,w,u){1===arguments.length&&(w=M[1],u=M[2],M=M[0]),this.setSize(M,u),this.setTall(w)},getRotation3d:function(){return[this._rotationX,-this._64O,this._53O]},setRotation3d:function(t,J,x){1===arguments.length&&(J=t[1],x=t[2],t=t[0]),this.setRotationX(t),this.setRotation(-J),this.setRotationZ(x)},setRotationY:function(E){this.setRotation(-E)},getRotationY:function(){return-this._64O},lookAt:function(g,B){B=B||fj;var X=this,i=fe(g,X.p3()),V=Yh(i);B===fj?(X.r3([-r(i[1]/V),-Q(i[2],i[0])+h,0]),X.setRotationMode("xzy")):B===Ai?(X.r3(0,-Q(i[2],i[0]),r(i[1]/V)),X.setRotationMode("zyx")):B===qg?(X.r3(0,-Q(i[2],i[0])+F,-r(i[1]/V)),X.setRotationMode("zyx")):B===jo?(X.r3([-r(i[1]/V)+h,-Q(i[2],i[0])+h,0]),X.setRotationMode("xzy")):B===rs&&(X.r3([-r(i[1]/V)-h,-Q(i[2],i[0])+h,0]),X.setRotationMode("xzy")),B===Uc&&(X.r3([-r(i[1]/V)+F,-Q(i[2],i[0])+h,F]),X.setRotationMode("zxy"))},getLoopedEdges:function(){return this._45I},getEdges:function(){return this._70O},getAgentEdges:function(){return this._49I},getHost:function(){return this._host},setHost:function(G){var v=this;if(v!==G&&v._host!==G){var l=v._host;l&&l._removeAttach(v),v._host=G,v._host&&v._host._addAttach(v),v.fp("host",l,G),v.onHostChanged(l,G)}},getAttaches:function(){return this._69O},_addAttach:function(G){var h=this;h._69O||(h._69O=new eb),h._69O.add(G),h.fp("attaches",q,G)},_removeAttach:function(B){var u=this;u._69O.remove(B),u._69O.isEmpty()&&delete u._69O,u.fp("attaches",B,q)},getSourceEdges:function(){return this._42I},getTargetEdges:function(){return this._43I},_2I:function(i){var w=this;w._44I||(w._44I=new eb),w._42I||(w._42I=new eb),w._44I.add(i),w._42I.add(i),w._20I()},_4I:function(n){var X=this;X._44I||(X._44I=new eb),X._43I||(X._43I=new eb),X._44I.add(n),X._43I.add(n),X._20I()},_16I:function(X){var p=this;p._44I.remove(X),p._42I.remove(X),p._44I.isEmpty()&&delete p._44I,p._42I.isEmpty()&&delete p._42I,p._20I()},_18I:function(q){var D=this;D._44I.remove(q),D._43I.remove(q),D._44I.isEmpty()&&delete D._44I,D._43I.isEmpty()&&delete D._43I,D._20I()},_20I:function(){var W=this;if(delete W._45I,!W._44I||W._44I.isEmpty())return delete W._70O,void 0;var Z;W._44I.each(function(U){U.isLooped()&&(Z||(Z={}),Z[U._id]||(W._45I||(W._45I=new eb),W._45I.add(U),Z[U._id]=U))}),Z?(W._70O=new eb,W._44I.each(function(I){Z[I._id]?"A"===Z[I._id]||(Z[I._id]="A",W._70O.add(I)):W._70O.add(I)})):W._70O=W._44I},hasAgentEdges:function(){return!!this._49I&&!this._49I.isEmpty()},getSourceAgentEdges:function(){return this._46I},getTargetAgentEdges:function(){return this._47I},_1I:function(u){var T=this;T._46I||(T._46I=new eb),T._48I||(T._48I=new eb),T._46I.add(u),T._48I.add(u),T._19I()},_3I:function(F){var L=this;L._47I||(L._47I=new eb),L._48I||(L._48I=new eb),L._47I.add(F),L._48I.add(F),L._19I()},_15I:function(d){var E=this;E._46I.remove(d),E._48I.remove(d),E._46I.isEmpty()&&delete E._46I,E._48I.isEmpty()&&delete E._48I,E._19I()},_17I:function(e){var V=this;V._47I.remove(e),V._48I.remove(e),V._47I.isEmpty()&&delete V._47I,V._48I.isEmpty()&&delete V._48I,V._19I()},_19I:function(){var u=this;delete u._49I;var o=u._48I;if(o&&!o.isEmpty()){var E={};o.each(function(x){E[x._id]?u._49I||(u._49I=new eb):E[x._id]=x}),u._49I?o.each(function($){E[$._id]&&(u._49I.add($),delete E[$._id])}):u._49I=o}},getImage:function(){if(this._pendingCheckImageJSON){var J=u.getImage(this._image);J&&(this._pendingCheckImageJSON=!1,J.dataBindings&&J.dataBindings.forEach(function(G){G.defaultValue!==m&&this.getAttr(G.attr)===m&&this.setAttr(G.attr,G.defaultValue)},this),this.getParent()instanceof Xj&&this.getParent().checkPendingUpdateInfo())}return this._image},setImage:function($){var S=this,M=S._image,D=S.getWidth(),c=S.getHeight();S._image=$,S.fp("image",M,$)&&(null!=$&&(Me($)&&!/\.json$/i.test($)&&($=s.Default.getImage($)),(we($)||Me($)&&/\.json$/i.test($))&&(this._pendingCheckImageJSON=!0)),S.fp(no,D,S.getWidth()),S.fp(qo,c,S.getHeight()))},getElevation:function(){return this._54O},setElevation:function(J){var Q=this;if(!Q._50O){Q._50O=1;var c=Q._54O;Q._54O=J,Q.fp($f,c,J),delete this._50O}},getRotation:function(){return this._64O},setRotation:function(t){var u=this;if(!u._49O){u._49O=1;var n=u._64O;u._64O=t,u.fp(Go,n,t),delete u._49O}},getRotationX:function(){return this._rotationX},setRotationX:function(B){var U=this;if(!U._51O){U._51O=1;var s=U._rotationX;U._rotationX=B,U.fp("rotationX",s,B),delete U._51O}},getRotationZ:function(){return this._53O},setRotationZ:function(G){var V=this;if(!V._52O){V._52O=1;var q=V._53O;V._53O=G,V.fp("rotationZ",q,G),delete V._52O}},getPosition:function(){return this._position},setPosition:function(T,U){var k=this;if(!k._50I){k._50I=1;var z;if(z=2===arguments.length?{x:T,y:U}:T,z.x!==k._position.x||z.y!==k._position.y){var t=k._position;k._position=z,k.fp(Ui,t,z)}delete k._50I}},translate:function(A,a){var C=this._position;this.p(C.x+A,C.y+a)},getWidth:function(){var h=this;if(h._width>=0)return h._width;var D=h.getStyle("shape3d");if(D){var M=rf(D);if(M&&M.rawS3)return M.rawS3[0]}var c=Si(h._image);return c?re(c,h):20},setWidth:function(X){var o=this,v=o._width;o._width=X,o.fp(no,v,X)},getHeight:function(){var f=this;if(f._height>=0)return f._height;var u=f.getStyle("shape3d");if(u){var b=rf(u);if(b&&b.rawS3)return b.rawS3[2]}var r=Si(f._image);return r?Vo(r,f):20},setHeight:function(a){var v=this,W=v._height;v._height=a,v.fp(qo,W,a)},getTall:function(){var B=this;if(B._tall>=0)return B._tall;var N=B.getStyle("shape3d");if(N){var d=rf(N);if(d&&d.rawS3)return d.rawS3[1]}return 20},setTall:function(A){var O=this,L=O._tall;O._tall=A,O.fp("tall",L,A)},setSize:function(o,s){var u=this;2===arguments.length?(u.setWidth(o),u.setHeight(s)):(u.setWidth(o.width),u.setHeight(o.height))},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},setRect:function(g,D,e,h,n){var q=this,L=q.getAnchor(),N=q.getScale();arguments.length<=2&&(n=D,D=g.y,e=g.width,h=g.height,g=g.x);var X=n&&N.x<0?1-L.x:L.x,V=n&&N.y<0?1-L.y:L.y;q.p(g+e*X,D+h*V),n&&(e/=Math.abs(N.x),h/=Math.abs(N.y)),q.setWidth(e),q.setHeight(h)},getMatrix:function(){var v=this,f=v._64O,G=v._position,w=v.getScale();return new pn(f,G.x,G.y,w.x,w.y)},getAnchorRect:function(){var V=this,F=V.getWidth(),z=V.getHeight(),E=V.getAnchor();return{x:-F*E.x,y:-z*E.y,width:F,height:z}},getRect:function(){var V=this,R=V.getWidth(),s=V.getHeight(),$=V.getAnchor(),N={x:-R*$.x,y:-s*$.y,width:R,height:s},F=V.getMatrix();return N=tq([F.tf(N.x,N.y),F.tf(N.x+N.width,N.y),F.tf(N.x+N.width,N.y+N.height),F.tf(N.x,N.y+N.height)])},getAnchorElevation:function(){return this._anchorElevation},getAnchor3d:function(){var P=this,$=P.getAnchor(),o=P._anchorElevation;
return{x:$.x,y:o,z:$.y}},setAnchorElevation:function(r){var e=this,f=e._anchorElevation;f!==r&&(e._anchorElevation=r,e.fp("anchorElevation",f,r))},setAnchor3d:function($,I,C,N){var A,J=this;"number"==typeof $?A={x:$,y:I,z:C}:(A=$.length?{x:$[0],y:$[1],z:$[2]}:$,N=I),J.setAnchor(A.x,A.z,N),J.setAnchorElevation(A.y)},getAnchor:function(){var r=this;if(r.hasOwnProperty("_anchor"))return r._anchor;var i=Si(r._image);return i&&i.anchorX!==m?{x:i.anchorX,y:i.anchorY}:r._anchor},setAnchor:function(j,w,G){var k,P=this;"number"==typeof j?k={x:j,y:w}:(k=j.length?{x:j[0],y:j[1]}:j,G=w);var o=P.getAnchor();if(o.x!==k.x||o.y!==k.y){var u=P.getDataModel(),L=u?u.getHistoryManager():null;if(L&&L.beginInteraction(),P._anchor=k,P.fp("anchor",o,k),G&&!Pr){var V=P.getPosition(),d=P.getSize(),J=P.getRotation(),n=P.getScale(),N=-d.width*(o.x-k.x)*n.x,c=-d.height*(o.y-k.y)*n.y,U=M(J),H=z(J);P.setPosition(V.x+H*N-U*c,V.y+U*N+H*c)}L&&L.endInteraction()}},getScale:function(){return this._scale},setScale:function(R,g){var K,v=this;K=2===arguments.length?{x:R,y:g}:R;var i=v.getScale();(i.x!==K.x||i.y!==K.y)&&(v._scale=K,v.fp("scale",i,K))},getScaleTall:function(){return this._scaleTall},getScale3d:function(){var b=this,E=b._scaleTall,A=b.getScale();return{x:A.x,y:E,z:A.y}},getFinalScale3d:function(){var N,a=this,s=a.getScale3d(),D=a.s3(),L=a._dynamicScale3d;return N=D?[s.x*D[0],s.y*D[1],s.z*D[2]]:[s.x,s.y,s.z],L&&(N[0]*=L[0],N[1]*=L[1],N[2]*=L[2]),N},setScaleTall:function(G){var M=this,P=M._scaleTall;P!==G&&(M._scaleTall=G,M.fp("scaleTall",P,G))},setScale3d:function(l,x,D){var Q,W=this;Q="number"==typeof l?{x:l,y:x,z:D}:l.length?{x:l[0],y:l[1],z:l[2]}:l,W.setScaleTall(Q.y),W.setScale(Q.x,Q.z)},getCorners:function(z,x){z==q&&(z=0),x==q&&(x=z);var V=this,l=V.getAnchor(),Q=V.getWidth(),r=V.getHeight(),J=-Q*l.x-z,f=-r*l.y-x,D=Q+2*z,m=r+2*x,p=V.getMatrix();return[p.tf(J,f),p.tf(J,f+m),p.tf(J+D,f+m),p.tf(J+D,f)]},getEditControlPoints:function(m,o,D){o==q&&(o=0),D==q&&(D=o);var Q=this,I=Q.getAnchor(),l=Q.getWidth(),E=Q.getHeight(),J=-l*I.x-o,n=-E*I.y-D,F=l+2*o,b=E+2*D;if(m)return[{x:J,y:n},{x:J,y:0},{x:J,y:n+b},{x:0,y:n+b},{x:J+F,y:n+b},{x:J+F,y:0},{x:J+F,y:n},{x:0,y:n}];var $=Q.getMatrix();return[$.tf(J,n),$.tf(J,0),$.tf(J,n+b),$.tf(0,n+b),$.tf(J+F,n+b),$.tf(J+F,0),$.tf(J+F,n),$.tf(0,n)]},rotateAt:function(w,X,Y){var i=this,D=i._position,k=i._64O,$=new pn(k,D.x,D.y).tf(w,X),C=x(w*w+X*X),f=Q(D.y-$.y,D.x-$.x)+Y;i.setRotation(k+Y),i.p($.x+C*z(f),$.y+C*M(f))},onParentChanged:function(){ah.superClass.onParentChanged.apply(this,arguments),this._8I()},_8I:function(){this._70O&&this._70O.each(function(J){J._7I()})},onPropertyChanged:function(J){var M=this;ah.superClass.onPropertyChanged.call(M,J),M._69O&&M._69O.each(function(c){c.handleHostPropertyChange(J)}),M._49I&&M._49I.each(function(W){W.fp("agentChange",!0,!1)})},onHostChanged:function(){this.updateAttach()},handleHostPropertyChange:function(j){this.updateAttach(j)},onStyleChanged:function(N){ah.superClass.onStyleChanged.apply(this,arguments),Ml[N]&&this.updateAttach()},updateAttach:function(n){var f=this;f._51I||Pr||(f._51I=1,f._71O(n),delete f._51I)},_71O:function(B){var k,r,b,j,Y,l,$=this,a=$._host,m=B?B.property:q,i=B?B.oldValue:q,d=B?B.newValue:q;if(a instanceof s.Grid){if(m===$f)$.setElevation($._54O+d-i);else if(!B||ph[m]){if(k=$.s("attach.row.index"),r=$.s("attach.column.index"),b=a.getCellRect(k,r),!b)return;j=$.s("attach.row.span"),Y=$.s("attach.column.span"),(1!==j||1!==Y)&&(b=xl(b,a.getCellRect(k+j-1,r+Y-1))),Vq(b,$,"attach.padding",1),$.setRect(b)}}else if(a instanceof gd&&(l=$.s("attach.index"))>=0&&(!B||di[m])){var K=$.s("attach.thickness");K!=q&&$.setHeight(a.getThickness()*K);var f=$.s("attach.offset"),u=a.getPoints(),g=u.size();if(g>l){var V=u.get(l),W=g===l+1?u.get(0):u.get(l+1),n=[W.x-V.x,W.y-V.y],t=Yh(n);if(t){$.s("attach.offset.relative")&&(f*=t),$.s("attach.offset.opposite")&&(f=t-f);var H={x:V.x+n[0]/t*f,y:V.y+n[1]/t*f},o=$.s("attach.gap");o&&($.s("attach.gap.relative")&&(o*=a.getThickness()),H=se(q,H,W,o)),$.p(H),$.setRotation(Q(n[1],n[0]))}}}else B&&(m===Ui?$.translate(d.x-i.x,d.y-i.y):m===$f?$.setElevation($._54O+d-i):Df[m]&&$._11Q(a,m,d-i))},_11Q:function(W,V,M){var L=this,t=W.p3(),O=fe(L.p3(),t),E=Ae(),s=ls[L.getRotationMode()],y=s[0],w=s[1],n=s[2],C=cd[y],q=cd[w],f=cd[n];V===Go&&(V="rotationY",M=-M),V===Go+y?(f(E,W[Yq+n]()),q(E,W[Yq+w]()),C(E,M),q(E,-W[Yq+w]()),f(E,-W[Yq+n]()),L[Lk+y](L[Yq+y]()+M)):V===Go+w?(f(E,W[Yq+n]()),q(E,M),f(E,-W[Yq+n]()),L[Lk+w](L[Yq+w]()+M)):V===Go+n&&(f(E,M),L[Lk+n](L[Yq+n]()+M)),tl(O,E),L.p3(t[0]+O[0],t[1]+O[1],t[2]+O[2])},isHostOn:function(E){var f=this;if(f._host&&E&&E._69O)for(var k={},F=f._host;F&&F!==f&&!k[F._id];){if(F===E)return!0;k[F._id]=F,F=F._host}return!1},isLoopedHostOn:function(j){return this.isHostOn(j)&&j.isHostOn(this)},getSerializableProperties:function(){var L=ah.superClass.getSerializableProperties.call(this);return As(L,{image:1,host:1,rotation:1,rotationX:1,rotationZ:1,rotationMode:1,position:1,anchor:1,anchorElevation:1,scale:1,scaleTall:1,_width:1,_height:1,_tall:1,elevation:1}),L}});var Ec=s.Edge=function(q,J){var y=this;cn(Ec,y),y.setSource(q),y.setTarget(J)};wj("Edge",Oh,{_icon:"edge_icon",getUIClass:function(){return Vb},_22Q:function(){return Yp},getSource:function(){return this._source},getTarget:function(){return this._target},getSourceAgent:function(){return this._40I},getTargetAgent:function(){return this._41I},setSource:function(A){var h=this;if(h._source!==A){var q=h._source;h._source=A,q&&q._16I(h),A&&A._2I(h),h._7I(),h.fp("source",q,A)}},setTarget:function(e){var a=this;if(a._target!==e){var s=a._target;a._target=e,s&&s._18I(a),e&&e._4I(a),a._7I(),a.fp("target",s,e)}},isLooped:function(){var m=this;return m._source===m._target&&!!m._source&&!!m._target},_7I:function(){var t,$=this,e=Ji($);$._40I!==e&&(t=this._40I,t&&t._15I($),$._40I=e,e&&e._1I($),$.fp("sourceAgent",t,e),xn(t,$._41I),xn(e,$._41I));var z=ss($);$._41I!==z&&(t=$._41I,t&&t._17I($),$._41I=z,z&&z._3I($),$.fp("targetAgent",t,z),xn(t,$._40I),xn(z,$._40I))},_22I:function(N){this._52I=N,this.fp("edgeGroup",!0,!1)},getEdgeGroup:function(){return this._52I},isEdgeGroupHidden:function(){var W=this;return W._52I&&W._52I.get(0)!==W&&!W.getStyle(ws)},getEdgeGroupSize:function(){return this._52I?this._52I.size():1},getEdgeGroupIndex:function(){return this._52I?this._52I.indexOf(this):0},isEdgeGroupAgent:function(){var a=this,K=a._52I;return K&&!a.getStyle(ws)&&K.size()>1&&a===K.get(0)},toggle:function(){var K=this._52I,M=!this.s(ws);K&&K.size()>1&&(K.each(function(b){b.s(ws,M)}),K.getSiblings().each(function(k){k!==K&&k.each(function(U){U.fp("edgeGroup",q,k)})}))},setStyle:function(F,J){(F===ip||"edge.segments"===F)&&(J=Qj(J)),Ec.superClass.setStyle.call(this,F,J)},onStyleChanged:function(D){Ec.superClass.onStyleChanged.apply(this,arguments),yl[D]&&xn(this._41I,this._40I)},getSerializableProperties:function(){var X=Ec.superClass.getSerializableProperties.call(this);return As(X,{source:1,target:1}),X}});var cl=s.Group=function(){cn(cl,this)};wj("Group",ah,{_image:"group_image",_icon:"group_icon",_57O:!1,getUIClass:function(){return Vl},onChildAdded:function(){cl.superClass.onChildAdded.apply(this,arguments),this._81I()},onChildRemoved:function(){cl.superClass.onChildRemoved.apply(this,arguments),this._81I()},_81I:function(){var N=this;if(!N._54I&&!Pr){var E=N.getChildrenRect();E&&(N._53I=1,N.p(_m(N.s("group.position"),E,N.getSize())),delete N._53I)}},getChildrenRect:function(){var P,L=this;return L.eachChild(function(Z){P=xl(P,L.getChildRect(Z))}),P},getChildRect:function(Y){var H;return $p(Y)&&Y.s(_r)&&(jk(Y)&&Y.isExpanded()&&Y.eachChild(function(c){H=xl(H,Y.getChildRect(c))}),!H&&Y.getRect&&(H=Y.getRect())),H},setPosition:function(t,s){var l=this;if(!l._54I){var R;R=2===arguments.length?{x:t,y:s}:t,Pr||l._53I||(l._54I=1,Re(l._children,R.x-l._position.x,R.y-l._position.y),delete l._54I),cl.superClass.setPosition.call(this,R)}},toggle:function(){this.setExpanded(!this.isExpanded())},isExpanded:function(){return this._57O},setExpanded:function(C){var D=this;if(D._57O!==C){var b=D._57O;D._57O=C,D.fp("expanded",b,D._57O),D._8I()}},_8I:function(){cl.superClass._8I.call(this),this.eachChild(function(d){$p(d)&&d._8I()})},onStyleChanged:function(t){cl.superClass.onStyleChanged.apply(this,arguments),"group.position"===t&&this._81I()},getSerializableProperties:function(){var l=cl.superClass.getSerializableProperties.call(this);return l.expanded=1,l}});var bn=s.Block=function(){cn(bn,this)};wj("Block",ah,{_icon:"block_icon",_clickThroughEnabled:!1,_syncSize:!0,ms_ac:["clickThroughEnabled","syncSize"],getUIClass:function(){return wr},onChildAdded:function(){bn.superClass.onChildAdded.apply(this,arguments),this.updateFromChildren()},onChildRemoved:function(){bn.superClass.onChildRemoved.apply(this,arguments),this.updateFromChildren()},updateFromChildren:function(){var h=this;if(!Pr&&!h._updatingToChildren&&h._syncSize){var O,o,D,W,e,N=[],i=h.getRotation();if(h.eachChild(function(S){$p(S)&&N.push.apply(N,S.getCorners())}),N.length){h._updatingFromChildren=1;var J=z(-i),f=M(-i),m=1/0,T=-1/0,j=1/0,a=-1/0;for(W=0,e=N.length;e>W;W++)D=N[W],O=D.x,o=D.y,D.x=J*O-f*o,D.y=f*O+J*o,m=c(m,D.x),T=I(T,D.x),j=c(j,D.y),a=I(a,D.y);var v=h.getScale();h.setSize(E((T-m)/v.x),E((a-j)/v.y));var q;v.x<0&&(q=m,m=T,T=q),v.y<0&&(q=j,j=a,a=q),J=z(i),f=M(i);var t=h.getAnchor();O=m+(T-m)*t.x,o=j+(a-j)*t.y,h.setPosition(J*O-f*o,f*O+J*o),delete h._updatingFromChildren}}},setPosition:function(n,E){var Z=this;if(!Z._updatingToChildren){var V;V=2===arguments.length?{x:n,y:E}:n,Pr||Z._updatingFromChildren||(Z._updatingToChildren=1,Re(Z._children,V.x-Z._position.x,V.y-Z._position.y),delete Z._updatingToChildren),bn.superClass.setPosition.call(this,V)}},setWidth:function(Z){return this.setSize(Z,this.getHeight())},setHeight:function(O){return this.setSize(this.getWidth(),O)},setSize:function(n,W){1>n&&(n=1),1>W&&(W=1);var L=this;if(!L._updatingToChildren){2!==arguments.length&&(W=n.height,n=n.width);var T=L.getWidth(),s=L.getHeight();if(n!==T&&bn.superClass.setWidth.call(L,n),W!==s&&bn.superClass.setHeight.call(L,W),!Pr&&!L._updatingFromChildren){L._updatingToChildren=1;var V=n/T,e=W/s;L._adjustChildScaleOrSize(V,e,"size"),delete L._updatingToChildren,L.updateFromChildren()}}},_adjustChildScaleOrSize:function(I,C,r){var W=this;if(W._syncSize){var B=W.getPosition(),e=W.getRotation();W.getScale(),W.eachChild(function(i){if($p(i)){var _=i.getPosition(),k=i.getRotation(),L=i.getWidth(),p=i.getHeight(),q=i.getScale(),g=q.x*L,G=q.y*p,N=new pn(k,_.x,_.y,g,G);N.translate(-B.x,-B.y),N.rotate(-e),k=Q(N.b*Math.sign(g),N.a*Math.sign(g)),N.scale(I,C);var A,a,$,m=z(k);if(Math.abs(m)<.001?(A=M(k),a=N.b/A,$=-N.c/A):(a=N.a/m,$=N.d/m),"scale"===r)i.setScale(a/L,$/p);else if("size"===r){var Y=a/q.x,c=$/q.y;i.setScale($m(a)*Math.abs(q.x),$m($)*Math.abs(q.y)),i.setSize(Math.max(.1,Math.abs(Y)),Math.max(.1,Math.abs(c)))}N.rotate(e),N.translate(B.x,B.y),i.setPosition(N.tx,N.ty)}})}},_calcChangeFactor:function(w,C,Y,j){var K,m,f,z;return K=E(w),m=E(Y),f=K>m?K/m:m/K,K=E(C),m=E(j),z=K>m?K/m:m/K,I(f,z)},setAnchor:function(){var h=this;if(!h._updatingToChildren){var W=h.getAnchor();if(bn.superClass.setAnchor.apply(h,arguments),!Pr&&!h._updatingFromChildren&&h._syncSize){h._updatingToChildren=1;var r=h.getAnchor();h.getPosition();var L=h.getSize(),G=h.getScale(),Z=h.getRotation(),V=-L.width*G.x*(W.x-r.x),k=-L.height*G.y*(W.y-r.y),v=M(Z),R=z(Z),f=R*V-v*k,N=v*V+R*k;h.eachChild(function(b){if($p(b)){var m=b.getPosition();b.setPosition(m.x-f,m.y-N)}}),delete h._updatingToChildren}}},setRotation:function(E){var n=this;if(!n._updatingToChildren){var K=n.getRotation();if(bn.superClass.setRotation.apply(n,arguments),!Pr&&!n._updatingFromChildren){n._updatingToChildren=1;var X=n.getPosition(),f=E-K;n.eachChild(function(y){if($p(y)){var g=y.getMatrix();g.translate(-X.x,-X.y),g.rotate(f),g.translate(X.x,X.y);var P=Math.sign(y.getScale().x);y.setRotation(Q(g.b*P,g.a*P)),y.setPosition(g.tx,g.ty)}}),delete n._updatingToChildren}}},setScale:function(o,J){var M=this;if(!M._updatingToChildren){null==J&&(J=o.y,o=o.x);var D=M.getScale();if(E(o)<.01&&(o=.01*($m(o)||$m(D.x))),E(J)<.01&&(J=.01*($m(J)||$m(D.y))),bn.superClass.setScale.call(M,o,J),!Pr&&!M._updatingFromChildren){M._updatingToChildren=1;var c=o/D.x,w=J/D.y;M._adjustChildScaleOrSize(c,w,"size"),delete M._updatingToChildren,M.updateFromChildren()}}},getSerializableProperties:function(){var O=bn.superClass.getSerializableProperties.call(this);return O.clickThroughEnabled=1,O.syncSize=1,O}});var ds=s.Grid=function(){cn(s.Grid,this)};wj("Grid",ah,{IRotatable:!1,_icon:"grid_icon",_image:q,getUIClass:function(){return Nd},setRotation:function(){},getCellRect:function(G,W){var u=this,$=u.s("grid.row.count"),n=u.s("grid.column.count");if(0>=$||0>=n||0>G||G>=$||0>W||W>=n)return q;var d,R,U,Y=u.getRect(),p=u.s("grid.row.percents"),z=u.s("grid.column.percents");if(Vq(Y,u,"grid.border",-1),p&&p._as&&(p=p._as),z&&z._as&&(z=z._as),p&&p.length===$){for(U=0,d=0;G>d;d++)U+=Y.height*p[d];Y.y+=U,Y.height=Y.height*p[G]}else Y.height=Y.height/$,Y.y+=Y.height*G;if(z&&z.length===n){for(R=0,d=0;W>d;d++)R+=Y.width*z[d];Y.x+=R,Y.width=Y.width*z[W]}else Y.width=Y.width/n,Y.x+=Y.width*W;return Uq(Y,-u.s("grid.gap")),Y}});var Lj=s.Text=function(){cn(Lj,this),this.setSize(100,50),this.s("text","TEXT")};wj("Text",ah,{_icon:"text_icon",_image:"__text__",getUIClass:function(){return Oj},setWidth:function(x){x||(x=.001),Lj.superClass.setWidth.call(this,x)},setHeight:function(G){G||(G=.001),Lj.superClass.setHeight.call(this,G)},toLabel:function(){return this._displayName||this._name||this.s("text")}}),Xm("__text__",{width:{value:100,isSafeFunc:!0,func:function(G){return G._width}},height:{value:50,isSafeFunc:!0,func:function(n){return n._height}},comps:[{type:"text",relative:!0,rect:[0,0,1,1],text:{func:"style@text"},align:{func:"style@text.align"},vAlign:{func:"style@text.vAlign"},color:{func:"style@text.color"},font:{func:"style@text.font"},shadow:{func:"style@text.shadow"},shadowColor:{func:"style@text.shadow.color"},shadowBlur:{func:"style@text.shadow.blur"},shadowOffsetX:{func:"style@text.shadow.offset.x"},shadowOffsetY:{func:"style@text.shadow.offset.y"}}]});var gd=s.Shape=function(){cn(gd,this),this._59O=new eb};gd.__de__=Sg,wj("Shape",ah,{ms_ac:["thickness","closePath"],_icon:"shape_icon",_thickness:10,_closePath:!1,getUIClass:function(){return Ob},_22Q:function(){return Mg},getLength:function(y){return pf(Qd(this._59O,this._58O,y,this._closePath))},getSegments:function(){return this._58O},toSegments:function(){var r=this._58O;return r?new eb(r._as.slice(0)):r},setSegments:function(L){var v=this._58O;L=L?Nc(L)?new eb(L.slice(0)):new eb(L._as.slice(0)):null,(v&&L&&v._as.join(",")!==L._as.join(",")||v!==L)&&(this._58O=L,this.fp("segments",v,L))},getPoints:function(){return this._59O},toPoints:function(){var _=this._59O;return new eb(_._as.slice(0))},setPoints:function(D,T){var g=this,O=g._59O;D=D?Nc(D)?new eb(D.slice(0)):new eb(D._as.slice(0)):new eb;var m,h,o,c,p,E;T&&(m=g.getPosition(),E=new pn(g.getRotation(),0,0,g.getScale().x,g.getScale().y)),(O&&D&&O._as.join(",")!==D._as.join(",")||O!==D)&&(g._59O=D,g.fs(),g.fp("points",O,D)),T&&(h=g.getPosition(),o=h.x-m.x,c=h.y-m.y,p=E.tf(o,c),g.setPosition(h.x-o+p.x,h.y-c+p.y))},addPoint:function(o,e,_){var q=this.toPoints();q.add(o,e),this.setPoints(q,_)},setPoint:function(B,c,T){var f=this.toPoints();f.set(B,c),this.setPoints(f,T)},removePointAt:function(n){var Q=this.toPoints();Q.removeAt(n),this.setPoints(Q)},setWidth:function(f){var u=this;if(1>f&&(f=1),!u._55I&&!Pr&&u.getWidth()){u._55I=1;var X=u._position.x,a=f/u.getWidth(),F=u.toPoints(),x=new eb;F.each(function(p){x.add({x:(p.x-X)*a+X,y:p.y,e:p.e})}),u.setPoints(x);var J=u.s("shape.gradient.pack");J&&Fc(J,[a,0,0,1,X*(1-a),0]),u.fs(),delete u._55I}gd.superClass.setWidth.call(u,f)},setHeight:function(o){var V=this;if(1>o&&(o=1),!V._55I&&!Pr&&V.getHeight()){V._55I=1;var D=V._position.y,g=o/V.getHeight(),u=V.toPoints(),z=new eb;u.each(function(M){z.add({x:M.x,y:(M.y-D)*g+D,e:M.e})}),V.setPoints(z);var $=V.s("shape.gradient.pack");$&&Fc($,[1,0,0,g,0,D*(1-g)]),V.fs(),delete V._55I}gd.superClass.setHeight.call(V,o)},setAnchor:function(g,Z,r){var I=this;if(I._55I=!0,!Pr){var T,N,H;"number"==typeof g?H={x:g,y:Z}:(H=g.length?{x:g[0],y:g[1]}:g,r=Z);var O=I.getAnchor(),L=I.getSize();T=L.width*(O.x-H.x),N=L.height*(O.y-H.y),r||I.shiftPoints(T,N);var w=I.getPosition()}if(gd.superClass.setAnchor.apply(I,arguments),!Pr){var E=I.getPosition();r&&I.shiftPoints(E.x-w.x+T,E.y-w.y+N)}delete I._55I},shiftPoints:function(b,S){var c=this,w=c.toPoints(),g=new eb;w.each(function(w){g.add({x:w.x+b,y:w.y+S,e:w.e})}),c.setPoints(g),c.fs()},setPosition:function(f,L){var u,w=this;if(!w._28Q){if(w._28Q=1,!w._55I&&!Pr){u=2===arguments.length?{x:f,y:L}:f;var s=u.x-w._position.x,K=u.y-w._position.y;if(0===s&&0===K)return delete w._28Q,void 0;w._55I=1,w.shiftPoints(s,K);var V=w.s("shape.gradient.pack");V&&Fc(V,[1,0,0,1,s,K]),delete w._55I}gd.superClass.setPosition.apply(w,arguments),delete w._28Q}},fs:function(){this.fireShapeChange()},_70I:function(){var G=this;if(2!==G._59O.size())return!1;var I=G._58O;return I?2===I.size()&&1===I.get(0)&&2===I.get(1)?!0:!1:!0},fireShapeChange:function(){var L=this;if(!L._55I&&!Pr){var V=tq(L._59O);V&&(L._55I=1,L.setRect(V),delete L._55I)}L.fp(hb,!1,!0)},getSerializableProperties:function(){var Q=gd.superClass.getSerializableProperties.call(this);return Q.segments=1,Q.points=1,Q.thickness=1,Q.closePath=1,Q}});var ec=s.Polyline=function(){cn(ec,this),this.s({"shape.background":null,"shape.border.width":2})};wj("Polyline",gd,{IRotatable:!1,_icon:"polyline_icon",_22Q:function(){return ys},getUIClass:function(){return ke},setRotationX:function(){},setRotation:function(){},setRotationZ:function(){},setClosePath:function(){},setTall:function(H){var c=this;if(!c._24Q&&!Pr&&c.getTall()){c._24Q=1;var d=c._54O,w=H/c.getTall();c._59O.each(function(n){n.e=n.e==q?d:(n.e-d)*w+d}),c.fs(),delete c._24Q}ec.superClass.setTall.call(c,H)},setElevation:function(Y){var W=this;if(!W._24Q&&!Pr){W._24Q=1;var A=Y-W._54O;W._59O.each(function(R){R.e==q?R.e=Y:R.e+=A}),W.fs(),delete W._24Q}ec.superClass.setElevation.apply(W,arguments)},fireShapeChange:function(){var E=this,b=E._59O;if(!E._24Q&&!Pr){var N=b.size();if(N){var K=1,A=b.get(0),P=E._54O;A.e==q&&(A.e=P);for(var F=A.e,Y=0;N>K;K++){A=b.get(K),A.e==q&&(A.e=P);var U=c(F,A.e),S=I(F+Y,A.e);F=U,Y=S-U}E._24Q=1,E.setTall(Y),E.setElevation(F+Y/2),delete E._24Q}}ec.superClass.fireShapeChange.apply(E,arguments)}});var Rg=s.SubGraph=function(){cn(Rg,this)};wj("SubGraph",ah,{ISubGraph:1,_image:"subGraph_image",_icon:"subGraph_icon",_8I:function(){Rg.superClass._8I.call(this),this.eachChild(function(o){$p(o)&&o._8I()})}});var Xj=s.RefGraph=function(){cn(Xj,this)};wj("RefGraph",bn,{_icon:"refGraph_icon",getRef:function(){return this._ref},setRef:function(V){var l=this._ref;this._ref=V,this.fp("ref",l,V),this._pendingUpdateFromChidlren=!0,this.updateRef()},_21I:function(){Xj.superClass._21I.apply(this,arguments),this.updateRef()},updateRef:function(){var R=this;if(R.clearChildrenFromDataModel(),R._ref&&R._dataModel){R._xhrLoadHandler&&(R._xhrLoadHandler.cancel=!0);var g=Pr,y=R._xhrLoadHandler=function(z){if(z&&R._dataModel){u.loadingRefGraph=!0;var U=R._pendingUpdateInfo={needToRestore:g};g&&(U.position=R.p(),U.width=R.getWidth(),U.height=R.getHeight(),U.rotation=R.getRotation(),U.anchor=R.getAnchor(),U.scale=R.getScale()),R.p(0,0),R.setAnchor(.5,.5),R.setRotation(0),R.setScale(1,1);var I=u.parse(z),i=R._dataModel.deserialize(I,R,{justDatas:!0});i.each(function(Q){Q._refGraph=R}),R.checkPendingUpdateInfo(),u.loadingRefGraph=!1,u.handleRefGraphLoaded(R,i,I)}};u.xhrLoad(R._ref,function(D){y.cancel||y(D)})}},checkPendingUpdateInfo:function(){var p=this,z=p._pendingUpdateInfo;if(!z)return p.onPendingUpdated&&p.onPendingUpdated(),void 0;var e=!0;this.eachChild(function(o){(o._pendingCheckImageJSON||o._pendingUpdateInfo)&&(e=!1)}),e&&(p._pendingUpdateInfo=null,p.updateFromChildren(),z.needToRestore&&(p.setSize(z.width,z.height),p.setAnchor(z.anchor),p.setRotation(z.rotation),p.setScale(z.scale),p.p(z.position)),this.getParent()instanceof Xj&&this.getParent().checkPendingUpdateInfo(),p.onPendingUpdated&&p.onPendingUpdated())},getSerializableProperties:function(){var s=Xj.superClass.getSerializableProperties.call(this);return s.ref=1,s}}),s.EdgeGroup=function(s,g){this._70O=s,this._siblings=g;for(var o,V,d=0,G=s.size(),z=C[ws];G>d;d++)if(o=s.get(d).getStyle(ws,!1),o!=q){z=o;break}z==q&&(z=!0);var X=u.edgeGroupAgentFunc;for(X&&(V=X(s),V&&V!==s.get(0)&&(s.remove(V),s.add(V,0))),d=0;G>d;d++)s.get(d).s(ws,z)},wj("EdgeGroup",_,{getEdges:function(){return this._70O},size:function(){return this._70O.size()},get:function(p){return this._70O.get(p)},indexOf:function(E){return this._70O.indexOf(E)},each:function(q,d){this._70O.each(q,d)},getSiblings:function(){return this._siblings},eachSiblingEdge:function(B,l){this._siblings.each(function(j){j._70O.each(B,l)})}});var og=s.JSONSerializer=function(j,U){this.dm=this._dataModel=j,this._hierarchical=u.forceHierarchicalSerialization?!0:U==q?j.isHierarchicalRendering():U};wj("JSONSerializer",_,{ms_ac:["hierarchical"],serialize:function(T){return u.stringify(this.toJSON(),T)},toJSON:function(){var p=this,t=p.dm,N=t.getRoots(),X=p.json={v:u.getVersion(),p:{},a:{},d:[]},W=t.getSerializableAttrs();t.getInit()&&(X.init=t.getInit()),t.getName()&&(X.p.name=t.getName()),t.getBackground()&&(X.p.background=t.getBackground()),t.getLayers()&&(X.p.layers=t.getLayers()),X.p.autoAdjustIndex=t.isAutoAdjustIndex(),X.p.hierarchicalRendering=t.isHierarchicalRendering();for(var P in W){var a=t.a(P);a!==m&&p[Qp](P,a,X.a)}return Af(X.a)&&delete X.a,p._hierarchical?N.each(p.serializeData,this):t.each(function($){p.serializeData($)}),X},isSerializable:function(){return!0},getProperties:function(D){return D.getSerializableProperties()},getStyles:function(Z){return Z.getSerializableStyles()},getAttrs:function(F){return F.getSerializableAttrs()},serializeData:function(f){var w=this;if(w.isSerializable(f)&&!f._refGraph){var $,s,H,r,C=dm(f.getClassName())||f.getClass(),R=new C,q={c:f.getClassName(),i:f.getId(),p:{},s:{},a:{}};w.json.d.push(q),$=w.getProperties(f);for(s in $)/^_/.test(s)?(H=f[s],H!==R[s]&&w[Qp](s.substr(1),H,q.p)):(r=mb(s),f[r]&&(H=f[r](),H!==R[r]()&&w[Qp](s,H,q.p)));$=w.getStyles(f);for(s in $)H=f.s(s),H!==R.s(s)&&w[Qp](s,H,q.s);$=w.getAttrs(f);for(s in $)H=f.a(s),H!==R.a(s)&&w[Qp](s,H,q.a);Af(q.p)&&delete q.p,Af(q.s)&&delete q.s,Af(q.a)&&delete q.a}w._hierarchical&&f.getChildren().each(w.serializeData,w)},serializeValue:function(W,X,x){mk(X)?X={__a:X._as}:X instanceof Oh&&(X={__i:X.getId()}),x[W]=X},deserialize:function(b,T,P){Pr=!0,P=go(P)?{setId:P}:P||{};var K=this;b=K.json=Me(b)?u.parse(b):b,K._82I={};var o=K.dm,H=new eb,h=new eb,E=0,V=b.d.length;if(P.justDatas||(Gf(b.init)&&b.init(o),o.setInit(b.init)),!P.justDatas){for(var C in b.a)o.a(C,K[bp](b.a[C]));for(var j in b.p)o[jp(j)](b.p[j])}for(;V>E;E++){var A=b.d[E],N=dm(A.c),B=new N,z=A.i;P.setId&&z!=q&&(B._id=z),K._82I[z]=B,H.add(B),h.add(A)}for(E=0;V>E;E++)K.deserializeData(H.get(E),h.get(E));return H.each(function(Q){T&&!Q.getParent()&&Q.setParent(T),o.add(Q)}),Pr=!1,H},deserializeData:function(B,T){for(var D in T.p)B[jp(D)](this[bp](T.p[D]));for(D in T.s)B.s(D,this[bp](T.s[D]));for(D in T.a)B.a(D,this[bp](T.a[D]))},deserializeValue:function(O){if(we(O)){var M=O.__i;if(M!=q)return this._82I[M];if(M=O.__a,Nc(M))return new eb(M)}return O}}),As(dq,{serialize:function(Q,i){return new og(this,i).serialize(Q)},toJSON:function(l){return new og(this,l).toJSON()},deserialize:function(j,f,H){return new og(this).deserialize(j,f,H)}}),wm.GraphView=function(j){var b=this;b._24I={},b._34I=new eb,b._25I={},b._56I={},b._view=uc(1,b),b._canvas=ho(b._view),b.dm(j?j:new dq),b.setEditable(!1),b.setScrollBarVisible(u.graphViewScrollBarVisible)},tg("GraphView",_,{ms_v:1,ms_gv:1,ms_bnb:1,ms_tip:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,_52o:1,_51o:1,ms_ac:[cc,Bk,jq,eo,"resettable","editInteractor",js,"pannable","rectSelectable","autoScrollZone",fr,"movableFunc","editableFunc","pointEditableFunc","rectEditableFunc","rotationEditableFunc","anchorEditableFunc","rectSelectBackground","rectSelectBorderColor","editPointSize","editPointBorderColor","editPointBackground","hoverDelay"],_resettable:u.graphViewResettable,_pannable:u.graphViewPannable,_rectSelectable:u.graphViewRectSelectable,_autoScrollZone:u.graphViewAutoScrollZone,_rectSelectBackground:u.graphViewRectSelectBackground,_rectSelectBorderColor:u.graphViewRectSelectBorderColor,_editPointSize:u.graphViewEditPointSize,_editPointBorderColor:u.graphViewEditPointBorderColor,_editPointBackground:u.graphViewEditPointBackground,_scrollBarColor:Zb,_scrollBarSize:pj,_autoHideScrollBar:sc,_autoMakeVisible:Dm,getLayers:function(){return this._dataModel.getLayers()},setLayers:function(G){this._dataModel.setLayers(G)},setEditable:function(Z){var f=this,Q=wm.XEditInteractor;Z?(f._uieditable=!0,f.setInteractors([new dl(f),new Rj(f),Q?new Q(f):new Vc(f),new Ee(f),new Yc(f),new mi(f,{editable:!1})])):(f._uieditable=!1,f.setInteractors([new dl(f),new Rj(f),new Ee(f),new Yc(f),new mi(f,{editable:!1})]))},getCanvas:function(){return this._canvas},_33I:function(C){var s=C.getUIClass();return s?new s(this,C):q},getDataUI:function(k){var L=this,n=L._25I[k._id];return n===m&&(n=L._33I(k),L._25I[k._id]=n),n},getNodeRect:function(S){return u.getNodeRect(this,S)},getEdgeInfo:function(j){var n=this.getDataUI(j);return n?(n._79o(),n._78o):null},getEdgeSourcePosition:function(d){var _=this,J=_.getDataUI(d),c=J.s,L=J._data._40I;return $g(_,L,c("edge.source.position"),c("edge.source.offset.x"),c("edge.source.offset.y"),c("edge.source.anchor.x"),c("edge.source.anchor.y"))},getEdgeTargetPosition:function(f){var D=this,S=D.getDataUI(f),T=S.s,H=S._data._41I;return $g(D,H,T("edge.target.position"),T("edge.target.offset.x"),T("edge.target.offset.y"),T("edge.target.anchor.x"),T("edge.target.anchor.y"))},invalidateAll:function(h){var K=this;if(h){for(var o in K._25I){var W=K._25I[o];W&&W.dispose()}K._25I={},K._56I={},K._24I={},K._34I.clear(),K.redraw()}else K.dm().each(function(B){K.invalidateData(B)})},invalidateSelection:function(){var b=this;b.sm().each(function(t){b.invalidateData(t)})},invalidateData:function(o){var Q=this;Q._24I[o._id]=o,Q._21Q(o),Q.iv()},_21Q:function(D){var q=this,Q=q._24I;if(jc(D)&&ap[D.s(Vd)]){var f=D.getSourceAgent();f&&f.getAgentEdges().each(function(v){Q[v._id]=v}),f=D.getTargetAgent(),f&&f.getAgentEdges().each(function(X){Q[X._id]=X}),q.iv()}},redraw:function(D){var P=this;P._32I||(D?P._34I.add(D):(P._32I=1,P._34I.clear()),P.iv())},each:function(o,m){var h,L,u,G=0,V=this.getLayers(),p=this._dataModel,l=p._datas._as,H=l.length;if(V){for(var U=V.length;U>G;G++)if(u=V[G],we(u)&&(u=u.name),p.isHierarchicalRendering()){var q=function(t){return t._layer===u?m?o.call(m,t):o(t):void 0};if(this._dataModel.eachByHierarchical(q)===!1)return}else for(var z=0;H>z;z++)if(h=l[z],h._layer===u&&(L=m?o.call(m,h):o(h),L===!1))return}else if(p.isHierarchicalRendering())this._dataModel.eachByHierarchical(o,null,m);else for(;H>G;G++)if(h=l[G],L=m?o.call(m,h):o(h),L===!1)return},reverseEach:function(j,Z){var Q,k,D,K,z=this._dataModel,J=z._layers,R=z._datas._as,E=R.length;if(J){for(Q=J.length-1;Q>=0;Q--)if(K=J[Q],we(K)&&(K=K.name),z.isHierarchicalRendering()){var t=function(Y){return Y._layer===K?Z?j.call(Z,Y):j(Y):void 0};if(z.reverseEachByHierarchical(t)===!1)return}else for(var B=E-1;B>=0;B--)if(k=R[B],k._layer===K&&(D=Z?j.call(Z,k):j(k),D===!1))return}else if(z.isHierarchicalRendering())z.reverseEachByHierarchical(j,null,Z);else for(Q=E-1;Q>=0;Q--)if(k=R[Q],D=Z?j.call(Z,k):j(k),D===!1)return},getViewRect:function(){return this._29I},getContentRect:function(){var Z=this,w=Z._84I;if(!w){var O=this.dm().a("width"),c=this.dm().a("height");O>0&&c>0?Z._84I={x:0,y:0,width:O,height:c}:(Z.each(function(P){Z.isVisible(P)&&(w=xl(w,Z.getDataUIBounds(P)))}),Z._84I=w?w:df)}return Z._84I},getScrollRect:function(){return xl(this.getContentRect(),this._29I)},makeCenter:function(o,Y,s){var x=this;if(!x.getWidth()||!x.getHeight())return s||yc(x.centerData,x,[o,Y,!0],200),void 0;x.makeVisible(o),x.validate();var w=x.getDataUIBounds(o);if(w){var F=x.getWidth(),l=x.getHeight(),X=w.x+w.width/2,Q=w.y+w.height/2,L=-X*x._zoom+F/2,p=-Q*x._zoom+l/2;x.setTranslate(L,p,Y)}},fitData:function(K,W,z,o,Z){var J=this;if(!J.getWidth()||!J.getHeight())return Z||yc(J.fitData,J,[K,W,z,o,!0],200),void 0;var s=function(){J.makeVisible(K),J.validate();var G=J.getDataUIBounds(K);G&&(G=Ll(G),Uq(G,z==q?20:z),J.fitRect(G,W,o))};W?u.callWhenLoaded(s):s()},fitContent:function(e,S,K,i){var Y=this;if(!Y.getWidth()||!Y.getHeight())return i||yc(Y.fitContent,Y,[e,S,K,!0],200),void 0;var x=function(){Y.validate();var z=Ll(Y.getContentRect());Uq(z,S==q?20:S),Y.fitRect(z,e,K)};e?u.callWhenLoaded(x):x()},fitRect:function(M,H,w){var N=this,Z=N.getWidth(),z=N.getHeight(),v=M.x+M.width/2,k=M.y+M.height/2,r=c(Z/M.width,z/M.height),T=N._zoom,g=-v*T+Z/2,o=-k*T+z/2;0===r||isNaN(r)||(w&&(r=c(1,r)),H?N.setTranslate(g,o,{finishFunc:function(){N.setZoom(r,H)}}):(N.setTranslate(g,o),N.setZoom(r)))},toCanvas:function($,Z){Z=Z||this._zoom,this.validateImpl();var s=this,O=s.getContentRect();O.width||(O.width=10),O.height||(O.height=10);var D=ho(),L=O.x*Z,p=O.y*Z,g=O.width*Z,_=O.height*Z;Dp(D,g,_,1);var W=Zh(D);return $=$||this._dataModel.getBackground(),$&&Iq(W,0,0,g,_,$),Uf(W,-L,-p),W.scale(Z,Z),s._42(W),W.restore(),D},toDataURL:function(f,r,n){return this.toCanvas(f,n).toDataURL(r||"image/png",1)},getClipBounds:function(){return this._74O},_42:function(x,h){var G,P,H=this;H._93db(x,h),H.each(function(F){H._56I[F._id]&&(G=H.getDataUI(F),G&&(P=G._79o(),s.HtmlNode&&F instanceof s.HtmlNode?G._42(x):(!h||gi(h,P))&&G._42(x)))}),H._92db(x,h)},validateImpl:function(){var S,g,x,B,v,h=this,E=h.tx(),r=h.ty(),C=h._zoom,U=h._canvas,K=this.getWidth(),b=this.getHeight(),Q=h._29I,f={x:-E/C,y:-r/C,width:K/C,height:b/C},q={},Y=h._34I,G=h._24I,e=h._32I,M=h._23I;h._24I={},(K!==U.clientWidth||b!==U.clientHeight)&&(Dp(U,K,b),e=1),e||Mo(f,Q)||(e=1),h._29I=f,h.each(function(L){g=L._id;var y=q[g]=h.isVisible(L);y!==h._56I[g]&&(G[g]=L,x=h.getDataUI(G[g]),x&&x._84o(y),h._84o(L,y))},h);for(g in G)x=h.getDataUI(G[g]),x&&(!e&&h._56I[g]&&(v=x._79o(),v&&Y.add(v)),x.invalidate()),h._83I=1;if(h._56I=q,!e)for(g in G)q[g]&&(x=h.getDataUI(G[g]),x&&(v=x._79o(),v&&Y.add(v)));if(e?B=f:(Y.each(function(b){gi(f,b)&&(B=xl(B,b))}),B&&(Uq(B,I(1,1/C)),B.x=y(B.x*C)/C,B.y=y(B.y*C)/C,B.width=D(B.width*C)/C,B.height=D(B.height*C)/C,B=jr(f,B))),h._74O=B,B&&(S=Zh(U),vr(S,E,r,C),S.beginPath(),S.rect(B.x,B.y,B.width,B.height),S.clip(),S.clearRect(B.x,B.y,B.width,B.height),h._42(S,B),S.restore(),delete h._74O),Y.clear(),delete h._32I,M&&K>0&&b>0){var x=h.getDataUI(M);if(x){var v=x._79o(),T=h._29I,s=T.x,W=T.y,n=T.width,z=T.height,C=h._zoom;v&&!gi(v,T)&&(v.x+v.width<s&&h.tx(-v.x*C),v.x>s+n&&h.tx(-(v.x+v.width-n)*C),v.y+v.height<W&&h.ty(-v.y*C),v.y>W+z&&h.ty(-(v.y+v.height-z)*C))}delete h._23I}h._83I&&(delete h._83I,delete h._84I),h._98O(),Af(h._24I)||yc(h.iv,h)},isScrollBarVisible:function(){return!!this._79O},setScrollBarVisible:function(x){var v=this;x!==v.isScrollBarVisible()&&(x?(Bd(v._view,v._79O=Zr()),Bd(v._79O,v._27I=Zr()),Bd(v._79O,v._28I=Zr())):(wg(v._79O),delete v._79O,delete v._27I,delete v._28I),v.fp("scrollBarVisible",!x,x))},showScrollBar:function(){var e=this;e._79O&&(e._85I||(l(function(){e._86I()},Eg),e.iv()),e._85I=new Date)},_86I:function(){var m=this;if(m._85I){var J=new Date,A=J.getTime();A-m._85I.getTime()>=Eg?(delete m._85I,m.iv()):l(function(){m._86I()},Eg)}},_98O:function(){var z=this,A=this._27I,j=this._28I;if(z._79O){if(z._autoHideScrollBar&&!z._85I)return A.style.visibility=Sf,j.style.visibility=Sf,void 0;var g=z.getScrollBarColor(),t=z._zoom,v=z.getScrollBarSize(),G=z.getViewRect(),O=z.getScrollRect(),p=G.height*t,r=O.height*t,H=G.width*t-v-2,N=p*((G.y-O.y)*t/r),q=p*(p/r),_=A.style;
r-.5>p?(le>q&&(N=N+q/2-le/2,0>N&&(N=0),N+le>p&&(N=p-le),q=le),cq(A,H,N,v,q),_.visibility=li,_.background=g,_.borderRadius=v/2+em):_.visibility=Sf;var k=G.width*t,c=O.width*t,N=G.height*t-v-2,H=k*((G.x-O.x)*t/c),X=k*(k/c),_=j.style;c-.5>k?(le>X&&(H=H+X/2-le/2,0>H&&(H=0),H+le>k&&(H=k-le),X=le),cq(j,H,N,X,v),_.visibility=li,_.background=g,_.borderRadius=v/2+em):_.visibility=Sf}},setDataModel:function(s){var p=this,U=p._dataModel,C=p._selectionModel;U!==s&&(U&&(U.ump(p.handleDataModelPropertyChange,p),U.umm(p.handleDataModelChange,p),U.umd(p.handleDataPropertyChange,p),U.removeIndexChangeListener(p._75O,p),U.removeHierarchyChangeListener(p.handleHierarchyChange,p),C||U.sm().ums(p.handleSelectionChange,p)),p._dataModel=s,s.mp(p.handleDataModelPropertyChange,p),s.mm(p.handleDataModelChange,p),s.md(p.handleDataPropertyChange,p),s.addIndexChangeListener(p._75O,p),s.addHierarchyChangeListener(p.handleHierarchyChange,p),C?C._21I(s):s.sm().ms(p.handleSelectionChange,p),p.invalidateAll(!0),p.fp(Pp,U,s),p._canvas.style.background=s.getBackground()||"")},getLayersInfo:function(){if(this._layersInfo===m){var j=this.getLayers();j?(this._layersInfo={},j.forEach(function(L){var y=we(L)?L.name:L;this._layersInfo[y]=L},this)):this._layersInfo=null}return this._layersInfo},updateLayers:function(){this._layersInfo=m,this.invalidateSelection(),this.redraw()},handleDataModelPropertyChange:function(O){if("background"===O.property){var W=this._canvas.style.background,G=O.newValue||"";this._canvas.style.background=G,this.fp("canvasBackground",W,G)}else"a:width"===O.property||"a:height"===O.property?(this._83I=1,this.redraw()):"layers"===O.property?this.updateLayers():"hierarchicalRendering"===O.property&&this.redraw()},handleDataPropertyChange:function(E){this.dm().isHierarchicalRendering()&&"parent"===E.property&&E.data.hasChildren()&&this.redraw(),this.invalidateData(E.data)},onPropertyChanged:function(x){var J=this,E=x.property;if(J.redraw(),"zoom"===E){var t=J.sm().getSelection();t.size()&&t.each(function(r){r.invalidate()})}tr[E]?J.showScrollBar():E===js&&J.onCurrentSubGraphChanged(x)},onCurrentSubGraphChanged:function(){this.sm().cs(),this.reset()},handleDataModelChange:function(v){var n=this,G=v.kind,y=v.data;if(n._83I=1,"add"===G)n.invalidateData(y),jc(y)&&y.getEdgeGroup()&&y.getEdgeGroup().eachSiblingEdge(n.invalidateData,n);else if(G===hr){n._21Q(y);var j=y._id,I=n._25I[j];if(I){if(n._56I[j]){var o=I._79o();o&&n.redraw(o)}I.dispose(),delete n._25I[j],delete n._24I[j],delete n._56I[j]}y===n._currentSubGraph&&n.setCurrentSubGraph(q)}else G===ao&&(n.invalidateAll(!0),n.setCurrentSubGraph(q))},_75O:function(v){this.invalidateData(v.data)},handleHierarchyChange:function(m){this.dm().isHierarchicalRendering()&&m.data.hasChildren()&&this.redraw(),this.invalidateData(m.data)},adjustIndex:function(f){var O=this;if(O.isVisible(f)){for(var $=f;$._parent&&O.isVisible($._parent);)$=$._parent;$&&$!==f&&O._dataModel.adjustIndex($),O._dataModel.adjustIndex(f)}},getImage:function(Q){return Q.getImage()},getSelectWidth:function(q){return q.s("select.width")},isSelectable:function(D){if(!this._clickThroughChecking&&D.getParent()instanceof bn&&D.getParent().isSyncSize())return!1;var T=this.getLayersInfo();if(T){var g=T[D._layer];if(g&&g.selectable===!1)return!1}return D.s("2d.selectable")&&this.sm().isSelectable(D)},isMovable:function(I){var K=this;if(jc(I)&&I.getStyle(Vd)!==Pf)return!1;var B=this.getLayersInfo();if(B){var Y=B[I._layer];if(Y&&Y.movable===!1)return!1}return I.s("2d.movable")?K._movableFunc?K._movableFunc(I):!0:!1},isEditable:function(y){var Y=this;if(s._uiSerializing)return Y._uieditable;if(!Y._editInteractor||!Y.isSelected(y))return!1;if(jk(y)){var W=Y.getDataUI(y);if(!W||W._88I)return!1}if(jc(y)&&y.getStyle(Vd)!==Pf)return!1;var E=this.getLayersInfo();if(E){var O=E[y._layer];if(O&&O.editable===!1)return!1}return y.s("2d.editable")?Y._editableFunc?Y._editableFunc(y):!0:!1},handleDelete:function(){this._editInteractor&&(this._editInteractor.handleDelete?this._editInteractor.handleDelete():this.removeSelection())},isPointEditable:function(D){return $p(D)&&0!==D.getRotation()?!1:this._pointEditableFunc?this._pointEditableFunc(D):!0},isRectEditable:function(x){return this._rectEditableFunc?this._rectEditableFunc(x):!0},isAnchorEditable:function(f){return this._anchorEditableFunc?this._anchorEditableFunc(f):!0},isRotationEditable:function(P){return P.setRotation&&P.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(P):!0:!1},getRotationPoint:function(c){var A=c.getAnchor(),x=c.getScale(),d=this._zoom,q=Er(c.getRotation(),0,-c.getHeight()*x.y*A.y-(x.y<0?-1:1)*(uh?32:16)/d),X=c.p();return q.x+=X.x,q.y+=X.y,q},getLogicalPoint:function(U){var J=this;return uj(U,J._canvas,J.tx(),J.ty(),J._zoom,J._zoom)},getSelectedDataAt:function(R){var Y=this;return this.getDataAt(R,function(H){return Y.isSelected(H)})},getDataAt:function(e,Q,n){e.target&&(e=this.lp(e));var K,h=this._zoom;return this.reverseEach(function(s){return(Q?Q(s):this.isSelectable(s))&&this.rectIntersects(s,sg(e.x,e.y,n,h))?(K=s,!1):void 0},this),K},getIconInfoAt:function(b,c){var U=this;if(b.target&&(b=U.lp(b)),c||(c=U.getDataAt(b)),c){var t=U.getDataUI(c);if(t&&t._38o){var F,r=t._38o,Y=new eb;for(F in r.icons)Y.add(F);for(var T=Y.size()-1;T>=0;T--){F=Y.get(T);for(var y=r.rects[F],P=y.rotation,J=y.length-1;J>=0;J--){var A=y[J],v=A.width,i=A.height,h={x:b.x-A.x-v/2,y:b.y-A.y-i/2};P!=q&&(h=Er(-P,h.x,h.y));var A={x:-v/2,y:-i/2,width:v,height:i};if(If(A,h))return{key:F,index:J,name:r.icons[F].names[J],rect:y[J],point:b,rotation:P,relativeRect:A,relativePoint:h,data:c}}}}}return q},getDatasInRect:function(f,C,T){T===m&&(T=1);var B=this,A=new eb;return B.reverseEach(function(v){T&&!B.isSelectable(v)||(C?B.rectIntersects(v,f):B.rectContains(v,f))&&A.add(v)}),A},moveSelection:function(R,t){var G,Q=this,D=Q.dm();D&&(G=D.getHistoryManager()),G&&G.beginInteraction(),Re(Q.sm().toSelection(Q.isMovable,Q),R,t),G&&G.endInteraction()},moveDatas:function(Q,c,N){var H,k=this,a=k.dm();a&&(H=a.getHistoryManager()),H&&H.beginInteraction(),Q instanceof eb||(Q=new eb(Q)),Re(Q,c,N),H&&H.endInteraction()},getDataUIBounds:function(Q){var p=this.getDataUI(Q);return p?p._79o():q},drawData:function(p,O){var l=this.getDataUI(O);l&&(l._79o(),l._42(p)),O instanceof s.Block&&O.eachChild(function(h){this.drawData(p,h)},this)},getBoundsForGroup:function(E){return E.s(_r)?this.getDataUIBounds(E):q},rectIntersects:function(f,p){this.validate();var B=q;if(this._56I[f._id]){var w=this._25I[f._id];if(w){var x=w._79o();if(Wj(p,x))B=!0;else if((p=jr(p,x))&&(w.rectIntersects&&(B=w.rectIntersects(p)),B==q)){if(!f.s("pixelPerfect"))return!0;var T=p.x,Q=p.y,i=p.width,b=p.height,C=this._zoom,S=u.hitMaxArea,n=i*b*C*C;if(n>S){var L=Math.sqrt(S/n);C*=L}i*=C,b*=C,2>i&&(i=2),2>b&&(b=2),T*=C,Q*=C;var O=Hf(i,b);Uf(O,-T,-Q),O.scale(C,C),this._drawForChecking=!0,this.drawData(O,f),this._drawForChecking=!1;try{for(var J=0,r=O.getImageData(0,0,i,b).data;J<r.length;J+=4)if(0!==r[J+3]){B=!0;break}O.restore()}catch(m){fh=q,B=!1}}}}return B?!0:!1},rectContains:function(L,O){if(this._56I[L._id]){var E=this._25I[L._id];if(E)return Wj(O,E._79o())}return!1},reset:function(){this.setZoom(1),this.setTranslate(0,0)},handleKeyDown:function(s){if(!u.isInput(s.target)){var K=this,z=K._focusData,N=z&&K._25I[z._id],v=0,F=K._dataModel._datas;if(!(z&&z._enabled&&z._editable&&N&&N.onKeyDown&&N.onKeyDown(s)===!0))if(9===s.keyCode&&(z&&(v=F.indexOf(z),Ap(s)?-1===--v&&(v=0):++v===F.size()&&(v=0)),K._focusData=z=F.get(v),K.sm().setSelection(z)),hp(s)?K.selectAll():sh(s)&&K.isResettable()&&K.reset(),K.sm().isEmpty()){if(K._editing)return;var I=K.tx(),b=K.ty(),T=!1,x=Ap()?100:10;Xe(s)&&(I-=x,T=!0),cp(s)&&(b-=x,T=!0),Tb(s)&&(I+=x,T=!0),nd(s)&&(b+=x,T=!0),T&&K.setTranslate(I,b)}else{dd(s)&&K.handleDelete(s);var Z=Ap()?10:1;Xe(s)&&(K.moveSelection(-Z,0),K.fi({kind:"moveLeft"})),cp(s)&&(K.moveSelection(0,-Z),K.fi({kind:"moveUp"})),Tb(s)&&(K.moveSelection(Z,0),K.fi({kind:"moveRight"})),nd(s)&&(K.moveSelection(0,Z),K.fi({kind:"moveDown"}))}}},handleScroll:function(I,g){ak(I);var r=this.lp(I);g>0?this.scrollZoomIn(r):0>g&&this.scrollZoomOut(r)},handlePinch:function(Y,w,n){this._68I||(w>n?this.pinchZoomIn(Y):this.pinchZoomOut(Y))},checkDoubleClickOnNote:function(v,r){var H=this,M=H.lp(v),O=H.getDataUI(r),j=O.note2Info;return j&&r.s("note2.toggleable")&&If(j.clickRect,M)?(r.s(xc,!r.s(xc)),H.fi({kind:"toggleNote2",event:v,data:r}),!0):(j=O.noteInfo,j&&r.s("note.toggleable")&&If(j.clickRect,M)?(r.s(ln,!r.s(ln)),H.fi({kind:"toggleNote",event:v,data:r}),!0):!1)},_84o:function(){},isNoteVisible:function(){return this._zoom>.15},isLabelVisible:function(){return this._zoom>.15},isEditVisible:function(){return this._zoom>.15},autoScroll:function(h,Q){var H=this,y=H.getAutoScrollZone(),b=y/H.getZoom(),A=y/4,N=H._29I,X=H.lp(h),W={x:H.tx(),y:H.ty()};return X&&y>0&&N&&(X.x-N.x<b?H.translate(A,0):N.x+N.width-X.x<b&&H.translate(-A,0),X.y-N.y<b?H.translate(0,A):N.y+N.height-X.y<b&&H.translate(0,-A)),W.x=H.tx()-W.x,W.y=H.ty()-W.y,Q&&(Q.x+=W.x,Q.y+=W.y),W},getMoveMode:function(N,M){var w=M.s("2d.move.mode");return w?w:Ij["88"]?"x":Ij["89"]?"y":"xy"},getSerializableProperties:function(){return{scrollBarColor:1,scrollBarSize:1,autoMakeVisible:1,autoHideScrollBar:1,editable:1,resettable:1,pannable:1,rectSelectable:1,autoScrollZone:1,visibleFunc:1,movableFunc:1,editableFunc:1,pointEditableFunc:1,rectEditableFunc:1,anchorEditableFunc:1,rotationEditableFunc:1,rectSelectBackground:1,rectSelectBorderColor:1,editPointSize:1,editPointBorderColor:1,editPointBackground:1,hoverDelay:1,dataModel:1,selectionModel:1,currentSubGraph:1,zoom:1,translateX:1,translateY:1}},serializeProperty:function(c,k,R){var m=this;return"currentSubGraph"===k?{__i:c.getId()}:R.serializeProperty(c,k,m)},deserializeProperty:function(X,G,f){var q=this;if("currentSubGraph"===G){var V=q.dm(),j=V.__idMap;return j[X.__i]}return f.deserializeProperty(X,G,q)}});var Zq=function(g,l){var T=this;T.gv=g,T.s=function(M){return l.getStyle(M)},T._data=l,T._87I=new eb};Xd(Zq,_,{_6I:q,ms_icons:1,_84o:function(){},dispose:function(){},isShadowed:function(){return this.s("shadow")||this.gv.isSelected(this._data)&&"shadow"===this.s("select.type")},getSelectWidth:function(){var d=this,L=d.gv.isSelected(d._data);return!L||d.isShadowed()?0:d.gv.getSelectWidth(d._data)},getBodyColor:function(Z){var c=this._data,X=this.gv.getBodyColor(c);return X?X:Z?c.getStyle(Z):q},_2Q:function(f){return this.s(f)},_1Q:function(o,W,Q,O){var s=this.s,J=s(W+".dash.color");o.strokeStyle=J,o.lineWidth=Q,o.stroke(),s(W+".dash.3d")&&Um(o,J,s(W+".dash.3d.color"),Q,this.gv._zoom,s(W+".dash.3d.accuracy")),Xk(o,O)},invalidate:function(){this._6I=q},_79o:function(){var i=this;if(!i._6I){i.labelInfo=i.label2Info=i.noteInfo=i.note2Info=i._38o=q,i._87I.clear(),i._3O();var P=i._data,d=i.gv;i._55O=d.isEditable(P)?{_42O:d.isRectEditable(P),_43O:d.isPointEditable(P),_56O:d.isRotationEditable(P)}:q,i._6I=i._81o()}return i._6I},_3O:function(){},getPosition:function(){return df},_68o:function($,L){$&&this._87I.add(Ln($,L))},_81o:function(){var n=this,P=n.s;n._24O(Te,"getLabel"),n._24O(Or,"getLabel2"),n._26O(Wm,"getNote"),n._26O(pl,"getNote2"),n._15O(),n._55O&&n._48O();var E;if(n._87I.each(function(X){E=xl(E,X)}),E&&n.isShadowed()){var D=Ll(E);D.x+=P("shadow.offset.x"),D.y+=P("shadow.offset.y"),Uq(D,P("shadow.blur")),E=xl(E,D)}return n._87I.clear(),E},_42:function(F){var J=this,c=J._data,m=J.gv,f=J.s,C=f("opacity"),s=this.isShadowed();if(s){var A=F.shadowOffsetX,L=F.shadowOffsetY,S=F.shadowBlur,v=F.shadowColor,G=m.getZoom();F.shadowOffsetX=f("shadow.offset.x")*G,F.shadowOffsetY=f("shadow.offset.y")*G,F.shadowBlur=f("shadow.blur")*G,F.shadowColor=f("select.color")}if(C!=q){var O=F.globalAlpha;F.globalAlpha=C}J._80o(F),m.isLabelVisible(c)&&((!m._drawForChecking||f("label.selectable"))&&om(F,J.labelInfo),(!m._drawForChecking||f("label2.selectable"))&&om(F,J.label2Info)),m.isNoteVisible(c)&&(Jm(F,J.noteInfo),Jm(F,J.note2Info)),J._99O(F),C!=q&&(F.globalAlpha=O),s&&(F.shadowOffsetX=A,F.shadowOffsetY=L,F.shadowBlur=S,F.shadowColor=v)},_80o:function(){},_47O:function(){},_24O:function(x,E){var m=this,G=m._data,P=m.gv,d=m.s,e=P[E](G);if(e!=q){var F=d(x+".scale"),B=d(x+".max"),f=d(x+".position"),u=m[x+"Info"]={label:e,scale:F,color:P[E+"Color"](G),font:d(x+".font"),opacity:d(x+".opacity"),align:d(x+".align"),rotation:m.getRotation(d(x+".rotation"),!1,f),background:P[E+"Background"](G)},Z=Lf(u,e);B>0&&B<Z.width&&(u.labelWidth=Z.width,Z.width=B),1!==F&&(Z.width*=F,Z.height*=F);var c=m.getPosition(f,d(x+".offset.x"),d(x+".offset.y"),Z,d(x+".position.fixed"));if(Z.x=c.x-Z.width/2,Z.y=c.y-Z.height/2,m._68o(u.rect=Z,u.rotation),1!==F){var w=Z.width/F,N=Z.height/F;u.rect={x:c.x-w/2,y:c.y-N/2,width:w,height:N}}}},_26O:function($,Y){var W=this,g=W.gv,E=W._data,p=W.s,T=g[Y](E);if(T!=q){var G,J,n=p($+".scale"),i=W[$+"Info"]={note:T,scale:n,data:E,view:g,expanded:p($+".expanded"),font:p($+".font"),color:p($+".color"),opacity:p($+".opacity"),align:p($+".align"),icon:p($+".icon"),backgroundImage:p($+".backgroundImage"),borderWidth:p($+".border.width"),borderColor:p($+".border.color"),background:g[Y+"Background"](E)},m=W.getPosition(p($+".position"),p($+".offset.x"),p($+".offset.y")),t=m.x,z=m.y;if(i.expanded){var C,P=p($+".max"),S=p($+".backgroundImage");S?(S=Si(S),C={width:re(S,E),height:Vo(S,E)}):C=Lf(i,T),C.width+=6,C.height+=2,P>0&&P<C.width&&(i.labelWidth=C.width,C.width=P),G=C.width,J=C.height+8,i.clickRect={x:t-G*n/2,y:z-J*n,width:G*n,height:J*n*C.height/J}}else{var s=p($+".icon");s?(s=Si(s),G=re(s,E),J=Vo(s,E)):(G=12,J=18),i.clickRect={x:t-G*n/2,y:z-J*n,width:G*n,height:J*n}}i.rect={x:t-G/2,y:z-J*n/2-J/2,width:G,height:J};var L=D(i.borderWidth/2)*n;W._68o({x:t-G*n/2-L,y:z-J*n-L,width:G*n+2*L,height:J*n+2*L})}},_48O:function(){},_99O:function(j){var O=this,h=O._38o;if(h){var y=O.gv,d=O._data,c=h.icons;for(var l in c){var p=c[l],E=h.rects[l];if(E){var w=oj(p.opacity,d,y),$=oj(p.names,d,y),L=$?$.length:0,e=E.rotation;if(w!=q){var C=j.globalAlpha;j.globalAlpha*=w}for(var I=0;L>I;I++){var G=$[I],b=Si(G),g=E[I];if(e){var B=g.x+g.width/2,x=g.y+g.height/2;j.save(),Uf(j,B,x),ck(j,e),Uf(j,-B,-x)}hn(j,b,oj(p.stretch,d,y),g.x,g.y,g.width,g.height,O._data,O.gv),e&&j.restore()}w!=q&&(j.globalAlpha=C)}}}}});var ci=function(v,r){cn(ci,this,[v,r])};Xd(ci,Zq,{_checkEmptyRect:!0,_40O:function(p,q){var f=this,J=f.s,n=p.rect;(p.borderColor=f.gv.getBorderColor(f._data))&&(p.borderType=J("border.type"),p.borderWidth=J("border.width"),p.borderPadding=J("border.padding"),q=I(q,p.borderPadding+p.borderWidth/2));var m=f._data.getScale(),s=I(1,I(E(m.x),E(m.y)));if(p.selectWidth=f.getSelectWidth()){var d=f.gv._zoom;p.selectType=J("select.type"),p._97o=J("select.color"),p.selectPadding=J("select.padding"),q=I(q,(p.selectPadding+p.selectWidth/2/d)/s)}q>0&&(q*=s,n=Ll(n),Uq(n,q)),f._68o(n)},_39O:function(t,R){var j,d=this,D=R.rect;if(R.borderWidth>0&&(j=R.borderPadding,t.strokeStyle=R.borderColor,t.lineWidth=R.borderWidth,fm(t,R.borderType,{x:D.x-j,y:D.y-j,width:D.width+2*j,height:D.height+2*j}),t.stroke()),R.selectWidth>0){var N=d.gv._zoom;if(j=R.selectPadding,t.strokeStyle=R._97o,t.lineWidth=R.selectWidth/N,R.rotation!=q){t.save(),t.translate(R.position.x,R.position.y),t.rotate(R.rotation);var s=d._data,J=s.getWidth(),H=s.getHeight(),A=R.scale,U=R.anchor;D={x:A.x*-J*U.x,y:A.y*-H*U.y,width:A.x*J,height:A.y*H}}fm(t,R.selectType,{x:D.x-j,y:D.y-j,width:D.width+2*j,height:D.height+2*j}),R.rotation!=q&&t.restore(),t.stroke()}},_3O:function(){var Q=this,v=Q.s,a=Q._data,y=a.getStyle(hb),N=Q.getBodyColor(),n=Q._83o=y?{shape:y,_53o:Q.getBodyColor("shape.background"),_27Q:Si(v("shape.repeat.image"),N),shapeGradientPack:v("shape.gradient.pack"),_54o:v("shape.border.width"),_55o:v("shape.border.color"),_56o:v("shape.border.3d"),_57o:v("shape.border.3d.color"),_58o:v("shape.border.3d.accuracy"),shapeGradient:v("shape.gradient"),_59o:v("shape.gradient.color"),_60o:v("shape.border.pattern"),_61o:v("shape.border.cap"),_62o:v("shape.border.join"),bodyColor:N}:{img:Si(Q.gv.getImage(a),N),bodyColor:N,stretch:v("image.stretch")};if(A&&!X);else{n.rect=a.getRect(),n.position=a.p(),n.scale=a.getScale(),n.anchor=a.getAnchor(),n.rotation=a.getRotation(),y===Pg&&(n._63o=v("shape.depth"));var w=0;if(y)w=Rr(q,n._54o/2,n._62o),Q.s("shape.dash")&&(w=I(w,(Q.s("shape.dash.width")||n._54o)/2));else if(n.img&&n.img.boundExtend)if(w=oj(n.img.boundExtend,a,Q.gv),n.img.boundExtendAbsolute){var d=a.getScale();w/=Q.gv._zoom*I(1,I(E(d.x),E(d.y)))}else if(!n.img.fitSize){var C=oj(n.img.width,a,Q.gv),W=oj(n.img.height,a,Q.gv);w*=I(a.getWidth()/C,a.getHeight()/W)}Q._40O(n,w);var j=v("clip.percentage");if(1>j&&(0>j&&(j=0),n.clipRect=Km(a.getAnchorRect(),v("clip.direction"),j)),y){var l=v("shape.fill.clip.percentage");1>l&&(0>l&&(l=0),n.shapeClipRect=Km(a.getAnchorRect(),v("shape.fill.clip.direction"),l))}}},getPosition:function(n,y,P,H){var O=_m(n,this._83o.rect,H);return O.x+=y,O.y+=P,O},_80o:function(G){var c=this,V=c.s,W=c.gv,v=c._data,a=c._83o,w=a.rect,d=a.position,H=a.rotation,e=a.anchor,t=a.scale,u=a.shape,R=a.clipRect;if(!c._checkEmptyRect||w.width>0&&w.height>0){var N=v.getSize();if(N.x=-N.width*e.x,N.y=-N.height*e.y,G.save(),Uf(G,d.x,d.y),ck(G,H),kf(G,t.x,t.y),R&&(G.beginPath(),G.rect(R.x,R.y,R.width,R.height),G.clip()),c.freeDraw)c.freeDraw(G,N,a);else if(u){var z,m,b,S,g=a._60o,q=$o(G,g),i=a._53o,P=a._27Q,E=a._54o,n=a._55o,y=a.shapeGradientPack,k=G.lineJoin,C=G.lineCap;if("roundRect"===u?z=V("shape.corner.radius"):"polygon"===u?z=V("shape.polygon.side"):"arc"===u&&(z=V("shape.arc.from"),m=V("shape.arc.to"),b=V("shape.arc.close"),S=V("shape.arc.oval")),G.lineJoin=a._62o,G.lineCap=a._61o,i||P||y){var F=a.shapeClipRect;F&&(G.save(),G.beginPath(),G.rect(F.x,F.y,F.width,F.height),G.clip()),fm(G,u,N,z,m,b,S),y?Jg(G,y):P?de(G,P,a.bodyColor,null,v,W):bc(G,i,a.shapeGradient,a._59o,N),G.fill(),F&&G.restore(),y&&G.restore(),G!==q&&fm(q,u,N,z,m,b,S)}else fm(q,u,N,z,m,b,S);if(E>0){var T=V("shape.border.width.absolute");T&&(G.save(),G.setTransform(1,0,0,1,0,0)),G.lineWidth=E,G.strokeStyle=n,G.stroke(),T&&G.restore(),a._56o&&Um(G,n,a._57o,E,W._zoom,a._58o)}if(Xk(G,g),V("shape.dash")){var l=V("shape.dash.width")||E;if(l>0){g=V("shape.dash.pattern");var q=$o(G,g,c._2Q("shape.dash.offset"));q!==G&&fm(q,u,N,z,m,b,S),c._1Q(G,"shape",l,g)}}bi(G,i,a._63o,N),G.lineJoin=k,G.lineCap=C}else hn(G,a.img,a.stretch,N.x,N.y,N.width,N.height,v,W,a.bodyColor);G.restore()}c._39O(G,a)},_48O:function(){},_47O:function(){}});var Vb=function(Y,I){cn(Vb,this,[Y,I])},Qb=function(z,K,M,h){var v=Yh(z,K);return M=h?c(M,v):xj(M,v),v?M/=v:M=0,{x:z.x+(K.x-z.x)*M,y:z.y+(K.y-z.y)*M}};Xd(Vb,Zq,{_3O:function(){var z,A=this,d=A._data,n=A.gv,U=A.s,L=U(Vd),b=d.isLooped(),i=U("edge.width"),K=U("edge.center"),R=U("edge.offset"),Z=n.getBorderColor(d),$=Z?U("border.width"):0,e=A.getSelectWidth(),k=d._40I,V=d._41I,x=A._78o=k&&V?{looped:b,type:L,width:i,center:K,color:A.getBodyColor("edge.color"),borderColor:Z,borderWidth:$,_97o:e?U("select.color"):q,selectWidth:e,pattern:U("edge.pattern"),cap:U("edge.cap"),join:U("edge.join"),is3d:U("edge.3d"),_67o:U("edge.3d.color"),_66o:U("edge.3d.accuracy")}:q;if(x){var C=u.getEdgeType(L);if(C){var T=C(d,ee(A,n,d,b,L),n,A._19Q);T.points&&T.points.size()>1?(x._4O=T,z=tq(x._4O.points)):T[Fo]&&T.rect&&(x._4O=T,z=T.rect)}else{var B=U("edge.source.anchor.x"),G=U("edge.source.anchor.y"),l=U("edge.target.anchor.x"),E=U("edge.target.anchor.y"),p=$g(n,k,U("edge.source.position"),U("edge.source.offset.x"),U("edge.source.offset.y"),B,G),Y=$g(n,V,U("edge.target.position"),U("edge.target.offset.x"),U("edge.target.offset.y"),l,E);if(L===Pf){var g=x.points=U(ip)||Ki,J=g.size();x.segments=U("edge.segments");var s=B!==m||G!==m,S=l!==m||E!==m;if(!K)if(R)s||(p=Qb(p,J?g.get(0):Y,R,J)),S||(Y=Qb(Y,J?g.get(J-1):p,R,J));else{var c;s||(c=Ch(p,J?g.get(0):Y,Sd(n,k)),c&&(p={x:c[0],y:c[1]})),S||(c=Ch(J?g.get(J-1):p,Y,Sd(n,V)),c&&(Y={x:c[0],y:c[1]}))}z=xl(tq(x.points),tq(p,Y))}else{var W=ee(A,n,d,b,L);if(A._19Q||(W=-W),b)p=Ll(p),p.x=n.getNodeRect(k).x,x.radius=W,z={x:p.x-W,y:p.y-W,width:2*W,height:2*W};else{var P=Yh(p,Y),a=xj(R,P),y={x:a,y:W},w={x:P-a,y:W},h=Q(Y.y-p.y,Y.x-p.x),M=x.mat=new pn(h);if(x.orienAngle=h,x.angle=Y.x<p.x?h+F:h,x.rect={x:y.x,y:y.y,width:w.x-y.x,height:0},x.origin=p,y=M.tf(y),y.x+=p.x,y.y+=p.y,w=M.tf(w),w.x+=p.x,w.y+=p.y,K){var r={x:P,y:0};r=M.tf(r),r.x+=p.x,r.y+=p.y,z=tq([p,y,w,r]),x.c1=p,x.c2=r}else z=tq(y,w);p=y,Y=w}}x.sourcePoint=p,x.targetPoint=Y,d._lastSourcePoint=p,d._lastTargetPoint=Y}var N=0;U("edge.dash")&&(N=U("edge.dash.width")||i);var D="square"===x.cap?.71:.5;Rr(z,I(N*D,i*D+$+e),x.join),A._68o(z)}},getRotation:function(E,X,P){E=E||0;var u=this._78o;if(u){var w,m=u.angle,F=u.points,t=u._4O;if(m!=q)return X?u.orienAngle+E:m+E;if(t&&t[Fo])return t.getRotation?t.getRotation(this,E,X,P):0;if(t&&t.points){var G=t.points;return w=G.size(),Bj[P]?w&&0===w%2?mr(G.get(w/2-1),G.get(w/2),X,E):E:tn[P]?mr(G.get(0),G.get(1),X,E):mr(G.get(w-2),G.get(w-1),X,E)}if(F)return w=F.size(),Bj[P]?w&&0===w%2?mr(F.get(w/2-1),F.get(w/2),X,E):E:tn[P]?mr(u.sourcePoint,w?F.get(0):u.targetPoint,X,E):mr(w?F.get(w-1):u.sourcePoint,u.targetPoint,X,E)}return E},getPosition:function(o,W,j,B,b){var d=this._78o;if(d){var A,p=d.type,X=d.points,e=d._4O,R=d.sourcePoint,l=d.targetPoint;if(!p)return d.looped?{x:R.x-d.radius+W,y:R.y+j}:(b&&R&&l&&(R.x>l.x||R.x===l.x&&R.y>l.y)&&(o=be[o],j=-j),A=_m(o,d.rect,B),A.x+=W,A.y+=j,A=d.mat.tf(A),A.x+=d.origin.x,A.y+=d.origin.y,A);if(e&&e[Fo])return e.getPosition?e.getPosition(this,o,W,j,B,b):{x:(R.x+l.x)/2,y:(R.y+l.y)/2};if(X){var A,K=X.size();if(Bj[o]){if(K){var n=K%2;if(0===n)return Dd(X.get(K/2-1),X.get(K/2),o,W,j,B,b);A=X.get((K-n)/2)}else A={x:(R.x+l.x)/2,y:(R.y+l.y)/2};return A=_m(o,{x:A.x,y:A.y,width:0,height:0},B),A.x+=W,A.y+=j,A}return tn[o]?Dd(R,K?X.get(0):l,o,W,j,B,b):Dd(K?X.get(K-1):R,l,o,W,j,B,b)}if(e){var f=e.points,K=f.size();if(Bj[o]){var n=K%2;return 0===n?Dd(f.get(K/2-1),f.get(K/2),o,W,j,B,b):(A=f.get((K-n)/2),A=_m(o,{x:A.x,y:A.y,width:0,height:0},B),A.x+=W,A.y+=j,A)}return tn[o]?Dd(f.get(0),f.get(1),o,W,j,B,b):Dd(f.get(K-2),f.get(K-1),o,W,j,B,b)}}return df},_42:function(M){this._78o&&Vb.superClass._42.call(this,M)},drawPath:function(b,f){b.beginPath();var s=f.type,o=f.points,$=f.segments,l=f._4O;if(!s||o){var z=f.sourcePoint,M=z.x,e=z.y,w=f.targetPoint,_=w.x,X=w.y;if(s)if($){var F=new eb({x:M,y:e});F.addAll(o),F.add({x:_,y:X}),_f(b,F,$)}else b.moveTo(M,e),o.each(function(c){b.lineTo(c.x,c.y)}),b.lineTo(_,X);else f.looped?b.arc(M,e,f.radius,0,W,!0):f.center?(b.moveTo(f.c1.x,f.c1.y),b.lineTo(M,e),b.lineTo(_,X),b.lineTo(f.c2.x,f.c2.y)):(b.moveTo(M,e),b.lineTo(_,X))}else l&&(l.points?_f(b,l.points,l.segments):l[Fo]&&l[Fo](b,l))},_80o:function(x){var e=this,N=e.s,A=e._78o,L=A.width,$=A.selectWidth,d=A.borderWidth,O=A.color,X=x.lineJoin,u=x.lineCap,K=A.pattern;x.lineJoin=A.join,x.lineCap=A.cap,e.drawPath($o(x,K),A);var _=N("edge.width.absolute");if(_&&(x.save(),x.setTransform(1,0,0,1,0,0)),$&&(x.strokeStyle=A._97o,x.lineWidth=L+2*(d+$),x.stroke()),d&&(x.strokeStyle=A.borderColor,x.lineWidth=L+2*d,x.stroke()),x.strokeStyle=O,x.lineWidth=L,x.stroke(),A.is3d&&Um(x,O,A._67o,L,e.gv._zoom,A._66o),_&&x.restore(),Xk(x,K),N("edge.dash")){K=N("edge.dash.pattern");var I=$o(x,K,e._2Q("edge.dash.offset"));I!==x&&e.drawPath(I,A),e._1Q(x,"edge",N("edge.dash.width")||L,K)}x.lineJoin=X,x.lineCap=u},_48O:function(){},_47O:function(){},_71o:function(V,w){var a=this,d=a._data;if(a._19Q=!0,!d.getEdgeGroup())return V?d.s("edge.gap"):0;var h,c=0,H=0,X=0;if(d.getEdgeGroup().getSiblings().each(function(I){I.each(function(N){if(a.gv.isVisible(N)&&N.s(Vd)==w){var P=N.s("edge.gap");h?(H+=X/2+P/2,X=P):(h=N,X=P),N===d&&(c=H)}})}),V)return H-c+X;var n=c-H/2;return h&&d._40I!==h._40I&&(a._19Q=!1),n}});var Vl=function(A,u){cn(Vl,this,[A,u])};Xd(Vl,ci,{_3O:function(){var D,p,s=this,O=s.s,v=s._data,a=s.gv;if(s._88I=q,v.isExpanded()&&v.eachChild(function(X){var g=a.getBoundsForGroup(X);g&&(p||(p=[]),p.push(g),D=xl(D,g))}),D){var X=a.getLabel(v),u=O("group.type");D=Pk(u,p,D),Vq(D,v,"group.padding",1);var r=s._88I={type:u,rect:D,_64o:D};if(!u&&X!=q){var P,x=s.labelInfo={label:X,color:O("group.title.color"),font:O("group.title.font"),align:O("group.title.align")},I=Lf(x,X),H=I.width,C=I.height,l=O("group.title.align");H>D.width&&(D.width=H),x.rect={y:D.y-C,width:I.width,height:C},P=l===qg?D.x:l===Ai?D.x+D.width-H:D.x+D.width/2-H/2,x.rect.x=P,r.titleRect={x:D.x,y:D.y-C,width:D.width,height:C+1},r.rect={x:D.x,y:D.y-C,width:D.width,height:D.height+C}}s._40O(r,O("group.border.width")/2)}else Vl.superClass._3O.call(s)},getPosition:function(g,s,v,E){var i=this._88I;if(i){var S=_m(g,i.rect,E);return S.x+=s,S.y+=v,S}return Vl.superClass.getPosition.apply(this,arguments)},_24O:function(o,b){var a=this._88I;(!a||a.type||"label2"===o)&&Vl.superClass._24O.call(this,o,b)},_80o:function(z){var H=this,Q=H._88I;if(Q){var F=H._data,f=H.s,P=H.gv,B=Q.type,c=Q.rect,o=Q._64o,d=Q.titleRect,a=H.getBodyColor(),h=Si(f("group.image"),a),S=f("group.image.stretch"),v=H.getBodyColor("group.background"),Z=Si(f("group.repeat.image"),a),O=f("group.gradient.pack"),_=f("group.gradient"),J=f("group.gradient.color"),T=f("group.depth");if(B){var X=f("group.border.pattern"),x=f("group.border.width"),s=z.lineJoin,I=z.lineCap;if(z.lineJoin=f("group.border.join"),z.lineCap=f("group.border.cap"),h){if(z.save(),fm(z,B,c),z.clip(),hn(z,h,S,c.x,c.y,c.width,c.height,F,P,a),z.restore(),x>0){var D=$o(z,X);fm(D,B,c),z.lineWidth=x,z.strokeStyle=f("group.border.color"),z.stroke(),Xk(z,X)}}else{var D=$o(z,X);v||Z||O?(fm(z,B,c),O?Jg(z,O):Z?de(z,Z,a,null,F,P):bc(z,v,_,J,c),z.fill(),O&&z.restore(),z!==D&&fm(D,B,c)):fm(D,B,c),x>0&&(z.lineWidth=x,z.strokeStyle=f("group.border.color"),z.stroke()),Xk(z,X),B===Pg&&bi(z,v,T,c)}z.lineJoin=s,z.lineCap=I}else if(h?hn(z,h,S,o.x,o.y,o.width,o.height,F,P,H.getBodyColor()):(v||Z)&&(Z?de(z,Z,a,null,F,P):bc(z,v,_,J,o),fm(z,Pg,o),z.fill(),bi(z,v,T,o)),d){var V=f("group.title.background");Iq(z,d.x,d.y,d.width,d.height,V),bi(z,V,T,d)}H._39O(z,Q)}else Vl.superClass._80o.call(H,z)}});var wr=function(J,r){cn(wr,this,[J,r])};Xd(wr,ci,{_80o:function(E){this._39O(E,this._83o)}});var Ob=function(U,C){cn(Ob,this,[U,C])};Xd(Ob,ci,{_3O:function(){var b=this,p=b._data,N=b.s,X=b.gv,T=p.getPoints(),z=X.getBorderColor(p),J=z?N("border.width"):0,o=b.getSelectWidth(),g=N("shape.border.width"),l=p.getRect(),H=X.getBodyColor(p),s=b._99o=T.isEmpty()?q:{rect:l,rotation:p.getRotation(),fillRule:N("shape.fill.rule"),scale:p.getScale(),position:p.p(),points:T,segments:p.getSegments(),bodyColor:H,borderColor:z,borderWidth:J,_94o:N("shape.border.3d"),_95o:N("shape.border.3d.color"),_96o:N("shape.border.3d.accuracy"),_97o:o?N("select.color"):q,selectWidth:o,_53o:N("shape.background"),_27Q:Si(N("shape.repeat.image"),H),shapeGradientPack:N("shape.gradient.pack"),_54o:g,_55o:N("shape.border.color"),shapeGradient:N("shape.gradient"),_59o:N("shape.gradient.color"),_60o:N("shape.border.pattern"),_61o:N("shape.border.cap"),_62o:N("shape.border.join")};if(s){var j=p.getScale(),$=I(1,I(E(j.x),E(j.y))),O=g*("square"===s._61o?.71:.5)+J+o/b.gv._zoom/$;O&&(O*=$,l=Ll(l),Rr(l,O,s._62o)),b._68o(l);var M=N("clip.percentage");1>M&&(0>M&&(M=0),s.clipRect=Km(p.getAnchorRect(),N("clip.direction"),M));var D=N("shape.fill.clip.percentage");1>D&&(0>D&&(D=0),s.shapeClipRect=Km(p.getAnchorRect(),N("shape.fill.clip.direction"),D))}},getPosition:function(r,g,I,D){var _=this._99o;if(_){var $=_m(r,_.rect,D);return $.x+=g,$.y+=I,$}return df},_42:function(k){this._99o&&Ob.superClass._42.call(this,k)},_80o:function(z){var b,K=this,g=K.s,y=K._99o,E=y.position,S=y.scale,N=y.rotation,P=y.bodyColor,q=y.borderWidth,X=y.selectWidth,G=y._53o,R=y._27Q,e=y.shapeGradientPack,c=y._54o,w=y.clipRect,a=y.shapeClipRect,V=y.points,i=y.segments,v=K._data.isClosePath(),m=y.fillRule,Z=G||R||e;z.save(),Uf(z,E.x,E.y),ck(z,N),kf(z,S.x,S.y),w&&(z.beginPath(),z.rect(w.x,w.y,w.width,w.height),z.clip()),Z&&a&&(z.save(),z.beginPath(),z.rect(a.x,a.y,a.width,a.height),z.clip()),Uf(z,-E.x,-E.y);var F=y._60o,$=$o(z,F),M=z.lineJoin,t=z.lineCap;z.lineJoin=y._62o,z.lineCap=y._61o,Z?(_f(z,V,i,v),e?Jg(z,e):R?de(z,R,P,null,K._data,K.gv):(b=P?P:G,bc(z,b,y.shapeGradient,y._59o,y.rect)),z.fill(m),a&&(z.restore(),Uf(z,-E.x,-E.y)),e&&z.restore(),$!==z&&_f($,V,i,v)):_f($,V,i,v);var j=g("shape.border.width.absolute");if(j&&(z.save(),z.setTransform(1,0,0,1,0,0)),X&&(z.strokeStyle=y._97o,z.lineWidth=c+2*(q+X),z.stroke()),q&&(z.strokeStyle=y.borderColor,z.lineWidth=c+2*q,z.stroke()),c&&(b=y._55o,!G&&P&&(b=P),z.strokeStyle=b,z.lineWidth=c,z.stroke(),y._94o&&Um(z,b,y._95o,c,K.gv._zoom,y._96o)),j&&z.restore(),Xk(z,F),g("shape.dash")){var T=g("shape.dash.width")||c;if(T>0){F=g("shape.dash.pattern");var $=$o(z,F,K._2Q("shape.dash.offset"));$!==z&&_f($,V,i,v),K._1Q(z,"shape",T,F)}}z.lineJoin=M,z.lineCap=t,z.restore()},_48O:function(){},_47O:function(){}});var ke=function(F,x){cn(ke,this,[F,x])};Xd(ke,Ob,{getRotation:function(F,L,M){F=F||0;var c=this._data.getPoints(),H=c.size();return H>1?Bj[M]?H&&0===H%2?mr(c.get(H/2-1),c.get(H/2),L,F):F:tn[M]?mr(c.get(0),c.get(1),L,F):mr(c.get(H-2),c.get(H-1),L,F):F},getPosition:function(x,w,L,p,U){var v=this._data.getPoints(),Q=v.size();if(Q>1){if(Bj[x]){var t=Q%2;if(0===t)return Dd(v.get(Q/2-1),v.get(Q/2),x,w,L,p,U);var T=v.get((Q-t)/2),f={x:T.x,y:T.y,width:0,height:0};return T=_m(x,f,p),T.x+=w,T.y+=L,T}return tn[x]?Dd(v.get(0),v.get(1),x,w,L,p,U):Dd(v.get(Q-2),v.get(Q-1),x,w,L,p,U)}return df}});var Nd=function(i,F){cn(Nd,this,[i,F])};Xd(Nd,ci,{_3O:function(){var P=this;Nd.superClass._3O.call(P);var $=P.s,A=P._83o;P._82o=A.img||A.shape?q:{background:P.getBodyColor("grid.background"),depth:$("grid.depth"),rect:A.rect,_88o:$("grid.cell.depth"),cellBorderColor:$("grid.cell.border.color"),_89o:$("grid.row.count"),_90o:$("grid.column.count"),block:$("grid.block"),_91o:$("grid.block.color"),_92o:$("grid.block.padding"),_93o:$("grid.block.width")}},_80o:function(r){var b=this,w=b._82o;if(!w)return Nd.superClass._80o.call(b,r),void 0;var x,s,l=b._data,o=w.background,W=w.rect,n=w.block,H=w._91o,j=w._92o,d=w._93o,I=w._88o,S=w.cellBorderColor,i=w._89o,D=w._90o;if(o)if(Iq(r,W.x,W.y,W.width,W.height,o),bi(r,o,w.depth,W),I)for(x=0;i>x;x++)for(s=0;D>s;s++)W=l.getCellRect(x,s),W&&bi(r,o,I,W);else if(S){for(r.beginPath(),x=0;i>x;x++)for(s=0;D>s;s++)W=l.getCellRect(x,s),W&&r.rect(W.x,W.y,W.width,W.height);r.strokeStyle=S,r.lineWidth=1,r.stroke()}if("h"===n)for(x=0;i>x;x++)W=xl(l.getCellRect(x,0),l.getCellRect(x,D-1)),Uq(W,j),Gr(r,H,W.x,W.y,W.width,W.height,d);else if("v"===n)for(s=0;D>s;s++)W=xl(l.getCellRect(0,s),l.getCellRect(i-1,s)),Uq(W,j),Gr(r,H,W.x,W.y,W.width,W.height,d);b._39O(r,b._83o)}});var Oj=function(m,H){cn(Oj,this,[m,H])};Xd(Oj,ci,{_checkEmptyRect:!1,_81o:function(){var x=this._data,B=Oj.superClass._81o.call(this),H=x.s("text");if(H!=q){var a,w,P=x.s("text.font"),h=x.s("text.align"),s=x.s("text.vAlign"),Z=Gp(P,H),t=Z.width,p=Z.height,l=x.getAnchor(),L=x.getWidth(),V=x.getHeight();"left"===h?a=-L*l.x:"center"===h?a=-L*l.x+(L-t)/2:"right"===h&&(a=L*(1-l.x)-Z.width),"top"===s?w=-V*l.y:"middle"===s?w=-V*l.y+(V-p)/2:"bottom"===s&&(w=V*(1-l.y)-Z.height);var z,y=x.getMatrix();z=tq([y.tf(a,w),y.tf(a+t,w),y.tf(a+t,w+p),y.tf(a,w+p)]),B=xl(B,z)}return B}});var hi=wm.Interactor=function(o){this.gv=this._graphView=o};tg("Interactor",_,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners(),this.clear()},clear:function(){},fi:function(D){this.gv.fi(D)},setCursor:function(m){uh||(this.getView().style.cursor=m)},startDragging:function(e){var S=this;S._lastClientPoint=Tc(e),S._lastLogicalPoint=S.gv.lp(e),Hk(S,e)},clearDragging:function(){var C=this;C._lastClientPoint=C._lastLogicalPoint=C._logicalPoint=q},autoScroll:function(p){return this.gv.autoScroll(p,this._lastClientPoint)}});var Yc=wm.DefaultInteractor=function(K){cn(Yc,this,[K])};tg("DefaultInteractor",hi,{handle_mousedown:function(q){ak(q);
var f=this,c=f.gv,W=c.getDataAt(q);!c.setFocus(q)||c._editing||c._scrolling||(Ac(q)?c.handleDoubleClick(q,W):c.handleClick(q,W),!sh()&&W||!c.isPannable()||!rp(q)||Sn(q)||(f._tx=c.tx(),f._ty=c.ty(),f.startDragging(q)))},handleWindowMouseUp:function(E){var Q=this,x=Q.gv;x._panning&&(delete x._panning,x.onPanEnded(),Q.fi({kind:"endPan",event:E})),delete Q._tx,delete Q._ty,Q.clearDragging()},handle_mousemove:function(S){var P=this,Z=P.gv;P._hoverTimer&&(f(P._hoverTimer),delete P._hoverTimer),P._hoverTimer=l(function(){P.fi({kind:"hover",event:S}),f(P._hoverTimer),delete P._hoverTimer},Z.getHoverDelay()||800)},handle_touchmove:function(Z){this.handle_mousemove(Z)},handleWindowMouseMove:function(y){var N=this,X=N.gv,z=N._lastClientPoint;N.fi({kind:X._panning?"betweenPan":"beginPan",event:y}),X._panning=1,X.setTranslate(N._tx+y.clientX-z.x,N._ty+y.clientY-z.y)},handle_mousewheel:function(N){this.gv.handleScroll(N,N.wheelDelta)},handle_DOMMouseScroll:function(G){2===G.axis&&this.gv.handleScroll(G,-G.detail)},handle_keydown:function(B){this.gv.handleKeyDown(B)}});var Rj=wm.SelectInteractor=function(Q){cn(Rj,this,[Q])};tg("SelectInteractor",hi,{_42:function(){var G=this,N=G.gv,r=N.getZoom(),c=G.mark,_=G.div;_||(_=G.div=Zr(),Bd(G.getView(),_));var S={};S.x=c.x*r+N.tx(),S.y=c.y*r+N.ty(),S.width=c.width*r,S.height=c.height*r,cq(_,S),this.intersects()?(_.style.border="",_.style.background=N.getRectSelectBackground()):(_.style.background="",_.style.border="1px solid "+N.getRectSelectBorderColor())},handle_mousedown:function(r){var k=this,h=k.gv;if(k._57I=q,!(h._editing||h._scrolling||sh())){var i=h.getDataAt(r),W=h.sm();if(i)if(Sn(r))W.co(i)?W.rs(i):W.as(i);else if(W.co(i)){if(Ac(r)&&i instanceof bn&&i.isClickThroughEnabled()){var L=h.getDataAt(r,function(x){h._clickThroughChecking=!0;var j=x.getParent()===i&&h.isSelectable(x);return delete h._clickThroughChecking,j});L&&(r.clickThrough=!0,W.ss(L))}}else W.ss(i);else Sn(r)||!h.isPannable()?rp(r)&&(Sn(r)||W.cs(),h.isRectSelectable()&&(k.startDragging(r),h._77O=1)):rp(r)&&(k._57I=Tc(r))}},handle_mouseup:function(N){var f=this,h=f._57I;h&&(Yh(h,Tc(N))<=1&&f.gv.sm().cs(),f._57I=q)},handleWindowMouseUp:function(a){this.clear(a)},handleWindowMouseMove:function(Y){var o=this,k=o.gv;o._logicalPoint=k.lp(Y),o.mark?(o.fi({kind:"betweenRectSelect",event:Y}),o.autoScroll(Y),o.redraw()):o.fi({kind:"beginRectSelect",event:Y}),o.mark=tq(o._lastLogicalPoint,o._logicalPoint),o.redraw()},intersects:function(){var g=this,Q=g._lastLogicalPoint,I=g._logicalPoint;return Q.x>I.x||Q.y>I.y},clear:function(H){var Z=this,P=Z.gv,u=Z.mark;if(Z._57I=q,Z._lastLogicalPoint){if(u){if(0!==u.width&&0!==u.height){var B=P.getDatasInRect(u,Z.intersects());if(!B.isEmpty()){var i=P.sm(),_=i.toSelection();B.each(function(P){i.co(P)?_.remove(P):_.add(P)}),i.ss(_)}}wg(Z.div),delete Z.div,delete Z.mark,Z.redraw(),Z.fi({kind:"endRectSelect",event:H}),P.onRectSelectEnded()}Z.clearDragging(),delete P._77O}},redraw:function(){var T=this;T._draw||(T._draw=1,l(function(){T.mark&&T._42(),delete T._draw},16))}});var Ee=wm.MoveInteractor=function(z){cn(Ee,this,[z])};tg("MoveInteractor",hi,{handle_mousedown:function(A){var R=this,U=R.gv;if(rp(A)&&!U._editing&&!U._scrolling&&!sh()){var P=U.getSelectedDataAt(A);P?(R._data=P,U.handleMouseDown&&U.handleMouseDown(A,P),R.startDragging(A),U.isMovable(P)&&(U._moving=1)):U._focusData=q}},handleWindowMouseUp:function(K){var e=this,g=e.gv;g.handleMouseUp&&g.handleMouseUp(K,e._data),e.clear(K)},handleWindowMouseMove:function(s){var G=this,e=G._data,F=G.gv,J=F.getDataModel(),z=J.getHistoryManager();if((!F._93O||!F._93O(s,e))&&F._moving){G._logicalPoint||G.fi({kind:"prepareMove",event:s});var A=G._logicalPoint?"betweenMove":"beginMove",$={kind:A,event:s},T=G._logicalPoint=F.lp(s);z&&"beginMove"===A&&z.beginInteraction();var n=G._calcShift(A,s),h=n.x,t=n.y,q=G.gv.getMoveMode(s,e);q&&("x"===q?t=0:"y"===q?h=0:"xy"!==q&&(h=t=0)),F.moveSelection(h,t),G._lastLogicalPoint=T,G.autoScroll(s),G.fi($)}},_calcShift:function(){var v=this,z=v._logicalPoint,D=v._lastLogicalPoint,u=z.x-D.x,q=z.y-D.y;return{x:u,y:q}},clear:function(E){var l=this,g=l.gv,X=g.getDataModel(),Y=X.getHistoryManager();l._lastLogicalPoint&&(l._lastLogicalPoint=l._data=g._moving=q,l._logicalPoint&&(l.fi({kind:"endMove",event:E}),g.onMoveEnded(),Y&&Y.endInteraction()),l.clearDragging())}});var dl=wm.ScrollBarInteractor=function(n){cn(dl,this,[n])};tg("ScrollBarInteractor",hi,{_41o:function(){return this.gv.getViewRect().height<this.gv.getScrollRect().height},_40o:function(){return this.gv.getViewRect().width<this.gv.getScrollRect().width},isV:function(Q){var Z=this.gv.getViewRect();return this._41o()&&(Z.x+Z.width-this.gv.lp(Q).x)*this.gv.getZoom()<dh},isH:function(D){var H=this.gv.getViewRect();return this._40o()&&(H.y+H.height-this.gv.lp(D).y)*this.gv.getZoom()<dh},handle_mousemove:function(W){this.handle_touchmove(W)},handle_touchmove:function(W){if(!pm&&rp(W)){var F=this,C=F.isV(W),f=F.isH(W);(C||f)&&F.gv.showScrollBar(),F.gv._scrolling=C||f}},handleWindowMouseUp:function(D){this.handleWindowTouchEnd(D)},handleWindowTouchEnd:function(f){this._state=this._cp=this._tx=this._ty=this.gv._scrolling=q,this.fi({kind:"endScroll",event:f})},handle_mousedown:function(V){this.handle_touchstart(V)},handle_touchstart:function(S){var z=this;if(z.gv.setFocus(S),ak(S),z.handle_touchmove(S),!(Lr(S)>1)&&z.gv._scrolling){z._cp=Tc(S),z._tx=z.gv.tx(),z._ty=z.gv.ty();var p=z.isV(S);z._state=p?"vScroll":"hScroll",Hk(z,S),z.fi({kind:"beginScroll",event:S})}},handleWindowMouseMove:function(I){this.handleWindowTouchMove(I)},handleWindowTouchMove:function(Z){var m=Tc(Z),p=this.gv.getViewRect(),F=this.gv.getScrollRect();"vScroll"===this._state?this.gv.ty(this._ty+(this._cp.y-m.y)*F.height/p.height):"hScroll"===this._state&&this.gv.tx(this._tx+(this._cp.x-m.x)*F.width/p.width),this.fi({kind:"betweenScroll",event:Z})}});var mi=wm.TouchInteractor=function(N,T){T=T||{},T.selectable===m&&(T.selectable=!0),T.movable===m&&(T.movable=!0),T.pannable===m&&(T.pannable=!0),T.pinchable===m&&(T.pinchable=!0),T.editable===m&&(T.editable=!0),this.params=T,cn(mi,this,[N])};tg("TouchInteractor",hi,{ms_edit:1,setUp:function(){var X=this;mi.superClass.setUp.call(X),uh&&X.params.editable&&X.gv.setEditInteractor(X)},tearDown:function(){var O=this;mi.superClass.tearDown.call(O),uh&&O.params.editable&&O.gv.setEditInteractor(q)},clear:function(b){var K=this,v=K.gv,H=v.dm().getHistoryManager();v._moving&&(K.fi({kind:"endMove",event:b}),delete v._moving,v.onMoveEnded(),H&&H.endInteraction()),v._panning&&(K.fi({kind:"endPan",event:b}),delete v._panning,v.onPanEnded()),v._pinching&&(K.fi({kind:"endPinch",event:b}),delete v._pinching,v.onPinchEnded()),v._editing&&(K._46O(b),K._77I=K._node=K._edge=K._shape=K._rect=K._89I=K._index=v._editing=q),K._moving=K._panning=K._pinching=K._editing=K._57I=K._data=K._beginHistory=q,K.clearDragging()},handle_touchstart:function($){var F=this;if(!F.gv._editing){ak($),F._57I=q;var z=F.params,s=F.gv,D=s.sm(),Q=s.getDataAt($),J=Lr($);if(1===J){if(Ac($))return s.handleDoubleClick($,Q),void 0;s.handleClick($,Q),Q&&(s.handleMouseDown&&s.handleMouseDown($,Q),F._data=Q),z.selectable||(Q=q),Q?(D.co(Q)||D.ss(Q),z.editable&&s.isEditable(Q)&&F._79I($,Q,!0)?(F._editing=1,F.startDragging($)):z.movable&&s.isMovable(Q)&&(F._moving=1,F.startDragging($))):(F._57I=Tc($),z.pannable&&s.isPannable()&&(F._panning=1,F.startDragging($),F._translate={x:s.tx(),y:s.ty()}))}else if(z.pinchable&&2===J){F._pinching=1,F.startDragging($);var r=s.getView(),a=s.getZoom(),g=r.getBoundingClientRect(),d=$.touches[0],h=$.touches[1],f={x:(d.clientX+h.clientX)/2-g.left,y:(d.clientY+h.clientY)/2-g.top};f.x-=s.tx(),f.y-=s.ty(),f.x/=a,f.y/=a,F._p=f,F._d=vo($)}}},handle_touchend:function(U){var V=this,D=V.gv,x=V._57I,H=V._data;x&&(Yh(x,Tc(U))<=1&&D.sm().cs(),V._57I=q),H&&D.handleMouseUp&&D.handleMouseUp(U,H)},handleWindowTouchEnd:function(J){this.clear(J)},handleWindowTouchMove:function(a){var Q=this,z=Q.gv,l=z.dm().getHistoryManager(),W=Lr(a);if(1===W){if(Q._editing&&(l&&!Q._beginHistory&&(Q._beginHistory=1,l.beginInteraction()),z._editing=1,Q._78I(a)),Q._moving)l&&!Q._beginHistory&&(Q._beginHistory=1,l.beginInteraction()),Q.handleMove(a);else if(Q._panning){var e=Tc(a);z.setTranslate(Q._translate.x+e.x-Q._lastClientPoint.x,Q._translate.y+e.y-Q._lastClientPoint.y),Q.fi({kind:z._panning?"betweenPan":"beginPan",event:a}),z._panning=1}}else if(2===W&&Q._pinching){var w=vo(a);z.handlePinch(Q._p,w,Q._d),Q._d=w,Q.fi({kind:z._pinching?"betweenPinch":"beginPinch",event:a}),z._pinching=1}},handleMove:function(C){var D=this,y=D.gv,P=y.lp(C);y._93O&&y._93O(C,D._data)||(y.moveSelection(P.x-D._lastLogicalPoint.x,P.y-D._lastLogicalPoint.y),D._lastLogicalPoint=P,D.autoScroll(C),D.fi({kind:y._moving?"betweenMove":"beginMove",event:C}),y._moving=1)}});var s=w.ht,Ne=s.graph._editor={Math:{},Guide:{}};Ne.getStyle=function(M){var X,a=Ne.StyleMap;return a&&(X=a[M],X!==m)?X:Ne.DefaultStyleMap[M]},Ne.setStyle=function(b,r){var n=Ne.StyleMap;n||(n=Ne.StyleMap={}),n[b]=r},Ne.inEdit=function(T){return T._inXEdit===!0},Ne.startEdit=function(A){A._inXEdit=!0,Ne.Inject.doInject(A)},Ne._46O=function(H){H._inXEdit=!1,Ne.Inject.undoInject(H)},Ne.toScreenPosition=function(Y,E){var b=Y.tx(),B=Y.ty(),L=Y._zoom;return new Ne.Math.Vector2(E.x*L+b,E.y*L+B)},Ne.checkHit=function(n,q,X){return n.distanceTo(q)<X?!0:!1},Ne.toWorldPosition=function(I,v){var w=I.tx(),K=I.ty(),s=I._zoom;return{x:(v.x-w)/s,y:(v.y-K)/s}},Ne.setAntialias=function(F,d){for(var k,n=["imageSmoothingEnabled","webkitImageSmoothingEnabled","mozImageSmoothingEnabled","oImageSmoothingEnabled","msImageSmoothingEnabled"],E=0,c=n.length;c>E&&(k=n[E],!(k in F));E++);F[k],F[k]=d},Ne.log=function(){};var eg=Ne.Inject={_modules:[]};eg.registAsModule=function(A,e){var v={},O={};for(var $ in A){var H=e.prototype[$];v[$]=H}A.getBackup=function(D){return v[D]},A.getBackups=function(){return v},O.doInject=function(){for(var F in A)"getBackup"!==F&&(e.prototype[F]=A[F])},O.undoInject=function(){for(var l in A)"getBackup"!==l&&(e.prototype[l]=v[l])},eg._modules.push(O)},eg.doInject=function(Y){for(var J,T=eg._modules,g=0,w=T.length;w>g;g++)J=T[g],J.doInject(Y)},eg.undoInject=function(O){for(var K,V=eg._modules,J=0,t=V.length;t>J;J++)K=V[J],K.undoInject(O)};var hi=s.graph.EditInteractor=function(x){var W=this,Q=T.createElement("canvas");Q.className="editCanvas",Q.style.position="absolute",W._styleMap={},W._canvas=Q,W._context=Q.getContext("2d"),hi.superClass.constructor.call(W,x),Ne.setAntialias(W._context,!1),W._subModules=[new Ne.Anchor(W),new Ne.Rect(W),new Ne.Curve(W),new Ne.MoveHelper(W)],W._gridGuide=new Ne.Guide.Grid(W),W._rectGuide=new Ne.Guide.Rect(W)},Vc=hi;s.Default.def(hi,s.graph.Interactor,{ms_edit:1,ms_fire:1}),_.defineProperties(hi.prototype,{editDetail:{get:function(){var _=!!this._editDetail;return _},set:function(y){var t=this,O=t._editDetail;O!==y&&(t._editDetail=y,t.gv._editing=y,t.fp("editDetail",O,y),t.fp("pointsEditingMode",O,y))}},gvEditing:{get:function(){return this.gv._editing},set:function(p){(!this._editDetail||p)&&(this.gv._editing=p,p||(this.editDetail=!1))}},editing:{get:function(){return this._editing},set:function(g){this._editing=g,this.gvEditing=g}},pointsEditingMode:{get:function(){return this.editDetail},set:function(I){var x=this;x.editDetail!==I&&(I?x._tryEnterEditDetailMode():x._tryQuitEditDetailMode())}},gridEnabled:{get:function(){var z=this._gridEnabled;if(!z)return!1;var h=this.gv;return h?!0:!0},set:function(W){W!==this._gridEnabled&&(this._gridEnabled=W,this._42())}},alignmentGuideEnabled:{get:function(){return this._agEnabled},set:function(f){f!==this._agEnabled&&(this._agEnabled=f,this._42())}},gridGuide:{get:function(){return this._gridGuide}},rectGuide:{get:function(){return this._rectGuide}}}),hi.prototype.getSubModule=function(d){var j,K,h,m=this._subModules;for(K=0,h=m.length;h>K;K++)if(j=m[K],j.catalog===d)return j},hi.prototype.invokeSubModule=function(C,Y){var k=this,y=k._subModules;if(y)for(var j,O,P,Q=Array.prototype.slice.call(arguments,2),S=0,n=y.length;n>S;S++)if(j=y[S],O=j[C],O&&(P=O.apply(j,Q),P!=m&&Y))return j},hi.prototype.invokeSubModuleInverse=function(M,X){var J=this,c=J._subModules;if(c)for(var U,s,N,H=Array.prototype.slice.call(arguments,2),l=c.length-1;l>=0;l--)if(U=c[l],s=U[M],s&&(N=s.apply(U,H),N!=m&&X))return U},hi.prototype.setUp=function(){Ne.log("setUp");var C=this,o=C.gv,R=o.getView(),I=C._canvas;hi.superClass.setUp.call(C),o.setEditInteractor(C),o._79O?R.insertBefore(I,o._79O):R.appendChild(I),Ne.startEdit(o),C.invokeSubModule("setUp"),o.dm().mm(C._onDataModelChanged,C),o.dm().md(C._onDataPropertyChanged,C)},hi.prototype.tearDown=function(){Ne.log("tearDown");var b=this,Z=b.gv,t=Z.getView();b._resetCustomCursorStyle(),hi.superClass.tearDown.call(b),Z.dm().umm(b._onDataModelChanged),Z.dm().umd(b._onDataPropertyChanged),Z.setEditInteractor(null),t.removeChild(b._canvas),Ne._46O(Z),b.invokeSubModule("tearDown")},hi.prototype._onDataModelChanged=function(z){var y=this;("clear"===z.kind||"remove"===z.kind&&y.editDetail&&z.data===y.getSubModule("Curve").target)&&(y.editDetail=!1,y._42())},hi.prototype._onDataPropertyChanged=function(I){var u=this;if(u.editDetail){var P=u.getSubModule("Curve"),f=I.data;f===P.target&&(f._writing||P._handleDataChanged())}},hi.prototype.clear=function(){Ne.log("clear")},hi.prototype.redraw=function(){this._42()},hi.prototype._42=function(){var S=this;S._drawTimer||(S._drawTimer=l(function(){delete S._drawTimer,S.drawImpl()},0))},hi.prototype.drawImpl=function(){var D;for(D in{_42:!0})break;return function(){var f=this,R=f._canvas,L=f.gv,M=L.getWidth(),o=L.getHeight(),T=f._context,C=s.Default.getInternal();(R.width!==M||R.height!==o)&&C.setCanvas(R,M,o),T.clearRect(0,0,R.width,R.height);var W=f._getValidSelection();T.save();var u=s.Default.devicePixelRatio;T.scale(u,u),f._gridGuide._42(),f._rectGuide._42(),f.invokeSubModuleInverse(D,!1,T,L,W),T.restore()}}(),hi.prototype._getValidSelection=function(){var b=this,Q=b.gv,u=Q.sm().getSelection(),e=[];return u.each(function(i){Q.isVisible(i)&&Q.isEditable(i)&&e.push(i)}),e},hi.prototype.handle_touchmove=function(B){return this.handle_mousemove(B)},hi.prototype.handle_mousemove=function(k){if(!s.Default.isDragging()){var P=this;(P.editDetail||!sh())&&(P.gvEditing=!1,P._checkEdit(k)&&(P.gvEditing=!0))}},hi.prototype.handle_touchstart=function(i){return this.handle_mousedown(i)},hi.prototype.handle_mousedown=function(D){ak(D);var R=this;if(R.editDetail||!sh()){if(Ac(D)&&!D.clickThrough){if(R.editDetail){if(R._tryQuitEditDetailMode(D))return}else if(R._tryEnterEditDetailMode())return;if(R.invokeSubModule("handleDoubleClick",!0,D))return}var F=R._checkEdit(D);if(F){R._downPosition=R._getLogicalPoint(D);var d=R.gv.dm(),q=d.getHistoryManager();q&&q.beginInteraction(),F.startEdit(R,D),R.editing=!0}}},hi.prototype._checkEdit=function(N){var t=this,W=t.gv,r=t._getLogicalPoint(N),k=t.invokeSubModule("check",!0,W,N,r)||null;return t._editMod=k,k},hi.prototype.handleWindowTouchMove=function(O){return this.handleWindowMouseMove(O)},hi.prototype.handleWindowMouseMove=function(B){var d=this,Q=d._downPosition;if(Q){var e=d._getLogicalPoint(B);if(e.distanceTo(Q)<d.getStyle("moveSensitivity"))return;delete d._downPosition}var r=d._editMod;r&&r.handleEdit(d.gv,B)},hi.prototype._getLogicalPoint=function(X){var i=this,Q=s.Default.getLogicalPoint(X,i._canvas);return new Ne.Math.Vector2(Q)},hi.prototype.handleWindowTouchEnd=function(r){return this.handleWindowMouseUp(r)},hi.prototype.handleWindowMouseUp=function(){var I;for(I in{_46O:!0})break;return function(){var B=this;B.editing=!1,B.setCursor("default"),B.invokeSubModule(I,!1),B._42();var m=B.gv.dm(),w=m.getHistoryManager();w&&w.endInteraction()}}(),hi.prototype.handle_mousewheel=function(X){var O=this;ak(X),O.invokeSubModule("preHandleScroll",!0)||O.gv.handleScroll(X,X.wheelDelta)},hi.prototype.handleDelete=function(){var U=this;return U.editDetail?(U.invokeSubModule("handleDelete",!0),U._42(),void 0):(U.gv.removeSelection(),void 0)},hi.prototype.handle_keydown=function(b){var D=this;if((b.metaKey||b.ctrlKey)&&D._42(),sh(b)&&!D.editing)return D.gvEditing=!1,D.setCursor("default"),D._42(),void 0;var l=Yl(b);return D.editDetail?((l||_k(b))&&(D.editDetail=!1,D._42()),D.invokeSubModule("handle_keydown",!0,b),void 0):(l&&D._tryEnterEditDetailMode(),void 0)},hi.prototype.handle_keyup=function(Y){this.invokeSubModule("handle_keyup",!0,Y)},hi.prototype._tryEnterEditDetailMode=function(){var o=this;return!o.editDetail&&o.invokeSubModule("canEnterEditDetailMode",!0)&&1===o._getValidSelection().length?(o.editDetail=!0,o._42(),!0):void 0},hi.prototype._tryQuitEditDetailMode=function(E){var l=this;if(l.editDetail){var D=l.gv,i=l.getSubModule("Curve").target;return E&&D.getDataAt(E)===i?void 0:(l.editDetail=!1,l._42(),!0)}},hi.prototype.setStyle=function(K,s,l){var N=this;l?Ne.setStyle(K,s):N._styleMap[K]=s,N.fp("styleChanged",null,{key:K,value:s,base:l}),N._42()},hi.prototype.getStyle=function(j){var C=this,W=C._styleMap[j];return W!==m?W:Ne.getStyle(j)},hi.prototype.setCursor=function(W){this._resetCustomCursorStyle(),s.graph.EditInteractor.superClass.setCursor.call(this,W)},hi.prototype._resetCustomCursorStyle=function(){var Y=this;if(Y._customStyle){var O=this.gv.getView();O.classList&&O.classList.remove&&O.classList.remove(Y._customStyle),Y._customStyle=null}},hi.prototype._setRotateCursor=function(V){var Y=this,C=Y._cursorFactory;C||(C=Y._cursorFactory=new Ne.CursorFactory(Y));var D=C.getRotateCursor(V),R=Y.gv.getView();Y._resetCustomCursorStyle(),Y._customStyle=D,R.classList&&R.classList.add&&R.classList.add(D)};var Ib=Ne.Group=function(C){var G=this;G._entities=C,G._64O=0,G._position={x:0,y:0},G._scale={x:1,y:1},G._anchor={x:.5,y:.5},G._anchor2={x:.5,y:.5}};Ib.prototype={},Ib.prototype.constructor=Ib;var zs=null;Ib.findOrCreateGroup=function(b){if(zs&&zs.checkIsMe(b))return zs;var F=new Ne.Group(b);return F.getKeyOb()?(zs=F,F):void 0},Ib.prototype.checkIsMe=function(H){var K=this._entities;if(K.length!==H.length)return!1;var $,d={},a=H.length;for($=0;a>$;$++)d[H[$]._id]=!0;for($=0;a>$;$++)if(!d[K[$]._id])return!1;return!0},Ib.prototype.getRotation=function(){return this._64O},Ib.prototype.getPosition=function(){return this._position},Ib.prototype.getAnchor=function(){return this._anchor},Ib.prototype.getWidth=function(){return this._width},Ib.prototype.getScale=function(){return this._scale},Ib.prototype.getSize=function(){return{width:this._width,height:this._height}},Ib.prototype.getHeight=function(){return this._height},Ib.prototype.getKeyOb=function(){for(var g=this._entities,C=g.length-1;C>=0;C--){var Z=g[C];if(this.isNode(Z))return Z}},Ib.prototype.getAnchor2=function(){var X=this,y=X.rotateCenter;if(y)return y;var e=X.getKeyOb();if(!e)return X._anchor;var A=X._anchor2,n=e.getMatrix();return n.tf({x:e.getWidth()*(A.x-e.getAnchor().x),y:e.getHeight()*(A.y-e.getAnchor().y)})},Ib.prototype.setAnchor2=function(V,N){var M=this,h=M.getKeyOb();if(h){var j,E=h.getMatrix();j="number"==typeof V?{x:V,y:N}:V;var L=E.tfi(j);M._anchor2={x:h.getAnchor().x+L.x/h.getWidth(),y:h.getAnchor().y+L.y/h.getHeight()}}},Ib.prototype.setRotation=function(){},Ib.prototype.beginRotate=function(h){this.rotateCenter=h.pos,this.rotateMode=h.groupRotateMode},Ib.prototype.endRotate=function(){delete this.rotateCenter,delete this.rotateMode},Ib.prototype.addRotation=function(q,E){return"batch"===E?this._addRotationInBatchMode(q):"block"===E?this._addRotationInBlockMode(q):void 0},Ib.prototype._addRotationInBlockMode=function(e){var C=this,U=C.rotateCenter||C.getPosition();C._entities.forEach(function(V){if(C.isNode(V)){var p=V.getMatrix();p.translate(-U.x,-U.y),p.rotate(e),p.translate(U.x,U.y);var I=Math.sign(V.getScale().x);V.setRotation(Q(p.b*I,p.a*I)),V.setPosition(p.tx,p.ty)}})},Ib.prototype._addRotationInBatchMode=function(V){var _=this,X=_._anchor2;_._entities.forEach(function(K){if(_.isNode(K)){var a=K.getAnchor(),$=K.getMatrix(),p=$.tf({x:K.getWidth()*(X.x-a.x),y:K.getHeight()*(X.y-a.y)}),D=new Ne.Math.Matrix2;D.set($.a,$.b,$.c,$.d,$.tx,$.ty),D.translate(-p.x,-p.y),D.rotate(V),D.translate(p.x,p.y);var Z=Math.sign(K.getScale().x);K.setRotation(Q(D.b*Z,D.a*Z)),K.setPosition(D.tx,D.ty)}})},Ib.prototype.setPosition=function(n){var J,x,o,z,W=this,$=W._position,I=n.x-$.x,F=n.y-$.y,O=W._entities;for(x=0,o=O.length;o>x;x++)J=O[x],$p(J)&&(z=J.getPosition(),J.setPosition(z.x+I,z.y+F));W._position=n},Ib.prototype.setScale=function($,P){var J=this,C=$/J._scale.x,Z=P/J._scale.y;J._adjustChildScaleOrSize(C,Z,"size"),J._scale={x:$,y:P}},Ib.prototype.getRect=function(){var h=this,Q=h._position,k=h._width,F=h._height;return{x:Q.x-k/2,y:Q.y-F/2,width:k,height:F}},Ib.prototype.setSize=function(C,E){var D=this,C=Math.max(1,C),E=Math.max(1,E),I=C/D._width,u=E/D._height;D._adjustChildScaleOrSize(I,u,"size"),D._width=C,D._height=E},Ib.prototype._adjustChildScaleOrSize=function(b,A,f){var a,J,d,w,M,h,e,n,t,N,y,H,l,x,Y=this,E=Y._position,k=Y._entities,F=new Ne.Math.Matrix2;for(J=0,d=k.length;d>J;J++)if(a=k[J],Y.isNode(a)){if(w=a.getPosition(),M=a.getRotation(),h=a.getWidth(),e=a.getHeight(),n=a.getScale(),y=n.x*h,H=n.y*e,F.identity().scale(y,H).rotate(M).translate(w.x,w.y).translate(-E.x,-E.y).rotate(-Y._64O),M=Q(F.b*Math.sign(y),F.a*Math.sign(y)),F.scale(b,A),t=Math.cos(M),N=Math.sin(M),Math.abs(t)<.001?(l=F.b/N,x=-F.c/N):(l=F.a/t,x=F.d/t),"scale"===f)a.setScale(l/h,x/e);else if("size"===f){var L=l/n.x,i=x/n.y;a.setScale($m(l)*Math.abs(n.x),$m(x)*Math.abs(n.y)),a.setSize(Math.max(.1,Math.abs(L)),Math.max(.1,Math.abs(i)))}F.rotate(Y._64O).translate(E.x,E.y),a.setPosition(F.tx,F.ty)}},Ib.prototype.getMatrix=function(){var $=this,i=$._position,N=s.Default.getInternal(),B=$._scale;return new N.Mat($._64O,i.x,i.y,B.x,B.y)},Ib.prototype.getCorners=function(){var F=this,d=F._width,t=F._height,O=F._anchor,q=-d*O.x,z=-t*O.y,A=F.getMatrix();return[A.tf(q,z),A.tf(q,z+t),A.tf(q+d,z+t),A.tf(q+d,z)]},Ib.prototype.calcInfo=function(){var J,Z,s,F,u,w,v=this,i=[],W=v._entities,M=v._64O;for(F=0,u=W.length;u>F;F++)w=W[F],v.isNode(w)&&w.getCorners&&i.push.apply(i,w.getCorners());if(i.length){var C=Math.cos(-M),l=Math.sin(-M),X=1/0,k=-1/0,B=1/0,d=-1/0;for(F=0,u=i.length;u>F;F++)s=i[F],J=s.x,Z=s.y,s.x=C*J-l*Z,s.y=l*J+C*Z,X=Math.min(X,s.x),k=Math.max(k,s.x),B=Math.min(B,s.y),d=Math.max(d,s.y);v._width=(k-X)/v._scale.x,v._height=(d-B)/v._scale.y,C=Math.cos(M),l=Math.sin(M);var I=v._anchor;J=X+(k-X)*I.x,Z=B+(d-B)*I.y,v._position={x:C*J-l*Z,y:l*J+C*Z}}},Ib.prototype.isNode=function(T){return $p(T)?sn(T)?!1:!0:!1},Ib.prototype._42=function(M,p,D){var K,s,r,q,j,Q,d,t,A=this,S=A._entities,B=A.rotateMode;for("batch"===B&&(t=A.getKeyOb()),K=0,s=S.length;s>K;K++)r=S[K],A.isNode(r)&&(Q=r.getRect(),q=Ne.toScreenPosition(D,{x:Q.x,y:Q.y}),j=Ne.toScreenPosition(D,{x:Q.x+Q.width,y:Q.y+Q.height}),d={min:q,max:j},r===t&&(d.isKeyOb=!0),Ne.Icons.DrawIcon(M,p,Ne.Icons.GroupSubEntityRect,d))};var Oc=Ne.CursorFactory=function(j){var C=this;C._interactor=j,C._rotateCursorStyles={}};Oc.prototype={},Oc.prototype.constructor=Oc,Oc.prototype.getRotateCursor=function(p){var E=this;0>p&&(p+=2*Math.PI);var R=E._interactor,q=R.getStyle("rotateCursorSize"),i=R.getStyle("rotateCursorRound"),N=Math.round(180*(p/Math.PI)/i);N*i>=360&&(N=0);var S=E._rotateCursorStyles,g="htCustomRotateStyle_"+q+"_"+i+"_"+N;return S[g]||(E._produceRotateCursor(g,q,i,N),S[g]=!0),g},Oc.prototype._produceRotateCursor=function(c,q,$,V){var v=this;v._interactor;var s=v._canvas;s||(s=v._canvas=T.createElement("canvas")),s.width=s.height=q*devicePixelRatio,s.style.width=s.style.height=q+" px";var p=s.getContext("2d");Ne.setAntialias(p,!1),p.scale(devicePixelRatio,devicePixelRatio);var Q,r,X,o,C,l=Math.round(q/2),S=""+l+" "+l+",auto !important;";Q=Math.PI/180*V*$,p.clearRect(0,0,q,q),p.save(),p.scale(q/32,q/32),p.translate(16,16),p.rotate(Q+Math.PI/2),p.beginPath(),p.moveTo(-8,0),p.lineTo(-8,3),p.lineTo(-5,3),p.moveTo(8,0),p.lineTo(8,3),p.lineTo(5,3),p.moveTo(-8,3),p.quadraticCurveTo(0,-6,8,3),p.restore(),p.strokeStyle="white",p.lineWidth=4,p.stroke(),p.strokeStyle="black",p.lineWidth=2,p.stroke(),r=JSON.stringify(s.toDataURL()),o="cursor:url("+r+")"+S,1!==devicePixelRatio&&(X='<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="'+q+'px" height="'+q+'px"><image xlink:href='+r+' width="'+q+'" height="'+q+'"/></svg>',o+="cursor:url(data:image/svg+xml;base64,"+btoa(X)+")"+S,o+="cursor:-webkit-image-set(url("+r+")"+devicePixelRatio+"x,url("+r+")1x)"+S),C=T.createElement("style"),C.textContent="body."+c+" *, ."+c+"{"+o+"}",T.head.appendChild(C)};var ds=Ne.Guide.Grid=function(G){var Z=this;Z._interactor=G,Z._alignmentGuideId=0,Z._xAlignmentGuide=[],Z._yAlignmentGuide=[]};ds.prototype={},ds.prototype.constructor=ds,_.defineProperties(ds.prototype,{gridBlockSize:{get:function(){var I=this;return I._gridBlockSize||I._interactor.getStyle("gridBlockSize")},set:function(l){this._gridBlockSize=l,this._interactor._42()}},gridThickLinesEvery:{get:function(){var R=this;return R._gridThickLinesEvery||R._interactor.getStyle("gridThickLinesEvery")},set:function(e){this._gridThickLinesEvery=e,this._interactor._42()}},gridEnabled:{get:function(){var k=this,O=k._interactor;return O.gridEnabled&&k.isValidGrid()}}}),ds.prototype._42=function(){var Y=this,L=Y._interactor;Y.gridEnabled&&Y.drawGrid(),L.alignmentGuideEnabled&&Y.drawAlignmentGuide()},ds.prototype.makeMatrix=function(){var K=this,T=K._interactor.getStyle("gridAngle"),G=K._interactor.getStyle("gridRotation"),Y=new Ne.Math.Matrix2,W=Math.sin(T),M=Math.cos(T);return Y.set(1,0,M,W,0,0),Y.rotate(G),Y},ds.prototype.isValidGrid=function(){var X=this,b=Math.PI,p=X._interactor,i=p.gv;if(i._zoom<p.getStyle("gridZoomThreshold"))return!1;var d=p.getStyle("gridAngle"),f=Math.abs(180*(d%b/b)),x=1-1e-8;return x>f||f>180-x?!1:!0},ds.prototype.drawAlignmentGuide=function(){var T=this,H=T._interactor,Z=H.gv,b=H._canvas,G=H._context,R=b.width,g=b.height,J=Z.tx(),A=Z.ty(),B=Z._zoom;G.beginPath(),G.strokeStyle=H.getStyle("gridAlignmentGuideColor"),G.lineWidth=1,T._xAlignmentGuide.forEach(function(E){var P=E.p*B+J;G.moveTo(P,0),G.lineTo(P,g)}),T._yAlignmentGuide.forEach(function(J){var c=J.p*B+A;G.moveTo(0,c),G.lineTo(R,c)}),G.stroke()},ds.prototype.drawGrid=function(){function P(Z,B,U,g){var r=Ne.toScreenPosition(W,p.apply({x:Z,y:B})),D=Ne.toScreenPosition(W,p.apply({x:U,y:g}));R.moveTo(r.x,r.y),R.lineTo(D.x,D.y)}var y=this,_=y._interactor,Y=y.gridBlockSize,Q=y.gridThickLinesEvery,J=_.getStyle("gridThickColor"),H=_.getStyle("gridLightColor"),W=_.gv,N=_._canvas,R=_._context,S=N.width,j=N.height,p=y.makeMatrix(),F=p.applyInverse(Ne.toWorldPosition(W,{x:0,y:0})),h=p.applyInverse(Ne.toWorldPosition(W,{x:S,y:0})),b=p.applyInverse(Ne.toWorldPosition(W,{x:0,y:j})),e=p.applyInverse(Ne.toWorldPosition(W,{x:S,y:j})),M=Math.min(F.x,h.x,b.x,e.x),c=Math.max(F.x,h.x,b.x,e.x),D=Math.min(F.y,h.y,b.y,e.y),z=Math.max(F.y,h.y,b.y,e.y);S=c-M,j=z-D;var t=Math.ceil(M/Y),U=Math.floor(c/Y),d=Math.ceil(D/Y),i=Math.floor(z/Y);W.tx(),W.ty(),W._zoom;var f,v,l;for(R.save(),R.lineWidth=1,R.beginPath(),R.strokeStyle=J,l=Math.ceil(t/Q)*Q;U>=l;l+=Q)f=l*Y,P(f,D,f,z);for(l=Math.ceil(d/Q)*Q;i>=l;l+=Q)v=l*Y,P(M,v,c,v);for(R.stroke(),R.beginPath(),R.strokeStyle=H,l=t;U>=l;l++)0!==l%Q&&(f=l*Y,P(f,D,f,z));for(l=d;i>=l;l++)0!==l%Q&&(v=l*Y,P(M,v,c,v));R.stroke(),R.restore()},ds.prototype.getAlignmentGuides=function(){var m=this;return{x:m._xAlignmentGuide,y:m._yAlignmentGuide}},ds.prototype.addAlignmentGuide=function(o,c,p){var B=this,X="x"===o?B._xAlignmentGuide:B._yAlignmentGuide,p=p?p:++B._alignmentGuideId,R={p:c,id:p};if(X.length){var K=B._findClosestAlignmentGuide(R.p,X);K.dis<0?X.splice(K.index+1,0,R):X.splice(K.index,0,R)}else X.push(R);return B._interactor._42(),p},ds.prototype.findClosest=function(b,d,J){var N=this,o=N._interactor,O=o.gv;J&&(b=Ne.toWorldPosition(O,b));var t,y,j,U=1/0,B=1/0,u=b.x,C=b.y;if(N.gridEnabled){var T=N.gridBlockSize,Q=N.makeMatrix(),f=Q.applyInverse(b);f=Q.apply({x:Math.round(f.x/T)*T,y:Math.round(f.y/T)*T}),U=f.x-u,B=f.y-C,j=!0}if(o.alignmentGuideEnabled&&(t=N._findClosestAlignmentGuide(u,N._xAlignmentGuide).dis,y=N._findClosestAlignmentGuide(C,N._yAlignmentGuide).dis,Math.abs(t)<Math.abs(U)&&(U=t,j=!0),Math.abs(y)<Math.abs(B)&&(B=y,j=!0)),j){j=!1;var x=O._zoom,R=o.getStyle("smartGuideSensitivity")/x,p={};if(Math.abs(U)<R&&"y"!==d&&(p.x=J?U*x:U,j=!0),Math.abs(B)<R&&"x"!==d&&(p.y=J?B*x:B,j=!0),j)return p}},ds.prototype._findClosestAlignmentGuide=function(f,u){if(!u.length)return{dis:1/0};for(var l,w=0,K=u.length-1;K-w>1;)l=Math.floor((w+K)/2),u[l].p<f?w=l:K=l;var t=u[w].p-f,Z=u[K].p-f;return Math.abs(t)<=Math.abs(Z)?{line:u[w],dis:t,index:w}:{line:u[K],dis:Z,index:K}},ds.prototype.removeAllAlignmentGuide=function(P){var O=this;"y"!==P&&(O._xAlignmentGuide=[]),"x"!==P&&(O._yAlignmentGuide=[]),O._interactor._42()},ds.prototype.removeAlignmentGuide=function(L){var q,Z,c,M=this,H=M._xAlignmentGuide;for(k=0;2>k;k++)for(H=0===k?M._xAlignmentGuide:M._yAlignmentGuide,q=0,Z=H.length;Z>q;q++)if(c=H[q],c.id===L)return H.splice(q,1),M._interactor._42(),{axis:0===k?"x":"y",position:c.p};return!1},ds.prototype.adjustAlignmentGuide=function(q,t){var w=this,R=w.removeAlignmentGuide(q);return R?(w.addAlignmentGuide(R.axis,t,q),!0):!1};var ui=Ne.Guide.Rect=function(v){var R=this;R._interactor=v};ui.prototype={},ui.prototype.constructor=ui,ui.prototype.gatherRects=function(){var e,F,A,B,q=this,r=q._interactor.gv,V=[],s=[],L={x:V,y:s},a={},N=r.getDataModel(),l=N.a("width"),w=N.a("height");l&&w&&(e=0,F=0,A=l,B=w,V.push({node:N,type:0,p:e},{node:N,type:1,p:e+A/2},{node:N,type:2,p:e+A}),s.push({node:N,type:0,p:F},{node:N,type:1,p:F+B/2},{node:N,type:2,p:F+B}),a[N._id||0]={x:e,y:F,width:A,height:B}),N.each(function(x){if($p(x)&&!r.isSelected(x)&&r.isVisible(x)){var g=!1;if(r.sm().getSelection().each(function(L){g||(x.isHostOn(L)?g=!0:x.isDescendantOf(L)&&(g=!0))}),!g){var p=x.getRect();e=p.x,F=p.y,A=p.width,B=p.height,V.push({node:x,type:0,p:e},{node:x,type:1,p:e+A/2},{node:x,type:2,p:e+A}),s.push({node:x,type:0,p:F},{node:x,type:1,p:F+B/2},{node:x,type:2,p:F+B}),a[x._id]=p}}}),V.sort(function(E,G){return E.p-G.p}),s.sort(function(M,e){return M.p-e.p}),q._grid=L,q._87I=a},ui.prototype.gatherLines=function(K,$,m){var s,k,Y,n,p,f,r,I,w,e,G,Z,W=this,c=[W.findClosest({x:K.x,y:K.y},$),W.findClosest({x:K.x+K.w/2,y:K.y+K.h/2},$),W.findClosest({x:K.x+K.w,y:K.y+K.h},$)],g={},u=W._87I;m=m||255;var V,z;for(W._guideLine=[],s=0;2>s;s++)for(g={},0===s?(n="y",I=K.x,w=I+K.w):(n="x",I=K.y,w=I+K.h),k=0;3>k;k++)p=c[k],p&&isFinite(p[n])&&(V=1<<3*s+k,m&V&&(f=p[n+"Line"],r=f.node,z=r._id||0,g[z]||(g[z]=!0,Z=u[z],"y"===n?(e=Z.x,G=Z.x+Z.width):(e=Z.y,G=Z.y+Z.height),Y=f.p,W._guideLine.push({type:n,a:I,b:w,c:e,d:G,p:Y}))))},ui.prototype._binarySearchClosest=function(T,x){if(!x.length)return{dis:1/0};for(var E,e=0,M=x.length-1;M-e>1;)E=Math.floor((e+M)/2),x[E].p<T?e=E:M=E;var D=x[e].p-T,p=x[M].p-T;return Math.abs(D)<=Math.abs(p)?{line:x[e],dis:D}:{line:x[M],dis:p}},ui.prototype.findClosest=function(v,w,l){var E=this,n=E._interactor,z=n.gv,y=E._grid;l&&(v=Ne.toWorldPosition(z,v));var g,Z=E._binarySearchClosest(v.x,y.x),I=E._binarySearchClosest(v.y,y.y),X=Z.dis,b=I.dis,o=z._zoom,d=n.getStyle("smartGuideSensitivity")/o,O={};return Math.abs(X)<d&&"y"!==w&&(O.x=l?X*o:X,O.xLine=Z.line,g=!0),Math.abs(b)<d&&"x"!==w&&(O.y=l?b*o:b,O.yLine=I.line,g=!0),g?O:void 0},ui.prototype._42=function(){var i=this,e=i._guideLine;if(e&&!s.Default.isCtrlDown()){var O,A,w,L,J,$,B,u,H,E,f,Q,U,_,r,n,z,x=i._interactor,j=x.gv,N=x._context,y=j.tx(),R=j.ty(),G=j._zoom,q=x.getStyle("guideLineTextSpacing");for(O=0,A=e.length;A>O;O++)w=e[O],u=w.type,H=w.p,E=w.a,f=w.b,Q=w.c,U=w.d,_=Math.min(E,Q),r=Math.max(f,U),"x"===u?(L=H*G+y,J=_*G+R,$=L,B=r*G+R):(L=_*G+y,J=H*G+R,$=r*G+y,B=J),Ne.Icons.DrawIcon(x,N,Ne.Icons.MoveLineGuide,[L,J,$,B]),U>=E&&f>=Q||(_=E>U?U:f,r=E>U?E:Q,z=r-_,"x"===u?(w.center2center||(L-=q,$=L),J=_*G+R,B=r*G+R,n=Ne.Icons.MoveLineGuideDistanceV):"y"===u&&(w.center2center||(J-=q,B=J),L=_*G+y,$=r*G+y,n=Ne.Icons.MoveLineGuideDistanceH),Ne.Icons.DrawIcon(x,N,n,{x0:L,y0:J,x1:$,y1:B,dis:z}))
}},ui.prototype.clear=function(){this._guideLine=null},Ne.DefaultStyleMap={pointSize:[24,9],checkSize:7,rotateCheckSize:10,moveSensitivity:10,rotateRound:Math.PI/2,rotateSensitivity:Math.PI/60,shiftRotateRound:Math.PI/12,shiftLineRotateRound:Math.PI/4,anchorMovable:!0,anchorVisible:!0,anchorHideThreshold:25,anchorOutsideVisibleThreshold:.25,anchorRound:.25,anchorSensitivity:.02,smartGuideSensitivity:8,curveIntersectSize:5,curvePointIntersectSize:8,edgeHostDetectPerFrame:!0,guideLineTextSpacing:32,gridBlockSize:40,gridThickLinesEvery:10,gridThickColor:"#5d5d5d",gridLightColor:"#d0d0d0",gridZoomThreshold:.25,gridAlignmentGuideColor:"#ff0000",gridAngle:Math.PI/2,gridRotation:0,groupRotateModeDefault:"block",groupRotateModeKey:["ctrlKey","metaKey"],rotateCursorSize:32,rotateCursorRound:45,tipTextColor:"#ffffff",tipBackground:"#333333",curveHighlightColor:"#30599e",rectPointBackground:"white",rectPointBorderColor:"#666666",rectPointShadowColor:"rgba(0,0,0,0.35)",shapeCtrlPointBackground:"white",shapeCtrlPointBorderColor:"#707070",shapeHighlighPointBackground:"#30599e"};var We=Ne.Icons={},So=1e4,Ve=null,oc=8;s.Default.setImage("Icons.RectPoint",{width:oc,height:oc,comps:[{type:"shape",points:[0,0,0,oc,oc,oc,oc,0],segments:[1,2,2,2,5],shadow:!0,borderWidth:1,shadowColor:{func:function(){return Ve.getStyle("rectPointShadowColor")}},background:{func:function(){return Ve.getStyle("rectPointBackground")}},borderColor:{func:function(){return Ve.getStyle("rectPointBorderColor")}}}]});var Tl="#e000e0";We.GroupSubEntityRect={comps:[{type:"shape",points:{func:function(){var Z=We.GroupSubEntityRect.data;if(!Z)return[];var $=Z.min,p=Z.max;return[$.x,$.y,$.x,p.y,p.x,p.y,p.x,$.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:{func:function(){return We.GroupSubEntityRect.data.isKeyOb?Tl:"#666666"}}}]},We.Line={comps:[{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[We.Line.data.P1.x,We.Line.data.P1.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",rect:{func:function(){return[[We.Line.data.P2.x,We.Line.data.P2.y],oc,oc]}}}]},We.EdgeHostGuide={comps:[{type:"shape",points:{func:function(){return We.EdgeHostGuide.data}},segments:[1,2,2,2,5],background:null,borderWidth:2,borderColor:"red"}]},We.Rect={comps:[{type:"shape",points:{func:function(){var O=We.Rect.data;if(!O)return[];var w=O.LT,X=O.LB,T=O.RB,G=O.RT;return[w.x,w.y,X.x,X.y,T.x,T.y,G.x,G.y]}},segments:[1,2,2,2,5],background:null,borderWidth:1,borderColor:"#666666"},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return We.Rect.data.rotation}},rect:{func:function(){return[[We.Rect.data.LT.x,We.Rect.data.LT.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return We.Rect.data.rotation}},rect:{func:function(){return[[We.Rect.data.LB.x,We.Rect.data.LB.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return We.Rect.data.rotation}},rect:{func:function(){return[[We.Rect.data.RB.x,We.Rect.data.RB.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",rotation:{func:function(){return We.Rect.data.rotation}},rect:{func:function(){return[[We.Rect.data.RT.x,We.Rect.data.RT.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return We.Rect.data.rotation}},visible:{func:function(){return We.Rect.data.L?!0:!1}},rect:{func:function(){return[[We.Rect.data.L.x,We.Rect.data.L.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return We.Rect.data.rotation}},visible:{func:function(){return We.Rect.data.R?!0:!1}},rect:{func:function(){return[[We.Rect.data.R.x,We.Rect.data.R.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return We.Rect.data.rotation}},visible:{func:function(){return We.Rect.data.T?!0:!1}},rect:{func:function(){return[[We.Rect.data.T.x,We.Rect.data.T.y],oc,oc]}}},{type:"image",name:"Icons.RectPoint",scaleX:.9,scaleY:.9,rotation:{func:function(){return We.Rect.data.rotation}},visible:{func:function(){return We.Rect.data.B?!0:!1}},rect:{func:function(){return[[We.Rect.data.B.x,We.Rect.data.B.y],oc,oc]}}}]};var Kk=18;s.Default.setImage("Icons.Anchor",{width:Kk,height:Kk,comps:[{type:"arc",rect:[4,4,Kk-8,Kk-8],arcFrom:0,arcClose:!1,background:"#ffffff",borderWidth:0,borderColor:"#000000"},{type:"shape",points:[2,Kk/2,Kk-2,Kk/2,Kk/2,2,Kk/2,Kk-2],segments:[1,2,1,2],background:null,borderWidth:1,borderColor:"#111111"},{type:"arc",rect:[5.5,5.5,Kk-11,Kk-11],arcFrom:0,arcClose:!1,background:null,borderWidth:1,borderColor:"#111111"}]}),We.Anchor={comps:[{type:"image",name:"Icons.Anchor",rect:{func:function(){return[[We.Anchor.data.POS.x,We.Anchor.data.POS.y],Kk,Kk]}}}]},We.TipShiftX=12,We.TipShiftY=12;var zl=[8,28];We.TipHelper={comps:[{type:"roundRect",rect:{func:function(){return[We.TipHelper.data.helperPos.x,We.TipHelper.data.helperPos.y,zl[0]*We.TipHelper.data.size,zl[1]]}},background:{func:function(){return Ve.getStyle("tipBackground")}},opacity:.6},{type:"text",text:{func:function(){return We.TipHelper.data.text}},rect:{func:function(){return[We.TipHelper.data.helperPos.x,We.TipHelper.data.helperPos.y,zl[0]*We.TipHelper.data.size,zl[1]]}},color:{func:function(){return Ve.getStyle("tipTextColor")}},font:"bold 12px Arial",align:"center"}]};var ri=7;We.ShapePoint={comps:[{type:"circle",rect:{func:function(){var F=We.ShapePoint.data;return[F,ri,ri]}},background:"#ffffff",borderWidth:1,borderColor:"#333333"}]},We.ShapeBgCurve={comps:[{type:"shape",points:{func:function(){return We.ShapeBgCurve.data.P}},segments:{func:function(){return We.ShapeBgCurve.data.S}},background:null,borderWidth:1,borderColor:"#333333"}]};var Kh=8;We.ShapeHighlighPoint={comps:[{type:"circle",rect:{func:function(){var a=We.ShapeHighlighPoint.data;return[[a.x,a.y],Kh,Kh]}},background:{func:function(){return Ve.getStyle("shapeHighlighPointBackground")}},borderWidth:0}]};var mg=10;We.ShapeHighlighRealPoint={comps:[{type:"circle",rect:{func:function(){var S=We.ShapeHighlighRealPoint.data;return[[S.x,S.y],mg,mg]}},background:"#ffffff",borderWidth:2,borderColor:"#333333"}]};var ug=8;We.ShapeHighlighCtrlPoint={comps:[{type:"shape",points:{func:function(){var J=We.ShapeHighlighCtrlPoint.data,s=J.x,L=J.y,l=ug/2;return[s-l,L-l,s-l,L+l,s+l,L+l,s+l,L-l]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Ve.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Ve.getStyle("shapeCtrlPointBorderColor")}}}]};var kn=3;We.ShapeHighlightCurve={comps:[{type:"shape",points:{func:function(){return We.ShapeHighlightCurve.data}},segments:[1,4],background:null,borderWidth:kn,borderColor:{func:function(){return Ve.getStyle("curveHighlightColor")}}}]},We.ShapeGuideLine={comps:[{type:"shape",points:{func:function(){return We.ShapeGuideLine.data}},background:null,borderWidth:1,borderColor:"red"}]},We.MoveLineGuide={comps:[{type:"shape",points:{func:function(){return We.MoveLineGuide.data}},background:null,borderWidth:1,borderColor:"red"}]};var Nh=5;We.MoveLineGuideDistanceH={comps:[{type:"shape",points:{func:function(){var d=We.MoveLineGuideDistanceH.data,Y=d.x0,U=d.y0,P=d.x1,n=d.y1;return[Y,U,P,n,Y,U-Nh,Y,U+Nh,P,n-Nh,P,n+Nh]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(We.MoveLineGuideDistanceH.data.dis)}},rect:{func:function(){var U=We.MoveLineGuideDistanceH.data;return[[(U.x0+U.x1)/2,U.y0-10],20,20]}},color:"red",font:"12px Arial",align:"center"}]},We.MoveLineGuideDistanceV={comps:[{type:"shape",points:{func:function(){var m=We.MoveLineGuideDistanceV.data,U=m.x0,a=m.y0,y=m.x1,C=m.y1;return[U,a,y,C,U-Nh,a,U+Nh,a,y-Nh,C,y+Nh,C]}},segments:[1,2,1,2,1,2],background:null,borderWidth:1,borderColor:"red"},{type:"text",text:{func:function(){return Math.round(We.MoveLineGuideDistanceV.data.dis)}},rect:{func:function(){var v=We.MoveLineGuideDistanceV.data;return[[v.x0-10,(v.y0+v.y1)/2],20,20]}},color:"red",font:"12px Arial",align:"center"}]};var Xp=6;We.ShapeActivingCtrl={comps:[{type:"shape",visible:{func:function(){return We.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var v=We.ShapeActivingCtrl.data;return[v.point.x,v.point.y,v.c1.x,v.c1.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return We.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var m=We.ShapeActivingCtrl.data;return[m.point.x,m.point.y,m.c2.x,m.c2.y]}},segments:[1,2],background:null,borderWidth:1,borderColor:"#707070"},{type:"shape",visible:{func:function(){return We.ShapeActivingCtrl.data.c1?!0:!1}},points:{func:function(){var x=We.ShapeActivingCtrl.data.c1,r=x.x,$=x.y,Z=Xp/2;return[r-Z,$-Z,r-Z,$+Z,r+Z,$+Z,r+Z,$-Z]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Ve.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Ve.getStyle("shapeCtrlPointBorderColor")}}},{type:"shape",visible:{func:function(){return We.ShapeActivingCtrl.data.c2?!0:!1}},points:{func:function(){var r=We.ShapeActivingCtrl.data.c2,N=r.x,S=r.y,b=Xp/2;return[N-b,S-b,N-b,S+b,N+b,S+b,N+b,S-b]}},segments:[1,2,2,2,5],borderWidth:2,background:{func:function(){return Ve.getStyle("shapeCtrlPointBackground")}},borderColor:{func:function(){return Ve.getStyle("shapeCtrlPointBorderColor")}}}]},Ne.Icons.DrawIcon=function(k,l,G,f){G.width=G.height=So,G.data=f,Ve=k,s.Default.drawImage(l,G,0,0,So,So)},Ne.Icons.MapPoints=function(d,l){for(var Q=0,m=d.length;m>Q;Q++)d[Q]/=l},Ne.roundTo=function(t,E,h){var f=Math.abs(t%E);return h>f||h>E-f?E*Math.round(t/E):t},Ne.toFixed=function(K){return Math.round(100*K)/100},Ne.getDataMatrix=function(e){if(e instanceof s.Shape){var _=new Ne.Math.Matrix2,W=e.getPosition();return _.translate(-W.x,-W.y).scale(e.getScale().x,e.getScale().y).rotate(e.getRotation()).translate(W.x,W.y),_}return e.getMatrix?e.getMatrix():new Ne.Math.Matrix2},Math.sign===m&&(Math.sign=function($){return 0>$?-1:$>0?1:+$});var mn=Ne.Math.Matrix2=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0};mn.prototype={},mn.prototype.constructor=mn,mn.prototype.set=function(F,p,j,M,X,l){return this.a=F,this.b=p,this.c=j,this.d=M,this.tx=X,this.ty=l,this},mn.prototype.apply=function(Q,g){g=g||new nn;var a=Q.x,E=Q.y;return g.x=this.a*a+this.c*E+this.tx,g.y=this.b*a+this.d*E+this.ty,g},mn.prototype.applyInverse=function(K,c){c=c||new nn;var Q=1/(this.a*this.d+this.c*-this.b),J=K.x,y=K.y;return c.x=this.d*Q*J+-this.c*Q*y+(this.ty*this.c-this.tx*this.d)*Q,c.y=this.a*Q*y+-this.b*Q*J+(-this.ty*this.a+this.tx*this.b)*Q,c},mn.prototype.translate=function(g,R){return this.tx+=g,this.ty+=R,this},mn.prototype.scale=function(P,h){return this.a*=P,this.d*=h,this.c*=P,this.b*=h,this.tx*=P,this.ty*=h,this},mn.prototype.rotate=function(v){var N=Math.cos(v),H=Math.sin(v),b=this.a,T=this.c,Z=this.tx;return this.a=b*N-this.b*H,this.b=b*H+this.b*N,this.c=T*N-this.d*H,this.d=T*H+this.d*N,this.tx=Z*N-this.ty*H,this.ty=Z*H+this.ty*N,this},mn.prototype.append=function(f){var P=this.a,D=this.b,w=this.c,Q=this.d;return this.a=f.a*P+f.b*w,this.b=f.a*D+f.b*Q,this.c=f.c*P+f.d*w,this.d=f.c*D+f.d*Q,this.tx=f.tx*P+f.ty*w+this.tx,this.ty=f.tx*D+f.ty*Q+this.ty,this},mn.prototype.setTransform=function(i,u,$,e,Q,V,n,g,O){var C,R,h,j,Z,p,d,t,_,y;return Z=Math.sin(n),p=Math.cos(n),d=Math.cos(O),t=Math.sin(O),_=-Math.sin(g),y=Math.cos(g),C=p*Q,R=Z*Q,h=-Z*V,j=p*V,this.a=d*C+t*h,this.b=d*R+t*j,this.c=_*C+y*h,this.d=_*R+y*j,this.tx=i+($*C+e*h),this.ty=u+($*R+e*j),this},mn.prototype.prepend=function(X){var I=this.tx;if(1!==X.a||0!==X.b||0!==X.c||1!==X.d){var U=this.a,C=this.c;this.a=U*X.a+this.b*X.c,this.b=U*X.b+this.b*X.d,this.c=C*X.a+this.d*X.c,this.d=C*X.b+this.d*X.d}return this.tx=I*X.a+this.ty*X.c+X.tx,this.ty=I*X.b+this.ty*X.d+X.ty,this},mn.prototype.invert=function(){var x=this.a,K=this.b,t=this.c,b=this.d,$=this.tx,H=x*b-K*t;return this.a=b/H,this.b=-K/H,this.c=-t/H,this.d=x/H,this.tx=(t*this.ty-b*$)/H,this.ty=-(x*this.ty-K*$)/H,this},mn.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},mn.prototype.clone=function(){var B=new mn;return B.a=this.a,B.b=this.b,B.c=this.c,B.d=this.d,B.tx=this.tx,B.ty=this.ty,B},mn.prototype.copy=function(L){return L.a=this.a,L.b=this.b,L.c=this.c,L.d=this.d,L.tx=this.tx,L.ty=this.ty,L},mn.IDENTITY=new mn,mn.TEMP_MATRIX=new mn;var nn=Ne.Math.Vector2=function(J,v){"object"==typeof J&&(J.x!=m?(v=J.y,J=J.x):(v=J[1],J=J[0])),this.set(J||0,v||0)};nn.prototype={},nn.prototype.constructor=nn,_.defineProperties(nn.prototype,{width:{get:function(){return this.x},set:function(e){this.x=e}},height:{get:function(){return this.y},set:function(P){this.y=P}}}),nn.prototype.clone=function(){return new nn(this.x,this.y)},nn.prototype.copy=function(m){return this.set(m.x,m.y),this},nn.prototype.equals=function(l){return l.x===this.x&&l.y===this.y},nn.prototype.set=function(J,S){return this.x=J||0,this.y=S||(0!==S?this.x:0),this},nn.prototype.setScalar=function(o){return this.x=o,this.y=o,this},nn.prototype.setX=function(b){return this.x=b||0,this},nn.prototype.setY=function(e){return this.y=e||0,this},nn.prototype.add=function(p){return this.x+=p.x,this.y+=p.y,this},nn.prototype.addVectors=function(I,p){return this.x=I.x+p.x,this.y=I.y+p.y,this},nn.prototype.addScalar=function(U){return this.x+=U,this.y+=U,this},nn.prototype.addScaledVector=function(A,V){return this.x+=A.x*V,this.y+=A.y*V,this},nn.prototype.sub=function(A){return this.x-=A.x,this.y-=A.y,this},nn.prototype.subScalar=function(e){return this.x-=e,this.y-=e,this},nn.prototype.subVectors=function(t,m){return this.x=t.x-m.x,this.y=t.y-m.y,this},nn.prototype.multiply=function(j){return this.x*=j.x,this.y*=j.y,this},nn.prototype.multiplyScalar=function(w){return this.x*=w,this.y*=w,this},nn.prototype.divide=function(y){return this.x/=y.x,this.y/=y.y,this},nn.prototype.divideScalar=function(I){return this.multiplyScalar(1/I)},nn.prototype.min=function(a){return this.x=Math.min(this.x,a.x),this.y=Math.min(this.y,a.y),this},nn.prototype.max=function(S){return this.x=Math.max(this.x,S.x),this.y=Math.max(this.y,S.y),this},nn.prototype.clamp=function(Q,R){return this.x=Math.max(Q.x,Math.min(R.x,this.x)),this.y=Math.max(Q.y,Math.min(R.y,this.y)),this},nn.prototype.clampScalar=function(){var K,A;return function(O,z){return K===m&&(K=new nn,A=new nn),K.set(O,O),A.set(z,z),this.clamp(K,A)}}(),nn.prototype.clampLength=function(w,F){var X=this.length();return this.multiplyScalar(Math.max(w,Math.min(F,X))/X)},nn.prototype.dot=function(E){return this.x*E.x+this.y*E.y},nn.prototype.lengthSq=function(){return this.x*this.x+this.y*this.y},nn.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},nn.prototype.normalize=function(){return this.divideScalar(this.length())},nn.prototype.angle=function(){var Q=Math.atan2(this.y,this.x);return 0>Q&&(Q+=2*Math.PI),Q},nn.prototype.distanceTo=function(K){return Math.sqrt(this.distanceToSquared(K))},nn.prototype.distanceToSquared=function(m){var $=this.x-m.x,k=this.y-m.y;return $*$+k*k},nn.prototype.isNearEnough=function(h){return this.distanceToSquared(h)<1e-8},nn.prototype.setLength=function(l){return this.multiplyScalar(l/this.length())},nn.prototype.lerp=function($,t){return this.x+=($.x-this.x)*t,this.y+=($.y-this.y)*t,this},nn.prototype.lerpVectors=function(p,$,y){return this.subVectors($,p).multiplyScalar(y).add(p)},nn.prototype.rotateAround=function(z,E){var s=Math.cos(E),p=Math.sin(E),U=this.x-z.x,n=this.y-z.y;return this.x=U*s-n*p+z.x,this.y=U*p+n*s+z.y,this};var lo=Ne.Math.Curve=function(){this._curves=[]};lo.prototype={},lo.prototype.constructor=lo,lo.prototype.createFromHtShape=function(r,n){n instanceof s.List&&(n=n.toArray());var z,$,Z,g,M,y,X,A=this,Q=null,U=null,L=0,V=Ne.Math.Vector2,b=Ne.Math.CubicBezier;for($=0,Z=n.length;Z>$;$++){switch(g=n[$],M=null,g){case 1:U=new V(r[L],r[L+1]),Q=U,L+=2;break;case 2:z=new V(r[L],r[L+1]),L+=2,M=new b(U,U.clone(),z.clone(),z),U=z;break;case 3:y=new V(r[L],r[L+1]),z=new V(r[L+2],r[L+3]),L+=4,M=new b(U,y.clone().sub(U).multiplyScalar(2/3).add(U),y.clone().sub(z).multiplyScalar(2/3).add(z),z),U=z;break;case 4:y=new V(r[L],r[L+1]),X=new V(r[L+2],r[L+3]),z=new V(r[L+4],r[L+5]),L+=6,M=new b(U,y,X,z),U=z;break;case 5:if(!Q)break;M=new b(U,U.clone(),Q.clone(),Q),U=null,Q=null}M&&(M._index=A._curves.length,A._curves.push(M))}},lo.prototype.checkPoint=function(a,k){var c,K,F,S,L,W=this,X=W._curves;for(c=0,K=X.length;K>c;c++)if(S=X[c],L=S.intersectRect(a,k,k),L.length)return F=0,L.forEach(function(h){F+=h.t}),F/=L.length,a=S.getPointAt(F),a.t=F,{bezier:S,intersection:a}},lo.prototype.insertKnot=function(B,D){var Q=B.insertKnot(D),S=this,x=S._curves;x.splice(B._index,1,Q[0],Q[1])},lo.prototype._isCloseEnough=function(H,X){return Math.abs(H.x-X.x)<1e-6&&Math.abs(H.y-X.y)<1e-6},lo.prototype._isSamePoint=function(h,p){return h===p},lo.prototype.moveRealPoint=function(T,R){var k=this,K=k._curves,D=R.clone().sub(T);K.forEach(function(v){var c=v._p1;v._p2,v._p3;var G=v._p4;k._isSamePoint(c,T)&&(v._p2.add(D),v._p1=R),k._isSamePoint(G,T)&&(v._p3.add(D),v._p4=R)})},lo.prototype.moveCtrlPoint=function(i,o,b){var n=i[b];if(n){var l=this,Y=l._curves;o.clone().sub(n),Y.forEach(function(N){var k;"c2"===b?k="_p2":"c1"===b&&(k="_p3"),l._isSamePoint(N[k],n)&&(N[k]=o)}),i[b]=o}},lo.prototype.deleteRealPoint=function(c,e){var f,A,$,d,r,p,h,k=this,O=k._curves,H={},i=[],K=Ne.Math.CubicBezier;for(A=0,$=O.length;$>A;A++)f=O[A],d=f._p1,r=f._p2,p=f._p3,h=f._p4,(H[A]||!k._isSamePoint(d,c))&&(k._isSamePoint(h,c)?$>A+1&&k._isSamePoint(O[A+1]._p1,c)&&(e||i.push(new K(d,r,O[A+1]._p3,O[A+1]._p4))):i.push(f));k._curves=i},lo.prototype.findPairs=function(I,Z){var Y,n,x,E,N,w,_,P,q=this,W=q._curves,G={},O=[];for(n=0,x=W.length;x>n;n++)Y=W[n],E=Y._p1,N=Y._p2,w=Y._p3,_=Y._p4,!G[n]&&q._isSamePoint(E,I)&&(Z?O.push({point:E,r2:_}):O.push({point:E,c2:N})),q._isSamePoint(_,I)&&(P=Z?{point:_,r1:E}:{point:_,c1:w},x>n+1&&q._isSamePoint(W[n+1]._p1,I)&&(Z?P.r2=W[n+1]._p4:P.c2=W[n+1]._p2,G[n+1]=!0),O.push(P));return O},lo.prototype.toHtShape=function(){var d=this,q=d._curves,c=[],_=[],M={x:1/0,y:1/0};return q.forEach(function(F){var r=F._p1,C=F._p2,i=F._p3,l=F._p4;return d._isCloseEnough(r,M)||(c.push(1),_.push(r.clone())),M=l,d._isCloseEnough(r,C)&&d._isCloseEnough(i,l)?(c.push(2),_.push(l.clone()),void 0):(c.push(4),_.push(C.clone(),i.clone(),l.clone()),void 0)}),{segments:c,points:_}};var Wh=Ne.Math.CubicBezier=function(g,s,D,Z){var M=this;M._id=Ne.Math.CubicBezier._globalId++,M._p1=g,M._p2=s,M._p3=D,M._p4=Z};Wh._globalId=1,Wh.prototype={},Wh.prototype.constructor=Wh,Wh.prototype.toString=function(){return this._id},Wh.prototype.intersectRect=function(c,M,f){var T=M/2,H=f/2,K=c.x,o=c.y,S=Ne.Math.Vector2,D=new S(-T+K,-H+o),R=new S(T+K,H+o),v=new S(R.x,D.y),G=new S(D.x,R.y),l=this,_=l.intersectLine(D,v),Z=l.intersectLine(v,R),g=l.intersectLine(R,G),r=l.intersectLine(G,D),I=_.concat(Z).concat(g).concat(r);return I},Wh.prototype.intersectLine=function(h,v){var g,e,l,d,s,f,X,G,r,E,S,m,i,p=this,z=h.clone().min(v),N=h.clone().max(v);d=p._p1,s=p._p2,f=p._p3,X=p._p4,g=d.clone().multiplyScalar(-1),e=s.clone().multiplyScalar(3),l=f.clone().multiplyScalar(-3),S=g.add(e).add(l).add(X),g=d.clone().multiplyScalar(3),e=s.clone().multiplyScalar(-6),l=f.clone().multiplyScalar(3),E=g.add(e).add(l),g=d.clone().multiplyScalar(-3),e=s.clone().multiplyScalar(3),r=g.add(e),G=d.clone(),i=new Ne.Math.Vector2(h.y-v.y,v.x-h.x),m=h.x*v.y-v.x*h.y;for(var _=p.getRoots(i.dot(S),i.dot(E),i.dot(r),i.dot(G)+m),R=new Array,B=0,M=_.length;M>B;B++){var Y=_[B];if(!(0>Y||Y>1)){var x=d.clone().lerp(s,Y),n=s.clone().lerp(f,Y),c=f.clone().lerp(X,Y),D=x.lerp(n,Y),y=n.lerp(c,Y),W=D.lerp(y,Y);W.t=Y,h.x==v.x?z.y<=W.y&&W.y<=N.y&&R.push(W):h.y==v.y?z.x<=W.x&&W.x<=N.x&&R.push(W):W.x>=z.x&&W.y>=z.y&&W.x<=N.x&&W.y<=N.y&&R.push(W)}}return R},Wh.prototype.solveTForPoint=function(a){var S,Q,z,Y,T=this;S=T._p1.x-a.x,Q=T._p2.x-a.x,z=T._p3.x-a.x,Y=T._p4.x-a.x;for(var G=T.getRoots(Y-3*z+3*Q-S,3*z-6*Q+3*S,3*Q-3*S,S),J=m,$=1/0,i=0,x=G.length;x>i;i++){var D=G[i];if(!(0>D||D>1)){var q=T._p1.clone().lerp(T._p2,D),A=T._p2.clone().lerp(T._p3,D),M=T._p3.clone().lerp(T._p4,D),U=q.lerp(A,D),w=A.lerp(M,D),l=U.lerp(w,D);l.t=D;var f=Math.abs(l.y-a.y);$>f&&($=f,J=l)}}return J},Wh.prototype.getPointAt=function(s){var W=this,N=W._p1,E=W._p2,D=W._p3,f=W._p4,t=N.clone().lerp(E,s),X=E.clone().lerp(D,s),R=D.clone().lerp(f,s),x=t.lerp(X,s),n=X.lerp(R,s);return x.lerp(n,s)},Wh.prototype.getRoots=function(f,J,T,V){var Q,u,r,e,S,E=new Array;if(Math.abs(f)<1e-6){var Q=J,u=T/Q,r=V/Q,e=u*u-4*r;if(e>0){var S=Math.sqrt(e);E.push(.5*(-u+S)),E.push(.5*(-u-S))}else 0==e&&E.push(.5*-u)}J/=f,T/=f,V/=f,Q=(3*T-J*J)/3,u=(2*J*J*J-9*T*J+27*V)/27;var d=J/3,o=u*u/4+Q*Q*Q/27,M=u/2;if(Math.abs(o)<=1e-6&&(o=0),o>0){var N,$,S=Math.sqrt(o);N=-M+S,$=N>=0?Math.pow(N,1/3):-Math.pow(-N,1/3),N=-M-S,N>=0?$+=Math.pow(N,1/3):$-=Math.pow(-N,1/3),E.push($-d)}else if(0>o){var c=Math.sqrt(-Q/3),y=Math.atan2(Math.sqrt(-o),-M)/3,w=Math.cos(y),v=Math.sin(y),O=Math.sqrt(3);E.push(2*c*w-d),E.push(-c*(w+O*v)-d),E.push(-c*(w-O*v)-d)}else{var N;N=M>=0?-Math.pow(M,1/3):Math.pow(-M,1/3),E.push(2*N-d),E.push(-N-d)}return E},Wh.prototype._70I=function(){var i=this;return i._p1.distanceToSquared(i._p2)<1e-10&&i._p3.distanceToSquared(i._p4)<1e-10},Wh.prototype.insertKnot=function($){var s=this,C=s._p1,D=s._p2,A=s._p3,q=s._p4,G=C.clone().lerp(D,$),v=D.clone().lerp(A,$),m=A.clone().lerp(q,$),T=G.clone().lerp(v,$),U=v.clone().lerp(m,$),d=T.clone().lerp(U,$);return s._70I()?(C.clone().lerp(q,$),[new Ne.Math.CubicBezier(C,C.clone(),d.clone(),d),new Ne.Math.CubicBezier(d,d.clone(),q.clone(),q)]):[new Ne.Math.CubicBezier(C,G,T,d),new Ne.Math.CubicBezier(d,U,m,q)]};var Vb=s.Default.getInternal().ui().EdgeUI,Ir={_47O:function(w){var q=this,g=Ir.getBackups()._47O;Ne.inEdit(q.gv)||g.call(q,w)}};Ne.Inject.registAsModule(Ir,Vb);var ci=s.Default.getInternal().ui().NodeUI,bk={_47O:function(M){var v=this,b=bk.getBackups()._47O;Ne.inEdit(v.gv)||b.call(v,M)},getSelectWidth:function(){var u=this,l=u.gv,g=u._data;if(l.isEditable(g)&&Ne.inEdit(l))return 0;var C=bk.getBackup("getSelectWidth");return C.call(u)}};Ne.Inject.registAsModule(bk,ci);var gf=s.graph.GraphView,gk={_editPointSize:function(){var p=s.Default.isTouchable,P=Ne.getStyle("pointSize");return P[p?0:1]}(),isPointEditable:function(H){var i=this;if(Ne.inEdit(i))return i._pointEditableFunc?i._pointEditableFunc(H):!0;var U=gk.getBackup("isPointEditable");U.call(i,H)},isEditable:function(P){var t,x=this,K=gk.getBackup("isEditable");if(t=P instanceof Ne.Group?!0:K.call(x,P),!Ne.inEdit(x))return t;if(!(P instanceof s.Edge))return t;if(!P.s("2d.editable"))return!1;var g=x.getEditableFunc();return g?g(P):!0},_42:function(t,D){var p=this,P=gk.getBackups()._42;if(P.call(p,t,D),Ne.inEdit(p)){var j=p.getEditInteractor();j.drawImpl()}}};Ne.Inject.registAsModule(gk,gf);var Ob=s.Default.getInternal().ui().ShapeUI,sj={_47O:function($){var n=this,o=sj.getBackups()._47O;Ne.inEdit(n.gv)||o.call(n,$)}};Ne.Inject.registAsModule(sj,Ob);var Yc=s.graph.DefaultInteractor,ze={handle_mousewheel:function(Y){var V=this,q=ze.getBackup("handle_mousewheel");Ne.inEdit(V.gv)||q.call(V,Y)}};Ne.Inject.registAsModule(ze,Yc);var Ee=s.graph.MoveInteractor,Vp={_calcShift:function(u,H){var J=this,e=Vp.getBackup("_calcShift"),O=J.gv;if(!Ne.inEdit(O))return e.call(J,u,H);var s=O.getEditInteractor(),d=s.getSubModule("Move").calcShift(u,H,J);return d||e.call(J,u,H)},clear:function(E){var z=this,h=Vp.getBackup("clear");h.call(z,E);var c=z.gv;if(Ne.inEdit(c)){var G=c.getEditInteractor();G.getSubModule("Move").clear(E)}}};Ne.Inject.registAsModule(Vp,Ee);var ui=Ne.Rect=function(K){this.catalog="Rect",this._interactor=K};ui.prototype={},ui.prototype.constructor=ui,ui.prototype.gatherInfo=function(L,D){var I=this;if(1===D.length){var y=D[0];return y instanceof s.Shape&&y._70I()?I.gatherLine(L,y):sn(y,L)?!1:I.gatherSingleTarget(L,y)}return D.length>1?I.gatherMultiTargets(L,D):!1},ui.prototype.gatherSingleTarget=function(r,W){if(W.getCorners){var P,j=this.info;this.target=W,P=this.screenInfo={};var q=W.getCorners();j.LT=new Ne.Math.Vector2(q[0]),j.LB=new Ne.Math.Vector2(q[1]),j.RB=new Ne.Math.Vector2(q[2]),j.RT=new Ne.Math.Vector2(q[3]),j.T=j.LT.clone().add(j.RT).divideScalar(2),j.B=j.LB.clone().add(j.RB).divideScalar(2),j.L=j.LT.clone().add(j.LB).divideScalar(2),j.R=j.RT.clone().add(j.RB).divideScalar(2);for(var h in j)P[h]=Ne.toScreenPosition(r,j[h]);var S=this._interactor.getStyle("checkSize"),t=function(h,C,B){var Z=C.clone().sub(h).setLength(-S),J=B.clone().sub(h).setLength(-S),i=Z.add(J).add(h);return i};return P.rotLT=t(P.LT,P.RT,P.LB),P.rotLB=t(P.LB,P.LT,P.RB),P.rotRB=t(P.RB,P.LB,P.RT),P.rotRT=t(P.RT,P.LT,P.RB),P.rotT=P.rotLT.clone().add(P.rotRT).divideScalar(2),P.rotB=P.rotLB.clone().add(P.rotRB).divideScalar(2),P.rotL=P.rotLT.clone().add(P.rotLB).divideScalar(2),P.rotR=P.rotRT.clone().add(P.rotRB).divideScalar(2),P.rotation=W.getRotation(),!0}},ui.prototype.gatherMultiTargets=function(i,Y){var g=Ne.Group.findOrCreateGroup(Y);if(!g)return!1;var b=this;return b.editing&&"rotate"!==b.editing.mode||g.calcInfo(),b.gatherSingleTarget(i,g)},ui.prototype.gatherLine=function(M,I){this.target=I;var J=this.screenInfo={},L=I.getPoints(),D=Ne.getDataMatrix(I);return J.P1=Ne.toScreenPosition(M,D.apply(L.get(0))),J.P2=Ne.toScreenPosition(M,D.apply(L.get(1))),!0},ui.ResizeKeys=["LT","RB","LB","RT","L","R","B","T"],ui.ResizeDirection=[{x:-1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:-1},{x:-1,y:0},{x:1,y:0},{x:0,y:1},{x:0,y:-1}],ui.RotateKeys=["rotLT","rotRB","rotLB","rotRT","rotL","rotR","rotB","rotT"],ui.prototype.check=function(o,N,t){if(s.Default.isLeftButton(N)){var l=this;if(l.editing=null,l.tipInfo=null,l.screenInfo){if(l.screenInfo.P1)return l._checkLine(t);var E,f,W,g=null,K=l._interactor,j=K.getStyle("checkSize"),c=l.target,u=o.isEditable(c);if(u&&o.isRectEditable(c))for(f=0;f<Ne.Rect.ResizeKeys.length;f++)if(W=Ne.Rect.ResizeKeys[f],Ne.checkHit(t,l.screenInfo[W],j)){g=W,E="resize";break}if(!g&&u&&o.isRotationEditable(c)){var C=K.getStyle("rotateCheckSize");for(f=0;f<Ne.Rect.RotateKeys.length;f++)if(W=Ne.Rect.RotateKeys[f],Ne.checkHit(t,l.screenInfo[W],C)){g=W,E="rotate";break}}if(!g)return K.setCursor("default"),void 0;if("rotate"===E){var i,P=o.lp(N);if(c instanceof Ne.Group){var D=K.getStyle("groupRotateModeKey");"string"==typeof D&&(D=[D]);for(var L=!1,B=0,I=D.length;I>B;B++)if(N[D[B]]){L=!0;break}var n=K.getStyle("groupRotateModeDefault");i=L?"batch"===n?"block":"batch":n}var $="batch"===i?c.getAnchor2():c.getPosition(),m=Math.atan2(P.y-$.y,P.x-$.x);K._setRotateCursor(m),l.editing={mode:E,key:g,pos:$,flipY:c.getScale().y<0,rotation:c.getRotation(),hitRot:m},i&&(l.editing.groupRotateMode=i)}else{var w=Ne.Rect.ResizeKeys.indexOf(g),A=Ne.Rect.ResizeDirection[w],M=Math.cos(c.getRotation()),X=Math.sin(c.getRotation()),J=A.x*Math.sign(c.getScale().x),Q=A.y*Math.sign(c.getScale().y),U=Math.atan2(-X*J-M*Q,M*J-X*Q),x=(Math.round(U/(Math.PI/4))+8)%8,y=["ew-resize","nesw-resize","ns-resize","nwse-resize","ew-resize","nesw-resize","ns-resize","nwse-resize"][x];this._interactor.setCursor(y);var v=c.getWidth(),H=c.getHeight(),R=c.getAnchor();l.editing={mode:E,key:g,rect:{x:-v*R.x,y:-H*R.y,width:v,height:H},anchor:R,matrix:c.getMatrix()}}return g}}},ui.prototype._checkLine=function(H){var P=this;P.screenInfo;var o,N=P._interactor.getStyle("checkSize");if(Ne.checkHit(H,P.screenInfo.P1,N))o="P1";else{if(!Ne.checkHit(H,P.screenInfo.P2,N))return this._interactor.setCursor("default"),void 0;o="P2"}return P.editing={mode:"line",key:o},o},ui.prototype.startEdit=function(y,$){y.startDragging($);var h=this;h._interactor.fi({kind:"prepareEdit",event:$});var e=h.editing,j=h.target;return e?"rotate"===e.mode?(e.groupRotateMode&&j.beginRotate(e),void 0):(("line"===e.mode||j&&0===j.getRotation())&&(h._inSmartGuide=!0,h._interactor.rectGuide.gatherRects()),void 0):void 0},ui.prototype._46O=function(){var n=this,V=n.editing?n.editing.groupRotateMode:null;n.editing=null,n.tipInfo=null,n._inSmartGuide&&(n._interactor.rectGuide.clear(),n._inSmartGuide=!1),V&&n.target&&n.target.endRotate()},ui.prototype.handleEdit=function(K,S){var g=this,D=g.editing;if(D){var k,j,p,$,N,e,t=g.target,R=D.key,c=D.mode,V=g._interactor;if("rotate"===c){var u,h,b=K.lp(S),o=D.pos,w=Math.atan2(b.y-o.y,b.x-o.x);if(D.groupRotateMode?h=w-D.hitRot:(u=w-D.hitRot,h=D.rotation+u),h%=2*Math.PI,0>h&&(h+=2*Math.PI),!s.Default.isCtrlDown(S)){var X,m;Ap(S)?(X=V.getStyle("shiftRotateRound"),m=X/2):(X=V.getStyle("rotateRound"),m=V.getStyle("rotateSensitivity")),h=Ne.roundTo(h,X,m)}D.groupRotateMode?(u=h-(D.lastRotation||0),0!==u&&(t.addRotation(u,D.groupRotateMode),D.lastRotation=h)):t.setRotation(h),V._setRotateCursor(w),h>Math.PI&&(h-=2*Math.PI);var T=180*(h/Math.PI);T=T.toFixed(2),k=""+T+""}else if("resize"===c){var W=D.rect;$=W.x,N=W.y;var i=W.width,q=W.height,E=D.anchor,v=D.matrix;j=K.lp(S);var F,B=Ap(S),_=g._unionPointMode1,y=g._unionPointMode2;if(g._inSmartGuide&&!s.Default.isCtrlDown(S)&&!B){var U;"L"===R||"R"===R?U="x":("T"===R||"B"===R)&&(U="y"),g._adsorbedToClosest(j,U),e=!0}F=v.tfi(j);var J;"LT"===R?(W=_(F,{x:$+i,y:N+q},i,q,B),J=9):"T"===R?(W=y({x:$,y:F.y},{x:$+i,y:N+q},i,q,B,"v"),J=1):"RT"===R?(W=_(F,{x:$,y:N+q},i,q,B),J=33):"L"===R?(W=y({x:F.x,y:N},{x:$+i,y:N+q},i,q,B,"h"),J=8):"R"===R?(W=y({x:$,y:N},{x:F.x,y:N+q},i,q,B,"h"),J=32):"LB"===R?(W=_(F,{x:$+i,y:N},i,q,B),J=12):"B"===R?(W=y({x:$,y:N},{x:$+i,y:F.y},i,q,B,"v"),J=4):"RB"===R&&(W=_(F,{x:$,y:N},i,q,B),J=36);var H=v.tf(W.x+W.width*E.x,W.y+W.height*E.y);t.setPosition(H),t.setSize(W.width,W.height),e&&(p=t.getRect(),V.rectGuide.gatherLines({node:t,x:p.x,y:p.y,w:p.width,h:p.height},U,J)),k=""+Math.round(W.width)+" * "+Math.round(W.height)}else if("line"===c){if(j=K.lp(S),Ap(S)){var x=t.getPoints(),l="P1"===R?x.get(1):x.get(0),f={x:j.x-l.x,y:j.y-l.y},I=V.getStyle("shiftLineRotateRound"),Q=g._shiftDirList;if(!Q||g._shiftRotateRound!==I){g._shiftRotateRound=I,g._shiftDirList=Q=[];for(var O=0;O<Math.PI;O+=I)Q.push({x:M(O),y:z(O)})}for(var n,L=0,G=0,Z=Q.length;Z>G;G++){var d=Q[G],a=d.x*f.x+d.y*f.y;Math.abs(a)>Math.abs(L)&&(L=a,n=d)}j={x:l.x+n.x*L,y:l.y+n.y*L},V.rectGuide.clear()}else g._inSmartGuide&&!s.Default.isCtrlDown(S)&&(g._adsorbedToClosest(j),e=!0);var C=Ne.getDataMatrix(t).applyInverse(j);t.setPoint("P1"===R?0:1,C,!0);var P=t.getPoints(),A=P.get(0),Y=P.get(1);$=A.x-Y.x,N=A.y-Y.y,k=" "+Math.round(Math.sqrt($*$+N*N))+" ",e&&(p=t.getRect(),V.rectGuide.gatherLines({node:t,x:p.x,y:p.y,w:p.width,h:p.height}))}var r=s.Default.getLogicalPoint(S,V._canvas);r.x+=Ne.Icons.TipShiftX,r.y+=Ne.Icons.TipShiftY,g.tipInfo={helperPos:r,text:k,size:k.length}}},ui.prototype._unionPointMode1=function(Y,P,$,O,i){if(i&&$&&O){var D=Y.x-P.x,e=Y.y-P.y;Math.abs(D*O)<Math.abs(e*$)?(e=Math.sign(e)*Math.abs(D*O/$),Y.y=P.y+e):(D=Math.sign(D)*Math.abs(e*$/O),Y.x=P.x+D)}return s.Default.unionPoint(Y,P)},ui.prototype._unionPointMode2=function(_,M,A,O,y,L){var X=s.Default.unionPoint(_,M);if(y&&A&&O){var u;"v"===L?(u=X.x+X.width/2,X.width=A*X.height/O,X.x=u-X.width/2):(u=X.y+X.height/2,X.height=O*X.width/A,X.y=u-X.height/2)}return X},ui.prototype._adsorbedToClosest=function(e,B){var $=this,s=$._interactor,N=s.rectGuide.findClosest(e,B),w=s.gridGuide.findClosest(e,B),Q=1/0,z=1/0;N&&(isFinite(N.x)&&(Q=N.x),isFinite(N.y)&&(z=N.y)),w&&(isFinite(w.x)&&Math.abs(w.x)<Math.abs(Q)&&(Q=w.x),isFinite(w.y)&&Math.abs(w.y)<Math.abs(z)&&(z=w.y)),isFinite(Q)&&(e.x+=Q),isFinite(z)&&(e.y+=z)},ui.prototype._42=function(y,P,J){var k=this;k.info={},k.screenInfo=null;var K=k._interactor;if(!K.editDetail&&k.gatherInfo(P,J)){var q=k.editing?k.editing.groupRotateMode:null,t=k.screenInfo;"block"!==q&&(t.P1?Ne.Icons.DrawIcon(K,y,Ne.Icons.Line,k.screenInfo):Ne.Icons.DrawIcon(K,y,Ne.Icons.Rect,k.screenInfo),k.tipInfo&&Ne.Icons.DrawIcon(K,y,Ne.Icons.TipHelper,k.tipInfo)),k.target instanceof Ne.Group&&k.target._42(K,y,P)}};var An=Ne.Anchor=function(a){this.catalog="Anchor",this._interactor=a
};An.prototype={},An.prototype.constructor=An,An.prototype.gatherInfo=function(S,V){var x=this;if(1===V.length){var N=V[0];if(!N.getAnchor)return;if(N instanceof s.Shape&&N._70I())return;if(sn(N,S))return;return x.gatherSingleTarget(S,V[0])}return V.length>1?x.gatherMultiTargets(S,V):!1},An.prototype.gatherSingleTarget=function(t,i){var r=this;return r.info.POS=i.getPosition(),r.screenInfo.POS=Ne.toScreenPosition(t,r.info.POS),r.target=i,!0},An.prototype.gatherMultiTargets=function(h,T){var t=this,Q=Ne.Group.findOrCreateGroup(T);return Q?(t.screenInfo.POS=Ne.toScreenPosition(h,Q.getAnchor2()),t.target=Q,!0):!1},An.prototype.isVisible=function(){var V=this,m=V._interactor;if(m.getStyle("anchorVisible")===!1)return!1;var s=V.target;if(s){if(this.editing)return!0;var K=s.getAnchor(),k=m.getStyle("anchorOutsideVisibleThreshold");if(K.x<-k||K.x>1+k||K.y<-k||K.y>1+k)return!0;var x=s.getSize(),g=s.getScale(),C=Math.min(Math.abs(x.width*g.x),Math.abs(x.height*g.y));if(C*m.gv._zoom<m.getStyle("anchorHideThreshold"))return!1}return!0},An.prototype.check=function(W,j,q){if(s.Default.isLeftButton(j)){var G=this,O=G._interactor;if(G.isVisible()&&O.getStyle("anchorMovable")!==!1){G.editing=null,G.tipInfo=null;var $=G.target;if($&&W.isAnchorEditable($)&&W.isEditable($)){var Q;if(G.screenInfo&&(Q=G.screenInfo.POS)&&Ne.checkHit(q,new Ne.Math.Vector2(Q),O.getStyle("checkSize"))){if($ instanceof Ne.Group)return G.editing={},!0;var M=$.getWidth(),u=$.getHeight(),S=$.getAnchor();return G.editing={rect:{x:-M*S.x,y:-u*S.y,width:M,height:u},anchor:S,matrix:$.getMatrix()},!0}}}}},An.prototype.startEdit=function(l,L){l.startDragging(L)},An.prototype._46O=function(){this.editing=null,this.tipInfo=null},An.prototype.handleEdit=function(E,L){var U=this,R=U.target;if(R&&U.editing){var t=E.lp(L);if(R instanceof Ne.Group)return R.setAnchor2(t),U._interactor._42(),void 0;var p=U.editing.matrix,I=p.tfi(t),_=U.editing.rect,O=(I.x-_.x)/_.width,B=(I.y-_.y)/_.height;if(!s.Default.isCtrlDown(L)){var g=U._interactor.getStyle("anchorRound"),$=U._interactor.getStyle("anchorSensitivity");O=Ne.roundTo(O,g,$),B=Ne.roundTo(B,g,$)}R.setAnchor(O,B,!0);var r=s.Default.getLogicalPoint(L,U._interactor._canvas);r.x+=Ne.Icons.TipShiftX,r.y+=Ne.Icons.TipShiftY;var F=""+O.toFixed(2)+", "+B.toFixed(2);U.tipInfo={helperPos:r,text:F,size:F.length}}},An.prototype._42=function(e,t,o){var D=this;D.info={},D.screenInfo={};var V=D._interactor;V.editDetail||D.gatherInfo(t,o)&&D.isVisible()&&(Ne.Icons.DrawIcon(V,e,Ne.Icons.Anchor,D.screenInfo),D.tipInfo&&Ne.Icons.DrawIcon(V,e,Ne.Icons.TipHelper,D.tipInfo))};var lo=Ne.Curve=function(s){this.catalog="Curve",this._interactor=s};lo.prototype={},lo.prototype.constructor=lo,lo.PointType={Mirrored:0,Straight:1,Disconnected:2,Asymmetric:3},lo.prototype.setUp=function(){var q=this,w=q._interactor;w&&w.gv.mp(q._onGraphviewPropertyChanged,q)},lo.prototype._onGraphviewPropertyChanged=function(Z){("zoom"===Z.property||"translateX"===Z.property||"translateY"===Z.property)&&this._handleDataChanged()},lo.prototype.tearDown=function(){var k=this,p=k._interactor;p&&p.gv.ump(k._onGraphviewPropertyChanged)},lo.prototype.canEnterEditDetailMode=function(){var U=this,H=U._interactor,Y=H._getValidSelection();if(1===Y.length){var C=Y[0],B=C instanceof s.Edge;if(C instanceof s.Shape||B){if(B){var q=C.s("edge.type");if(q&&"points"!==q)return}var v=H.gv;if(v.isPointEditable(C)&&v.isEditable(C))return U.target=C,!0}}},lo.prototype.preHandleScroll=function(){var T=this.editing;return T&&T.inEdit?!0:void 0},lo.prototype.getCurrentSelectintStatus=function(){var d=this;if(d.activing&&!d.activing.selections){if(d.activing.status!=m)return d.activing.status;var z=function(t){var H=d.activing.status;d.activing.status=t,d._interactor.fp("shapePointStatus",H,t)},K=Ne.Curve.PointType,O=d.activing.point,p=d.activing.pairs;if(!p||1!==p.length)return z(K.Mirrored);var k=p[0],J=k.c1&&k.c1.isNearEnough(O),H=k.c2&&k.c2.isNearEnough(O);if(!k.c1||!k.c2)return J||H?z(K.Straight):z(K.Disconnected);if(J&&H)return z(K.Straight);if(J||H)return z(K.Asymmetric);var F=k.c1.clone().sub(O),U=k.c2.clone().sub(O);return Math.abs(F.x*U.y-F.y*U.x)>1e-5||F.x*U.x>0?z(K.Disconnected):Math.abs(F.length()-U.length())>1e-5?z(K.Asymmetric):z(K.Mirrored)}},lo.prototype.handle_keydown=function(q){var G=this;if(G._interactor.editDetail){var u=Ne.Curve.PointType;"1"===q.key?G.setCurrentSelectionStatus(u.Straight):"2"===q.key?G.setCurrentSelectionStatus(u.Mirrored):"3"===q.key?G.setCurrentSelectionStatus(u.Disconnected):"4"===q.key&&G.setCurrentSelectionStatus(u.Asymmetric)}},lo.prototype.setCurrentSelectionStatus=function(H){var P=this;if(P.activing){var Y=P.getCurrentSelectintStatus();if(null!==Y&&Y!==H){P.activing.status=H;var $=P.activing.point,K=P.activing.pairs;if(K&&1===K.length){var o=K[0],f=P.screenInfo.curve,C=Ne.Curve.PointType,L=function(){P._writeToHt(),P._interactor.fp("shapePointStatus",Y,H)};if(H===C.Straight)return f.moveCtrlPoint(o,$,"c1"),f.moveCtrlPoint(o,$,"c2"),L(),void 0;if(Y===C.Straight){var X=f.findPairs($,!0),s=X[0],U=s.r1||$,r=s.r2||$,J=r.clone().sub(U).multiplyScalar(.25);return f.moveCtrlPoint(o,$.clone().sub(J),"c1"),f.moveCtrlPoint(o,$.clone().add(J),"c2"),L(),void 0}var V=o.c1,W=o.c2;if(V&&W){if(H===C.Mirrored)return f.moveCtrlPoint(o,$.clone().multiplyScalar(2).sub(W),"c1"),L(),void 0;if(H===C.Asymmetric&&Y===C.Disconnected){var N=V.clone().sub($).length(),J=$.clone().sub(W).setLength(N).add($);return f.moveCtrlPoint(o,J,"c1"),L(),void 0}}P._interactor.fp("shapePointStatus",Y,H)}}}},lo.prototype._handleDataChanged=function(A){var Z=this;if(Z.screenInfo&&Z.target){var B=Z._interactor;Z.gatherSingleTarget(B.gv,Z.target,!0),Z.check(B.gv,null,A?B._getLogicalPoint(A):new Ne.Math.Vector2(B._lastClientPoint)),B._42()}},lo.prototype.gatherSingleTarget=function(H,z,L){var o,C,Z=this;Z.screenInfo&&Z.screenInfo.curve&&(C=Z.screenInfo.curve._curves);var p=Z.editing;o=p?Z.screenInfo:Z.screenInfo={};var A,E,B=z instanceof s.Edge;B?(A=z.s("edge.segments"),E=z.s("edge.points")||new s.List):(A=z._58O,E=z._59O),o.S=A;var f=o.P=[],T=Ne.getDataMatrix(z);if(E.each(function(q){q=T.apply(q);var w=Ne.toScreenPosition(H,q);f.push(w.x,w.y)}),B){var N=Ne.toScreenPosition(H,z._lastSourcePoint),b=Ne.toScreenPosition(H,z._lastTargetPoint);f.splice(0,0,N.x,N.y),f.push(b.x,b.y)}if(!o.S||!o.S.size()){o.S=new s.List,o.S.add(1);for(var w=0;w<f.length/2-1;w++)o.S.add(2)}if((!p||L)&&Z.convertToCubicBezier(C),Z.activing&&(L||!Z.editing||"realPoint"===Z.editing.type)){var Y=o.curve.findPairs(Z.activing.point);Z.activing.pairs=Y}B&&"points"!==z.s("edge.type")&&Z._writeToHt()},lo.prototype._convertToNewPoint=function(v,m,T){var r,l,S;for(r=0,l=m.length;l>r;r++){if(S=m[r],S._p1.isNearEnough(v))return S._p1;if(S._p4.isNearEnough(v))return S._p4}if(T)for(r=0,l=Math.min(T.length,l);l>r;r++){if(S=T[r],S._p1===v)return m[r]._p1;if(S._p4===v)return m[r]._p4}},lo.prototype.convertToCubicBezier=function(v){var P,J,i=this,h=new Ne.Math.Curve,e=i.screenInfo;if(h.createFromHtShape(e.P,e.S),e.curve=h,i.activing){var Y=h._curves;if(P=i.activing.point,J=i._convertToNewPoint(P,Y,v),J&&(i.activing.point=J),i.activing.selections){var z=-1,A=i.activing.selections;A.forEach(function(O){z++,J=i._convertToNewPoint(O,Y,v),J&&(A[z]=J)})}}},lo.prototype.check=function(l,n,L){if(!n||s.Default.isLeftButton(n)){var o=this;if(o._interactor.setCursor("default"),o.editing=null,o.highlight=null,o.tipInfo=null,o.screenInfo){if(sh())return o._interactor._42(),!0;if(o._checkEditCtrlPoint(L))return o._interactor._42(),!0;if(o._checkEditRealPoint(L))return o._interactor._42(),!0;var _=o.screenInfo.curve,M=_.checkPoint(L,o._interactor.getStyle("curveIntersectSize"));if(M){var A=o.highlight={};A.type="insertKnot",A.bezier=M.bezier,A.point=M.intersection}return o._interactor._42(),!0}}},lo.prototype._checkEditRealPoint=function(X){var F,l,m,M,A,g,W=this,e=W.screenInfo.curve._curves,Z=W._interactor.getStyle("curvePointIntersectSize"),c=1/0;for(Z*=Z,m=0,M=e.length;M>m;m++)F=e[m],A=F._p1,g=X.distanceToSquared(A),c>g&&(c=g,l=A),A=F._p4,g=X.distanceToSquared(A),c>g&&(c=g,l=A);if(c>Z)return!1;var U=W.highlight={};return U.type="changeRealPoint",U.point=l,W.editing={type:"realPoint",point:l,shiftGuide:{point:l.clone(),dir:"x",limit:0}},W._interactor.setCursor("crosshair"),!0},lo.prototype._checkEditCtrlPoint=function(n){var $=this;if($.activing&&!$.activing.selections){var a=$.getCurrentSelectintStatus();if(a!==Ne.Curve.PointType.Straight){var h=$.activing.pairs;if(h){var U=$._interactor.getStyle("curvePointIntersectSize");U*=U;var T,i,O,k,x,J,u,X,F,E=1/0;for(u=0,F=h.length;F>u;u++)for(k=h[u],X=0;2>X;X++)x=0===X?"c1":"c2",k[x]&&(J=n.distanceToSquared(k[x]),E>J&&(E=J,T=k,i=u,O=x));if(E>U)return!1;$.activing.hlpair=T,$.activing.hltype=O;var Y=$.highlight={};return Y.type="changeCtrlPoint",Y.point=T[O],$.editing={type:"ctrlPoint",pair:T,pairId:i,ctrlType:O,direction:T[O].clone().sub($.activing.point).normalize()},$._interactor.setCursor("crosshair"),!0}}}},lo.prototype.startEdit=function(M,O){M.startDragging(O);var A=this;A.highlight&&"insertKnot"===A.highlight.type&&(A.insertKnot(),A.gatherSingleTarget(A._interactor.gv,A.target),A.activing=null,A._checkEditRealPoint(A._interactor._getLogicalPoint(O)));var _=A.highlight,o=s.Default.isCtrlDown(O);if(!_||sh()){var C=A._interactor.gv;if(!C.setFocus(O)||C._scrolling)return;return C.isPannable()&&rp(O)&&!o&&(A._pan={tx:C.tx(),ty:C.ty()}),void 0}if("changeRealPoint"===_.type){var Z,d=A.activing?A.activing.point:null,W=A.activing?A.activing.selections:null;if(o&&A.activing)d===_.point?(W?(A.activing={point:W[0]},W.length>1&&(W.splice(0,1),A.activing.selections=W)):A.activing=null,A.editing=null):W&&(Z=W.indexOf(_.point))>=0?(W.length>1?W.splice(Z,1):delete A.activing.selections,A.editing=null):W?(W.push(d),A.activing={point:_.point,selections:W}):A.activing={point:_.point,selections:[d]};else if(W)d===_.point||((Z=W.indexOf(_.point))>=0?(W.splice(Z,1,d),A.activing={point:_.point,selections:W}):A.activing={point:_.point});else{var I;d===_.point&&(I=A.activing.status),A.activing={point:_.point},I&&(A.activing.status=I)}}},lo.prototype.insertKnot=function(){var G=this,$=G.highlight,O=G.screenInfo.curve;O.insertKnot($.bezier,$.point.t),G._writeToHt()},lo.prototype._writeToHt=function(){for(var q,g,E=this,C=E.screenInfo.curve,j=C.toHtShape(),b=j.points,J=[],x=j.segments,Q=E._interactor.gv,M=E.target,n=M instanceof s.Edge,h=Ne.getDataMatrix(M).invert(),a=0,K=b.length;K>a;a++)q=b[a],g=Ne.toWorldPosition(Q,q),g=h.apply(g),J.push(g);if(M._writing=!0,n){M.s("edge.type","points"),M.setStyle("edge.segments",x),M.setStyle("edge.points",J.slice(1,J.length-1)),M.setStyle("edge.source.offset.x",0),M.setStyle("edge.source.offset.y",0),M.setStyle("edge.target.offset.x",0),M.setStyle("edge.target.offset.y",0);var U=E._nextChangeEdgeHost;delete E._nextChangeEdgeHost,U&&("source"===U.type?M.setSource(U.host):M.setTarget(U.host)),E._writeEdgeHostAnchor("source",J[0]),E._writeEdgeHostAnchor("target",J[J.length-1])}else J.length?(M.setSegments(x),M.setPoints(J,!0)):M.removeFromDataModel();delete M._writing},lo.prototype._writeEdgeHostAnchor=function(t,w){var d=this,D=d.target,X=d._calcHostAnchor(D,t,w);D.s("edge."+t+".anchor.x",X.x),D.s("edge."+t+".anchor.y",X.y)},lo.prototype._calcHostAnchor=function(w,k,o,T){T||(T="source"===k?w.getSource():w.getTarget());var U=T.getRotation(),r=T.getAnchor(),O=this._interactor.gv;if(sn(T,O)&&(U=0),U){var b=T.getMatrix(),x=b.tfi(o),e=T.getSize();return{x:x.x/e.width+r.x,y:x.y/e.height+r.y}}var q=Sd(O,T),u={x:(o.x-q.x)/q.width,y:(o.y-q.y)/q.height};return u},lo.prototype._handlePanning=function(b){var m=this,J=m._pan;if(J){J.started=!0;var x=m._interactor,f=x.gv,s=x._lastClientPoint,k=Tc(b);f.setTranslate(J.tx+k.x-s.x,J.ty+k.y-s.y),m.gatherSingleTarget(x.gv,m.target),x._42()}},lo.prototype.handleEdit=function(y,R){var f=this,W=f.editing;if(f._pan)return f._handlePanning(R),void 0;if(W){W.inEdit=!0;var K,j,m=f._interactor._getLogicalPoint(R),b=s.Default.isCtrlDown(R),E=s.Default.isShiftDown(R);if(f._guideInfo=null,"ctrlPoint"===W.type&&E){var T=f.editing.direction.clone();K=f.activing.point;var _=T.dot(m.clone().sub(K));m=T.setLength(_).add(K)}else{var T;if("realPoint"===W.type&&E){var B=f.editing.shiftGuide,w=B.point,g=Math.abs(m.x-w.x),D=Math.abs(m.y-w.y);g>D&&g>B.limit&&"y"===B.dir&&(B.dir="x"),D>g&&D>B.limit&&"x"===B.dir&&(B.dir="y"),T=B.dir,"x"===T?(m.y=w.y,B.limit=Math.max(B.limit,g)):"y"===T&&(m.x=w.x,B.limit=Math.max(B.limit,D))}var p=f._isEditEdgeSourceTarget();if(p){var h=f._editEdgeSourceTarget(p,m,b);h&&(j=h.tipText)}else if(!b){var I=f._guidingToEdit(m,T),Y="realPoint"===W.type?f._interactor.gridGuide.findClosest(m,T,!0):null,Z=1/0,t=1/0;Y&&(Y.x&&(Z=Y.x),Y.y&&(t=Y.y));var A=!1;I&&(I.xList&&(Math.abs(I.x)<=Math.abs(Z)?(A=!0,Z=I.x):delete I.xList),I.yList&&(Math.abs(I.y)<=Math.abs(t)?(A=!0,t=I.y):delete I.yList),A&&(f._guideInfo=I)),isFinite(Z)&&(m.x+=Z),isFinite(t)&&(m.y+=t),A&&(I.v=m)}}var U=f.screenInfo.curve;if("realPoint"===W.type){K=W.point,U.moveRealPoint(K,m),W.point=m,f.highlight.point=m;var V=f.activing.status,J=f.activing.selections;if(f.activing={point:m,status:V},J){var X=m.clone().sub(K),x=0;J.forEach(function(Q){var o=Q.clone().add(X);U.moveRealPoint(Q,o),J[x++]=o}),f.activing.selections=J}}else if("ctrlPoint"===W.type){var d=f.activing,r=d.pairs,G=r[W.pairId];U.moveCtrlPoint(G,m,W.ctrlType);var c=d.status,M=Ne.Curve.PointType;if((c===M.Mirrored||c===M.Asymmetric)&&G.c1&&G.c2){var K=new Ne.Math.Vector2(d.point),P="c1"===W.ctrlType?"c2":"c1";if(c===Ne.Curve.PointType.Mirrored)U.moveCtrlPoint(G,K.clone().multiplyScalar(2).sub(m),P);else if(c===M.Asymmetric){var _=G[P].clone().sub(K).length(),F=K.clone().sub(G[W.ctrlType]).setLength(_).add(K);isNaN(F.x)||U.moveCtrlPoint(G,F,P)}}}var o=s.Default.getLogicalPoint(R,f._interactor._canvas);if(o.x+=Ne.Icons.TipShiftX,o.y+=Ne.Icons.TipShiftY,!j){var l=Ne.toWorldPosition(y,m);j=""+Ne.toFixed(l.x)+", "+Ne.toFixed(l.y)}f.tipInfo={helperPos:o,text:j,size:j.length},f._writeToHt()}},lo.prototype._isEditEdgeSourceTarget=function(){var u=this,Q=u.target;if(!(Q instanceof s.Edge))return!1;var I=u.editing.point,M=u.screenInfo.curve._curves;return I===M[0]._p1?"source":I===M[M.length-1]._p4?"target":!1},lo.prototype._editEdgeSourceTarget=function(l,q,j){var W,U=this,D=U.target;if(W="source"===l?D.getSource():D.getTarget()){var C=U._interactor.gv,H=Ne.toWorldPosition(C,q),Z=U._calcHostAnchor(D,l,H,W);if(!j){var w=U._interactor.getStyle("anchorRound"),M=U._interactor.getStyle("anchorSensitivity");Z.x=Ne.roundTo(Z.x,w,M),Z.y=Ne.roundTo(Z.y,w,M)}if(U._interactor.getStyle("edgeHostDetectPerFrame")||Z.x<0||Z.x>1||Z.y<0||Z.y>1){var T=C.getDataAt(H,function(S){return C.isSelectable(S)?$p(S)?!0:!1:!1});if(T){var y=U._calcHostAnchor(D,l,H,T);W=T,U._nextChangeEdgeHost={type:l,host:T},Z=y,j||(Z.x=Ne.roundTo(Z.x,w,M),Z.y=Ne.roundTo(Z.y,w,M))}}if(!j){var O=$g(C,W,0,0,0,Z.x,Z.y),Q=Ne.toScreenPosition(C,O);q.x=Q.x,q.y=Q.y}var n,L=[];if(sn(W,C)){var d=Sd(C,W);n=[{x:d.x,y:d.y},{x:d.x+d.width,y:d.y},{x:d.x+d.width,y:d.y+d.height},{x:d.x,y:d.y+d.height}]}else n=W.getCorners();return n.forEach(function(J){var E=Ne.toScreenPosition(C,J);L.push(E.x,E.y)}),U._edgeHostGuideInfo=L,{host:W,anchor:Z,tipText:""+Z.x.toFixed(2)+", "+Z.y.toFixed(2)}}},lo.prototype._guidingToEdit=function(y,u){var $,G,q=this;if($=q.screenInfo.curve){G=$._curves;var g,k,L,z,H,t,N,c,l=1/0,C=1/0,I=[];for(q.editing&&"realPoint"===q.editing.type&&(c=q.editing.point),H=0,t=2*G.length;t>H;H++)N=G[Math.floor(H/2)][H%2?"_p4":"_p1"],I.indexOf(N)>=0||(I.push(N),c&&c===N||(L=N.x-y.x,z=N.y-y.y,Math.abs(L)<Math.abs(l)?(l=L,g=[N]):L===l&&g.push(N),Math.abs(z)<Math.abs(C)?(C=z,k=[N]):z===C&&k.push(N)));var V=q._interactor.getStyle("smartGuideSensitivity");if((Math.abs(l)>V||"y"===u)&&(g=null),(Math.abs(C)>V||"x"===u)&&(k=null),g||k){var _=!1,A={};if(g&&(_=!0,A.xList=g,A.x=l),k&&(_=!0,A.yList=k,A.y=C),_)return A}}},lo.prototype._46O=function(){var Y=this;Y.editing=null,Y._guideInfo=null,Y._edgeHostGuideInfo=null,Y._pan=null,Y.tipInfo=null},lo.prototype._canDeletePoint=function(Q,w){var i=this.target;if(!(i instanceof s.Edge))return!0;var R=Q._curves[0],A=Q._curves[Q._curves.length-1];return R._p1===w||A._p4===w?!1:!0},lo.prototype.handleDelete=function(){var R=this;if(R.activing&&R.screenInfo){var K=s.Default.isShiftDown(),t=R.screenInfo.curve;R._canDeletePoint(t,R.activing.point)&&t.deleteRealPoint(R.activing.point,K),R.activing.selections&&R.activing.selections.forEach(function(i){R._canDeletePoint(t,i)&&t.deleteRealPoint(i,K)}),delete R.activing,delete R.editing,delete R.tipInfo,delete R._pan,R._writeToHt(),R._interactor.fp("deleteShapePoint",!1,!0)}},lo.prototype.handleDoubleClick=function(A){var I=this,k=I._interactor._getLogicalPoint(A);if(I.screenInfo&&I._checkEditRealPoint(k)){var a=I.getCurrentSelectintStatus(),F=Ne.Curve.PointType;return a=a===F.Mirrored?F.Straight:F.Mirrored,I.setCurrentSelectionStatus(a),I._interactor._42(),!0}},lo.prototype._drawHighlight=function(L){var C=this,B=C.highlight;if(B){var l=B.bezier,f=C._interactor;l&&Ne.Icons.DrawIcon(f,L,Ne.Icons.ShapeHighlightCurve,[l._p1.x,l._p1.y,l._p2.x,l._p2.y,l._p3.x,l._p3.y,l._p4.x,l._p4.y]);var M=B.point;M&&"insertKnot"===B.type&&Ne.Icons.DrawIcon(f,L,Ne.Icons.ShapeHighlighPoint,M)}},lo.prototype._drawGuide=function(d){var J=this,F=J._guideInfo;if(F){var Z,c,M,X,C=F.v;for(Z=0;2>Z;Z++)if(X=0===Z?F.xList:F.yList)for(c=0,M=X.length;M>c;c++)Ne.Icons.DrawIcon(J._interactor,d,Ne.Icons.ShapeGuideLine,[C.x,C.y,X[c].x,X[c].y])}},lo.prototype._drawCurrentPoint=function(H){var u=this;if(u.activing){var g=u.activing,r=u.getCurrentSelectintStatus(),D=u._interactor;if(r!==Ne.Curve.PointType.Straight){var p=g.pairs,U=g.hlpair,X=g.hltype,A=g.selections;if(p&&!A){var b,E,R;for(E=0,R=p.length;R>E;E++)b=p[E],E===U&&b[X]?Ne.Icons.DrawIcon(D,H,Ne.Icons.ShapeActivingCtrl,{point:b.point,c1:b.c1,c2:b.c2,hl:X}):Ne.Icons.DrawIcon(D,H,Ne.Icons.ShapeActivingCtrl,b)}}Ne.Icons.DrawIcon(D,H,Ne.Icons.ShapeHighlighRealPoint,u.activing.point),A&&A.forEach(function(A){Ne.Icons.DrawIcon(D,H,Ne.Icons.ShapeHighlighRealPoint,A)})}},lo.prototype.clear=function(){var A=this;A.editing=null,A._guideInfo=null,A.activing=null,A.highlight=null},lo.prototype._42=function(u){var c=this;c.info={},c.editing||(c.screenInfo=null);var l=c._interactor;return l.editDetail?c.target&&c._interactor.gv.isSelected(c.target)&&c._interactor.gv.isVisible(c.target)?(c.gatherSingleTarget(l.gv,c.target),Ne.Icons.DrawIcon(l,u,Ne.Icons.ShapeBgCurve,c.screenInfo),c._drawHighlight(u),c._drawCurrentPoint(u),c._getRealPoint().forEach(function(P){Ne.Icons.DrawIcon(l,u,Ne.Icons.ShapePoint,P)}),c._drawGuide(u),c.tipInfo&&Ne.Icons.DrawIcon(l,u,Ne.Icons.TipHelper,c.tipInfo),c._edgeHostGuideInfo&&Ne.Icons.DrawIcon(l,u,Ne.Icons.EdgeHostGuide,c._edgeHostGuideInfo),void 0):(l.editDetail=!1,c.clear(),void 0):(c.clear(),void 0)},lo.prototype._getRealPoint=function(){var B=this.screenInfo,l=B.P,v=B.S,Z=-1,X=[];return v.each(function(b){var $=1;if(3===b)$=2;else if(4===b)$=3;else if(5===b)return;Z+=$,X.push({x:l[2*Z],y:l[2*Z+1]})}),X};var mc=Ne.MoveHelper=function(C){var S=this;S.catalog="Move",S._interactor=C};mc.prototype={},mc.prototype.constructor=mc,mc.prototype.calcShift=function(p,$,z){var L,A,J=this,Q=J._interactor.gv,m=Q.lp($);if("beginMove"===p&&J._gatherGridInfo(z._lastLogicalPoint||m),L=J._target){var Z=L.downPosition;if(Z){var F=J._interactor.getStyle("moveSensitivity")/Q._zoom;if(Z.distanceTo(m)<F)return{x:0,y:0};delete L.downPosition}var N;A=s.Default.isShiftDown($),A&&(m=J._dealShiftDown(m),N=L.shiftGuide.dir);var B,T=L.rawPos={x:L.pos.x+m.x-L.lp.x,y:L.pos.y+m.y-L.lp.y};if(s.Default.isCtrlDown($)){if(B=J._calcShiftByAddon(),J._target.node instanceof Ne.Group){var w=J._target.node;w._position.x+=B.x,w._position.y+=B.y}return B}for(var u,_=L.x+T.x,i=L.y+T.y,V={x:_,y:i},t={x:_+L.w/2,y:i+L.h/2},G={x:_+L.w,y:i+L.h},v=J._interactor.rectGuide,R=J._interactor.gridGuide,l=[v.findClosest(V,N),v.findClosest(t,N),v.findClosest(G,N),R.findClosest(V,N),R.findClosest(t,N),R.findClosest(G,N)],o=1/0,h=1/0,H=0,n=l.length;n>H;H++)u=l[H],u&&(_=u.x,i=u.y,isFinite(_)&&Math.abs(_)<Math.abs(o)&&(o=_),isFinite(i)&&Math.abs(i)<Math.abs(h)&&(h=i));if(isFinite(o)||(o=0),isFinite(h)||(h=0),B=J._calcShiftByAddon(o,h),J._target.node instanceof Ne.Group){var w=J._target.node;w._position.x+=B.x,w._position.y+=B.y}var k=L.node;if(!sn(k,Q)){var g=T.x+o,O=T.y+h;J._interactor.rectGuide.gatherLines({node:k,x:L.x+g,y:L.y+O,w:L.w,h:L.h},N)}return B}},mc.prototype._calcShiftByAddon=function(p,f){var D=this._target,Q=D.rawPos,V=D.node.getPosition();return p=p||0,f=f||0,{x:Q.x-V.x+p,y:Q.y-V.y+f}},mc.prototype._dealShiftDown=function(v){var g=this,w=g._target.shiftGuide,s=g._target.lp,c=Math.abs(v.x-s.x),V=Math.abs(v.y-s.y);c>V&&c>w.limit&&"y"===w.dir&&(w.dir="x"),V>c&&V>w.limit&&"x"===w.dir&&(w.dir="y");var A=w.dir;return"x"===A?(v.y=s.y,w.limit=Math.max(w.limit,c)):"y"===A&&(v.x=s.x,w.limit=Math.max(w.limit,V)),v},mc.prototype._gatherGridInfo=function($){var g,h=this,B=h._interactor,_=B._getValidSelection();if(1===_.length){if(g=_[0],!g.getRect)return h._target=null,void 0}else if(g=Ne.Group.findOrCreateGroup(_),!g)return h._target=null,void 0;var R=g.getPosition(),z=g.getRect();h._target={node:g,x:z.x-R.x,y:z.y-R.y,w:z.width,h:z.height,lp:{x:$.x,y:$.y},pos:{x:R.x,y:R.y},shiftGuide:{dir:"x",limit:0},downPosition:new Ne.Math.Vector2($)},B.rectGuide.gatherRects()},mc.prototype.clear=function(){var D=this;D._interactor.rectGuide.clear(),D._interactor._42()};var Ei="directional",Wb="point",Fp="spot",fn="light.color",gp=function(O,w){Me(w)&&Yi.test(w)?Oq(O,w):Eh[O]=w},rf=function(B){var P=Eh[B];return B&&P===m&&Yi.test(B)&&(Ar&&Ar[B]||Oq(B,B)),P};As(u,{graph3dViewAttributes:q,graph3dViewFirstPersonMode:!1,graph3dViewMouseRoamable:!0,graph3dViewMoveStep:15,graph3dViewRotateStep:F/60,graph3dViewPannable:!0,graph3dViewRotatable:!0,graph3dViewWalkable:!0,graph3dViewResettable:!0,graph3dViewZoomable:!0,graph3dViewRectSelectable:!0,graph3dViewRectSelectBackground:fi,graph3dViewGridVisible:!1,graph3dViewGridSize:50,graph3dViewGridGap:50,graph3dViewGridColor:[.4,.75,.85,1],graph3dViewOriginAxisVisible:!1,graph3dViewCenterAxisVisible:!1,graph3dViewAxisXColor:[1,0,0,1],graph3dViewAxisYColor:[0,1,0,1],graph3dViewAxisZColor:[0,0,1,1],graph3dViewEditSizeColor:[1,1,0,1],graph3dViewOrtho:!1,graph3dViewOrthoWidth:2e3,graph3dViewFovy:F/4,graph3dViewNear:10,graph3dViewFar:1e4,graph3dViewEye:[0,300,1e3],graph3dViewCenter:[0,0,0],graph3dViewUp:[0,1,-1e-7],graph3dViewHeadlightRange:0,graph3dViewHeadlightColor:[1,1,1,1],graph3dViewHeadlightIntensity:1,graph3dViewHeadlightDisabled:!1,graph3dViewFogDisabled:!0,graph3dViewFogColor:"white",graph3dViewFogNear:1,graph3dViewFogFar:2e3,graph3dViewDashDisabled:!0,graph3dViewBatchBlendDisabled:!0,graph3dViewBatchBrightnessDisabled:!0,graph3dViewBatchColorDisabled:!1,setShape3dModel:gp,getShape3dModel:rf,createMatrix:function(I,k){Nc(I)||(I=[I]);for(var x=I.length-1;x>=0;x--){var m=I[x];k=Bn(m.mat,m.s3,m.r3,m.rotationMode,m.t3,k)}return k},transformVec:function(Q,n){return tl(Q,n)},createBoxModel:function(){return{vs:zg,ns:tb,uv:qs,is:hc}},createRoundRectModel:function(w,N){return ps.roundRect(w,N)},createStarModel:function(A,y){return ps.star(A,y)},createRectModel:function(h,f){return ps.rect(h,f)},createTriangleModel:function(r,K){return ps.triangle(r,K)},createRightTriangleModel:function(t,F){return ps.rightTriangle(t,F)},createParallelogramModel:function(i,b){return ps.parallelogram(i,b)},createTrapezoidModel:function(p,h){return ps.trapezoid(p,h)},createSmoothSphereModel:function(g,T,N,m,k,u,W){return lr(new Hp(g,T,N,m,k,u,W))},createSphereModel:function(l,h,R,w,L,$){return l?Xc(l,h,R,w,L,$):u.createSmoothSphereModel()},createSmoothConeModel:function(p,e,Q,f,h){return Dg(p,e,Q,f,h)},createConeModel:function(f,A,d,k,i,E){return f?Ek(f,A,d,k,i,E):Dg(E)},createSmoothCylinderModel:function(d,n,t,D,z,N,g,X){return lr(new pe(d,n,t,D,z,N,g,X))},createCylinderModel:function(u,V,l,X,a,f,H){return u?Bb(u,V,l,X,a,f,H):Ik(f,H)},createSmoothTorusModel:function(G,l,D,g,L,Z){return lr(new hm(G,l,D,g,L,Z))},createTorusModel:function(_,I,k,t,$,m,O){return _?bs(_,I,k,t,$,m,O):xb(m,O)},createExtrusionModel:function(L,T,U,a,I,N,m,H){return Pm(L,T,U,a,I,N,m,H)},createSmoothRingModel:function(b,W,r,I,R,x){for(var d=[],C=0;C<b.length-1;C+=2)d.push({x:b[C],y:b[C+1]});for(b=Qd(d,W,r)[0],d=[],C=0;C<b.length;C++){var Y=b[C];d.push(new gj(Y.x,0,Y.y))}return lr(new rg(d,x,I,R))},createTextGeometry:function(m,l){return lr(new nh(m,l))},loadFontFace:function(C,d){u.xhrLoad(C,function(l){if(!l)return d();var I;try{I=JSON.parse(l)}catch(n){I=JSON.parse(l.substring(65,l.length-2))}Kb.loadFace(I),d&&d(I.familyName.toLowerCase())},d?null:{sync:!0})},getRotationFromMatrix4:function(J,f){var u=n,C=J[0],O=J[4],v=J[8],P=J[1],q=J[5],V=J[9],r=J[2],h=J[6],s=J[10];f=f||"xyz",f=f[2]+f[1]+f[0],f=f.toUpperCase();var X={};if("XYZ"===f)X._y=Math.asin(u(v,-1,1)),Math.abs(v)<.99999?(X._x=Math.atan2(-V,s),X._z=Math.atan2(-O,C)):(X._x=Math.atan2(h,q),X._z=0);else if("YXZ"===f)X._x=Math.asin(-u(V,-1,1)),Math.abs(V)<.99999?(X._y=Math.atan2(v,s),X._z=Math.atan2(P,q)):(X._y=Math.atan2(-r,C),X._z=0);else if("ZXY"===f)X._x=Math.asin(u(h,-1,1)),Math.abs(h)<.99999?(X._y=Math.atan2(-r,s),X._z=Math.atan2(-O,q)):(X._y=0,X._z=Math.atan2(P,C));else if("ZYX"===f)X._y=Math.asin(-u(r,-1,1)),Math.abs(r)<.99999?(X._x=Math.atan2(h,s),X._z=Math.atan2(P,C)):(X._x=0,X._z=Math.atan2(-O,q));else if("YZX"===f)X._z=Math.asin(u(P,-1,1)),Math.abs(P)<.99999?(X._x=Math.atan2(-V,q),X._y=Math.atan2(-r,C)):(X._x=0,X._y=Math.atan2(v,s));else{if("XZY"!==f)return null;X._z=Math.asin(-u(O,-1,1)),Math.abs(O)<.99999?(X._x=Math.atan2(h,q),X._y=Math.atan2(v,C)):(X._x=Math.atan2(-V,s),X._y=0)}return[X._x,X._y,X._z]},createRingModel:function(f,b,Y,U,N,n,t,s,H,$){for(var X=[],d=0;d<f.length-1;d+=2)X.push({x:f[d],y:f[d+1]});n=n||u.shapeSide,t=t||0,s=s||n;var O,T,m,e,W,v,Z,B,K,j,d,R,C,r,Q,_,o,I,c=[],g=[],J=H?[]:q,w=H?[]:q,F=$?[]:q,h=$?[]:q,i=U?[]:q,S=U?[]:q,y=N?[]:q,a=N?[]:q,f=Qd(X,b,Y),l=pf(f),p=0,D=2*Math.PI/n;return f.forEach(function(A){if(m=A.length,m>1){if(e=A[0],U)for(v=e.x,B=e.y,d=t;s>d;d++)R=d+1,C=d*D,r=R*D,Q=z(C),_=M(C),o=z(r),I=M(r),i.push(Q*v,B,-_*v,o*v,B,-I*v,0,B,0),S.push(.5-.5*Q,.5-.5*_,.5-.5*o,.5-.5*I,.5,.5);for(j=0;m>j;j++){for(W=A[j],v=e.x,Z=W.x,B=e.y,K=W.y,O=p/l,p+=Yh(e,W),T=p/l,d=t;s>d;d++)R=d+1,C=d*D,r=R*D,Q=z(C),_=M(C),o=z(r),I=M(r),c.push(Q*Z,K,-_*Z,o*Z,K,-I*Z,Q*v,B,-_*v,o*Z,K,-I*Z,o*v,B,-I*v,Q*v,B,-_*v),g.push(d/n,T,R/n,T,d/n,O,R/n,T,R/n,O,d/n,O),H&&d===t&&(J.push(0,B,0,0,K,0,Q*Z,K,-_*Z,Q*Z,K,-_*Z,Q*v,B,-_*v,0,B,0),w.push(0,.5-B,0,.5-K,2*Z,.5-K,2*Z,.5-K,2*v,.5-B,0,.5-B)),$&&R===s&&(F.push(0,B,0,o*Z,K,-I*Z,0,K,0,o*Z,K,-I*Z,0,B,0,o*v,B,-I*v),h.push(1,.5-B,1-2*Z,.5-K,1,.5-K,1-2*Z,.5-K,1,.5-B,1-2*v,.5-B));e=W}if(N)for(v=e.x,B=e.y,d=t;s>d;d++)R=d+1,C=d*D,r=R*D,Q=z(C),_=M(C),o=z(r),I=M(r),y.push(o*v,B,-I*v,Q*v,B,-_*v,0,B,0),a.push(.5-.5*o,.5+.5*I,.5-.5*Q,.5+.5*_,.5,.5)}}),{vs:c,uv:g,bottom_vs:y,bottom_uv:a,top_vs:i,top_uv:S,from_vs:J,from_uv:w,to_vs:F,to_uv:h}}},!0),As(C,{"3d.move.mode":m,"3d.selectable":!0,"3d.visible":!0,"3d.movable":!0,"3d.editable":!0,"shape.border.gradient.color":m,"edge.gradient.color":m,"edge.source.t3":m,"edge.target.t3":m,"light.type":Wb,"light.center":[0,0,0],"light.color":[1,1,1,1],"light.disabled":!1,"light.angle":F/4,"light.range":0,"light.exponent":1,"light.intensity":1,"wf.visible":!1,"wf.width":1,"wf.color":dk,"wf.short":!1,"wf.mat":m,batch:m,"transparent.mask":!1,brightness:m,"select.brightness":.7,"repeat.uv.length":m,alphaTest:.4,"label.face":fj,"label.t3":m,"label.r3":m,"label.texture.scale":2,"label.rotationMode":Vh,"label.light":!1,"label.blend":m,"label.reverse.flip":!1,"label.reverse.color":wo,"label.reverse.cull":!1,"label.transparent":!1,"label.autorotate":!1,"label2.face":fj,"label2.t3":m,"label2.r3":m,"label2.texture.scale":2,"label2.rotationMode":Vh,"label2.light":!1,"label2.blend":m,"label2.reverse.flip":!1,"label2.reverse.color":wo,"label2.reverse.cull":!1,"label2.transparent":!1,"label2.autorotate":!1,"note.face":fj,"note.t3":m,"note.r3":m,"note.texture.scale":2,"note.rotationMode":Vh,"note.light":!1,"note.blend":m,"note.reverse.flip":!1,"note.reverse.color":wo,"note.reverse.cull":!1,"note.transparent":!1,"note.autorotate":!1,"note2.face":fj,"note2.t3":m,"note2.r3":m,"note2.texture.scale":2,"note2.rotationMode":Vh,"note2.light":!1,"note2.blend":m,"note2.reverse.flip":!1,"note2.reverse.color":wo,"note2.reverse.cull":!1,"note2.transparent":!1,"note2.autorotate":!1,shape3d:m,"shape3d.color":oe,"shape3d.top.color":m,"shape3d.bottom.color":m,"shape3d.from.color":m,"shape3d.to.color":m,"shape3d.image":m,"shape3d.top.image":m,"shape3d.bottom.image":m,"shape3d.from.image":m,"shape3d.to.image":m,"shape3d.light":!0,"shape3d.side":0,"shape3d.side.from":m,"shape3d.side.to":m,"shape3d.visible":!0,"shape3d.from.visible":!0,"shape3d.to.visible":!0,"shape3d.top.visible":!0,"shape3d.bottom.visible":!0,"shape3d.torus.radius":.17,"shape3d.resolution":0,"shape3d.blend":m,"shape3d.opacity":m,"shape3d.reverse.flip":!1,"shape3d.reverse.color":wo,"shape3d.reverse.cull":!1,"shape3d.transparent":!1,"shape3d.uv.offset":m,"shape3d.uv.scale":m,"shape3d.top.uv.offset":m,"shape3d.top.uv.scale":m,"shape3d.bottom.uv.offset":m,"shape3d.bottom.uv.scale":m,"shape3d.from.uv.offset":m,"shape3d.from.uv.scale":m,"shape3d.to.uv.offset":m,"shape3d.to.uv.scale":m,"shape3d.top.cap":m,"shape3d.bottom.cap":m,"shape3d.start.angle":0,"shape3d.sweep.angle":W,"shape3d.discard.selectable":!0,"shape3d.top.discard.selectable":!0,"shape3d.bottom.discard.selectable":!0,"shape3d.from.discard.selectable":!0,"shape3d.to.discard.selectable":!0,"shape3d.scaleable":!0,"all.light":!0,"all.visible":!0,"all.color":oe,"all.image":m,"all.blend":m,"all.opacity":m,"all.reverse.flip":!1,"all.reverse.color":wo,"all.reverse.cull":!1,"all.transparent":!1,"all.uv":m,"all.uv.offset":m,"all.uv.scale":m,"all.discard.selectable":!0,mat:m,"left.mat":m,"right.mat":m,"top.mat":m,"bottom.mat":m,"front.mat":m,"back.mat":m},!0);var Ii,Yo=!1,Ci=[0,0,0,0],Zc={left:[1/255,0,0,1],right:[2/255,0,0,1],top:[3/255,0,0,1],bottom:[4/255,0,0,1],front:[5/255,0,0,1],back:[6/255,0,0,1],m:{1:qg,2:Ai,3:jo,4:rs,5:fj,6:Uc}},hk=function(X,o,h,s){if(o.getFaceVisible(X,h)){mo(o,wp(X,o.getFaceMat(X,h)||o.getMat(X)));var Z=o._26I;o.getFaceReverseCull(X,h)?Z.enable(Z.CULL_FACE):Z.disable(Z.CULL_FACE),Hg(Z,o._prg.uFixPickReverseColor,Zc[h]),_j(Z),Kr(Z,s,6),sk(Z),$e(o)}},Ef=function($){return $ instanceof Xi},yo=function(h){return[h.x,h.e||0,h.y]},sb=function(o,r,n){for(var r=Gl(r),z=r[0],e=r[1],G=r[2];n--;)o.push(z,e,G)},$n=function(K,r,o){for(var r=Gl(r),A=r[0],B=r[1],m=r[2],w=r[3];o--;)K.push(A,B,m,w)},Io=function(c,X,t){if(X)for(var u,S,e,O=X[0],_=X[1],C=X[2],Y=X[4],v=X[5],P=X[6],x=X[8],K=X[9],y=X[10],W=X[12],h=X[13],d=X[14],N=t.length,l=0,l=0;N>l;l+=3)u=t[l],S=t[l+1],e=t[l+2],c.push(O*u+Y*S+x*e+W,_*u+v*S+K*e+h,C*u+P*S+y*e+d);else Hd(c,t)},fd=function(H,u){var w=u.s("light.intensity"),l=Gl(u.s(fn)),K=l[0],V=l[1],T=l[2];1!==w&&(K*=w,V*=w,T*=w),H.push(K,V,T,u.s("light.disabled")?1:0)},Tp=function(K,f,k){Hg(f,k.uHeadlightRange,K._headlightRange);var L=K._headlightIntensity,y=Gl(K._headlightColor);1!==L&&(y=[y[0]*L,y[1]*L,y[2]*L]),Hg(f,k.uHeadlightColor,[y[0],y[1],y[2],K._headlightDisabled?1:0]);var F=K._59O,a=K._spots,I=K._dirs;if(F.length){var T=[],o=[],O=[];F.forEach(function(n){fd(T,n),Hd(o,K._transformPointToViewSpace(n.p3())),O.push(n.s("light.range"))}),f.uniform4fv(k.uPointColor,T),f.uniform1fv(k.uPointRange,O),f.uniform3fv(k.uPointPosition,o)}if(a.length){var E=[],i=[],P=[],n=[],e=[],t=[];a.forEach(function(I){fd(E,I),Hd(i,K._transformPointToViewSpace(I.p3())),Hd(e,K._transformDirectionToViewSpace(I.p3(),I.s("light.center"))),P.push(I.s("light.range")),n.push(z(I.s("light.angle")/2)),t.push(I.s("light.exponent"))}),f.uniform4fv(k.uSpotColor,E),f.uniform1fv(k.uSpotRange,P),f.uniform1fv(k.uSpotAngle,n),f.uniform1fv(k.uSpotExponent,t),f.uniform3fv(k.uSpotPosition,i),f.uniform3fv(k.uSpotDirection,e)
}if(I.length){var g=[],x=[];I.forEach(function(G){fd(g,G),Hd(x,K._transformDirectionToViewSpace(G.p3()))}),f.uniform4fv(k.uDirColor,g),f.uniform3fv(k.uDirDirection,x)}},zb=function(I){return I>0&&0===(I-1&I)},um=function(U){return U=I(0,c(F,U)),U=I($r,c(F-$r,U))},Im=function(){return.05+B()/2},jb=function($,Y,j,_){var D,S=$.getEye();return $.isOrtho()?(D=fe($.getCenter(),S),D[0]+=_[0],D[1]+=_[1],D[2]+=_[2]):D=S,El(Y,j,_,D)},El=function(J,f,i,z){var F=yb(J,f),G=fe(z,i,!0),Y=yb(G,f);if(E(Y)<$r)return q;var Q=(F-yb(i,f))/Y;return[i[0]+G[0]*Q,i[1]+G[1]*Q,i[2]+G[2]*Q]},Rf=function(A,R){return{x:2*A.x-R.x,y:2*A.y-R.y}},se=function(Y,O,N,V){var J,l;if(!Y)return J=Q(O.y-N.y,N.x-O.x),{x:O.x+V*M(J),y:O.y+V*z(J)};if(!N)return J=Q(Y.y-O.y,O.x-Y.x),{x:O.x+V*M(J),y:O.y+V*z(J)};var D=fe([Y.x,Y.y,0],[O.x,O.y,0],!0),s=fe([N.x,N.y,0],[O.x,O.y,0],!0),j=-(D[0]+s[0])/2,R=-(D[1]+s[1])/2,H=x(j*j+R*R);if($r>H)return J=Q(Y.y-O.y,O.x-Y.x),{x:O.x+V*M(J),y:O.y+V*z(J)};var h=Y.x-O.x,P=Y.y-O.y,L=N.x-O.x,S=N.y-O.y,B=x(Math.min(h*h+P*P,L*L+S*S));return J=G(yb(D,s))/2,l=D[1]*s[0]-D[0]*s[1]>0?-1:1,j/=H,R/=H,H=Math.min(V/M(J),B/z(J)),{x:O.x+l*H*j,y:O.y+l*H*R}},Hm=function(q){var a=q[1],L=q[2],f=q[3],I=q[6],W=q[7],p=q[11];q[1]=q[4],q[2]=q[8],q[3]=q[12],q[4]=a,q[6]=q[9],q[7]=q[13],q[8]=L,q[9]=I,q[11]=q[14],q[12]=f,q[13]=W,q[14]=p},Vm=function(h){var H=h[0],X=h[1],O=h[2],W=h[3],u=h[4],F=h[5],T=h[6],Y=h[7],y=h[8],D=h[9],r=h[10],j=h[11],b=h[12],B=h[13],m=h[14],J=h[15],S=H*F-X*u,I=H*T-O*u,l=H*Y-W*u,t=X*T-O*F,w=X*Y-W*F,V=O*Y-W*T,i=y*B-D*b,P=y*m-r*b,U=y*J-j*b,g=D*m-r*B,o=D*J-j*B,s=r*J-j*m,$=S*s-I*o+l*g+t*U-w*P+V*i;return $?($=1/$,h[0]=(F*s-T*o+Y*g)*$,h[1]=(O*o-X*s-W*g)*$,h[2]=(B*V-m*w+J*t)*$,h[3]=(r*w-D*V-j*t)*$,h[4]=(T*U-u*s-Y*P)*$,h[5]=(H*s-O*U+W*P)*$,h[6]=(m*l-b*V-J*I)*$,h[7]=(y*V-r*l+j*I)*$,h[8]=(u*o-F*U+Y*i)*$,h[9]=(X*U-H*o-W*i)*$,h[10]=(b*w-B*l+J*S)*$,h[11]=(D*l-y*w-j*S)*$,h[12]=(F*P-u*g-T*i)*$,h[13]=(H*g-X*P+O*i)*$,h[14]=(B*I-b*t-m*S)*$,h[15]=(y*t-D*I+r*S)*$,void 0):q},yd=function(K,o){if(o){var l=o[0],W=o[1],$=o[2];K[12]=K[0]*l+K[4]*W+K[8]*$+K[12],K[13]=K[1]*l+K[5]*W+K[9]*$+K[13],K[14]=K[2]*l+K[6]*W+K[10]*$+K[14],K[15]=K[3]*l+K[7]*W+K[11]*$+K[15]}},rk=function(o,B){if(B){var w=B[0],K=B[1],s=B[2];o[0]=o[0]*w,o[1]=o[1]*w,o[2]=o[2]*w,o[3]=o[3]*w,o[4]=o[4]*K,o[5]=o[5]*K,o[6]=o[6]*K,o[7]=o[7]*K,o[8]=o[8]*s,o[9]=o[9]*s,o[10]=o[10]*s,o[11]=o[11]*s}},Sq=function(K,f,q){var o=f[0],N=f[1],T=f[2],A=f[3],i=f[4],J=f[5],g=f[6],X=f[7],u=f[8],Z=f[9],n=f[10],D=f[11],Y=f[12],W=f[13],R=f[14],l=f[15],j=q[0],h=q[1],S=q[2],w=q[3];return K[0]=j*o+h*i+S*u+w*Y,K[1]=j*N+h*J+S*Z+w*W,K[2]=j*T+h*g+S*n+w*R,K[3]=j*A+h*X+S*D+w*l,j=q[4],h=q[5],S=q[6],w=q[7],K[4]=j*o+h*i+S*u+w*Y,K[5]=j*N+h*J+S*Z+w*W,K[6]=j*T+h*g+S*n+w*R,K[7]=j*A+h*X+S*D+w*l,j=q[8],h=q[9],S=q[10],w=q[11],K[8]=j*o+h*i+S*u+w*Y,K[9]=j*N+h*J+S*Z+w*W,K[10]=j*T+h*g+S*n+w*R,K[11]=j*A+h*X+S*D+w*l,j=q[12],h=q[13],S=q[14],w=q[15],K[12]=j*o+h*i+S*u+w*Y,K[13]=j*N+h*J+S*Z+w*W,K[14]=j*T+h*g+S*n+w*R,K[15]=j*A+h*X+S*D+w*l,K},or=function(T,o,A,z){var Q,L,q,y,s,w,v,c,F,I,k=o[0],t=o[1],e=o[2],S=z[0],W=z[1],n=z[2],O=A[0],h=A[1],H=A[2];return E(k-O)<$r&&E(t-h)<$r&&E(e-H)<$r?kr(T):(v=k-O,c=t-h,F=e-H,I=1/x(v*v+c*c+F*F),v*=I,c*=I,F*=I,Q=W*F-n*c,L=n*v-S*F,q=S*c-W*v,I=x(Q*Q+L*L+q*q),I?(I=1/I,Q*=I,L*=I,q*=I):(Q=0,L=0,q=0),y=c*q-F*L,s=F*Q-v*q,w=v*L-c*Q,I=x(y*y+s*s+w*w),I?(I=1/I,y*=I,s*=I,w*=I):(y=0,s=0,w=0),T[0]=Q,T[1]=y,T[2]=v,T[3]=0,T[4]=L,T[5]=s,T[6]=c,T[7]=0,T[8]=q,T[9]=w,T[10]=F,T[11]=0,T[12]=-(Q*k+L*t+q*e),T[13]=-(y*k+s*t+w*e),T[14]=-(v*k+c*t+F*e),T[15]=1,T)},Jo=function(m,R,Y,F,V){var k=1/H(R/2),G=1/(F-V);return m[0]=k/Y,m[1]=0,m[2]=0,m[3]=0,m[4]=0,m[5]=k,m[6]=0,m[7]=0,m[8]=0,m[9]=0,m[10]=(V+F)*G,m[11]=-1,m[12]=0,m[13]=0,m[14]=2*V*F*G,m[15]=0,m},tm=function(K,t,$,E,c,s,Q){var P=1/(t-$),r=1/(E-c),G=1/(s-Q);return K[0]=-2*P,K[1]=0,K[2]=0,K[3]=0,K[4]=0,K[5]=-2*r,K[6]=0,K[7]=0,K[8]=0,K[9]=0,K[10]=2*G,K[11]=0,K[12]=(t+$)*P,K[13]=(c+E)*r,K[14]=(Q+s)*G,K[15]=1,K},Qn=function(P,w){var S=w[0],N=w[1],v=w[2],M=w[3],n=S*S+N*N+v*v+M*M,X=n?1/n:0;return P[0]=-S*X,P[1]=-N*X,P[2]=-v*X,P[3]=M*X,P},qd=function(e,K){var P=K[0]+K[5]+K[10],R=0;return P>0?(R=2*Math.sqrt(P+1),e[3]=.25*R,e[0]=(K[6]-K[9])/R,e[1]=(K[8]-K[2])/R,e[2]=(K[1]-K[4])/R):K[0]>K[5]&K[0]>K[10]?(R=2*Math.sqrt(1+K[0]-K[5]-K[10]),e[3]=(K[6]-K[9])/R,e[0]=.25*R,e[1]=(K[1]+K[4])/R,e[2]=(K[8]+K[2])/R):K[5]>K[10]?(R=2*Math.sqrt(1+K[5]-K[0]-K[10]),e[3]=(K[8]-K[2])/R,e[0]=(K[1]+K[4])/R,e[1]=.25*R,e[2]=(K[6]+K[9])/R):(R=2*Math.sqrt(1+K[10]-K[0]-K[5]),e[3]=(K[1]-K[4])/R,e[0]=(K[8]+K[2])/R,e[1]=(K[6]+K[9])/R,e[2]=.25*R),e},Ud=function(y,K,o){var h=K[0],g=K[1],e=K[2],Y=K[3],f=h+h,O=g+g,A=e+e,n=h*f,U=h*O,L=h*A,T=g*O,Z=g*A,I=e*A,k=Y*f,F=Y*O,$=Y*A;return y[0]=1-(T+I),y[1]=U+$,y[2]=L-F,y[3]=0,y[4]=U-$,y[5]=1-(n+I),y[6]=Z+k,y[7]=0,y[8]=L+F,y[9]=Z-k,y[10]=1-(n+T),y[11]=0,y[12]=o[0],y[13]=o[1],y[14]=o[2],y[15]=1,y},Zn=u.getRotationFromMatrix4,td=function(){var S=[0,0,0],A=[0,0,0],z=[0,0,0],e=function(X,I,K){X[0]=I[1]*K[2]-I[2]*K[1],X[1]=I[2]*K[0]-I[0]*K[2],X[2]=I[0]*K[1]-I[1]*K[0]},T=function(m){return m[0]*m[0]+m[1]*m[1]+m[2]*m[2]},v=function(G){var V=Math.sqrt(T(G));G[0]/=V,G[1]/=V,G[2]/=V},f=function(Z,W,t){Z[0]=W[0]-t[0],Z[1]=W[1]-t[1],Z[2]=W[2]-t[2]};return function(w,r,F){var d=Ae();return f(z,w,r),0===T(z)&&(z[2]=1),v(z),e(S,F,z),0===T(S)&&(1===Math.abs(F[2])?z[0]+=1e-4:z[2]+=1e-4,v(z),e(S,F,z)),v(S),e(A,z,S),d[0]=S[0],d[4]=A[0],d[8]=z[0],d[1]=S[1],d[5]=A[1],d[9]=z[1],d[2]=S[2],d[6]=A[2],d[10]=z[2],d}}(),Co=function(N,r){return or(r?r:Ae(),N._eye,N._center,N._up)},Fj=function(J){var A=J.getAspect(),e=J._near,k=J._far,p=Ae();if(J._ortho){var H=J._orthoWidth/2,g=H/A;tm(p,-H,H,-g,g,e,k)}else Jo(p,J._fovy,A,e,k);return p},Qf=function(C,u){if(!C)return q;var v=0,d=1,w=2,H=[],N=0,Q=C.length,z=Q/3;if(u){for(;Q>N;N++)H[N]=0;for(N=0;N<u.length;N+=3){var B=[],e=[],G=[];B[v]=C[3*u[N+1]+v]-C[3*u[N]+v],B[d]=C[3*u[N+1]+d]-C[3*u[N]+d],B[w]=C[3*u[N+1]+w]-C[3*u[N]+w],e[v]=C[3*u[N+2]+v]-C[3*u[N+1]+v],e[d]=C[3*u[N+2]+d]-C[3*u[N+1]+d],e[w]=C[3*u[N+2]+w]-C[3*u[N+1]+w],G[v]=B[d]*e[w]-B[w]*e[d],G[d]=B[w]*e[v]-B[v]*e[w],G[w]=B[v]*e[d]-B[d]*e[v];for(var E=0;3>E;E++)H[3*u[N+E]+v]+=G[v],H[3*u[N+E]+d]+=G[d],H[3*u[N+E]+w]+=G[w]}}else for(N=0;z>N;N+=3){var B=[],e=[],G=[];B[v]=C[3*(N+1)+v]-C[3*N+v],B[d]=C[3*(N+1)+d]-C[3*N+d],B[w]=C[3*(N+1)+w]-C[3*N+w],e[v]=C[3*(N+2)+v]-C[3*(N+1)+v],e[d]=C[3*(N+2)+d]-C[3*(N+1)+d],e[w]=C[3*(N+2)+w]-C[3*(N+1)+w],G[v]=B[d]*e[w]-B[w]*e[d],G[d]=B[w]*e[v]-B[v]*e[w],G[w]=B[v]*e[d]-B[d]*e[v];for(var E=0;3>E;E++)H[3*(N+E)+v]=G[v],H[3*(N+E)+d]=G[d],H[3*(N+E)+w]=G[w]}for(N=0;Q>N;N+=3){var k=[];k[v]=H[N+v],k[d]=H[N+d],k[w]=H[N+w];var h=x(k[v]*k[v]+k[d]*k[d]+k[w]*k[w]);0===h&&(h=$r),k[v]=k[v]/h,k[d]=k[d]/h,k[w]=k[w]/h,H[N+v]=k[v],H[N+d]=k[d],H[N+w]=k[w]}return new aj(H)},Ih=function(n,C,_,U){if(_||(_=n.createTexture()),C){var E=n.TEXTURE_2D,b=n.REPEAT,d=n.CLAMP_TO_EDGE,K=n.TEXTURE_MIN_FILTER;U!==n.NEAREST&&(U=n.LINEAR),sr(n,_),n.texImage2D(E,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,C),Wd(n,n.TEXTURE_MAG_FILTER,U),zb(C.width)&&zb(C.height)&&!C.clampToEdge?(Wd(n,n.TEXTURE_WRAP_S,b),Wd(n,n.TEXTURE_WRAP_T,b),Wd(n,K,n.LINEAR_MIPMAP_LINEAR),n.generateMipmap(E)):(Wd(n,n.TEXTURE_WRAP_S,d),Wd(n,n.TEXTURE_WRAP_T,d),Wd(n,K,U)),sr(n,q)}return _},Rc=function(E,j){var p=new Uint8Array(3);return j=j||E.createTexture(),sr(E,j),Wd(E,E.TEXTURE_MIN_FILTER,E.LINEAR),E.texImage2D(E.TEXTURE_2D,0,E.RGB,1,1,0,E.RGB,E.UNSIGNED_BYTE,p),j},Td=function(A){A._26I&&A._prg&&(A._26I.deleteProgram(A._prg),A._prg=q)},gc=function(u,l,J,X){var j=u.createShader(J);return u.shaderSource(j,X),u.compileShader(j),u.attachShader(l,j),j},bg=function(b){return b.createBuffer()},sr=function(Q,O){Q.bindTexture(Q.TEXTURE_2D,O)},Xf=function(i,a){i.bindFramebuffer(i.FRAMEBUFFER,a)},Wd=function(G,V,h){G.texParameteri(G.TEXTURE_2D,V,h)},br=function(F,l){if(l){var l=Gl(l);F.clearColor(l[0],l[1],l[2],l[3])}},vl=function(i,w){Hg(i,w.uFix,!0),ne(i,w.aNormal)},xf=function(Q,n){Hg(Q,n.uFix,!1),lp(Q,n.aNormal)},lg=function(y,X,f,B,T,L,A,c){y._picking||(f?(Hg(y,X.uBlend,!0),Hg(y,X.uBlendColor,f)):Hg(y,X.uBlend,!1),Hg(y,X.uLight,B==q?!0:B),_c(T)&&1!==T&&Hg(y,X.uPartOpacity,T),Hg(y,X.uReverseFlip,L==q?!1:L),Hg(y,X.uFixPickReverseColor,A||wo)),c?y.enable(y.CULL_FACE):y.disable(y.CULL_FACE)},ab=function(F,j){F._picking||Hg(F,j.uPartOpacity,1)},_j=function(v,X,e,K,k,U,E,Y,r){if(!e)return v.activeTexture(v.TEXTURE0),sr(v,v._emptyTexture),v.activeTexture(v.TEXTURE1),sr(v,v._emptyBlendTexture),void 0;Hg(v,X.uTexture,!0),Hg(v,X.uDiscardSelectable,go(K)?K:!0),lp(v,X.aUv),nj(v,k,U,X.aUv,2),r?(Hg(v,X.uBlendTexture,!0),v.activeTexture(v.TEXTURE1),sr(v,r),v.uniform1i(X.uBlendSampler,1)):(Hg(v,X.uBlendTexture,!1),v.activeTexture(v.TEXTURE1),sr(v,v._emptyBlendTexture)),v.activeTexture(v.TEXTURE0),sr(v,e),v.uniform1i(X.uSampler,0);var h=[0,0,1,1];E&&(h[0]=E[0],h[1]=E[1]),Y&&(h[2]=Y[0],h[3]=Y[1]),Hg(v,X.uOffsetScale,h)},sk=function(B,t,Q){B.activeTexture(B.TEXTURE0),sr(B,q),B.activeTexture(B.TEXTURE1),sr(B,q),Q&&(ne(B,t.aUv),Hg(B,t.uTexture,!1),Hg(B,t.uBlendTexture,!1))},qq=function(z,H,O,R,A,I){!O||K||L||z.lineWidth(O),R&&!z._picking&&Hg(z,H.uFixPickReverseColor,R),A&&nj(z,A,I,H.aPosition)},Qq=function(B,S,O,V){Ii&&(V=B[Ii]),B.drawArrays(V==q?B.TRIANGLES:V,S,O);var J=B._renderInfo;J&&(J.calls++,J.vertices+=O,(V==q||V===B.TRIANGLES)&&(J.faces+=O/3),V===B.LINES&&(J.lines+=O/2))},Kr=function(h,$,n,K){Ii&&(K=h[Ii]),h.drawElements(K==q?h.TRIANGLES:K,n,h.UNSIGNED_SHORT,$==q?0:2*$);var X=h._renderInfo;X&&(X.calls++,X.vertices+=n,(K==q||K===h.TRIANGLES)&&(X.faces+=n/3),K===h.LINES&&(X.lines+=n/2))},nj=function(d,p,k,g,R){var I=d.ARRAY_BUFFER;d.bindBuffer(I,p),k&&d.bufferData(I,k,d.STATIC_DRAW),g!=q&&d.vertexAttribPointer(g,R?R:3,d.FLOAT,!1,0,0)},qh=function(Y,V,F){var O=Y.ELEMENT_ARRAY_BUFFER;Y.bindBuffer(O,V),F&&Y.bufferData(O,F,Y.STATIC_DRAW)},Hg=function(k,l,v){if(v!=q&&l!=q){v=Gl(v);var j=v.length;3===j?k.uniform3fv(l,v):4===j?k.uniform4fv(l,v):16===j?k.uniformMatrix4fv(l,!1,v):go(v)?k.uniform1i(l,v?1:0):2===j?k.uniform2fv(l,v):k.uniform1f(l,v)}},lp=function(v,D){D!=q&&D>=0&&v.enableVertexAttribArray(D)},ne=function(I,u){u!=q&&u>=0&&I.disableVertexAttribArray(u)},$e=function(W,N){var e=W.getGL(),a=W._prg;W._7O=W._8O.pop(),N&&(Hg(e,a.uMVMatrix,W._7O),W._6O=N,Hg(e,a.uNMatrix,N))},nf=function(c,D){return D||(D=Ae()),xk(D,c),Vm(D),Hm(D),D},mo=function(n,W){var x=n.getGL(),p=n._prg,t=n._7O;W&&(n._8O.push(Mh(t)),Sq(t,t,W)),Hg(x,p.uMVMatrix,t),Hg(x,p.uNMatrix,nf(t,n._6O))},Wr=function(g,u,j,p,b,Z){if(j){if(p){var z=j.value++,f=[(255&z>>24)/255,(255&z>>16)/255,(255&z>>8)/255,(255&z)/255];j[z]={data:b,part:Z}}else f=Ci;return Hg(g,u.uFixPickReverseColor,f),f}},Cg=function(){var P={center:function(W,q,F,B,Z){var $=-q[1]/2,j={x:-q[0]/2,y:$,width:q[0],height:q[1]},h=_m(W,j,F);return[h.x+B,-h.y-Z,Im()]},front:function(e,v,X,K,Q){var W=-v[1]/2,P={x:-v[0]/2,y:W,width:v[0],height:v[1]},i=_m(e,P,X);return[i.x+K,-i.y-Q,v[2]/2+Im()]},back:function(a,f,g,V,j){var P=-f[0]/2,J=-f[1]/2,o={x:P,y:J,width:f[0],height:f[1]},M=_m(a,o,g);return[-M.x-V,-M.y-j,-f[2]/2-Im()]},left:function(u,R,D,r,H){var w=-R[1]/2,g={x:-R[2]/2,y:w,width:R[2],height:R[1]},X=_m(u,g,D);return[-R[0]/2-Im(),-X.y-H,X.x+r]},right:function(j,H,O,E,B){var P=-H[2]/2,s=-H[1]/2,L={x:P,y:s,width:H[2],height:H[1]},p=_m(j,L,O);return[H[0]/2+Im(),-p.y-B,-p.x-E]},top:function(_,x,k,P,U){var F={x:-x[0]/2,y:-x[2]/2,width:x[0],height:x[2]},m=_m(_,F,k);return[m.x+P,x[1]/2+Im(),m.y+U]},bottom:function(X,W,p,T,O){var C=-W[2]/2,w={x:-W[0]/2,y:C,width:W[0],height:W[2]},x=_m(X,w,p);return[x.x+T,-W[1]/2-Im(),-x.y-O]}};return function(T,w,r,R,i,J){return P[R](T,w,r,i||0,J||0)}}(),ef=function(g,J,$,p,I,s,C,L,G,N){if(I&&(J[0]+=I[0],J[1]+=I[1],J[2]+=I[2]),yd(g,$),L){var Y=Ae();if(en(Y,G,N),tl(J,Y),yd(g,J),g.auto=L,g.pos=tl([0,0,0],g),s){var Q=g.mat2=Ae();en(Q,s,C)}}else en(g,G,N),yd(g,J),p===qg?Fn(g,-h):p===Ai?Fn(g,h):p===jo?qe(g,-h):p===rs?qe(g,h):p===Uc&&Fn(g,F),en(g,s,C);return g},Wg=function(G,$){var q=$.auto,i=$.mat2,I=G.gv;if(q){var p,m=Ae(),o=[0,0,0,0];p="string"==typeof q?[q.indexOf("x")<0?I._eye[0]:I._center[0],q.indexOf("y")<0?I._eye[1]:I._center[1],q.indexOf("z")<0?I._eye[2]:I._center[2]]:I._eye,qd(o,or(Ae(),p,I._center,I._up)),Ud(m,Qn(o,o),$.pos),i&&Sq(m,m,i),mo(I,m)}else mo(I,$)},hs=function(b,H,z,S,X){var E=b.s,s=b.gv,e=s.getGL(),j=s._prg,F=s._buffer,T=s._1O;Ih(e,fh,T),Wg(b,z),lg(e,j,E(H+".blend"),E(H+".light"),E(H+".opacity"),E(H+".reverse.flip"),E(H+".reverse.color"),E(H+".reverse.cull")),_j(e,j,T,X,F.uv,wh),nj(e,F.vs,S,j.aPosition),nj(e,F.ns,nm,j.aNormal),qh(e,F.is,gl),Kr(e,0,gl.length),sk(e,j,T),ab(e,j),$e(s)},Tk=function(R,t,Z){var h=R.gv,s=R.data,x=R[t]={blend:h.getBodyColor(s)||h.getFaceBlend(s,t),light:h.getFaceLight(s,t),color:h.getFaceColor(s,t),opacity:h.getFaceOpacity(s,t),transparent:h.getFaceTransparent(s,t),reverseFlip:h.getFaceReverseFlip(s,t),reverseColor:h.getFaceReverseColor(s,t),reverseCull:h.getFaceReverseCull(s,t),texture:h.getFaceImage(s,t),blendTexture:h.getFaceBlendImage(s,t),discardSelectable:h.getFaceDiscardSelectable(s,t)};if("csg"!==t){x.uv=h.getFaceUv(s,t)||Z&&Z[t+"Uv"],x.uvScale=h.getFaceUvScale(s,t)||Z&&Z[t+"UvScale"],x.uvOffset=h.getFaceUvOffset(s,t)||Z&&Z[t+"UvOffset"];var W=h.getFaceMat(s,t);W&&(x.mat=wp(s,W))}return x},_e=function(S,F,s,G,l){if(G){if(!l(G.transparent))return;var t=S.data,Z=S.gv,J=Z._buffer,A=Z.getTexture(G.texture,t),H=Z.getTexture(G.blendTexture,t);_j(F,s,A,G.discardSelectable,J.uv,G.tuv,G.uvOffset,G.uvScale,H),lg(F,s,G.blend,G.light,G.opacity,G.reverseFlip,G.reverseColor,G.reverseCull),Hg(F,s.uDiffuse,G.color),nj(F,J.vs,G.vs,s.aPosition),nj(F,J.ns,G.ns,s.aNormal),Qq(F,0,G.vs.length/3),ab(F,s),sk(F,s,A)}},vb=function(N,A,f,a,x,o){var h,O,J,b,X,Z,B,g,C,T,s,y=[a-A,x-f],I=N?N.length:0;for(J=0;I>J;J++){for(b=2,h=N[J],X=h[0],Z=h[1];b+1<h.length;){if(B=h[b],g=h[b+1],O=ji(A,f,a,x,X,Z,B,g,!0)){C=[B-X,g-Z],T=Yh(C),C[0]/=T,C[1]/=T,T=yb(y,C),T=T>0?o:-o,s=[C[0]*T,C[1]*T];break}X=B,Z=g,b+=2}if(s)break}if(s)for(a=A+s[0],x=f+s[1],J=0;I>J;J++)for(b=2,h=N[J],X=h[0],Z=h[1];b+1<h.length;){if(B=h[b],g=h[b+1],O=ji(A,f,a,x,X,Z,B,g,!0))return[0,0];X=B,Z=g,b+=2}return s?s:[a-A,x-f]},Fi=s.graph3d={},bf=function(Z,s,A){Xd(p+".graph3d."+Z,s,A)},Ic="~<yfusfw!+!yjsubNQv!>!opjujtpQ`mh!gjeof$!~<fdobutjEfojMb!>!fdobutjEfojMw|*itbEv)gj!ITBE!gfegj$!!gjeof$!~<ttfouihjsCidubCb!>!ttfouihjsCidubCw|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!~<eofmCidubCb!>!eofmCidubCw|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!!gjeof$!~<spmpDidubCb!>!spmpDidubCw|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!~<wVb!>!wVs|*fsvuyfUeofmCv)gj~<x{/fmbdTuftggPv!+!wVb!,!zy/fmbdTuftggPv!>!wVw|*fsvuyfUv)gj~<*yfusfw)4dfw!>!yfusfWw<**1/2!-mbnspOb)5dfw!+!yjsubNOv)4dfw!>!mbnspOw|*ldjQva!%%!yjGva)gj<*1/2!-opjujtpQb)5dfw!+!yjsubNWNv!>!yfusfw!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEfojMb!ubpmg!fuvcjsuub<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCb!4dfw!fuvcjsuub<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCb!ubpmg!fuvcjsuub<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCb!5dfw!fuvcjsuub<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<yjGv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjsubNxfjWv!5ubn!nspgjov<yjsubNOv!5ubn!nspgjov<yjsubNQv!5ubn!nspgjov<yjsubNWNv!5ubn!nspgjov<opjujtpQb!4dfw!fuvcjsuub<mbnspOb!4dfw!fuvcjsuub<wVs!3dfw!hojzsbw<wVw!3dfw!hojzsbw<wVb!3dfw!fuvcjsuub<fmbdTuftggPv!5dfw!nspgjov<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov!YJGFSQ^#CBRBEJxTT87hJFI,,bX1XrIwcn3UM{ZeZ,M6HEN6nLxe2Z72s2:3johr6foKrpqwxNKYkdbJ2CN[mBbf[wXU,T0oGuSEd190ohLZkEn8IuCe[OHoWeKz:Sf,VS7xdSLw23W1YJLU:jdv2{hiDbhDzNNEh9tp3xsuEp94Sl4c3wRzqwShMDRhCLRjCDEBOH5BBVRBCFRE4cJTHrTDH1BNgHJN",os="~~<eJ!>!spmpDhbsG`mh~<spmpDsfmqnbTwv!>+!eJ<*wVs!-sfmqnbTeofmCv)E3fsvuyfu!>!spmpDsfmqnbTwv!5dfw|!*fsvuyfUeofmCv)!gj!!gjeof$!~<ttfouihjsCidubCw!>+!chs/eJ!!!|*ttfouihjsCidubCv)gj!TTFOUIHJSCIDUBC!gfegj$!~<ttfouihjsCv!>+!chs/eJ!!!|*1/2!>a!ttfouihjsCv)gj~~<zujdbqPusbQv!>+!b/eJ!!!|*1/2!>a!zujdbqPusbQv)gj~!gjeof$!<*spudbGhpg!-*x/eJ!-chs/spmpDhpGv)5dfw!-eJ)yjn!>!eJ<*iuqfe!-sbGhpGv!-sbfOhpGv)qfutiuppnt!>!spudbGhpg!ubpmg<x/esppDhbsG`mh0{/esppDhbsG`mh!>!iuqfe!ubpmg!HPG!gfegj$!!gjeof$!~~~~<chs/^j]spmpDupqTv!+!udfggFupqt!+!fhobSm!+!*1/1!-*mbnspOm.!-O)upe)ybn!>,!chs/eJ<*1/1!-*^j]uofopqyFupqTv!-udfggFupqt)xpq)ybn!>!udfggFupqt|*^j]fmhoBupqTv!?!udfggFupqt)gj<*mbnspOm!-^j]opjudfsjEupqTv)upe!>!udfggFupqt!ubpmg<*spudfWm)f{jmbnspo!>!mbnspOm!4dfw|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSupqTv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSupqTv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQupqTv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDupqTv)gj|!*,,j!<UPQT`YBN!=!j!<1>j!uoj)spg!1!?!UPQT`YBN!gj$!!gjeof$!~~~<chs/^j]spmpDuojpQv!+!fhobSm!+!*1/1!-**spudfWm)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!?!fhobSm)!gj~<*1/2!-*^j]fhobSuojpQv!0!*spudfWm)iuhofm))ojn!.!1/2!>!fhobSm|*1/1!?!^j]fhobSuojpQv)!gj<1/2!>!fhobSm!ubpmg<^j]opjujtpQuojpQv!.!yfusfWw!>!spudfWm!4dfw|*1/1!>>!x/^j]spmpDuojpQv)gj|!*,,j!<UOJPQ`YBN!=!j!<1>j!uoj)spg!1!?!UOJPQ`YBN!gj$!!gjeof$!~~<chs/^j]spmpDsjEv!+!*1/1!-**^j]opjudfsjEsjEv)f{jmbnspo.!-O)upe)ybn!>,!chs/eJ|*1/1!>>!x/^j]spmpDsjEv)gj|!*,,j!<SJE`YBN!=!j!<1>j!uoj)spg!1!?!SJE`YBN!gj$!~<chs/spmpDuihjmebfIv!+!nsfUusfcnbm!>+!chs/eJ~<*1/2!-fhobSuihjmebfIv0*yfusfWw)iuhofm)ojn!.!1/2!!>+!nsfUusfcnbm|*1/1!?!fhobSuihjmebfIv)gj<*1/1!-6/1!,!6/1!+!*M.!-O)upe)ybn!>!nsfUusfcnbm!ubpmg|*1/1!>>!x/spmpDuihjmebfIv)gj|*uihjMv)gj~!gjeof$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf$!~<spmpDeofmCv!>+!eJ|*eofmCv)gj!ftmf~<eofmCidubCw!>+!chs/eJ|*eofmCidubCv)gj!EOFMCIDUBC!gfegj$!~<spmpd!>!eJ|ftmf~<spmpDwv!>!eJ|*fsvuyfUv)gj|!ftmf~<spmpDftsfwfSldjQyjGv!>!eJ|*qjmGftsfwfSva!%%!ldbCtj)gj~<fvsu!>!ldbCtj<O.!>!O|*1/1!=!*O!-F)upe)gj<ftmbg!>!ldbCtj!mppc<F.!>!M!4dfw<*yfusfWw.)f{jmbnspo!>!F!4dfw<*mbnspOw)f{jmbnspo!>!O!4dfw!gjeof$!<ftvggjEv!>!spmpd!ftmf$!~<ftvggjEv!>!spmpd|ftmf~<spmpDidubCw!>!spmpd|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!<spmpd!5dfw|!ftmf~!gjeof$!~~<ftvggjEv!>!eJ|ftmf~<esbdtje|*1/1!>>!x/ftvggjEv)gj|!*!fdobutjEitbEv!?!*!fdobutjEqbHitbEv!-fdobutjEfojMw!)epn!%%!itbEv)!gj!ITBE!gfegj$!!gjeof$!<spmpDftsfwfSldjQyjGv!>!eJ!ftmf$!~<spmpDftsfwfSldjQyjGv!>!eJ|ftmf~<spmpDidubCw!>!eJ|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*yjGv)gj<eJ!5dfw|ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDhbsG`mh)!gj!gjeof$!<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh!ftmf$!~<spmpDftsfwfSldjQyjGv!>!spmpDhbsG`mh|ftmf~<spmpDidubCw!>!spmpDhbsG`mh|*spmpDidubCv)gj!SPMPDIDUBC!gfegj$!|*ldjQv)gj~~~!<esbdtje!|!*utfUbiqmBv!>=!b/spmpDwv)!gj!!!!|!ftmf~~!<esbdtje!|!*1/1!>>!b/spmpDwv)!gj!!!!|!*uofsbqtobsUv)!gj<*wVw!-sfmqnbTv)E3fsvuyfu!>!spmpDwv|**fmcbudfmfTesbdtjEv!%%!ldjQv)a!%%!fsvuyfUv)gj<spmpDwv!5dfw|!*ejpw)ojbn!ejpw!gjeof$!<fdobutjEfojMw!ubpmg!hojzsbw<fdobutjEqbHitbEv!ubpmg!nspgjov<fdobutjEitbEv!ubpmg!nspgjov<itbEv!mppc!nspgjov!ITBE!gfegj$!!gjeof$!<sbGhpGv!ubpmg!nspgjov<sbfOhpGv!ubpmg!nspgjov<spmpDhpGv!5dfw!nspgjov!HPG!gfegj$!!gjeof$!<^UPQT`YBN]opjudfsjEupqTv!4dfw!nspgjov<^UPQT`YBN]opjujtpQupqTv!4dfw!nspgjov<^UPQT`YBN]fhobSupqTv!ubpmg!nspgjov<^UPQT`YBN]fmhoBupqTv!ubpmg!nspgjov<^UPQT`YBN]uofopqyFupqTv!ubpmg!nspgjov<^UPQT`YBN]spmpDupqTv!5dfw!nspgjov!1!?!UPQT`YBN!gj$!!gjeof$!<^UOJPQ`YBN]opjujtpQuojpQv!4dfw!nspgjov<^UOJPQ`YBN]fhobSuojpQv!ubpmg!nspgjov<^UOJPQ`YBN]spmpDuojpQv!5dfw!nspgjov!1!?!UOJPQ`YBN!gj$!!gjeof$!<^SJE`YBN]opjudfsjEsjEv!4dfw!nspgjov<^SJE`YBN]spmpDsjEv!5dfw!nspgjov!1!?!SJE`YBN!gj$!!gjeof$!<eofmCidubCw!4dfw!hojzsbw<eofmCidubCv!mppc!nspgjov!EOFMCIDUBC!gfegj$!!gjeof$!<ttfouihjsCidubCw!ubpmg!hojzsbw<ttfouihjsCidubCv!mppc!nspgjov!TTFOUIHJSCIDUBC!gfegj$!!gjeof$!<spmpDidubCw!5dfw!hojzsbw<spmpDidubCv!mppc!nspgjov!SPMPDIDUBC!gfegj$!<spmpDuihjmebfIv!5dfw!nspgjov<fhobSuihjmebfIv!ubpmg!nspgjov<yfusfWw!4dfw!hojzsbw<mbnspOw!4dfw!hojzsbw<ftvggjEv!5dfw!nspgjov<zujdbqPusbQv!ubpmg!nspgjov<ttfouihjsCv!ubpmg!nspgjov<uihjMv!mppc!nspgjov<spmpDeofmCv!5dfw!nspgjov<eofmCv!mppc!nspgjov<wVs!3dfw!hojzsbw<sfmqnbTeofmCv!E3sfmqnbt!nspgjov<sfmqnbTv!E3sfmqnbt!nspgjov<wVw!3dfw!hojzsbw<fsvuyfUeofmCv!mppc!nspgjov<fsvuyfUv!mppc!nspgjov<uofsbqtobsUv!mppc!nspgjov<utfUbiqmBv!ubpmg!nspgjov<spmpDftsfwfSldjQyjGv!5dfw!nspgjov<qjmGftsfwfSv!mppc!nspgjov<ldjQv!mppc!nspgjov<yjGv!mppc!nspgjov<fmcbudfmfTesbdtjEv!mppc!nspgjov!YJGFSQ!gjeof$!!gjeof$!!<ubpmg!qnvjefn!opjtjdfsq!!ftmf$!!<ubpmg!qihji!opjtjdfsq!!IHJI`OPJTJDFSQ`UOFNHBSG`MH!gfegj$!!TF`MH!gfegj$!";As(u,{setBatchInfo:function(J,z){Mj[J]=z},getBatchInfo:function(k){return Mj[k]}},!0);var Gb=[1,1,1],km=[1,0,0,0,0,1,0,1,1,1,1,0],Eo=[-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5],ts=[.5,.5,-.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5],Cf=[.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5],Wo=[.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5],uk=[.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5],Xb=[-.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5],nq=function(j,P){Ym(j,P),ib(j,P,"_wireframeModelMap","_wireframeIndexMap"),ib(j,P,"_polylineModelMap","_polylineIndexMap"),ib(j,P,"_wireframeModelMapSwap","_wireframeIndexMapSwap"),ib(j,P,"_polylineModelMapSwap","_polylineIndexMapSwap")},Ym=function(O,R){if(R){var f,m,$=R._id,v=O._33O,P=O._34O,N=P[$];if(N){m=N.batch,f=v[m];var i=N.begin,S=N.size,D=3*i,e=3*S,F=4*i,r=4*S,Z=f.vs,j=f.uv,_=f.cs,g=f.bs,I=f.rs,L=f.ds,b=N.index;if(f.invalidate=!0,delete P[$],L.splice(b,1),qm(L))delete v[m];else{for(;b<L.length;b++)N=P[L[b]._id],N.index--,N.begin-=S;Z.splice(D,e),f.ns.splice(D,e),f.ps.splice(F,r),j&&j.splice(2*i,2*S),_&&_.splice(F,r),g&&g.splice(D,e),I&&I.splice(i,S)}}}else O._34O={},O._33O={}},ib=function(F,A,k,r){if(A){var V,Q,Z=A._id,$=F[k],U=F[r],h=U[Z];if(h){Q=h.batch,V=$[Q];var P=h.begin,w=h.size,c=3*P,W=3*w,j=4*P,J=4*w,s=V.ds,R=h.index;if(V.invalidate=!0,delete U[Z],s.splice(R,1),qm(s))delete $[Q];else{for(;R<s.length;R++)h=U[s[R]._id],h.index--,h.begin-=w;V.vs.splice(c,W),V.cs.splice(j,J),V.ps.splice(j,J),V.ls&&V.ls.splice(P,w)}}}else F[k]={},F[r]={}},Yj=function(U,S,L,Z){if(!Z)return q;var Q=S[Z];if(!Q){var y=Mj[Z]||yj,E=y.image?[]:q;Q=S[Z]={vs:[],ns:[],uv:E,cs:E?q:y.color?q:[],bs:y.blend?[]:q,ps:[],rs:y.brightness?[]:q,ds:[]}}return Q.invalidate=!0,U[L._id]={index:Q.ds.length,begin:Q.vs.length/3,batch:Z},Q.ds.push(L),Q},Hr=function(k,g){return g!=q&&1!==g?[k[0]*g,k[1]*g,k[2]*g,k[3]]:k},ol=function(l,P,g){var B=l.getBrightness(P),X=Gl(g.color||"white"),h=X[3]<1,o=Math.ceil(g.width)||1,A=(h?"T":"O")+o,H=l._wireframeIndexMap,x=l._wireframeModelMap,D=x[A];D||(D=x[A]={vs:[],cs:[],ps:[],ds:[],T:h,W:o});var t,Q=l.getData3dUI(P),G=Wl(Q);if(g.geometry){if(!G)return;if(t=ym(G),!t)return}else t=g.short?kj:lk;D.invalidate=!0;var j=D.vs,w=D.cs,f=D.ds,p=H[P._id]={index:f.length,begin:j.length/3,batch:A};f.push(P);var v=wp(P,g.mat),Y=Q._calcAnchorMat(P);Y&&Sq(v,v,Y),Io(j,v,t);var i=p.size=j.length/3-p.begin;$n(w,Hr(X,B),i)},Vr=function(C,h,L,r,P,g,t,M,p){var x=C.getBrightness(h);x==q&&(x=1);var A=Hr(Gl(r),x),a=A[3]<1;g=Math.ceil(g)||1;var c=(a?"T":"O")+g;if(t){var J=t[0],d=(t[1]||J)+J;c+="-"+J+"-"+d,p&&(c+="-"+Uk(p)+"-"+x,p=Hr(Gl(p),x))}var N=C._polylineIndexMap,T=C._polylineModelMap,H=T[c];H||(H=T[c]={vs:[],cs:[],ps:[],ds:[],ls:t?[]:q,T:a,W:g},t&&(H.D=J,H.G=d,H.A=p)),H.invalidate=!0;var I,W=H.vs,R=H.cs,Y=H.ds,O=H.ls,$=N[h._id]={index:Y.length,begin:W.length/3,batch:c};Y.push(h),Hd(W,L);var v,u=$.size=W.length/3-$.begin,E=L.length,G=0,V=[];if(t||P)for(I=0;E>I;I+=6)v=Yh([L[I],L[I+1],L[I+2]],[L[I+3],L[I+4],L[I+5]]),V.push(v),G+=v;if(G&&P){var b,z=Hr(Gl(P),x),S=[z[0]-A[0],z[1]-A[1],z[2]-A[2],z[3]-A[3]],F=0;for(I=0;E>I;I+=6)b=F/G,$n(R,[A[0]+S[0]*b,A[1]+S[1]*b,A[2]+S[2]*b,A[3]+S[3]*b],1),F+=V[I/6],b=F/G,$n(R,[A[0]+S[0]*b,A[1]+S[1]*b,A[2]+S[2]*b,A[3]+S[3]*b],1)}else $n(R,A,u);if(t)for(F=M||0,I=0;E>I;I+=6)O.push(F),F+=V[I/6],O.push(F)},Db=function(e,r,m){if(r)for(var q=4*r.begin,I=m[r.batch].ps,b=0;b<r.size;b++)I[q++]=e[0],I[q++]=e[1],I[q++]=e[2],I[q++]=e[3]},ml=function(a,e){var Z=e+["32"],$=a[e],g=a[Z];$?g&&g.length===$.length?g.set($):a[Z]=new aj($):delete a[Z]},xq=function(h,G,$,O,K,b,Z,F,t){if(Nc($))$.forEach(function(g){xq(h,G,g,O,K,b,Z,F,t)});else if(Me($))xq(h,G,Wl(O,$),O,K,b,Z,F,t);else if(we($)){var e,S=oj($.mat,G,h),B=oj($.s3,G,h),f=oj($.t3,G,h),E=oj($.r3,G,h);if((B||E||f||S)&&(e=Bn(S,B,E,oj($.rotationMode,G,h),f),b.push(e)),$.shape3d)xq(h,G,$.shape3d,O,K,b,Z,F,$);else{var i=O.s;t=t||yj;var P=b[0],L=b.length,u=i("shape3d.color",$.color,t.color);if(K||(K=i("shape3d.blend",$.blend,t.blend)),L>1){P=Mh(P);for(var g=1;L>g;g++)Sq(P,P,b[g])}$.vs&&i(Om,$.visible,t.visible)&&Bh(P,Z,F,$.vs,$.uv,$.is,K,u),$.top_vs&&i(_n,$.topVisible,t.topVisible)&&Bh(P,Z,F,$.top_vs,$.top_uv,$.top_is,K,i("shape3d.top.color",$.topColor,t.topColor)||u),$.bottom_vs&&i(dn,$.bottomVisible,t.bottomVisible)&&Bh(P,Z,F,$.bottom_vs,$.bottom_uv,$.bottom_is,K,i("shape3d.bottom.color",$.bottomColor,t.bottomColor)||u),$.from_vs&&i(oo,$.fromVisible,t.fromVisible)&&Bh(P,Z,F,$.from_vs,$.from_uv,$.from_is,K,i("shape3d.from.color",$.fromColor,t.fromColor)||u),$.to_vs&&i(Vf,$.toVisible,t.toVisible)&&Bh(P,Z,F,$.to_vs,$.to_uv,$.to_is,K,i("shape3d.to.color",$.toColor,t.toColor)||u)}e&&b.pop()}},Bh=function(M,P,Q,R,r,D,B,a){var p,i=P.cs,m=P.uv,S=P.bs;if(D){p=D.length;for(var C=0;p>C;C++){var F=D[C];Io(Q,M,[R[3*F],R[3*F+1],R[3*F+2]]),m&&Hd(m,[r[2*F],r[2*F+1]])}}else p=R.length/3,Io(Q,M,R),m&&Hd(m,r);i&&$n(i,a,p),S&&(B?sb(S,B,p):Hd(S,Gb,p))},lb=function(g,F,U,w){var K=[];w?xq(g.gv,g.data,w,g,g.getBodyColor(),[F],U,K):(Ro(g,qg,F,U,K),Ro(g,Ai,F,U,K),Ro(g,fj,F,U,K),Ro(g,Uc,F,U,K),Ro(g,jo,F,U,K),Ro(g,rs,F,U,K),Ro(g,"csg",F,U,K)),K.length&&(Hd(U.vs,K),Hd(U.ns,Qf(K)))},Ro=function(Y,N,b,C,F){var T=Y[N];if(T){var O=T.tuv;if(O){var f,$,P,J,e=T.uvScale,A=T.uvOffset;if(e)for(f=O.length,$=e[0],P=e[1],J=0;f>J;J+=2)O[J]*=$,O[J+1]*=P;if(A)for(f=O.length,$=A[0],P=A[1],J=0;f>J;J+=2)O[J]+=$,O[J+1]+=P}Bh(b,C,F,T.vs,O,q,T.blend,T.color)}},Qk=function(d,k,m,b,y,c,D,Q){var f,_=m.cs,z=m.uv,Z=m.bs;if(d.getFaceVisible(k,c)){var Y=d.getFaceMat(k,c);if(Y&&(y=wp(k,Y)),Io(D,y,Q),_&&$n(_,d.getFaceColor(k,c),6),z){var G=d.getFaceUv(k,c)||b[c+"Uv"],j=d.getFaceUvScale(k,c)||b[c+"UvScale"],u=d.getFaceUvOffset(k,c)||b[c+"UvOffset"];G=G?[G[6],G[7],G[0],G[1],G[2],G[3],G[2],G[3],G[4],G[5],G[6],G[7]]:km;var l=G[0],P=G[1],U=G[2],E=G[3],p=G[4],g=G[5],C=G[6],L=G[7],s=G[8],e=G[9],T=G[10],r=G[11];if(j){var J=j[0],I=j[1];l*=J,P*=I,U*=J,E*=I,p*=J,g*=I,C*=J,L*=I,s*=J,e*=I,T*=J,r*=I}if(u){var $=u[0],N=u[1];l+=$,P+=N,U+=$,E+=N,p+=$,g+=N,C+=$,L+=N,s+=$,e+=N,T+=$,r+=N}z.push(l,P,U,E,p,g,C,L,s,e,T,r)}Z&&(f=d.getBodyColor(k)||d.getFaceBlend(k,c),f?sb(Z,f,6):Hd(Z,Gb,6))}},cf=function(A,x,o,N){var M=A.getGL(),u=A._prg,l=A._buffer;if(!Af(x)){mo(A),vl(M,u);for(var r in x){var E=x[r];if(!(N&&!E.T||!N&&E.T)){E.invalidate?(E.invalidate=!1,ml(E,"vs"),ml(E,"cs"),ml(E,"ls"),ml(E,"ps")):o&&ml(E,"ps");var h=E.vs32,I=o?E.ps32:E.cs32;qq(M,u,E.W,q,l.vs,h);var s=E.D,D=!A._dashDisabled&&s;Hg(M,u.uAlphaTest,C.alphaTest),D&&(Hg(M,u.uDash,!0),Hg(M,u.uDashDistance,s),Hg(M,u.uDashGapDistance,E.G),lp(M,u.aLineDistance),nj(M,l.lineDistance,E.ls32,u.aLineDistance,1),Hg(M,u.uDiffuse,E.A||po));var J=!A._batchColorDisabled;J&&(Hg(M,u.uBatchColor,!0),lp(M,u.aBatchColor),nj(M,l.batchColor,I,u.aBatchColor,4)),_j(M),Qq(M,0,h.length/3,M.LINES),sk(M),J&&(Hg(M,u.uBatchColor,!1),ne(M,u.aBatchColor)),D&&(Hg(M,u.uDash,!1),ne(M,u.aLineDistance))}}xf(M,u)}},kp=function(Y,H,h){var f,n,F,c,J,y,E,p,P,d,R,w=Y.getGL(),Z=Y._prg,A=Y._buffer,K=Y._33O;if(!Af(K)){mo(Y);for(f in K)if(n=Mj[f]||yj,!(h&&!n.transparent||!h&&n.transparent)&&(F=K[f],H||!n.transparentMask)){var t=h&&n.autoSort!==!1&&(Y._33Q||F.invalidate);if(F.invalidate?(F.invalidate=!1,ml(F,"vs"),ml(F,"ns"),ml(F,"cs"),ml(F,"rs"),ml(F,"ps"),ml(F,"bs"),ml(F,"uv")):H&&ml(F,"ps"),J=F.vs32,y=H?F.ps32:F.cs32,P=F.uv32,E=F.bs32,p=F.rs32,R=J.length/3,t&&(F.is=gq(J,Y.getEye())),R){c=n.light,d=Y.getTexture(n.image),lg(w,Z,q,n.light,n.opacity,n.reverseFlip,n.reverseColor,n.reverseCull),y?Y._batchColorDisabled||(Hg(w,Z.uBatchColor,!0),lp(w,Z.aBatchColor),nj(w,A.batchColor,y,Z.aBatchColor,4)):Hg(w,Z.uDiffuse,n.color);var N=n.alphaTest;Hg(w,Z.uAlphaTest,N===m?C.alphaTest:N);var D=E&&!Y._batchBlendDisabled;D&&(Hg(w,Z.uBatchBlend,!0),lp(w,Z.aBatchBlend),nj(w,A.batchBlend,E,Z.aBatchBlend));var L=p&&!Y._batchBrightnessDisabled;L&&(Hg(w,Z.uBatchBrightness,!0),lp(w,Z.aBatchBrightness),nj(w,A.batchBrightness,p,Z.aBatchBrightness,1)),P?_j(w,Z,d,n.discardSelectable,A.uv,P,n.uvOffset,n.uvScale):_j(w),nj(w,A.vs,J,Z.aPosition),nj(w,A.ns,F.ns32,Z.aNormal),F.is?(qh(w,A.is,F.is),Kr(w,0,R)):Qq(w,0,R),P?sk(w,Z,d):sk(w),y&&!Y._batchColorDisabled&&(Hg(w,Z.uBatchColor,!1),ne(w,Z.aBatchColor)),D&&(Hg(w,Z.uBatchBlend,!1),ne(w,Z.aBatchBlend)),L&&(Hg(w,Z.uBatchBrightness,!1),ne(w,Z.aBatchBrightness)),ab(w,Z)}}}},gq=function(H,$){for(var L=H.length/3,k=new Array(L),f=L/3,J=new Array(f),N=0;f>N;N++)J[N]=N;J.sort(function(q,N){var y=9*q,M=[(H[y]+H[y+3]+2*H[y+6])/4,(H[y+1]+H[y+4]+2*H[y+7])/4,(H[y+2]+H[y+5]+2*H[y+8])/4];y=9*N;var s=[(H[y]+H[y+3]+2*H[y+6])/4,(H[y+1]+H[y+4]+2*H[y+7])/4,(H[y+2]+H[y+5]+2*H[y+8])/4],B=Yh($,M)-Yh($,s);return B>0?-1:0>B?1:0});for(var N=0;f>N;N++){var C=3*N,z=3*J[N];k[C]=z,k[C+1]=z+1,k[C+2]=z+2}return new To(k)};u.handleModelLoaded=function(){},u.handleUnfoundModel=function(){};var Ar=q,ed=q,Ko=function(H){Ar&&!H._loadingModelView_&&(ed||(ed={}),ed[H._loadingModelView_=Di()]=H)},Oq=function($,m){Ar||(Ar={});var I=Ar[$];if(I){if(I.url===m)return;I.request.onload=Ej,I.request.onerror=Ej}var t=new XMLHttpRequest;if(Ar[$]={request:t,url:m},t.overrideMimeType&&t.overrideMimeType("text/plain"),m=u.beforeLoadURL(m),m.data){var v=u.parse(m.data);Em($,v),u.handleModelLoaded($,v)}else t.open("GET",encodeURI(m),!0),t.onload=function(w){if(200===this.status||0===this.status){var i=u.parse(w.target.response||w.target.responseText);if("obj"===i.modelType){var s={cube:!0,center:!0,finishFunc:function(Y,S){if(Y){var S=[];for(var W in Y){var L=Y[W];S.rawS3=L.rawS3,S.push(L)}S.json=i,Em($,S),u.handleModelLoaded($,S)}else Em($,u.handleUnfoundModel($,m)||q)}};u.loadObj(i.obj,i.mtl,s)}}else Em($,u.handleUnfoundModel($,m)||q)},t.onerror=function(){Em($,u.handleUnfoundModel($,m)||q)},t.send(null)},Em=function(e,b){if(Eh[e]=b,delete Ar[e],Af(Ar)&&(Ar=q,ed)){for(var F in ed){var Y=ed[F];Y._2O&&(Y._2O={}),Y.invalidateAll&&Y.invalidateAll(m,"modelLoaded",e),Y.redraw&&Y.redraw(),Y.iv(),delete Y._loadingModelView_}ed=q}if(b&&ed)for(var F in ed){var Y=ed[F];Y.invalidateAll&&Y.invalidateAll(m,"modelLoading",e),Y.redraw&&Y.redraw(),Y.iv()}},wh=new aj([0,0,0,1,1,1,1,0]),nm=new aj([0,0,1,0,0,1,0,0,1,0,0,1]),gl=new To([0,1,2,2,3,0]),zg=new aj([-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,.5]),hc=new To([0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]),qs=new aj([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),wq=new aj([0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0,0,0,0,1,1,1,1,0]),tb=Qf(zg,hc),lk=(new aj([-.5,.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,-.5,-.5,.5,.5,-.5,-.5,-.5,-.5,-.5,.5,-.5]),new To([0,1,2,3,0,7,5,4,6,7,5,3,2,4,6,1]),[-.5,.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,.5,.5,.5,.5,.5,.5,.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,-.5,-.5,-.5,-.5,.5,-.5,-.5,.5,-.5,-.5,.5,.5,-.5,.5,.5,-.5,-.5,.5,-.5,.5,.5,.5,.5,.5,-.5,.5,-.5,.5,.5,-.5,-.5,-.5,.5,.5,-.5,.5,-.5,-.5,-.5,.5,-.5,-.5,-.5]),kj=[-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,.5,.5,.5,.5,.5,.5,.4,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,.5,.5,-.5,.5,.5,-.5,.4,-.5,.5,-.5,-.4,.5,-.5,-.5,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,.5,.5,-.5,.4,.5,-.5,.5,.5,-.5,.5,.4,-.5,.5,.5,-.5,.5,.5,-.4,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,-.5,-.5,-.5,-.5,-.5,-.5,-.4,.5,-.5,-.5,.4,-.5,-.5,.5,-.5,-.5,.5,-.4,-.5,.5,-.5,-.5,.5,-.5,-.4],Xc=function(U,I,D,K,Z,h){h=h||16,U=U||16,I=I||0,D=D||U;
var N,b,v,e,i,g,T,J,E=.5,A=[],p=[],d=W/U,C=F/h;for(N=0;h>N;N++)for(i=N+1,e=N*C,J=i*C,b=I;D>b;b++)g=b+1,v=b*d,T=g*d,A.push(E*M(e)*z(v),E*z(e),-E*M(e)*M(v),E*M(J)*z(T),E*z(J),-E*M(J)*M(T),E*M(e)*z(T),E*z(e),-E*M(e)*M(T),E*M(e)*z(v),E*z(e),-E*M(e)*M(v),E*M(J)*z(v),E*z(J),-E*M(J)*M(v),E*M(J)*z(T),E*z(J),-E*M(J)*M(T)),p.push(b/U,N/h,g/U,i/h,g/U,N/h,b/U,N/h,b/U,i/h,g/U,i/h);if(K){var B=[],P=[];for(v=I*d,N=0;h>N;N++)i=N+1,e=N*C,J=i*C,B.push(0,0,0,E*M(J)*z(v),E*z(J),-E*M(J)*M(v),E*M(e)*z(v),E*z(e),-E*M(e)*M(v)),P.push(0,.5,I/U,i/h,I/U,N/h)}if(Z){var o=[],$=[];for(v=D*d,N=0;h>N;N++)i=N+1,e=N*C,J=i*C,o.push(0,0,0,E*M(e)*z(v),E*z(e),-E*M(e)*M(v),E*M(J)*z(v),E*z(J),-E*M(J)*M(v)),$.push(1,.5,D/U,N/h,D/U,i/h)}return{vs:A,uv:p,from_vs:B,from_uv:P,to_vs:o,to_uv:$}},xb=function(C,j,N){C=C||.17,j=j||12,N=N||18,0>C?C=0:C>.25&&(C=.25);var m,E,U,g,K,A,I,X=.5,k=[],D=[],H=[],l=W/N,n=W/j,Q=X-C;for(E=0;j>=E;E++)for(g=-F+E*n,A=z(g),K=M(g),m=0;N>=m;m++)U=m*l,I=Q+C*A,k.push(z(U)*I,K*C,-M(U)*I),D.push(m/N,1-E/j);for(E=0;j>E;E++){var V=E*(N+1),Y=(E+1)*(N+1);for(m=0;N>m;m++)H.push(V+m,Y+m+1,Y+m,V+m,V+m+1,Y+m+1)}return{vs:k,uv:D,is:H}},bs=function(J,$,p,m,q,A,c){c=c||12,J=J||18,$=$||0,p=p||J,A=A||.17,0>A?A=0:A>.25&&(A=.25);var f,P,C,B,s,E,X,v,Q,O,r=.5,K=[],L=[],D=W/J,k=W/c,g=r-A;for(C=0;c>C;C++)for(B=C+1,X=-F+C*k,v=-F+B*k,f=$;p>f;f++)P=f+1,s=f*D,E=P*D,Q=g+A*z(X),O=g+A*z(v),K.push(z(s)*Q,M(X)*A,-M(s)*Q,z(E)*Q,M(X)*A,-M(E)*Q,z(E)*O,M(v)*A,-M(E)*O,z(s)*Q,M(X)*A,-M(s)*Q,z(E)*O,M(v)*A,-M(E)*O,z(s)*O,M(v)*A,-M(s)*O),L.push(f/J,1-C/c,P/J,1-C/c,P/J,1-B/c,f/J,1-C/c,P/J,1-B/c,f/J,1-B/c);if(m){var e=[],o=[];for(C=0;c>C;C++)B=C+1,X=-F+C*k,v=-F+B*k,s=$*D,Q=g+A*z(X),O=g+A*z(v),e.push(z(s)*Q,M(X)*A,-M(s)*Q,z(s)*O,M(v)*A,-M(s)*O,z(s)*g,0,-M(s)*g),o.push(.5+.5*z(X),.5-.5*M(X),.5+.5*z(v),.5-.5*M(v),.5,.5)}if(q){var i=[],t=[];for(C=0;c>C;C++)B=C+1,X=-F+C*k,v=-F+B*k,s=p*D,Q=g+A*z(X),O=g+A*z(v),i.push(z(s)*Q,M(X)*A,-M(s)*Q,z(s)*g,0,-M(s)*g,z(s)*O,M(v)*A,-M(s)*O),t.push(.5-.5*z(X),.5-.5*M(X),.5,.5,.5-.5*z(v),.5-.5*M(v))}return{vs:K,uv:L,from_vs:e,from_uv:o,to_vs:i,to_uv:t}},Ik=function(S,v){for(var l,n,K,j=.5,c=16,L=[],q=[],r=[],$=W/c,o=0;c>=o;o++)l=o*$,n=z(l)*j,K=M(l)*j,L.push(n,-j,K,n,j,K),q.push(1-o/c,1,1-o/c,0);for(o=0;c>o;o++)r.push(2*o,2*o+1,2*o+3,2*o,2*o+3,2*o+2);if(v){var I=[],Z=[],m=[];for(I.push(0,-j,0),Z.push(.5,.5),o=0;c>=o;o++)l=o*$,n=z(l),K=M(l),I.push(n*j,-j,-K*j),Z.push(.5+.5*n,.5+.5*K);for(o=0;c>o;o++)m.push(0,o+2,o+1)}if(S){var V=[],a=[],N=[];for(V.push(0,j,0),a.push(.5,.5),o=0;c>=o;o++)l=o*$,n=z(l),K=M(l),V.push(n*j,j,-K*j),a.push(.5+.5*n,.5-.5*K);for(o=0;c>o;o++)N.push(0,o+1,o+2)}return{vs:L,uv:q,is:r,bottom_vs:I,bottom_uv:Z,bottom_is:m,top_vs:V,top_uv:a,top_is:N}},Bb=function(r,c,x,h,R,u,J){r=r||12,c=c||0,x=x||r;for(var m,f,d,L,j,n,K,k,l=.5,O=[],F=[],V=W/r,B=c;x>B;B++)m=B+1,f=B*V,d=m*V,L=z(f)*l,j=M(f)*l,n=z(d)*l,K=M(d)*l,O.push(L,-l,-j,n,-l,-K,L,l,-j,n,-l,-K,n,l,-K,L,l,-j),F.push(B/r,1,m/r,1,B/r,0,m/r,1,m/r,0,B/r,0);if(J){var Y=[],X=[];for(B=c;x>B;B++)f=V*B,d=V*(B+1),L=z(f),j=M(f),n=z(d),K=M(d),Y.push(L*l,-l,-j*l,0,-l,0,n*l,-l,-K*l),X.push(.5+.5*L,.5+.5*j,.5,.5,.5+.5*n,.5+.5*K)}if(u){var v=[],Q=[];for(B=c;x>B;B++)f=V*B,d=V*(B+1),L=z(f),j=M(f),n=z(d),K=M(d),v.push(L*l,l,-j*l,n*l,l,-K*l,0,l,0),Q.push(.5+.5*L,.5-.5*j,.5+.5*n,.5-.5*K,.5,.5)}if(h){var N=[],I=[];f=V*c,L=z(f)*l,j=M(f)*l,k=c/r,N.push(0,l,0,0,-l,0,L,-l,-j,L,-l,-j,L,l,-j,0,l,0),I.push(0,0,0,1,k,1,k,1,k,0,0,0)}if(R){var S=[],T=[];f=V*x,L=z(f)*l,j=M(f)*l,k=x/r,S.push(0,-l,0,0,l,0,L,l,-j,L,l,-j,L,-l,-j,0,-l,0),T.push(1,1,1,0,k,0,k,0,k,1,1,1)}return{vs:O,uv:F,bottom_vs:Y,bottom_uv:X,top_vs:v,top_uv:Q,from_vs:N,from_uv:I,to_vs:S,to_uv:T}},Dg=function(L,b,B,e,d){b=b||18,B=B||0,e=e==q?W:e,d=d==q?.5:d;for(var P,D,U,m,g,y,r=[0,.5,.75,.875,.9375],G=[],R=[],F=[],E=e/b,K=0;K<r.length;K++){var A=0===K%2?0:.5;for(P=0;b>=P;P++)D=(P+A)*E+B,U=1-r[K],G.push(z(D)*d*U,-d+2*r[K]*d,-M(D)*d*U),R.push((P+A)/b,U)}for(K=0;K<r.length-1;K++){var a=K*(b+1),h=(K+1)*(b+1);for(P=0;b>P;P++)F.push(a+P,h+P+1,h+P,a+P,a+P+1,h+P+1)}for(y=G.length/3-(b+1),P=0;b>P;P++)G.push(0,d,0),R.push((P+.5)/b,0);for(P=0;b>P;P++)F.push(y+P,y+P+1,y+(b+1)+P);if(L){var t=[],Y=[],C=[];for(t.push(0,-d,0),Y.push(.5,.5),P=0;b>=P;P++)D=P*E+B,m=z(D),g=M(D),t.push(m*d,-d,-g*d),Y.push(.5+.5*m,.5+.5*g);for(P=0;b>P;P++)C.push(0,P+2,P+1)}return{vs:G,uv:R,is:F,bottom_vs:t,bottom_uv:Y,bottom_is:C}},Ek=function(X,t,J,p,o,k){X=X||16,t=t||0,J=J||X;for(var v=.5,I=[],G=[],f=W/X,e=t;J>e;e++){var u=e+1,B=f*e,h=f*u;I.push(z(B)*v,-v,-M(B)*v,z(h)*v,-v,-M(h)*v,0,v,0),G.push(e/X,1,u/X,1,(e+u)/2/X,0)}if(k){var g=[],q=[];for(e=t;J>e;e++){B=f*e,h=f*(e+1);var U=z(B),H=M(B),i=z(h),V=M(h);g.push(U*v,-v,-H*v,0,-v,0,i*v,-v,-V*v),q.push(.5+.5*U,.5+.5*H,.5,.5,.5+.5*i,.5+.5*V)}}if(p){var K=[],Q=[];B=f*t,K.push(0,v,0,0,-v,0,z(B)*v,-v,-M(B)*v),Q.push(0,0,0,1,t/X,1)}if(o){var y=[],l=[];B=f*J,y.push(0,-v,0,0,v,0,z(B)*v,-v,-M(B)*v),l.push(1,1,1,0,J/X,1)}return{vs:I,uv:G,bottom_vs:g,bottom_uv:q,from_vs:K,from_uv:Q,to_vs:y,to_uv:l}},Pm=function(r,m,T,D,A,x,L,w){for(var X=[],k=0;k<r.length-1;k+=2)X.push({x:r[k],y:r[k+1]});return sl(X,m,T,D,A,x,L,w,!1)},ps={roundRect:function(N,c){return Pm([.5,.4,.5,.442,.471,.471,.442,.5,.4,.5,-.4,.5,-.442,.5,-.471,.471,-.5,.442,-.5,.4,-.5,-.4,-.5,-.442,-.471,-.471,-.442,-.5,-.4,-.5,.4,-.5,.442,-.5,.471,-.471,.5,-.442,.5,-.4,.5,.4],[1,3,3,2,3,3,2,3,3,2,3,3,2],N,c,3)},star:function(e,V){return Pm([.193,.079,.333,.5,0,.233,-.333,.5,-.194,.079,-.5,-.167,-.112,-.167,0,-.5,.111,-.167,.5,-.167],[1,2,2,2,2,2,2,2,2,2,5],e,V)},rect:function(V,Z){return Pm([.5,-.5,.5,.5,-.5,.5,-.5,-.5],[1,2,2,2,5],V,Z)},plane:function(){return{vs:[-.5,.5,0,-.5,-.5,0,.5,.5,0,.5,.5,0,-.5,-.5,0,.5,-.5,0],uv:[0,0,0,1,1,0,1,0,0,1,1,1],ns:[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1]}},triangle:function(R,s){return Pm([0,-.5,.5,.5,-.5,.5],[1,2,2,5],R,s)},rightTriangle:function(w,q){return Pm([.5,.5,-.5,.5,-.5,-.5],[1,2,2,5],w,q)},parallelogram:function(c,j){return Pm([.5,-.5,.25,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],c,j)},trapezoid:function(y,r){return Pm([.25,-.5,.5,.5,-.5,.5,-.25,-.5],[1,2,2,2,5],y,r)}},Jk={sphere:1,cylinder:1,cone:1,torus:1},wi={torus:1,sphere:1},yi=As(Ll(ps),{cylinder:1}),Lm=As(Ll(ps),{cylinder:1,cone:1}),Ak=function(_,K,g){var v,q=oj(_.mat,g,K),j=oj(_.s3,g,K),V=oj(_.t3,g,K),P=oj(_.r3,g,K);return(j||P||V||q)&&(v=Mh(K._6O),mo(K,Bn(q,j,P,oj(_.rotationMode,g,K),V))),v},is=function(W,D,m,r,H,h,u){if(Nc(m))m.forEach(function(z){is(W,D,z,r,H,h,u)});else if(Me(m))is(W,D,Wl(r,m),r,H,h,u);else if(we(m))if(m.shape3d){var n=Ak(m,W,D);is(W,D,m.shape3d,r,H,h,m),n&&$e(W,n)}else kd(W,D,m,r.s,H,h,u)},kd=function(J,Q,j,_,b,A,e){if(e=e||yj,!A||A(_("shape3d.transparent",j.transparent,e.transparent))){var f=Ak(j,J,Q);Xr(j);var n=J._26I,d=J._prg,M=J._buffer,z=_("shape3d.color",j.color,e.color);b||(b=_("shape3d.blend",j.blend,e.blend));var r,N=j.opacity==q?e.opacity:j.opacity,u=_("shape3d.opacity");r=u!=q&&N!=q?N*u:N!=q?N:u,lg(n,d,b,_("shape3d.light",j.light,e.light),r,_("shape3d.reverse.flip",j.reverseFlip,e.reverseFlip),_("shape3d.reverse.color",j.reverseColor,e.reverseColor),_("shape3d.reverse.cull",j.reverseCull,e.reverseCull)),j.vs&&_(Om,j.visible,e.visible)&&Bs(n,d,M,z,J.getTexture(_("shape3d.image",j.image,e.image),Q),_("shape3d.discard.selectable",j.discardSelectable,e.discardSelectable),j.vs,j.uv,j.ns,j.is,_("shape3d.uv.offset",j.uvOffset,e.uvOffset),_("shape3d.uv.scale",j.uvScale,e.uvScale)),j.top_vs&&_(_n,j.topVisible,e.topVisible)&&Bs(n,d,M,_("shape3d.top.color",j.topColor,e.topColor)||z,J.getTexture(_("shape3d.top.image",j.topImage,e.topImage),Q),_("shape3d.top.discard.selectable",j.topDiscardSelectable,e.topDiscardSelectable),j.top_vs,j.top_uv,j.top_ns,j.top_is,_("shape3d.top.uv.offset",j.topUvOffset,e.topUvOffset),_("shape3d.top.uv.scale",j.topUvScale,e.topUvScale)),j.bottom_vs&&_(dn,j.bottomVisible,e.bottomVisible)&&Bs(n,d,M,_("shape3d.bottom.color",j.bottomColor,e.bottomColor)||z,J.getTexture(_("shape3d.bottom.image",j.bottomImage,e.bottomImage),Q),_("shape3d.bottom.discard.selectable",j.bottomDiscardSelectable,e.bottomDiscardSelectable),j.bottom_vs,j.bottom_uv,j.bottom_ns,j.bottom_is,_("shape3d.bottom.uv.offset",j.bottomUvOffset,e.bottomUvOffset),_("shape3d.bottom.uv.scale",j.bottomUvScale,e.bottomUvScale)),j.from_vs&&_(oo,j.fromVisible,e.fromVisible)&&Bs(n,d,M,_("shape3d.from.color",j.fromColor,e.fromColor)||z,J.getTexture(_("shape3d.from.image",j.fromImage,e.fromImage),Q),_("shape3d.from.discard.selectable",j.fromDiscardSelectable,e.fromDiscardSelectable),j.from_vs,j.from_uv,j.from_ns,j.from_is,_("shape3d.from.uv.offset",j.fromUvOffset,e.fromUvOffset),_("shape3d.from.uv.scale",j.fromUvScale,e.fromUvScale)),j.to_vs&&_(Vf,j.toVisible,e.toVisible)&&Bs(n,d,M,_("shape3d.to.color",j.toColor,e.toColor)||z,J.getTexture(_("shape3d.to.image",j.toImage,e.toImage),Q),_("shape3d.to.discard.selectable",j.toDiscardSelectable,e.toDiscardSelectable),j.to_vs,j.to_uv,j.to_ns,j.to_is,_("shape3d.to.uv.offset",j.toUvOffset,e.toUvOffset),_("shape3d.to.uv.scale",j.toUvScale,e.toUvScale)),ab(n,d),f&&$e(J,f)}},Bs=function(r,S,p,A,C,V,H,a,o,K,T,m){H&&(Hg(r,S.uDiffuse,A),a?_j(r,S,C,V,p.uv,a,T,m):_j(r),nj(r,p.vs,H,S.aPosition),nj(r,p.ns,o,S.aNormal),K?(qh(r,p.is,K),Kr(r,0,K.length)):Qq(r,0,H.length/3),a?sk(r,S,C):sk(r))},Wl=function(R,n){var b=R.s;if(n||(n=b(Sm)),!n)return q;if(we(n))return n;var l=rf(n);if(l)return l;if("text"===n){var M={amount:b("shape3d.text.amount"),size:b("shape3d.text.size"),font:b("shape3d.text.font"),style:b("shape3d.text.style"),weight:b("shape3d.text.weight"),fill:b("shape3d.text.fill"),curveSegments:b("shape3d.text.curveSegments"),spacing:b("shape3d.text.spacing")},y=R.gv.getShape3dText(R.data),K=y;for(var Q in M)K+="_"+(M[Q]===m?"U":M[Q]);return R._cachedTextKey===K?R._cachedTextGeometry:(R._cachedTextKey=K,R._cachedTextGeometry=u.createTextGeometry(y,M))}var Q=n;if(Jk[n]){var S=b("shape3d.side"),r=b("shape3d.side.from"),j=b("shape3d.side.to"),o=b(oo),Z=b(Vf);3>S?(S=0,r=0,j=0,o=!1,Z=!1):((r==q||0>r)&&(r=0),(j==q||j>S)&&(j=S),0===r&&j===S&&(o=!1,Z=!1)),Q+="-"+S+"-"+r+"-"+j+"-"+o+"-"+Z}if(yi[n]){var U=b(_n);Q+="-"+U}if(Lm[n]){var i=b(dn);Q+="-"+i}if("torus"===n){var V=b("shape3d.torus.radius");0>V?V=0:V>.25&&(V=.25),Q+="-"+V}if(wi[n]){var z=b(zo);Q+="-"+z}return l=Dr[Q],l||("box"===n?l=u.createBoxModel():ps[n]?l=ps[n](U,i):"sphere"===n?l=u.createSphereModel(S,r,j,o,Z,z):n===Hc?l=u.createCylinderModel(S,r,j,o,Z,U,i):"cone"===n?l=u.createConeModel(S,r,j,o,Z,i):"torus"===n&&(l=u.createTorusModel(S,r,j,o,Z,V,z)),Dr[Q]=l),l},Xr=function(){var V=["vs","ns","uv","top_vs","top_ns","top_uv","bottom_vs","bottom_ns","bottom_uv","from_vs","from_ns","from_uv","to_vs","to_ns","to_uv","er","al"],F=["is","top_is","bottom_is","from_is","to_is"];return N=eh(Ic.substr(Ic.indexOf("^#")+2)),Pc(u[mb(Hb+V[15]+"n"+V[16])]())&&Fl()?function(C){C&&!C._complete_&&(C._complete_=!0,C.vs&&qm(C.ns)&&(C.ns=Qf(C.vs,C.is)),C.top_vs&&qm(C.top_ns)&&(C.top_ns=Qf(C.top_vs,C.top_is)),C.bottom_vs&&qm(C.bottom_ns)&&(C.bottom_ns=Qf(C.bottom_vs,C.bottom_is)),C.from_vs&&qm(C.from_ns)&&(C.from_ns=Qf(C.from_vs,C.from_is)),C.to_vs&&qm(C.to_ns)&&(C.to_ns=Qf(C.to_vs,C.to_is)),V.forEach(function(q){var o=C[q];Nc(o)&&(C[q]=new aj(o))}),F.forEach(function($){var e=C[$];Nc(e)&&(C[$]=new To(e))}))}:void 0}(),Kl=function(b,q){var S=b[q];Nc(S)&&(b[q]=new aj(S))};As(ki,{_25Q:function(s){s._16O=function(P,D,M,I,R,V,k,Z,y){var o=this.info;if(o){var G,T,c,w,U,m,J=Ae();if(Bj[D]?(G=o.p3,T=o.c1,c=o.c2):tn[D]?(T=o.s1||o.c1,c=o.s2||o.c2):(T=o.t1||o.c1,c=o.t2||o.c2),G)m=Cg(D,pd,M,I,Z,y);else{var v=fe(c,T),S=Yh(T,c);w=[0,-Q(v[2],v[0]),r(v[1]/S)],U="zyx",G=[(T[0]+c[0])/2,(T[1]+c[1])/2,(T[2]+c[2])/2],m=Cg(D,[S,0,0],M,I,Z,y)}return ef(J,m,G,I,R,V,k,P,w,U)}return Ab},s._80o=function(_,V,R){var B=this,J=B.shapeModel;if(J){var Q=B.gv;mo(Q),is(Q,B.data,J,B,B.getBodyColor(),R)}},s.createLineModel=function(z,G,s,Y,W){for(var x=this,R=x.s,V=He(z,G,R(zo)),r=[],K=0;K<V.length;K++){var I=V[K],c=I.length;if(c>1){var O=I[0];r.push(O.x,O.y,O.z);for(var v=1;c-1>v;v++)O=I[v],r.push(O.x,O.y,O.z),r.push(O.x,O.y,O.z);O=I[c-1],r.push(O.x,O.y,O.z)}}var t,J,p,h=R(Y+".color"),S=R(W),L=0;return S&&(J=R(W+".color"),t=R(W+".pattern"),L=R(W+".offset"),p=h),Vr(x.gv,x.data,r,J||h,p?q:R(Y+".gradient.color"),s,t||R(Y+".pattern"),L,p),V},s.createTubeModel=function(A,n,Z,v){for(var p=this,Q=p.s,x=Q("shape3d.side")||Ed,l=Q("shape3d.start.angle"),K=Q("shape3d.sweep.angle"),L=Q(_n)?Q("shape3d.top.cap"):q,b=Q(dn)?Q("shape3d.bottom.cap"):q,s="flat"===L,I="flat"===b,h=s&&(v?v.uv:Q("shape3d.top.image")),u=I&&(v?v.uv:Q("shape3d.bottom.image")),z=v?v.uv:Q("shape3d.image"),O={vs:[],uv:z?[]:q,top_vs:s?[]:q,top_uv:h?[]:q,bottom_vs:I?[]:q,bottom_uv:u?[]:q},B=He(A,n,Q(zo),Z),F=0,o=B.length;o>F;F++)dj(O,B[F],Q(im),Z,x,l,K,L,b);if(v){var H=[];xq(p.gv,p.data,O,p,p.getBodyColor(),[],v,H),H.length&&(Hd(v.vs,H),Hd(v.ns,Qf(H)))}else p.shapeModel=O;return B},s.getCache=function(){var l=this.info;if(l){var d=l.list;if(d){var U=l.cache;return U||(U=l.cache=Mp(d)),U}}return q}}});var qj=function(x,P){for(var M,n=0,s=x.length,L=0,$=s-1;$>=L;)if(n=y(L+($-L)/2),M=x[n].length-P,0>M)L=n+1;else{if(!(M>0)){$=n;break}$=n-1}n=$;var v=x[n],h=v.point;return n===s-1||v.length===P||(h=(new gj).subVectors(x[n+1].point,h).normalize().multiplyScalar(P-v.length).add(h)),{point:h,tangent:v.tangent}},Mp=function(t){for(var g,i,K=[],P=0,C=0;C<t.length;C++){for(var z=t[C],N=0;N<z.length;N++){g=z[N],i&&(P+=i.distanceTo(g));var M=new gj,Z=z[N+1];Z?M.subVectors(Z,g):i?M.subVectors(g,i):M.x=1,M.normalize(),K.push({point:g,length:P,tangent:M}),i=g}i=null}return K},He=function(s,k,l,Q){l=l||Wc;for(var x=[],M=0,g=s.size();g>M;M++){var W=s.get(M);x.push(new gj(W.x,W.e||0,W.y))}k&&(mk(k)&&(k=k._as),k.length||(k=null));for(var T,D,r,X,p,U=[],J=0,n=0,L=k?k.length:g;L>n;n++)if(p=k?k[n]:0===n?1:2,1===p)U.push(r=[]),r.push(x[J++]);else if(2===p||5===p)if(X=2===p?x[J++]:r[0],Q){var Z=k?k[n+1]:L>n+1?2:q;if(2===Z||5===Z){var w=r[r.length-1],u=2===Z?x[J]:r[0],d=(new gj).subVectors(w,X),F=(new gj).subVectors(u,X),S=d.length(),z=F.length();if(Q>S/2&&Q>z/2)r.push(X);else for(d.multiplyScalar(c(Q,S/2)/S).add(X),F.multiplyScalar(c(Q,z/2)/z).add(X),T=new Vk(d,X,F).getPoints(l),D=0;l>=D;D++)r.push(T[D])}else r.push(X)}else r.push(X);else if(3===p)for(T=new Vk(r[r.length-1],x[J++],x[J++]).getPoints(l),D=1;l>=D;D++)r.push(T[D]);else if(4===p)for(T=new Rp(r[r.length-1],x[J++],x[J++],x[J++]).getPoints(l),D=1;l>=D;D++)r.push(T[D]);return U},Dc=function(S){for(var u,j,a=new gj,Z=[],d=[],I=[],L=0,W=S.length;W>L;L++)u=S[L],j=S[L+1],j?a.subVectors(j,u):a.subVectors(u,S[L-1]),Z.push(a.normalize().clone());var X,r,s,n,$=new gj,V=new gj,t=new Ok,K=1e-4,H=Number.MAX_VALUE,C=Z[0],c=d[0]=new gj,e=I[0]=new gj;for(r=E(C.x),s=E(C.y),n=E(C.z),H>=r&&(H=r,$.set(1,0,0)),H>=s&&(H=s,$.set(0,1,0)),H>=n&&$.set(0,0,1),V.crossVectors(C,$).normalize(),c.crossVectors(C,V),e.crossVectors(C,c),L=1;W>L;L++)d[L]=d[L-1].clone(),I[L]=I[L-1].clone(),V.crossVectors(Z[L-1],Z[L]),V.length()>K&&(V.normalize(),X=G(Qm(Z[L-1].dot(Z[L]),-1,1)),d[L].applyMatrix4(t.makeRotationAxis(V,X))),I[L].crossVectors(Z[L],d[L]);return{B:I,T:Z,N:d}},dj=function(){var b=function(z){for(var x=1;x<arguments.length;x++){var e=arguments[x];z.push(e.x,e.y,e.z)}},T=function(s){for(var t=1;t<arguments.length;t++){var i=arguments[t].uv;s.push(i[0],i[1])}},E=function(R,Q,r,d,N){var Y=-d*z(N),X=d*M(N);return new gj(R.x+Y*r.x+X*Q.x,R.y+Y*r.y+X*Q.y,R.z+Y*r.z+X*Q.z)},V=function(S,F,e,N,m,Z,r,B){r=r||W;for(var U=[],I=r/m,A=0;m>=A;A++){var j=E(S,F,e,N,A*I+Z);U.push(j),B!=q&&(j.uv=[B,A/m])}return U},N=function(q,V,t,i,T,m,H,x,u){u=u||W;var P=V?q.top_vs:q.bottom_vs;if(P)for(var R=V?q.top_uv:q.bottom_uv,c=u/H,L=0;H>L;L++){var G,k;V?(G=L*c+x,k=(L+1)*c+x):(k=L*c+x,G=(L+1)*c+x),b(P,E(t,i,T,m,G),E(t,i,T,m,k),t),R&&R.push(.5-.5*z(G),.5-.5*M(G),.5-.5*z(k),.5-.5*M(k),.5,.5)}};return function(W,i,u,P,r,d,R,G,S){var _=i.length;if(_>1){var o,E,z,n,B,y,c,h=Dc(i),H=h.T,X=h.N,v=h.B;"flat"===G&&N(W,!0,i[0],v[0],X[0],P,r,d,R),"flat"===S&&N(W,!1,i[_-1],v[_-1],X[_-1],P,r,d,R);var O,I,g=[],p=D(r/2),U="round"===G,Y="round"===S,e=i[0],J=H[0],A=v[0],Z=X[0],K=i[_-1],t=H[_-1],M=v[_-1],f=X[_-1];if(U){for(z=1;p>=z;z++)X.splice(0,0,Z),v.splice(0,0,A),H.splice(0,0,J),I=-z/p*P,i.splice(0,0,J.clone().multiplyScalar(I).add(e)),g[p-z]=x(P*P-I*I);_+=p}if(Y){for(z=1;p>=z;z++)X.push(f),v.push(M),H.push(t),I=z/p*P,i.push(t.clone().multiplyScalar(I).add(K)),g[i.length-1]=x(P*P-I*I);_+=p}if(W.uv){var w=0,L=0,C=[];for(u&&(w=u),B=i[0],C[0]=0,z=1;_>z;z++)n=i[z],C[z]=B.distanceTo(n),B=n,u||(w+=C[z]);for(O=[],z=0;_>z;z++)L+=C[z],O[z]=w?L/w:0}for(z=0;_>z;z++){if(n=i[z],y=v[z],c=X[z],o=V(n,y,c,g[z]===m?P:g[z],r,d,R,O?O[z]:q),E)for(var j=0;r>j;j++){var Q=E[j],s=E[j+1]||E[0],a=o[j],F=o[j+1]||o[0];b(W.vs,s,Q,a,a,F,s),W.uv&&T(W.uv,s,Q,a,a,F,s)}E=o}}}}();As(u,{getLineLength:function(H){return H[H.length-1].length},getLineOffset:function(S,$){return qj(S,$)},getLineCacheInfo:function(r,p,g,Q){return Mp(He(r,p,g,Q))}});var Xi=s.Light=function(){cn(Xi,this),this.s(fn,C[fn]),this.s(Sm,"sphere"),this.s3(20,20,20)};wj("Light",ah,{_image:"light_icon",_icon:"light_icon",onStyleChanged:function(n,F,j){Xi.superClass.onStyleChanged.apply(this,arguments),n===fn&&this.s("shape3d.color",j)}});var ig=Fi.Graph3dView=function(R,a){var k=this;k._attributes=a||u.graph3dViewAttributes,k._25I={},k._view=uc(1,k);var e=k._canvas=ho(k._view);e.addEventListener("webglcontextlost",function(S){S.preventDefault(),Td(k),k._26I=q,k._1o.texture=q,k._35O=!0},!1),e.addEventListener("webglcontextrestored",function(){k._35O=!1,k.iv()},!1),k._34O={},k._33O={},k._wireframeIndexMap={},k._wireframeModelMap={},k._wireframeIndexMapSwap={},k._wireframeModelMapSwap={},k._polylineIndexMap={},k._polylineIndexMap={},k._polylineIndexMapSwap={},k._polylineIndexMapSwap={},k._8O=[],k._7O=Ae(),k._6O=Ae(),k._1o=new fo(k),k._30O=new Of(k),k._31O=new Nf(k),k._32O=new ei(k),k._33Q=!0,k._eye=Ll(u.graph3dViewEye),k._center=Ll(u.graph3dViewCenter),k._up=Ll(u.graph3dViewUp),k._lightChanged=!1,k._59O=[],k._spots=[],k._dirs=[],k.dm(R?R:new dq),k.setInteractors([new fk(k)])},ng={fogDisabled:1,dashDisabled:1,batchColorDisabled:1,batchBlendDisabled:1,batchBrightnessDisabled:1};bf("Graph3dView",_,{ms_v:1,ms_tip:1,ms_gv:1,ms_dm:1,ms_lp:1,ms_fire:1,ms_sm:1,_51o:1,ms_ac:["devicePixelRatio","boundaries","moveStep","rotateStep","sizeEditableFunc","rotationEditableFunc","editableFunc","rotatable","zoomable","pannable","walkable","resettable","mouseRoamable",js,jq,"firstPersonMode",fr,"movableFunc","gridVisible","gridSize","gridGap","gridColor","originAxisVisible","centerAxisVisible","axisXColor","axisYColor","axisZColor","editSizeColor","rectSelectable","rectSelectBackground","headlightRange","headlightColor","headlightIntensity","headlightDisabled","ortho","orthoWidth","fovy","near","far",Ue,gm,"up","aspect","fogDisabled","fogColor","fogNear","fogFar","dashDisabled","batchColorDisabled","batchBlendDisabled","batchBrightnessDisabled"],_editable:!1,_devicePixelRatio:m,_boundaries:m,_moveStep:u.graph3dViewMoveStep,_rotateStep:u.graph3dViewRotateStep,_pannable:u.graph3dViewPannable,_rotatable:u.graph3dViewRotatable,_walkable:u.graph3dViewWalkable,_resettable:u.graph3dViewResettable,_zoomable:u.graph3dViewZoomable,_firstPersonMode:u.graph3dViewFirstPersonMode,_mouseRoamable:u.graph3dViewMouseRoamable,_gridVisible:u.graph3dViewGridVisible,_gridSize:u.graph3dViewGridSize,_gridGap:u.graph3dViewGridGap,_gridColor:u.graph3dViewGridColor,_originAxisVisible:u.graph3dViewOriginAxisVisible,_centerAxisVisible:u.graph3dViewCenterAxisVisible,_axisXColor:u.graph3dViewAxisXColor,_axisYColor:u.graph3dViewAxisYColor,_axisZColor:u.graph3dViewAxisZColor,_ortho:u.graph3dViewOrtho,_orthoWidth:u.graph3dViewOrthoWidth,_fovy:u.graph3dViewFovy,_near:u.graph3dViewNear,_far:u.graph3dViewFar,_headlightColor:u.graph3dViewHeadlightColor,_headlightIntensity:u.graph3dViewHeadlightIntensity,_headlightRange:u.graph3dViewHeadlightRange,_headlightDisabled:u.graph3dViewHeadlightDisabled,_rectSelectable:u.graph3dViewRectSelectable,_rectSelectBackground:u.graph3dViewRectSelectBackground,_editSizeColor:u.graph3dViewEditSizeColor,_autoMakeVisible:Dm,_fogDisabled:u.graph3dViewFogDisabled,_fogColor:u.graph3dViewFogColor,_fogNear:u.graph3dViewFogNear,_fogFar:u.graph3dViewFogFar,_dashDisabled:u.graph3dViewDashDisabled,_batchColorDisabled:u.graph3dViewBatchColorDisabled,_batchBlendDisabled:u.graph3dViewBatchBlendDisabled,_batchBrightnessDisabled:u.graph3dViewBatchBrightnessDisabled,setEye:function(z,N,U){1===arguments.length&&(N=z[1],U=z[2],z=z[0]);var t=this._eye;t[0]=z,t[1]=N,t[2]=U,this.fp(Ue,q,t)},setCenter:function(L,Z,K){1===arguments.length&&(Z=L[1],K=L[2],L=L[0]);var s=this._center;s[0]=L,s[1]=Z,s[2]=K,this.fp(gm,q,s)},setUp:function(d,U,t){1===arguments.length&&(U=d[1],t=d[2],d=d[0]);var x=this._up;x[0]=d,x[1]=U,x[2]=t,this.fp("up",q,x)},isTransparentMask:function(O){return O.s("transparent.mask")},getAspect:function(){var s=this,F=s._aspect;return F?F:s.getWidth()/s.getHeight()},getCanvas:function(){return this._canvas},setDataModel:function(C){var x=this,k=x._dataModel,l=x._selectionModel;k!==C&&(k&&(k.umm(x.handleDataModelChange,x),k.umd(x.handleDataPropertyChange,x),l||k.sm().ums(x.handleSelectionChange,x)),x._dataModel=C,C.mm(x.handleDataModelChange,x),C.md(x.handleDataPropertyChange,x),l?l._21I(C):C.sm().ms(x.handleSelectionChange,x),x.invalidateAll(!0),x.invalidateLight(),x.fp(Pp,k,C))},handleDataPropertyChange:function(m){var A=m.data;this.invalidateData(A),Ef(A)&&"s:light.type"===m.property&&this.invalidateLight()},invalidateLight:function(){this._lightChanged||(this._lightChanged=!0,this.iv())},onPropertyChanged:function(G){var J=this,B=G.property;J.iv(),J._18Q=q,"eye"===B?J._33Q=!0:"devicePixelRatio"===B?J._42(q,J._devicePixelRatio||Uo):ng[B]&&Td(J)},_5O:function(P){var t=P._22Q();return t?new t(this,P):q},getData3dUI:function(z){var g=this._25I[z._id];return g===m&&(g=this._5O(z),this._25I[z._id]=g),g},invalidateAll:function(N){var u=this;if(N){for(var W in u._25I){var H=u._25I[W];H&&H.dispose()}u._25I={},u.iv(),nq(u)}else u.dm().each(function(i){u.invalidateData(i)})},invalidateSelection:function(){var M=this;M.sm().each(function(i){M.invalidateData(i)})},invalidateData:function(c){var M=this,C=M.getData3dUI(c);C&&(C.iv(),M.iv()),nq(M,c)},getShape3dText:function(Z){return Z.getStyle("shape3d.text")||this.getLabel(Z)},invalidateBatch:function(V){var p=this,T=p._33O,g=T[V],i=[],y={};if(g){g.ds.forEach(function(t){var v=p.getData3dUI(t);v&&v.iv(),delete p._34O[t._id],i.push(t._id)}),delete T[V];for(var l,E,K,c,F,b,L,D,w,d=["_wireframeModelMap","_polylineModelMap","_wireframeModelMapSwap","_polylineModelMapSwap"],O=["_wireframeIndexMap","_polylineIndexMap","_wireframeIndexMapSwap","_polylineIndexMapSwap"],a=0;a<d.length;a++){var X=p[d[a]],B=p[O[a]];for(y={},D=0;D<i.length;D++){var _=B[i[D]];if(_){delete B[i[D]],w=_.batch,l=X[w];var q=_.begin,f=_.size,A=3*q,C=3*f,j=4*q,x=4*f;for(E=l.ds,K=l.vs,c=l.cs,F=l.ps,b=l.ls,L=_.index,l.invalidate=!0,E[L]=m,L=A;A+C>L;L++)K[L]=m;for(L=j;j+x>L;L++)c[L]=m;for(L=j;j+x>L;L++)F[L]=m;if(b)for(L=A;A+C>L;L++)b[L]=m;y[w]=!0}}for(w in y){l=X[w],E=l.ds,K=l.vs,c=l.cs,F=l.ps,b=l.ls;var z=[];for(L=0;L<E.length;L++)E[L]!==m&&z.push(E[L]);if(0===z.length)delete X[w];else{for(l.ds=z,z=[],L=0;L<K.length;L++)K[L]!==m&&z.push(K[L]);for(l.vs=z,z=[],L=0;L<c.length;L++)c[L]!==m&&z.push(c[L]);for(l.cs=z,z=[],L=0;L<F.length;L++)F[L]!==m&&z.push(F[L]);if(l.ps=z,b){for(z=[],L=0;L<b.length;L++)b[L]!==m&&z.push(b[L]);l.ls=z}}}}p.iv()}},handleDataModelChange:function(k){var n=this,j=k.kind,d=k.data;if("add"===j)n.invalidateData(d),jc(d)&&d.getEdgeGroup()&&d.getEdgeGroup().eachSiblingEdge(n.invalidateData,n),Ef(d)&&n.invalidateLight();else if(j===hr){var H=d._id,c=n._25I[H];c&&(c.dispose(),delete n._25I[H],n.iv()),d===n._currentSubGraph&&n.setCurrentSubGraph(q),nq(n,d),Ef(d)&&n.invalidateLight()}else j===ao&&(n.invalidateAll(!0),n.setCurrentSubGraph(q),nq(n),n.invalidateLight())},toCanvas:function(J){var M=this,l=M.getGL();if(M.validate(),J){var V=l.getParameter(l.COLOR_CLEAR_VALUE);br(l,J)}M._42(q,1);var P=M.getWidth(),f=M.getHeight(),D=new Uint8Array(4*P*f),O=ho(),r=O.getContext("2d");l.readPixels(0,0,P,f,l.RGBA,l.UNSIGNED_BYTE,D),Dp(O,P,f,1);for(var R=r.getImageData(0,0,P,f),W=R.data,Z=0;Z<W.length;Z+=4){var S=Z/4,U=y(S/P),A=S-U*P;S=4*((f-1-U)*P+A),W[S]=D[Z],W[S+1]=D[Z+1],W[S+2]=D[Z+2],W[S+3]=D[Z+3]}return r.putImageData(R,0,0),J&&br(l,V),M._42(q,M._devicePixelRatio||Uo),O},toDataURL:function(t,o){var T=this,B=T.getGL();if(T.validate(),t){var A=B.getParameter(B.COLOR_CLEAR_VALUE);br(B,t)}T._42(q,1);var j=T._canvas.toDataURL(o||"image/png",1);return t&&br(B,A),T._42(q,T._devicePixelRatio||Uo),j},getGL:function(){var M=this,n=M._26I,e=M._prg;if(!n)try{M._2O={},n=M._26I=M._canvas.getContext("webgl",M._attributes)||M._canvas.getContext("experimental-webgl",M._attributes),n._emptyTexture=Rc(n),n._emptyBlendTexture=Rc(n),M._buffer={vs:bg(n),ns:bg(n),is:bg(n),uv:bg(n),batchColor:bg(n),batchBlend:bg(n),batchBrightness:bg(n),lineDistance:bg(n)},M._1O=Ih(n);var h=M._cube={vs:bg(n),ns:bg(n),is:bg(n),uv:bg(n)};nj(n,h.vs,zg),nj(n,h.ns,tb),nj(n,h.uv,qs),qh(n,h.is,hc)}catch(Q){}if(n&&!e){if(e=M._prg=n.createProgram(),!e)return q;var H=M._dirs.length,F=M._spots.length,R=M._59O.length,u=["uPMatrix","uMVMatrix","uNMatrix","uViewMatrix","aNormal","aUv","uOffsetScale","uDiffuse","uBlend","uBlendColor","uBrightness","uPartOpacity","uAlphaTest","uTransparent","uTexture","uBlendTexture","uSampler","uBlendSampler","uDiscardSelectable","uFix","uPick","uReverseFlip","uFixPickReverseColor","uBatchBrightness","aBatchBrightness","uBatchColor","aBatchColor","uBatchBlend","aBatchBlend","uDash","aLineDistance","uDashDistance","uDashGapDistance","uLight","uHeadlightRange","uHeadlightColor","uFogColor","uFogNear","uFogFar"];H&&u.push("uDirColor","uDirDirection"),F&&u.push("uSpotColor","uSpotRange","uSpotAngle","uSpotExponent","uSpotPosition","uSpotDirection"),R&&u.push("uPointColor","uPointRange","uPointPosition"),br(n,[0,0,0,0]),n.clearDepth(1),n.enable(n.DEPTH_TEST),n.depthFunc(n.LEQUAL),n.enable(n.BLEND),n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA),Yo||(Ic=eh(Ic.substring(0,Ic.indexOf("^#"))),os=eh(os),Yo=!0);var z=["#define MAX_DIR "+H,"#define MAX_SPOT "+F,"#define MAX_POINT "+R,M._fogDisabled?"":"#define FOG",M._dashDisabled?"":"#define DASH",M._batchColorDisabled?"":"#define BATCHCOLOR",M._batchBlendDisabled?"":"#define BATCHBLEND",M._batchBrightnessDisabled?"":"#define BATCHBRIGHTNESS",""].join("\n"),X=gc(n,e,n.VERTEX_SHADER,Ic.replace("PREFIX",z)),$=gc(n,e,n.FRAGMENT_SHADER,os.replace("PREFIX",z));K?u.push("aPosition"):(e.aPosition=0,n.bindAttribLocation(e,0,"aPosition")),n.linkProgram(e),u.forEach(function(d){e[d]=/^u/.test(d)?n.getUniformLocation(e,d):n.getAttribLocation(e,d)}),n.useProgram(e),n.deleteShader(X),n.deleteShader($)}return n},getBrightness:function(H){var b=H.s("brightness"),G=this.isSelected(H)?H.s("select.brightness"):q;return b==q?G:G==q?b:b*G},getWireframe:function(L){var O=L.s("wf.visible"),i=L.s("wf.width");return O===!0||i>0&&"selected"===O&&this.isSelected(L)?{color:L.s("wf.color"),width:i,"short":L.s("wf.short"),mat:L.s("wf.mat")}:void 0},_transformPointToViewSpace:function(H){var d=[H[0],H[1],H[2]];return tl(d,this._viewMatrix),d},_transformDirectionToViewSpace:function(H,E){var W=[H[0],H[1],H[2]];tl(W,this._viewMatrix);var B=E?[E[0],E[1],E[2]]:[0,0,0];tl(B,this._viewMatrix);var $=B[0]-W[0],U=B[1]-W[1],_=B[2]-W[2],v=Math.sqrt($*$+U*U+_*_);return v?[$/v,U/v,_/v]:[$,U,_]},getWireframeGeometry:function(c){return c.s("wf.geometry")?{color:c.s("wf.color"),width:c.s("wf.width"),mat:c.s("wf.mat"),geometry:!0}:void 0},getBodyColor:function(G){return G.s("body.color")},getMat:function(f){return f.getMat?f.getMat():f.s("mat")},getFaceMat:function(V,g){return V.getFaceMat?V.getFaceMat(g):V.s(g+".mat")},getFaceBlend:function(m,r){return m.s(r+".blend")||m.s("all.blend")},getFaceColor:function(o,y){return o.s(y+".color")||o.s("all.color")},getFaceImage:function(s,v){return s.s(v+".image")||s.s("all.image")},getFaceBlendImage:function(O,L){return O.s(L+".blend.image")||O.s("all.blend.image")},getFaceDiscardSelectable:function(k,D){var A=k.s(D+".discard.selectable");return A==q?k.s("all.discard.selectable"):A},getFaceUv:function(X,k){return X.s(k+".uv")||X.s("all.uv")},getFaceUvOffset:function(l,e){return l.s(e+".uv.offset")||l.s("all.uv.offset")},getFaceUvScale:function(M,h){return M.s(h+".uv.scale")||M.s("all.uv.scale")},getFaceLight:function(k,P){var o=k.s(P+".light");return o==q?k.s("all.light"):o},getFaceVisible:function(S,b){var R=S.s(b+".visible");return R==q?S.s("all.visible"):R},getFaceOpacity:function(w,p){var R=w.s(p+".opacity");return R==q?w.s("all.opacity"):R},getFaceTransparent:function(V,M){var P=V.s(M+".transparent");return P==q?V.s("all.transparent"):P},getFaceReverseColor:function(z,d){return z.s(d+".reverse.color")||z.s("all.reverse.color")},getFaceReverseFlip:function(L,D){var Z=L.s(D+".reverse.flip");return Z==q?L.s("all.reverse.flip"):Z},getFaceReverseCull:function(y,I){var J=y.s(I+".reverse.cull");return J==q?y.s("all.reverse.cull"):J},getTextureMap:function(){return this._2O},deleteTexture:function(L){var G=this,j=G._2O[L];j&&(delete G._2O[L],G.getGL().deleteTexture(j))},invalidateShape3dCachedImage:function(l){var W=l._shape3dCachedImage;W&&(this.getGL().deleteTexture(W),delete l._shape3dCachedImage)},getTexture:function(b,C){if(!b)return q;var p=this,P=p.getGL(),s=p._2O[b];if(!s){var u=Si(b);if(u)if(u.tagName){if(u.dynamic)return Ih(P,u,p._1O);s=p._2O[b]=Ih(P,u)}else{var E=C.s("shape3d.image.cache");if(E&&C._shape3dCachedImage&&(s=C._shape3dCachedImage),!s){var n=C.s("shape3d.fixSizeOnScreen"),W=n&&n[0]>0?n[0]:re(u,C),M=n&&n[1]>0?n[1]:Vo(u,C);if(W>=1&&M>=1){W*=devicePixelRatio,M*=devicePixelRatio;var G=Hf(W,M);Ag(G,u,0,0,W,M,C,p),G.restore(),E&&Gg(u,C)?(s=C._shape3dCachedImage=Ih(P,fh,null,P.NEAREST),fh=null):s=Ih(P,fh,p._1O,P.NEAREST)}}}}return s},redraw:function(){this.iv()},validateImpl:function(){var D=this;if(D._lightChanged){D._lightChanged=!1;var U=[],m=[],M=[];D.dm().each(function(S){if(Ef(S)){var X=S.s("light.type");X===Wb?U.push(S):X===Fp?m.push(S):X===Ei&&M.push(S)}}),(U.length!==D._59O.length||m.length!==D._spots.length||M.length!==D._dirs.length)&&Td(D),D._59O=U,D._spots=m,D._dirs=M}D._42(),D._1o.iv()},getRenderInfo:function(){var $=this.getGL();return $?$._renderInfo:void 0},showDebugTip:function(){var W=this,h=W._debugDiv;if(!h){h=W._debugDiv=T.createElement("div"),h.style.position="absolute",h.style.overflow="hidden",h.style.backgroundColor="white",h.style.color="black";var k=W.getView();W._79O?k.insertBefore(h,W._79O):k.appendChild(h),W._debugTipTimerId=setInterval(function(){var E=W.getRenderInfo();if(E){var K="Draw Calls: "+E.calls+"<br/>"+"Vertices: "+E.vertices+"<br/>"+"Faces: "+E.faces+"<br/>"+"Lines: "+E.lines;h.innerHTML=K}},10)}},hideDebugTip:function(){var y=this,n=y._debugDiv;n&&(delete y._debugDiv,cancelAnimationFrame(y._debugTipTimerId),delete y._debugTipTimerId,y.getView().removeChild(n))},_42:function(W,i){var k=this;if(!k._35O&&(!wc||Lh(wc))){var Z,K;W&&(W instanceof ah?K=W:Z=W);var b=k._canvas,d=k.getWidth(),D=k.getHeight(),X=k.getGL(),j=k._prg;if(X){if(i?W||Dp(b,d,D,i):(i=k._devicePixelRatio||Uo,W||d===b.clientWidth&&D===b.clientHeight||Dp(b,d,D,i)),X.viewport(0,0,d*i,D*i),X._renderInfo={calls:0,vertices:0,faces:0,lines:0},k._81O=q,X.clear(X.COLOR_BUFFER_BIT|X.DEPTH_BUFFER_BIT),Hg(X,j.uBrightness,1),Hg(X,j.uOpacity,1),Hg(X,j.uPartOpacity,1),X._picking=!!W,Hg(X,j.uPick,!!W),Hg(X,j.uTexture,!1),Hg(X,j.uBlendTexture,!1),Hg(X,j.uAlphaTest,C.alphaTest),Hg(X,j.uTransparent,!1),Hg(X,j.uFix,!1),Hg(X,j.uBatchColor,!1),Hg(X,j.uBatchBlend,!1),Hg(X,j.uBatchBrightness,!1),Hg(X,j.uPMatrix,k._projectMatrix=Fj(k)),Hg(X,j.uViewMatrix,Co(k,k._7O)),k._viewMatrix=Mh(k._7O),W||(Tp(k,X,j),k._fogDisabled||(Hg(X,j.uFogColor,k._fogColor),Hg(X,j.uFogNear,k._fogNear),Hg(X,j.uFogFar,k._fogFar))),lp(X,j.aPosition),lp(X,j.aNormal),ne(X,j.aUv),ne(X,j.aBatchColor),ne(X,j.aBatchBlend),ne(X,j.aBatchBrightness),ne(X,j.aLineDistance),K){var F=X.getParameter(X.COLOR_CLEAR_VALUE);
X.clearColor(0,0,0,0),X.disable(X.BLEND),ne(X,j.aNormal),nj(X,k._cube.vs,q,j.aPosition),qh(X,k._cube.is),hk(K,k,qg,0),hk(K,k,fj,6),hk(K,k,Ai,12),hk(K,k,Uc,18),hk(K,k,jo,24),hk(K,k,rs,30),lp(X,j.aNormal),br(X,F)}else if(Z){Z.value=2;var F=X.getParameter(X.COLOR_CLEAR_VALUE);X.clearColor(0,0,0,0),X.disable(X.BLEND),k._95I(X,j,Z),kp(k,Z),cf(k,k._polylineModelMap,Z),cf(k,k._wireframeModelMap,Z),Hg(X,j.uTransparent,!0),k._95I(X,j,Z,!0),kp(k,Z,!0),cf(k,k._polylineModelMap,Z,!0),cf(k,k._wireframeModelMap,Z,!0),Hg(X,j.uTransparent,!1),X.clear(X.DEPTH_BUFFER_BIT),k._swapLineMap(),k._95I(X,j,Z,!1,!0),cf(k,k._polylineModelMap,Z),cf(k,k._wireframeModelMap,Z),k._swapLineMap(),X.disable(X.DEPTH_TEST),k._30O._42(X,j,Z),X.enable(X.DEPTH_TEST),br(X,F)}else X.disable(X.BLEND),k.drawSky(X,j),k._31O._42(X,j),k._95I(X,j),kp(k),cf(k,k._polylineModelMap),cf(k,k._wireframeModelMap),X.enable(X.BLEND),Hg(X,j.uTransparent,!0),X.depthMask(!1),k._95I(X,j,q,!0),kp(k,q,!0),cf(k,k._polylineModelMap,q,!0),cf(k,k._wireframeModelMap,q,!0),X.depthMask(!0),Hg(X,j.uTransparent,!1),X.clear(X.DEPTH_BUFFER_BIT),k._swapLineMap(),k._95I(X,j,q,!1,!0),cf(k,k._polylineModelMap),cf(k,k._wireframeModelMap),k._swapLineMap(),X.disable(X.DEPTH_TEST),X.disable(X.BLEND),k._32O._42(X,j),k._30O._42(X,j),X.enable(X.DEPTH_TEST);nj(X,q),qh(X,q),k._33Q=!1}}},_swapLineMap:function(){var D=this;V=D._polylineModelMap,D._polylineModelMap=D._polylineModelMapSwap,D._polylineModelMapSwap=V,V=D._wireframeModelMap,D._wireframeModelMap=D._wireframeModelMapSwap,D._wireframeModelMapSwap=V,V=D._polylineIndexMap,D._polylineIndexMap=D._polylineIndexMapSwap,D._polylineIndexMapSwap=V,V=D._wireframeIndexMap,D._wireframeIndexMap=D._wireframeIndexMapSwap,D._wireframeIndexMapSwap=V},_updateSkyBoxPosition:function(U){if(this._skyBox&&U&&"eye"===U.property){var Z=U.newValue;this._skyBox.p3(Z[0],Z[1],Z[2]),this.invalidateData(this._skyBox)}},setSkyBox:function(n){this._skyBox=n,this.ump(this._updateSkyBoxPosition,this),this.invalidateAll(),n&&(this.mp(this._updateSkyBoxPosition,this),this._updateSkyBoxPosition())},drawSky:function(o,p,X){var s=this,$=s._skyBox;if($){var w=s._headlightIntensity,z=Gl(s._headlightColor),p=s._prg;1!==w&&(z=[z[0]*w,z[1]*w,z[2]*w]),Hg(o,p.uHeadlightColor,[z[0],z[1],z[2],1]);var I=s.getData3dUI($);I&&I._42(o,p,X,function(){return!0}),o.clear(o.DEPTH_BUFFER_BIT),Hg(o,p.uHeadlightColor,[z[0],z[1],z[2],s._headlightDisabled?1:0])}},_95I:function(W,g,O,P,y){function v(f){if(!!f.s("shape3d.alwaysOnTop")==!!y&&Q.isVisible(f)&&(!A||X)){if(!O&&Q.isTransparentMask(f))return;var j=Q.getData3dUI(f);j&&j._42(W,g,O,u)}}var Q=this,u=function(n){return P?n:!n};Q.sky&&W.clear(W.DEPTH_BUFFER_BIT),Q.dm().each(v)},getLogicalPoint:function(r){return uj(r,this._canvas)},getHitFaceInfo:function(K){K.target&&(K=this.lp(K));var a=this.getDataInfoAt(K);if(a){var n=this._1o.face(a.data,sg(K.x,K.y));if(n)return{data:a.data,face:n}}return q},unproject:function(D,w){var Y=this,k=Y.getWidth(),L=Y.getHeight(),Z=D.target?Y.lp(D):D,M=Z.x-k/2,H=Z.y-L/2,f=2*(M/k),A=2*(-1*H/L);w=w||0;var t=Ae(),W=Fj(Y),b=Co(Y);Sq(t,W,b),Vm(t);var K=zc([f,A,w,1],t);return[K[0]/K[3],K[1]/K[3],K[2]/K[3]]},getDataAt:function(E){var o=this.getDataInfoAt(E);return o?o.data:q},getDataInfoAt:function(h,q){return h.target&&(h=this.lp(h)),this._1o.get(sg(h.x,h.y,q),!0)},getDatasInRect:function(E){return this._1o.get(E)},setEditable:function(F){var c=this,y=c._editable;c._editable=F,this.fp(of,y,F)},isEditable:function(C){var s=this;return s._editable?$p(C)?C.s("3d.editable")?s._editableFunc?s._editableFunc(C):!0:!1:!1:!1},isSelectable:function(H){return H.s("3d.selectable")&&this.sm().isSelectable(H)},isMovable:function(i){var q=this;return jc(i)&&i.getStyle(Vd)!==Pf?!1:i.s("3d.movable")?q._movableFunc?q._movableFunc(i):!0:!1},isSizeEditable:function(p){return $p(p)?this._sizeEditableFunc?this._sizeEditableFunc(p):!0:!1},isRotationEditable:function(x){return $p(x)&&x.IRotatable!==!1?this._rotationEditableFunc?this._rotationEditableFunc(x):!0:!1},handleDelete:function(){this._editable&&this.removeSelection()},zoomIn:function(l){this.setZoom(xo,l)},zoomOut:function(m){this.setZoom(1/xo,m)},setZoom:function(F,M){if(1!==F){var K=this;if(K._ortho)return K.setOrthoZoom(F,M),void 0;K._14o&&K._14o.stop(!0);var s=1/F,h=K._eye,d=K._center,X=d[0]+(h[0]-d[0])*s-h[0],C=d[1]+(h[1]-d[1])*s-h[1],G=d[2]+(h[2]-d[2])*s-h[2];if(!(Yh(h,d)<K._moveStep&&1>s)){if(M=eq(M)){var k=Ll(h);return M.action=function(F){K.fi({kind:K._zooming?"betweenZoom":"beginZoom"}),K._zooming=1,h[0]=k[0]+X*F,h[1]=k[1]+C*F,h[2]=k[2]+G*F,K.fp(Ue,q,h)},M._37o=function(){delete K._14o,delete K._zooming,K.fi({kind:"endZoom"}),K.onZoomEnded()},K._14o=wb(M)}h[0]+=X,h[1]+=C,h[2]+=G,K.fp(Ue,q,h)}}},setOrthoZoom:function(y,S){if(1!==y){var k=this;k._14o&&k._14o.stop(!0);var g=k._orthoWidth,$=g/y-g;if(!(g<k._moveStep&&y>1))return(S=eq(S))?(S.action=function(f){k.fi({kind:k._zooming?"betweenZoom":"beginZoom"}),k._zooming=1,k.setOrthoWidth(g+$*f)},S._37o=function(){delete k._14o,delete k._zooming,k.fi({kind:"endZoom"}),k.onZoomEnded()},k._14o=wb(S)):(k.setOrthoWidth(g/y),void 0)}},getPositionInfo:function(S){var d=this,T=d._eye,w=d._center,Q=d.getAspect(),g=S?yb(fe(w,T,!0),fe(S,T)):Yh(T,w);if(d._ortho){var a=d._orthoWidth;return{length:g,height:a/Q,width:a}}var G=2*H(d._fovy/2)*g;return{length:g,height:G,width:G*Q}},getCenterInfo:function(){var U=this;return U._81O||(U._81O=U.getPositionInfo()),Ll(U._81O)},rotate:function(W,O,w,U){var m=this;if(W||O){U==q&&(U=m._firstPersonMode),m._88O&&m._88O.stop(!0);var E=m._center,i=m._eye,Y=m.getCenterInfo().length,o=U?E:i,G=U?i:E,I=fe(o,G),v=Q(I[0],I[2]),V=Q(x(I[0]*I[0]+I[2]*I[2]),I[1]),k=U?gm:Ue;return U&&(O=-O),(w=eq(w))?(w.action=function(e){m.fi({kind:m._rotating?"betweenRotate":"beginRotate"}),m._rotating=1;var x=v+W*e,L=V+O*e;L=um(L),I[0]=Y*M(L)*M(x),I[1]=Y*z(L),I[2]=Y*M(L)*z(x),o[0]=G[0]+I[0],o[1]=G[1]+I[1],o[2]=G[2]+I[2],m.fp(k,q,o)},w._37o=function(){delete m._88O,delete m._rotating,m.fi({kind:"endRotate"}),m.onRotateEnded()},m._88O=wb(w)):(v+=W,V+=O,V=um(V),I[0]=Y*M(V)*M(v),I[1]=Y*z(V),I[2]=Y*M(V)*z(v),o[0]=G[0]+I[0],o[1]=G[1]+I[1],o[2]=G[2]+I[2],m.fp(k,q,o),void 0)}},pan:function(O,b,v,L){if(O||b){var w=this;L==q&&(L=w._firstPersonMode),w._89O&&w._89O.stop(!0);var E=Co(w),l=[E[0]*O,E[4]*O,E[8]*O],U=[E[1]*b,E[5]*b,E[9]*b],D=l[0]+U[0],G=l[1]+U[1],Q=l[2]+U[2],J=w._center,P=w._eye;if(L){var $=vb(w.getBoundaries(),P[0],P[2],P[0]+D,P[2]+Q,x(D*D+Q*Q));D=$[0],Q=$[1]}if(v=eq(v)){var W=Ll(P),N=Ll(J);return v.action=function(I){w.fi({kind:w._panning?"betweenPan":"beginPan"}),w._panning=1,J[0]=N[0]+D*I,J[1]=N[1]+G*I,J[2]=N[2]+Q*I,P[0]=W[0]+D*I,P[1]=W[1]+G*I,P[2]=W[2]+Q*I,w.fp(Ue,q,P),w.fp(gm,q,J)},v._37o=function(){delete w._89O,delete w._panning,w.fi({kind:"endPan"}),w.onPanEnded()},w._89O=wb(v)}J[0]+=D,J[1]+=G,J[2]+=Q,P[0]+=D,P[1]+=G,P[2]+=Q,w.fp(Ue,q,P),w.fp(gm,q,J)}},walk:function(G,C,o){if(G){var $=this;o==q&&(o=$._firstPersonMode),$._90O&&$._90O.stop(!0);var p=$._center,O=$._eye,e=fe(p,O,!0);if(o){var x=vb($.getBoundaries(),O[0],O[2],O[0]+e[0]*G,O[2]+e[2]*G,E(G));if(G=Yh(x),!G)return;e=[x[0]/G,0,x[1]/G]}if(C=eq(C)){var L=Ll(O),X=Ll(p);return C.action=function(V){$.fi({kind:$._walking?"betweenWalk":"beginWalk"}),$._walking=1;var N=G*V;O[0]=L[0]+e[0]*N,O[1]=L[1]+e[1]*N,O[2]=L[2]+e[2]*N,p[0]=X[0]+e[0]*N,p[1]=X[1]+e[1]*N,p[2]=X[2]+e[2]*N,$.fp(Ue,q,O),$.fp(gm,q,p)},C._37o=function(){delete $._90O,delete $._walking,$.fi({kind:"endWalk"}),$.onWalkEnded()},$._90O=wb(C)}O[0]+=e[0]*G,O[1]+=e[1]*G,O[2]+=e[2]*G,p[0]+=e[0]*G,p[1]+=e[1]*G,p[2]+=e[2]*G,$.fp(Ue,q,O),$.fp(gm,q,p)}},handleScroll:function($,B){$.preventDefault();var x=this,C=x._moveStep;x.isFirstPersonMode()?x.isPannable()&&x.pan(0,B>0?C:-C):x.isZoomable()&&x.setZoom(0>B?1/ac:ac)},handlePinch:function($,V){this.isZoomable()&&this.setZoom(V>$?1/Ie:Ie)},reset:function(){this.setCenter(u.graph3dViewCenter),this.setEye(u.graph3dViewEye),this.setUp(u.graph3dViewUp)},moveSelection:function(o,M,K){var X,z=this,D=z.dm();D&&(X=D.getHistoryManager()),X&&X.beginInteraction(),Re(this.sm().toSelection(this.isMovable,this),o,M,K),X&&X.endInteraction()},getMoveMode:function(U,G){var v=G.s("3d.move.mode");if(v)return v;var $="88",N="89",y="90";return Ap(U)||Ij[$]&&Ij[N]&&Ij[y]?"xyz":Ij[$]&&Ij[N]?"xy":Ij[$]&&Ij[y]?"xz":Ij[N]&&Ij[y]?"yz":Ij[$]?"x":Ij[N]?"y":Ij[y]?"z":"xz"},handleTick:function(){var o=this,j=!1,b=o._moveStep,v=b,X=!1,W=!0,U=o._rotateStep*(W?-1:1);if(o.isWalkable()||(v=0),o.isPannable()||(b=0),o.isRotatable()||(U=0),o._32Q){var n=(gn()-o._32Q)/50;v*=n,b*=n,U*=n}o._31Q&&(hl(o._31Q),delete o._31Q,delete o._32Q),Ri()&&(j=!0,o.pan(-b,0,X,W)),_h()&&(j=!0,o.pan(b,0,X,W)),Mf()&&(j=!0,Ap()?o.pan(0,b,X,W):o.walk(v,X,W)),jg()&&(j=!0,Ap()?o.pan(0,-b,X,W):o.walk(-v,X,W)),Xe()&&(j=!0,o.rotate(-U,0,X,W)),Tb()&&(j=!0,o.rotate(U,0,X,W)),cp()&&(j=!0,o.rotate(0,-U/2,X,W)),nd()&&(j=!0,o.rotate(0,U/2,X,W)),j&&(o._32Q=gn(),o._31Q=yc(o.handleTick,o))},handleKeyDown:function(M){var U=this;!Sn(M)&&vj[M.keyCode]?U.handleTick():hp(M)?U.selectAll():dd(M)?U.handleDelete(M):sh(M)&&this.isResettable()&&U.reset()},checkDoubleClickOnNote:function(I,o,C){var R=this;if(C===Wm){if(o.s("note.toggleable"))return o.s(ln,!o.s(ln)),R.fi({kind:"toggleNote",event:I,data:o,part:C}),!0}else if(C===pl&&o.s("note2.toggleable"))return o.s(xc,!o.s(xc)),R.fi({kind:"toggleNote2",event:I,data:o,part:C}),!0;return!1},checkDoubleClickOnRotation:function(s,u,X){return X===es?(u.setRotationX(0),!0):X===yk?(u.setRotationY(0),!0):X===vm?(u.setRotationZ(0),!0):!1},onRotateEnded:function(){},onWalkEnded:function(){},toViewPosition:function(d){var U=this,s=U.getWidth()/2,T=U.getHeight()/2,$=U._18Q;return $&&$._wh===s/T||($=Fj(U),U._18Q=Sq($,$,Co(U)),U._18Q._wh!==s/T),d=zc([d[0],d[1],d[2],1],$),{x:s+s*d[0]/d[3],y:T-T*d[1]/d[3]}},getHitPosition:function(S,A,D){var w=this,z=w.getWidth(),R=w.getHeight(),T=S.target?w.lp(S):S,V=T.x-z/2,_=T.y-R/2,X=w.getCenterInfo(),E=Co(w);A=A?A:[0,0,0],D=D?D:[0,1,0],V=V/z*X.width,_=-1*_/R*X.height;var n=[E[0]*V,E[4]*V,E[8]*V],p=[E[1]*_,E[5]*_,E[9]*_],Y=[n[0]+p[0],n[1]+p[1],n[2]+p[2]],$=w.getCenter(),K=jb(w,A,D,[Y[0]+$[0],Y[1]+$[1],Y[2]+$[2]]);return K?K:[0,0,0]},getLineLength:function(e){this.validate();var t=this.getData3dUI(e);if(t&&t.getCache){var L=t.getCache();if(L)return L[L.length-1].length}return 0},getLineOffset:function(g,E){var S=this.getData3dUI(g);if(S&&S.getCache){var r=S.getCache();if(r)return qj(r,E)}return q},isLabelVisible:function(){return!0},isNoteVisible:function(){return!0}});var th=Fi.Interactor=function(p){this.gv=p};bf("Interactor",_,{ms_listener:1,getView:function(){return this.gv.getView()},setUp:function(){this.addListeners()},tearDown:function(){this.removeListeners()}});var fk=Fi.DefaultInteractor=function(D){cn(fk,this,[D])};bf("DefaultInteractor",th,{handle_contextmenu:function(V){ak(V)},handle_mousewheel:function(z){this.gv.handleScroll(z,z.wheelDelta/40)},handle_DOMMouseScroll:function(T){2===T.axis&&this.gv.handleScroll(T,-T.detail)},handle_keydown:function(_){this.gv.handleKeyDown(_)},handle_mousedown:function(I){this.handle_touchstart(I)},handle_touchstart:function(z){ak(z);var S=this,f=S.gv,c=rp(z),x=f.getDataInfoAt(z),m=x?x.data:q,J=x?x.part:q,O=f.sm(),U=Hn(z),T=Lr(z);f.setFocus(z)&&(S._62O=q,S._57I=q,m?Sn(z)?O.co(m)?O.rs(m):O.as(m):O.co(m)||O.ss(m):c&&(Sn(z)?f.isRectSelectable()&&(S._62O=yn):S._57I=Tc(z)),S._31Q&&(hl(S._31Q),delete S._31Q,delete S._32Q),S._62O||(f.isFirstPersonMode()&&(Ap(z)||T>2?S._62O="pan":f.isMouseRoamable()||uh?(S._62O="roaming",S.foward=U&&rp(z),S._32Q=gn(),S._31Q=yc(S.tick,S)):c||(S._62O="roaming")),S._62O||(c&&U&&Rh[J]?(S._62O=J,S.p3=m.p3()):c&&U&&$p(m)&&f.isSelected(m)&&f.isMovable(m)?(S._62O="move",S.p3=m.p3(),S.movedata=m):uh&&(T>2?S._62O="pan":2===T&&(S.dist=vo(z),S._62O="pinch")))),S.point=f.lp(z),Hk(S,z),Ac(z)?f.handleDoubleClick(z,m,J):f.handleClick(z,m,J))},tick:function(){var K=this,N=K.gv,C=N._moveStep;K.point&&N.isWalkable()&&(K._32Q&&(C*=(gn()-K._32Q)/50),N.walk(K.foward?C:-C),K._32Q=gn(),K._31Q=yc(K.tick,K))},handle_mouseup:function(B){this.handle_touchend(B)},handle_touchend:function($){var R=this._57I;R&&(Yh(R,Tc($))<=1&&this.gv.sm().cs(),this._57I=q)},handleWindowMouseMove:function(I){this.handleWindowTouchMove(I)},handleWindowTouchMove:function(F){var T,b,D=this,G=D.gv,$=D._62O,B=D.point,H=G.dm(),J=H.getHistoryManager(),y=G.lp(F),e=y.x-B.x,Q=y.y-B.y,S=-W*e/G.getWidth(),q=-W*Q/G.getHeight();if("roaming"===$)D.rotate(F,S/2,q/2);else if($===es||$===yk||$===vm)J&&!G._86O&&J.beginInteraction(),G.fi({kind:G._86O?"betweenEditRotation":"beginEditRotation",event:F}),G._86O=1,G.sm().each(function(P){if($p(P)&&G.isRotationEditable(P)){var F=E(S)>E(q)?S:q;$===es?P.setRotationX(P.getRotationX()+F):$===yk?P.setRotationY(P.getRotationY()+F):$===vm&&P.setRotationZ(P.getRotationZ()+F)}});else if("move"===$||Rh[$]){$===zh||$===Pe||$===Sl?(J&&!G._87O&&J.beginInteraction(),G.fi({kind:G._87O?"betweenEditSize":"beginEditSize",event:F}),G._87O=1):(J&&!G._moving&&J.beginInteraction(),G.fi({kind:G._moving?"betweenMove":"beginMove",event:F}),G._moving=1);var c,o=D.p3,P=G.getPositionInfo(o),k=Co(G);c=$===Zj?"x":$===Dk?"y":$===Cj?"z":$===zh?"sx":$===Pe?"sy":$===Sl?"sz":G.getMoveMode(F,D.movedata),e=e/G.getWidth()*P.width,Q=-1*Q/G.getHeight()*P.height;var R,j,C=[k[0]*e,k[4]*e,k[8]*e],A=[k[1]*Q,k[5]*Q,k[9]*Q],X=C[0]+A[0],n=C[1]+A[1],Y=C[2]+A[2],v=[o[0]+X,o[1]+n,o[2]+Y],d=fe(G.getEye(),v,!0);if("xyz"===c?(R=v,G.moveSelection(X,n,Y)):"xz"===c?(R=jb(G,o,[0,1,0],v),R&&G.moveSelection(R[0]-o[0],0,R[2]-o[2])):"xy"===c?(R=jb(G,o,[0,0,1],v),R&&G.moveSelection(R[0]-o[0],R[1]-o[1],0)):"yz"===c?(R=jb(G,o,[1,0,0],v),R&&G.moveSelection(0,R[1]-o[1],R[2]-o[2])):"x"===c||"sx"===c?(d[0]=0,R=jb(G,o,d,v),R&&(j=R[0]-o[0],"x"===c?G.moveSelection(j,0,0):G.sm().each(function(N){$p(N)&&G.isSizeEditable(N)&&(T=I($r,N.getWidth()+j),b=T/N.getWidth(),N.setWidth(T),Ap(F)&&(N.setHeight(N.getHeight()*b),N.setTall(N.getTall()*b)))}))):"y"===c||"sy"===c?(d[1]=0,R=jb(G,o,d,v),R&&(j=R[1]-o[1],"y"===c?G.moveSelection(0,j,0):G.sm().each(function(U){$p(U)&&G.isSizeEditable(U)&&(T=I($r,U.getTall()+j),b=T/U.getTall(),U.setTall(T),Ap(F)&&(U.setHeight(U.getHeight()*b),U.setWidth(U.getWidth()*b)))}))):("z"===c||"sz"===c)&&(d[2]=0,R=jb(G,o,d,v),R&&(j=R[2]-o[2],"z"===c?G.moveSelection(0,0,j):G.sm().each(function(X){$p(X)&&G.isSizeEditable(X)&&(T=I($r,X.getHeight()+j),b=T/X.getHeight(),X.setHeight(T),Ap(F)&&(X.setTall(X.getTall()*b),X.setWidth(X.getWidth()*b)))}))),!R)return;D.p3=R}else if($===yn){var g=D.div;g||(g=D.div=Zr(),Bd(D.getView(),g),g.op=B,g.style.background=G.getRectSelectBackground()),G.fi({kind:G._rectSelecting?"betweenRectSelect":"beginRectSelect",event:F}),G._rectSelecting=1,g.rect=tq(g.op,y),cq(g,g.rect)}else if("pinch"===$&&2===Lr(F)){G.fi({kind:G._pinching?"betweenPinch":"beginPinch",event:F}),G._pinching=1;var j=vo(F);G.handlePinch(j,D.dist),D.dist=j}else"pan"===$||Ap(F)?D.pan(F,e,Q):G.isFirstPersonMode()||(rp(F)?D.rotate(F,S,q):(D.pan(F,e,0),G.isWalkable()&&(G.fi({kind:G._walking?"betweenWalk":"beginWalk",event:F}),G._walking=1,G.walk(Q/G.getHeight()*G.getCenterInfo().height))));D.point=y},pan:function(Y,J,X){var f=this.gv;if(f.isPannable()){var k=f.getCenterInfo(),C=J/f.getWidth()*k.width,t=-1*X/f.getHeight()*k.height;f.fi({kind:f._panning?"betweenPan":"beginPan",event:Y}),f._panning=1,f.pan(-C,-t)}},rotate:function(k,I,s){var a=this.gv;a.isRotatable()&&(a.fi({kind:a._rotating?"betweenRotate":"beginRotate",event:k}),a._rotating=1,a.rotate(I,s))},handleWindowMouseUp:function(m){this.handleWindowTouchEnd(m)},handleWindowTouchEnd:function(C){var I=this,z=I.gv,Y=z.dm(),G=Y.getHistoryManager(),X=I.div;if(X){var l=z.getDatasInRect(X.rect);if(!l.isEmpty()){var $=z.sm(),p=$.toSelection();l.each(function(x){$.co(x)?p.remove(x):p.add(x)}),$.ss(p)}wg(X)}z._moving&&(delete z._moving,z.fi({kind:"endMove",event:C}),z.onMoveEnded(),G&&G.endInteraction()),z._panning&&(delete z._panning,z.fi({kind:"endPan",event:C}),z.onPanEnded()),z._rotating&&(delete z._rotating,z.fi({kind:"endRotate",event:C}),z.onRotateEnded()),z._86O&&(delete z._86O,z.fi({kind:"endEditRotation",event:C}),G&&G.endInteraction()),z._87O&&(delete z._87O,z.fi({kind:"endEditSize",event:C}),G&&G.endInteraction()),z._pinching&&(delete z._pinching,z.fi({kind:"endPinch",event:C}),z.onPinchEnded()),z._rectSelecting&&(delete z._rectSelecting,z.fi({kind:"endRectSelect",event:C}),z.onRectSelectEnded()),z._walking&&(delete z._walking,z.fi({kind:"endWalk",event:C}),z.onWalkEnded()),I.dist=I.point=I._62O=I.p3=I.movedata=I.div=I._57I=I._32Q=I._31Q=I.foward=q}});var fo=function(P){this.gv=P};Xd(fo,_,{_iv:!0,iv:function(){this._iv=!0},face:function(o,d){var l=this,A=l.gv.getGL();if(!A||!$p(o))return q;var E=d.x,v=d.width,c=d.height,P=l.height-d.y-c,b=y(v/2),N=new Uint8Array(4*v*c),$=0;for(l.iv(),l.validate(o),Xf(A,l.frame),A.readPixels(E,P,v,c,A.RGBA,A.UNSIGNED_BYTE,N),Xf(A,q),l.iv();b>=$;$++)for(var M=b-$,p=b+$,K=M;p>=K;K++)for(var X=M;p>=X;X++)if(K===M||K===p||X===M||X===p){var n=Zc.m[N[4*(K*v+X)]];if(n)return n}},get:function(U,I){this.validate();var p=this,E=p.gv.getGL();if(!E)return q;var A,C,L=U.x,Y=U.width,h=U.height,T=p.height-U.y-h,s=y(Y/2),l=new Uint8Array(4*Y*h),i=0,o=l.length,d=I?q:new eb,V=I?q:{};if(Xf(E,p.frame),E.readPixels(L,T,Y,h,E.RGBA,E.UNSIGNED_BYTE,l),Xf(E,q),I){for(;s>=i;i++)for(var P=s-i,e=s+i,x=P;e>=x;x++)for(var m=P;e>=m;m++)if((x===P||x===e||m===P||m===e)&&(A=p.info(l,4*(x*Y+m))))return A}else for(;o>i;i+=4)A=p.info(l,i),A&&(C=A.data,V[C._id]||(d.add(C),V[C._id]=C));return d},info:function(T,I){return this.colorMap[(T[I]<<24)+(T[I+1]<<16)+(T[I+2]<<8)+T[I+3]]},validate:function(k){var m=this,h=m.gv,o=h.getGL();if(o){var H=h.getWidth(),W=h.getHeight(),g=o.RGBA,M=o.TEXTURE_2D,t=o.RENDERBUFFER,s=o.FRAMEBUFFER;m.texture||(m.texture=Ih(o),m.render=o.createRenderbuffer(),m.frame=o.createFramebuffer()),(m.width!==H||m.height!==W)&&(sr(o,m.texture),o.texImage2D(M,0,g,H,W,0,g,o.UNSIGNED_BYTE,q),Wd(o,o.TEXTURE_MIN_FILTER,o.LINEAR),o.bindRenderbuffer(t,m.render),o.renderbufferStorage(t,o.DEPTH_COMPONENT16,H,W),Xf(o,m.frame),o.framebufferTexture2D(s,o.COLOR_ATTACHMENT0,M,m.texture,0),o.framebufferRenderbuffer(s,o.DEPTH_ATTACHMENT,t,m.render),sr(o,q),o.bindRenderbuffer(t,q),Xf(o,q),m.width=H,m.height=W),m._iv&&(m._iv=!1,Xf(o,m.frame),h._42(k||(m.colorMap={}),1),Xf(o,q))}}});var Nf=function(w){this.gv=w};Xd(Nf,_,{gap:0,size:0,_42:function(N,K){var k=this,Q=k.gv,I=Q._gridGap,u=Q._gridSize;if(Q._gridVisible){if(k.gap!==I||k.size!==u){for(var Z=[],m=Q._gridSize/2,b=I*m,D=0;2*m+1>D;D++){var G=6*D,R=6*(2*m+1)+G;Z[G]=-b,Z[G+1]=0,Z[G+2]=-b+D*I,Z[G+3]=b,Z[G+4]=0,Z[G+5]=-b+D*I,Z[R]=-b+D*I,Z[R+1]=0,Z[R+2]=-b,Z[R+3]=-b+D*I,Z[R+4]=0,Z[R+5]=b}k.vs=new aj(Z),k.gap=I,k.size=u}mo(Q),vl(N,K),_j(N),qq(N,K,1,Q._gridColor,Q._buffer.vs,k.vs),Qq(N,0,k.vs.length/3,N.LINES),sk(N),xf(N,K)}else k.vs=k.gap=k.size=q}});var ei=function(z){this.gv=z};Xd(ei,_,{_42:function(Y,C){var v=this.gv,u=v._buffer.vs,O=v._axisXColor,f=v._axisYColor,$=v._axisZColor,E=v._originAxisVisible,g=v._centerAxisVisible;if(E||g){var F=K?Y.TRIANGLES:Y.TRIANGLE_FAN,s=Y.LINES;if(mo(v),vl(Y,C),_j(Y),E){var d=v.getCenterInfo(),r=c(d.width,d.height)/5,M=.8*r,x=.05*r;qq(Y,C,1.5,O,u,new aj([0,0,0,r,0,0,M,x,0,M,0,x,M,-x,0,M,0,-x,M,x,0,0,0,0,0,r,0,x,M,0,0,M,x,-x,M,0,0,M,-x,x,M,0,0,0,0,0,0,r,x,0,M,0,x,M,-x,0,M,0,-x,M,x,0,M])),Qq(Y,0,2,s),Qq(Y,1,6,F),qq(Y,C,q,f),Qq(Y,7,2,s),Qq(Y,8,6,F),qq(Y,C,q,$),Qq(Y,14,2,s),Qq(Y,15,6,F)}if(g){var i=v._center,b=i[0],L=i[1],l=i[2],d=v.getPositionInfo(i);r=c(d.width,d.height)/20,qq(Y,C,1.5,O,u,new aj([b,L,l,b+r,L,l,b,L,l,b,L+r,l,b,L,l,b,L,l+r])),Qq(Y,0,2,s),qq(Y,C,q,f),Qq(Y,2,2,s),qq(Y,C,q,$),Qq(Y,4,2,s)}sk(Y),xf(Y,C)}}});var Of=function(u){this.gv=u},Zj="edit_tx",Dk="edit_ty",Cj="edit_tz",es="edit_rx",yk="edit_ry",vm="edit_rz",zh="edit_sx",Pe="edit_sy",Sl="edit_sz",Rh={};Rh[Zj]=1,Rh[Dk]=1,Rh[Cj]=1,Rh[es]=1,Rh[yk]=1,Rh[vm]=1,Rh[zh]=1,Rh[Pe]=1,Rh[Sl]=1,Xd(Of,_,{_42:function(b,K,s){var S=this,C=S.gv,e=C.sm().ld();if(C.isEditable(e)&&$p(e)&&(!C.isFirstPersonMode()||!C.isMouseRoamable()&&!uh)){mo(C);var Y,Z,z=C.isMovable(e),i=C.isRotationEditable(e),O=C.isSizeEditable(e),_=C._axisXColor,d=C._axisYColor,P=C._axisZColor,R=C._editSizeColor,p=C.getCenterInfo(),V=c(p.width,p.height)/10,u=V/(s?5:10),I=.7*V,G=.4*I,a=e.p3(),o=a[0],h=a[1],L=a[2];Y=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],z&&S._17O(b,K,e,s,Zj,_,Y,[o,h-u,L,o+I,h-u,L,o+I,h,L,o+I,h,L,o,h,L,o,h-u,L,o,h-u,L+u,o+I,h-u,L+u,o+I,h-u,L,o+I,h-u,L,o,h-u,L,o,h-u,L+u]),Z=o+I,O&&S._17O(b,K,e,s,zh,R,Y,[Z,h-u,L,Z+G,h-u,L,Z+G,h,L,Z+G,h,L,Z,h,L,Z,h-u,L,Z,h-u,L+u,Z+G,h-u,L+u,Z+G,h-u,L,Z+G,h-u,L,Z,h-u,L,Z,h-u,L+u]),Z+=G,i&&S._17O(b,K,e,s,es,_,Y,[Z,h-u,L,Z+G,h-u,L,Z+G,h,L,Z+G,h,L,Z,h,L,Z,h-u,L,Z,h-u,L+u,Z+G,h-u,L+u,Z+G,h-u,L,Z+G,h-u,L,Z,h-u,L,Z,h-u,L+u]),Y=[0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0],z&&S._17O(b,K,e,s,Dk,d,Y,[o,h,L,o,h+I,L,o-u,h+I,L,o-u,h+I,L,o-u,h,L,o,h,L,o,h,L,o,h,L-u,o,h+I,L-u,o,h+I,L-u,o,h+I,L,o,h,L]),Z=h+I,O&&S._17O(b,K,e,s,Pe,R,Y,[o,Z,L,o,Z+G,L,o-u,Z+G,L,o-u,Z+G,L,o-u,Z,L,o,Z,L,o,Z,L,o,Z,L-u,o,Z+G,L-u,o,Z+G,L-u,o,Z+G,L,o,Z,L]),Z+=G,i&&S._17O(b,K,e,s,yk,d,Y,[o,Z,L,o,Z+G,L,o-u,Z+G,L,o-u,Z+G,L,o-u,Z,L,o,Z,L,o,Z,L,o,Z,L-u,o,Z+G,L-u,o,Z+G,L-u,o,Z+G,L,o,Z,L]),Y=[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0],z&&S._17O(b,K,e,s,Cj,P,Y,[o,h,L,o,h,L+I,o,h-u,L+I,o,h-u,L+I,o,h-u,L,o,h,L,o,h-u,L,o-u,h-u,L,o-u,h-u,L+I,o-u,h-u,L+I,o,h-u,L+I,o,h-u,L]),Z=L+I,O&&S._17O(b,K,e,s,Sl,R,Y,[o,h,Z,o,h,Z+G,o,h-u,Z+G,o,h-u,Z+G,o,h-u,Z,o,h,Z,o,h-u,Z,o-u,h-u,Z,o-u,h-u,Z+G,o-u,h-u,Z+G,o,h-u,Z+G,o,h-u,Z]),Z+=G,i&&S._17O(b,K,e,s,vm,P,Y,[o,h,Z,o,h,Z+G,o,h-u,Z+G,o,h-u,Z+G,o,h-u,Z,o,h,Z,o,h-u,Z,o-u,h-u,Z,o-u,h-u,Z+G,o-u,h-u,Z+G,o,h-u,Z+G,o,h-u,Z])}},_17O:function(y,j,t,i,I,E,k,T){var H=this.gv._buffer;Wr(y,j,i,!0,t,I),lg(y,j,q,!0,q,!0,q,!1),Hg(y,j.uDiffuse,E),nj(y,H.vs,new aj(T),j.aPosition),nj(y,H.ns,new aj(k),j.aNormal),_j(y),Qq(y,0,12),sk(y),ab(y,j)}});var Ur=function(P,f){this.gv=P,this.s=function(B,A,r){return A==q&&(A=r),A==q?f.getStyle(B):oj(A,f,P)},this.data=f};Xd(Ur,_,{I3d:!0,ms_icons:1,_iv:!0,iv:function(){this._iv=!0},_42:function(y,j,z,I){var O=this,l=O.data;if(!(l instanceof bn)){var J,F,R,Y,Z,t,r,h=O.gv,n=l._id,v=O.s("shape3d.alwaysOnTop")?null:O.s("batch"),B=h._34O,c=h._33O,S=h.isSelectable(l),i=h.getBrightness(l),m=i!=q&&1!==i;if(O.needValidate()){if(R=Yj(B,c,l,v),O.validate(R,v?Mj[v]||yj:q),R&&(Y=B[n],Z=Y.size=R.vs.length/3-Y.begin,r=R.rs))for(i=m?i:1,t=0;Z>t;t++)r.push(i);if($p(l)){var p=h.getWireframe(l);p&&ol(h,l,p);var w=h.getWireframeGeometry(l);w&&ol(h,l,w)}O.labelInfo=O.label2Info=O.noteInfo=O.note2Info=O._38o=q,O._24O(Te,"getLabel"),O._24O(Or,"getLabel2"),O._26O(Wm,"getNote"),O._26O(pl,"getNote2"),O._15O(),O._iv=!1}m&&Hg(y,j.uBrightness,i),Hg(y,j.uAlphaTest,O.s("alphaTest")),F=Wr(y,j,z,S,l,uq),F&&(Db(F,B[n],c),Db(F,h._polylineIndexMap[n],h._polylineModelMap),Db(F,h._wireframeIndexMap[n],h._wireframeModelMap)),B[n]||O._80o(y,j,I),h.isLabelVisible(l)&&((J=O.labelInfo)&&(Wr(y,j,z,S,l,Te),O._28O(J,Te,I)),(J=O.label2Info)&&(Wr(y,j,z,S,l,Or),O._28O(J,Or,I))),h.isNoteVisible(l)&&((J=O.noteInfo)&&(Wr(y,j,z,S,l,Wm),O._29O(J,Wm,I)),(J=O.note2Info)&&(Wr(y,j,z,S,l,pl),O._29O(J,pl,I))),(J=O._38o)&&O._99O(y,j,J,z,S,I),m&&Hg(y,j.uBrightness,1)}},needValidate:function(){return this._iv},validate:function(){},_16O:function(){return Ab},_80o:function(){},dispose:function(){},getBodyColor:function(p){var Q=this.data,l=this.gv.getBodyColor(Q);return l?l:p?Q.getStyle(p):q},_24O:function(p,A){var X=this,m=X.data,r=X.gv,e=X.s,_=r[A](m);if(_!=q){var n=e(p+".scale"),Z=e(p+".max"),z=X[p+"Info"]={label:_,textureScale:e(p+".texture.scale"),color:r[A+"Color"](m),font:e(p+".font"),align:e(p+".align"),background:r[A+"Background"](m)},F=z.rect=Lf(z,_);Z>0&&Z<F.width&&(z.labelWidth=F.width,F.width=Z),F.x=F.y=0,F.width*=n,F.height*=n,z.mat=X._16O(e(p+".autorotate"),e(p+".position"),F,e(p+".face"),e(p+".t3"),e(p+".r3"),e(p+".rotationMode"));var t=F.width/2,u=F.height/2;z.vs=new aj([-t,u,0,-t,-u,0,t,-u,0,t,u,0]),F.width/=n,F.height/=n}},_26O:function(H,w){var y=this,s=y.data,Y=y.gv,l=y.s,J=Y[w](s);if(J!=q){var G=l(H+".scale"),p=this[H+"Info"]={note:J,textureScale:l(H+".texture.scale"),expanded:l(H+".expanded"),font:l(H+".font"),color:l(H+".color"),align:l(H+".align"),borderWidth:l(H+".border.width"),borderColor:l(H+".border.color"),background:Y[w+"Background"](s)};if(p.expanded){var V=l(H+".max"),M=Lf(p,J);M.width+=6,M.height+=2,V>0&&V<M.width&&(p.labelWidth=M.width,M.width=V);var L={x:-M.width/2,y:-8-M.height,width:M.width,height:M.height+8}}else L={x:-6,y:-18,width:12,height:18};p.mat=y._16O(l(H+".autorotate"),l(H+".position"),q,l(H+".face"),l(H+".t3"),l(H+".r3"),l(H+".rotationMode")),p.rect=L,1!==G&&(L=Ll(L),L.x*=G,L.height*=G,L.y=-L.height,L.width*=G);var k=L.x,b=L.y,P=L.width,u=L.height;p.vs=new aj([k,-b,0,k,-b-u,0,k+P,-b-u,0,k+P,-b,0])}},_28O:function(p,i,R){if(R(this.s(i+".transparent"))){var e=p.rect,A=p.textureScale,j=e.width*A,B=e.height*A;if(j>=1&&B>=1){var o=Hf(j,B);1!==A&&(o.translate(o,e.x,e.y),o.scale(A,A),o.translate(o,-e.x,-e.y)),om(o,p),o.restore(),hs(this,i,p.mat,p.vs,!0)}}},_29O:function(b,p,B){if(B(this.s(p+".transparent"))){var c=b.rect,m=b.textureScale,F=c.x,I=c.y,D=c.width*m,k=c.height*m;if(D>=1&&k>=1){c.x=c.y=0;var R=Hf(D,k);1!==m&&R.scale(m,m),Jm(R,b),R.restore(),c.x=F,c.y=I,hs(this,p,b.mat,b.vs,!1)}}},_99O:function(T,p,n,f,b,S){if(n){var u=this,c=u.gv,W=u.data,l=c._buffer,v=c._1O,I=n.icons;for(var m in I){var y=I[m],P=n.rects[m];if(P&&S(oj(y.transparent,W,c))){Wr(T,p,f,b,W,m);var O=oj(y.shape3d,W,c),V=O?[O]:oj(y.names,W,c),K=V?V.length:0,s=oj(y.textureScale,W,c)||1,Y=oj(y.light,W,c);Y==q&&(Y=O?!0:!1),lg(T,p,oj(y.blend,W,c),Y,oj(y.opacity,W,c),oj(y.reverseFlip,W,c),oj(y.reverseColor,W,c),oj(y.reverseCull,W,c));for(var L=0;K>L;L++){var t=V[L],x=P[L];if(Wg(u,x.mat),O)is(c,W,Wl(u,O),u);else{var U=Si(t);if(U){var A=x.width*s,Z=x.height*s;if(A>=1&&Z>=1){var _=Hf(A,Z);hn(_,U,oj(y.stretch,W,c),0,0,A,Z,W,c),_.restore(),Ih(T,fh,v),_j(T,p,v,oj(y.discardSelectable,W,c),l.uv,wh),nj(T,l.vs,x.vs,p.aPosition),nj(T,l.ns,nm,p.aNormal),qh(T,l.is,gl),Kr(T,0,gl.length),sk(T,p,v)}}}$e(c)}ab(T,p)}}}}});var $j=function(_,u){cn($j,this,[_,u])};Xd($j,Ur,{_16O:function(D,H,V,E,u,X,m,T,B){var s=this.data,d=s.getFinalScale3d(),e=Cg(H,d,V,E,T,B);if(s.hasOwnProperty("_anchor")||s.hasOwnProperty("_anchorElevation")){var t=s.getAnchor3d();e[0]-=(t.x-.5)*d[0],e[1]-=(t.y-.5)*d[1],e[2]-=(t.z-.5)*d[2]}return ef(Ae(),e,s.p3(),E,u,X,m,D,s.r3(),s.getRotationMode())},clear:function(){var M=this;M.faceMat=M.mat=M.shapeModel=M.left=M.right=M.front=M.back=M.top=M.bottom=M.csg=q},needValidate:function(){return this._iv||this.s("shape3d.autorotate")||this.s("shape3d.fixSizeOnScreen")},validate:function(g,i){var U=this,X=U.gv,Y=U.data,Q=Wl(U);U._updateAutoRotation(),U._updateFixSize2d();var y=wp(Y,X.getMat(Y),Q?U.s("shape3d.scaleable"):!0),H=U._calcAnchorMat(Y);if(H&&Sq(y,y,H),U.clear(),g){var O=[];Q?xq(X,Y,Q,U,U.getBodyColor(),[y],g,O):(Qk(X,Y,g,i,y,qg,O,Eo),Qk(X,Y,g,i,y,Ai,O,ts),Qk(X,Y,g,i,y,jo,O,Cf),Qk(X,Y,g,i,y,rs,O,Wo),Qk(X,Y,g,i,y,fj,O,uk),Qk(X,Y,g,i,y,Uc,O,Xb)),O.length&&(Hd(g.vs,O),Hd(g.ns,Qf(O)))}else U.mat=y,(U.shapeModel=Q)||(U.vf(qg),U.vf(Ai),U.vf(fj),U.vf(Uc),U.vf(jo),U.vf(rs))},_updateAutoRotation:function(){var x=this,d=x.s("shape3d.autorotate");if(d){var K,t=x.gv,G=x.data;K="string"==typeof d?[d.indexOf("x")<0?t._eye[0]:t._center[0],d.indexOf("y")<0?t._eye[1]:t._center[1],d.indexOf("z")<0?t._eye[2]:t._center[2]]:t._eye;var n=t._center,T=[K[0]-n[0],K[1]-n[1],K[2]-n[2]],C=G.p3(),_=td([C[0]+T[0],C[1]+T[1],C[2]+T[2]],C,t._up),j=G.r3(),X=Zn(_,G.getRotationMode());Math.abs(j[0]-X[0])<1e-5&&Math.abs(j[1]-X[1])<1e-5&&Math.abs(j[2]-X[2])<1e-5||G.r3(X)}},_updateFixSize2d:function(){var Z=this,X=Z.data,G=Z.s("shape3d.fixSizeOnScreen");if(!G)return X._dynamicScale3d&&delete X._dynamicScale3d,void 0;var R=Z.gv;X.getFinalScale3d();var B=wp(X,R.getMat(X)),Y=tl([0,0,0],B),K=R.toViewPosition(Y);if(!isNaN(K.x)&&!isNaN(K.y)){var w=tl([1,0,0],B),l=R.toViewPosition(w),m=tl([0,1,0],B),v=R.toViewPosition(m),E=l.x-K.x,f=v.y-K.y,$=X._dynamicScale3d||[1,1,1],n=Si(X.s("shape3d.image")),I=G[0]>0?G[0]:n?re(n,Z):20,r=G[1]>0?G[1]:n?Vo(n,Z):20,d=Math.abs(E/I),T=Math.abs(f/r);Math.abs(d-1)<.001&&Math.abs(T-1)<.001||(X._dynamicScale3d=[$[0]/d,$[1]/T,$[2]])}},_calcAnchorMat:function(y){if(y.hasOwnProperty("_anchor")||y.hasOwnProperty("_anchorElevation")){var c=y.getAnchor3d(),K={x:c.x-.5,y:c.y-.5,z:c.z-.5},W=Ae();return yd(W,[-K.x,-K.y,-K.z]),W}},vf:function(M){var N=this;if(N.gv.getFaceVisible(N.data,M)){var E=Tk(N,M);return E.mat&&(N.faceMat=!0),E}},_80o:function(K,j,m){var p=this,s=p.gv,P=p.data,C=s._cube,R=p.shapeModel;mo(s,p.mat),R?is(s,P,R,p,p.getBodyColor(),m):(nj(K,C.vs,q,j.aPosition),nj(K,C.ns,q,j.aNormal),qh(K,C.is),p._18O(K,j,p.left,0,m),p._18O(K,j,p.front,6,m),p._18O(K,j,p.right,12,m),p._18O(K,j,p.back,18,m),p._18O(K,j,p.top,24,m),p._18O(K,j,p.bottom,30,m)),$e(s),p.faceMat&&(p._18O(K,j,p.left,0,m,!0),p._18O(K,j,p.front,6,m,!0),p._18O(K,j,p.right,12,m,!0),p._18O(K,j,p.back,18,m,!0),p._18O(K,j,p.top,24,m,!0),p._18O(K,j,p.bottom,30,m,!0))},_18O:function(h,I,L,E,p,Y){if(L){if(!p(L.transparent))return;if(Y&&!L.mat||!Y&&L.mat)return;Y&&mo(this.gv,L.mat);var e=this,S=e.data,g=e.gv,n=g.getTexture(L.texture,S),A=L.uv,Z=L.uvScale,c=L.uvOffset,r=L.discardSelectable;if(n)if(A){for(var _=8*(E/6),x=0;8>x;x++)wq[_+x]=A[x];_j(h,I,n,r,g._buffer.uv,wq,c,Z)}else _j(h,I,n,r,g._cube.uv,q,c,Z);else _j(h);lg(h,I,L.blend,L.light,L.opacity,L.reverseFlip,L.reverseColor,L.reverseCull),Hg(h,I.uDiffuse,L.color),Kr(h,E,6),ab(h,I),sk(h,I,n),Y&&$e(g)}}});var Yp=function(g,x){cn(Yp,this,[g,x])};Xd(Yp,Ur,{_25Q:1,validate:function(i){var Y=this,a=Y.gv,W=Y.data,o=Y.s,Z=o("edge.width"),k=W._40I,h=W._41I;if(Y.shapeModel=Y.info=q,k&&h){var C,j,m,Q,x,A,U,S,G,V,y=W.isLooped(),F=o(Vd),s=u.getEdgeType(F);if(s){var T=s(W,ee(Y,a,W,y,F),a,Y._19Q);if(!T.points||T.points.isEmpty())return;A=Y.info={},U=T.segments,x=T.points,S=x.size();for(var L=k.getElevation(),$=h.getElevation(),e=0;S>e;e++){var l=x.get(e);l.e==q&&(l.e=L+($-L)*e/(S-1))}G=yo(x.get(0)),V=yo(x.get(S-1));var z=S%2;0===z?(A.c1=yo(x.get(S/2-1)),A.c2=yo(x.get(S/2))):A.p3=yo(x.get((S-z)/2)),A.s1=G,A.s2=yo(x.get(1)),A.t1=yo(x.get(S-2)),A.t2=V}else{x=new eb,A=Y.info={};var r=o("edge.offset"),v=o("edge.center"),P=o("edge.source.t3"),R=o("edge.target.t3"),n=k.p3(),K=h.p3();if(P&&(n[0]+=P[0],n[1]+=P[1],n[2]+=P[2]),R&&(K[0]+=R[0],K[1]+=R[1],K[2]+=R[2]),F===Pf){U=o("edge.segments");var B=A.points=o(ip)||Ki;if(S=B.size()){G=yo(B.get(0)),V=yo(B.get(S-1)),!v&&r&&(m=fe(G,n,!0),r=c(r,Yh(n,G)),n=[n[0]+m[0]*r,n[1]+m[1]*r,n[2]+m[2]*r],m=fe(K,V,!0),r=c(r,Yh(V,K)),K=[K[0]-m[0]*r,K[1]-m[1]*r,K[2]-m[2]*r]);var z=S%2;0===z?(C=yo(B.get(S/2-1)),j=yo(B.get(S/2))):A.p3=yo(B.get((S-z)/2)),A.s1=n,A.s2=G,A.t1=V,A.t2=K}else!v&&r&&(m=fe(K,n,!0),Q=Yh(n,K),r=xj(r,Q),n=[n[0]+m[0]*r,n[1]+m[1]*r,n[2]+m[2]*r],K=[K[0]-m[0]*r,K[1]-m[1]*r,K[2]-m[2]*r]),C=n,j=K;x.add({x:n[0],y:n[2],e:n[1]}),x.addAll(B),x.add({x:K[0],y:K[2],e:K[1]})}else{var E=ee(Y,a,W,y,F);if(Y._19Q||(E=-E),y){var p=n[0],J=n[1],M=n[2],w=k.getTall()/2+E;C=[p-E,J+w,M],j=[p+E,J+w,M],x.add({x:p-E,y:M,e:J}),x.add({x:p-E,y:M,e:J+w}),x.add({x:p+E,y:M,e:J+w}),x.add({x:p+E,y:M,e:J})}else{m=fe(K,n,!0),Q=Yh(n,K);var I={x:n[0],y:n[2]},O={x:K[0],y:K[2]},X=se(q,I,O,E),N=X.x-I.x,b=X.y-I.y;r=xj(r,Q),m[0]*=r,m[1]*=r,m[2]*=r,C=[n[0]+m[0]+N,n[1]+m[1],n[2]+m[2]+b],j=[K[0]-m[0]+N,K[1]-m[1],K[2]-m[2]+b],v?(x.add({x:n[0],y:n[2],e:n[1]}),x.add({x:C[0],y:C[2],e:C[1]}),x.add({x:j[0],y:j[2],e:j[1]}),x.add({x:K[0],y:K[2],e:K[1]})):(x.add({x:C[0],y:C[2],e:C[1]}),x.add({x:j[0],y:j[2],e:j[1]}))}}A.c1=C,A.c2=j}A.list=o(Sm)===Hc?Y.createTubeModel(x,U,Z/2,i):Y.createLineModel(x,U,Z,"edge","edge.dash")}}});var Mg=function(s,d){cn(Mg,this,[s,d])};Xd(Mg,$j,{_80o:function(i,V,q){var k=this,b=k.gv,l=k.shapeModel;mo(b,k.mat),l?is(b,k.data,l,k,k.getBodyColor(),q):(_e(k,i,V,k.left,q),_e(k,i,V,k.front,q),_e(k,i,V,k.right,q),_e(k,i,V,k.back,q),_e(k,i,V,k.top,q),_e(k,i,V,k.bottom,q)),$e(b)
},validate:function(r,E){var k,Z,$=this,Y=$.s,W=$.data,m=W.p3(),z=W._thickness/2,Q=W.isClosePath(),B=W.getPoints(),g=W.getSegments(),u=Y(zo),T=r&&r.uv;if($.clear(),0>z)Z=$.shapeModel=sl(B,g,Y(_n),Y(dn),u,Y(im),W.getTall(),W.getElevation(),Q),Y(Om)?Y("shape3d.image")||delete Z.uv:(delete Z.vs,delete Z.ns,delete Z.uv),Y("shape3d.top.image")||delete Z.top_uv,Y("shape3d.bottom.image")||delete Z.bottom_uv;else if(Y(Sm)===Hc)k=Qd(B,g,u,Q),Z=$.shapeModel={vs:[]},Y("shape3d.image")&&(Z.uv=[],Z.sum=Y(im)||pf(k)||1,Z.len=0),Y(_n)&&!Q&&(Z.top_vs=[],Y("shape3d.top.image")&&(Z.top_uv=[])),Y(dn)&&!Q&&(Z.bottom_vs=[],Y("shape3d.bottom.image")&&(Z.bottom_uv=[])),$._12O(k,z);else{var U,x,D,h,V,f,y,j,p,H;k=Qd(B,g,u,Q),V=$.vf(fj,T,!1,E),z&&(f=$.vf(Uc,T,!1,E),y=Q?q:$.vf(qg,T,!1,E),j=Q?q:$.vf(Ai,T,!1,E),p=$.vf(jo,T,!1,E),H=$.vf(rs,T,!1,E)),z?$._12O(k,z):V&&k.forEach(function(X){if(h=X.length,h>0)for(U=X[0],D=1;h>D;D++)x=X[D],$.addV(V.vs,U,x),U=x}),$._20Q(k),r||(V&&(V.ns=Qf(V.vs),Kl(V,"vs"),Kl(V,rm)),z&&(f&&(f.ns=Qf(f.vs),Kl(f,"vs"),Kl(f,rm)),y&&(y.ns=Qf(y.vs),Kl(y,"vs"),Kl(y,rm)),j&&(j.ns=Qf(j.vs),Kl(j,"vs"),Kl(j,rm)),p&&(p.ns=Qf(p.vs),Kl(p,"vs"),Kl(p,rm)),H&&(H.ns=Qf(H.vs),Kl(H,"vs"),Kl(H,rm))))}var K=$.mat=Ae();yd(K,m),en(K,W.r3(),W.getRotationMode()),yd(K,kl(m)),r&&(lb($,K,r,Z),$.clear())},_20Q:function(N){var D,M,L,d,p,R,S,b=this,i=b.front,O=b.back,H=b.top,U=b.bottom,I=i?i.tuv:q,n=O?O.tuv:q,h=H?H.tuv:q,A=U?U.tuv:q,F=0;(I||n||h||A)&&(D=b.s(im)||pf(N)||1,N.forEach(function(W){if(M=W.length,M>0)for(R=W[0],L=1;M>L;L++)S=W[L],d=F/D,F+=Yh(R,S),p=F/D,b._14O(i,d,p),b._14O(O,1-p,1-d),b._14O(H,d,p),b._14O(U,d,p),R=S}))},_14O:function(S,b,r){if(S){var L=S.uv,K=S.tuv;if(K){if(L)var A=L[0]+(L[6]-L[0])*b,h=L[1]+(L[7]-L[1])*b,f=L[2]+(L[4]-L[2])*b,T=L[3]+(L[5]-L[3])*b,m=L[2]+(L[4]-L[2])*r,Y=L[3]+(L[5]-L[3])*r,l=L[0]+(L[6]-L[0])*r,Z=L[1]+(L[7]-L[1])*r;else A=b,h=0,f=b,T=1,m=r,Y=1,l=r,Z=0;K.push(f,T,m,Y,l,Z,l,Z,A,h,f,T)}}},_13O:function(U){var e=U.uv,g=U.tuv;g&&(e?g.push(e[2],e[3],e[4],e[5],e[6],e[7],e[6],e[7],e[0],e[1],e[2],e[3]):g.push(0,1,1,1,1,0,1,0,0,0,0,1))},_12O:function(h,l){var $,C,t,N,G,F=this;h.forEach(function(m){if(G=m.length,G>0)for($={p:m[0],n:!0},N=1;G>N;N++)C=m[N],t=G-1>N?m[N+1]:q,F.addPoint($,C,t,l,m)})},addPoint:function(w,x,R,N,E){var K,F,s,D,T,M,k,J,l,H=this,i=w.p,X=w.f,$=w.b,j=H.s("shape3d.side")||Ed,U=H.s("shape3d.start.angle"),B=H.s("shape3d.sweep.angle"),m=H.shapeModel,p=H.data.isClosePath();if(w.n&&(w.n=!1,X=p&&E.length>2?se(E[E.length-2],i,x,N):se(q,i,x,N),$=Rf(i,X),m?m.top_vs&&H._10O($,X,j,U,B,m.top_vs,m.top_uv):(K=H.left)&&(H.addV(K.vs,$,X),H._13O(K))),F=R?se(i,x,R,N):p&&E.length>2?se(i,x,E[1],N):se(i,x,q,N),s=Rf(x,F),m){var P,n,u=m.vs,t=m.uv,y=m.sum;for(t&&(P=m.len/y,m.len+=Yh(i,x),n=m.len/y),M=H._9O($,X,j,U,B),k=H._9O(s,F,j,U,B),J=0;j>J;J++)l=J+1,Hd(u,M[l]),Hd(u,k[J]),Hd(u,M[J]),Hd(u,k[J]),Hd(u,M[l]),Hd(u,k[l]),t&&(D=J/j,T=l/j,t.push(P,T,n,D,P,D,n,D,P,T,n,T));!R&&m.bottom_vs&&H._10O(s,F,j,U,B,m.bottom_vs,m.bottom_uv,!0)}else!R&&(K=H.right)&&(H.addV(K.vs,F,s),H._13O(K)),(K=H.front)&&H.addV(K.vs,X,F),(K=H.back)&&H.addV(K.vs,s,$),(K=H.top)&&H.addH(K.vs,X,F,s,$,!0),(K=H.bottom)&&H.addH(K.vs,$,s,F,X);w.p=x,w.f=F,w.b=s},_10O:function(A,y,K,S,R,b,r,L){var J,X,w=this,s=w.data,Z=w._9O(A,y,K,S,R),t=(A.x+y.x)/2,u=(A.y+y.y)/2,p=s.getElevation(),q=0;for(q=0;K>q;q++)L?(Hd(b,Z[q]),Hd(b,Z[q+1])):(Hd(b,Z[q+1]),Hd(b,Z[q])),Hd(b,[t,p,u]),r&&(L?(J=W*(q+1)/K+S,X=W*q/K+S):(J=W*q/K+S,X=W*(q+1)/K+S),r.push(.5-.5*z(X),.5-.5*M(X),.5-.5*z(J),.5-.5*M(J),.5,.5))},_9O:function(U,u,l,S,N){var Z,X,e=this,D=e.data,V=[],y=(U.x+u.x)/2,w=(U.y+u.y)/2,F=D.getTall()/2,n=D.getElevation(),h=0;for(N=N||W;l>=h;h++)Z=N*h/l+S,X=z(Z),V.push([y+(U.x-y)*X,n+F*M(Z),w+(U.y-w)*X]);return V},addV:function(f,a,A){var F=a.x,W=a.y,N=A.x,_=A.y,E=this.data,g=E.getElevation(),r=E.getTall()/2;f.push(F,g-r,W,N,g-r,_,N,g+r,_,N,g+r,_,F,g+r,W,F,g-r,W)},addH:function(x,X,R,H,d,U){var Y=this.data,p=Y.getTall()/2,l=Y.getElevation()+(U?p:-p);x.push(X.x,l,X.y,R.x,l,R.y,H.x,l,H.y,H.x,l,H.y,d.x,l,d.y,X.x,l,X.y)},vf:function(J,v,M,h){var w,A=this,E=A.gv.getFaceVisible(A.data,J);return(M||E)&&(w=Tk(A,J,h),w.vs=[],w.tuv=E&&(w.texture||v)?[]:q,w.visible=E),w}});var ys=function(i,c){cn(ys,this,[i,c])};Xd(ys,Ur,{_25Q:1,validate:function(L){var o=this,x=o.data,H=o.s,M=x.getPoints(),_=M.size();if(o.shapeModel=o.info=q,_>1){var J=o.info={},A=x.getSegments(),C=x.getThickness(),z=yo(M.get(0)),V=yo(M.get(_-1)),B=_%2;0===B?(J.c1=yo(M.get(_/2-1)),J.c2=yo(M.get(_/2))):J.p3=yo(M.get((_-B)/2)),J.s1=z,J.s2=yo(M.get(1)),J.t1=yo(M.get(_-2)),J.t2=V,J.list=H(Sm)===Hc?o.createTubeModel(M,A,C/2,L):o.createLineModel(M,A,C,"shape.border","shape.dash")}}}),As(u,{accordionViewExpandIcon:Zo(Ao),accordionViewCollapseIcon:Zo(Ao,!0),accordionViewLabelColor:db,accordionViewLabelFont:Pn,accordionViewTitleBackground:dr,accordionViewSelectBackground:dk,accordionViewSelectWidth:3,accordionViewSeparatorColor:m,splitViewDividerSize:1,splitViewDividerBackground:dr,splitViewDragOpacity:.5,splitViewToggleIcon:{width:16,height:16,comps:[{type:wd,rect:[2,2,12,12],background:Ao}]},propertyViewLabelColor:nl,propertyViewLabelSelectColor:db,propertyViewLabelFont:Pn,propertyViewExpandIcon:Zo(zp),propertyViewCollapseIcon:Zo(zp,!0),propertyViewBackground:Cq,propertyViewRowLineVisible:!0,propertyViewColumnLineVisible:!0,propertyViewRowLineColor:In,propertyViewColumnLineColor:In,propertyViewSelectBackground:dk,listViewLabelColor:nl,listViewLabelSelectColor:db,listViewLabelFont:Pn,listViewRowLineVisible:!1,listViewRowLineColor:In,listViewSelectBackground:dk,treeViewLabelColor:nl,treeViewLabelSelectColor:db,treeViewLabelFont:Pn,treeViewExpandIcon:Zo(Ph),treeViewCollapseIcon:Zo(Ph,!0),treeViewRowLineVisible:!1,treeViewRowLineColor:In,treeViewSelectBackground:dk,treeViewDoubleClickToToggle:!0,tableViewLabelColor:nl,tableViewLabelSelectColor:db,tableViewLabelFont:Pn,tableViewRowLineVisible:!0,tableViewColumnLineVisible:!0,tableViewRowLineColor:In,tableViewColumnLineColor:In,tableViewSelectBackground:dk,treeTableViewLabelColor:nl,treeTableViewLabelSelectColor:db,treeTableViewLabelFont:Pn,treeTableViewExpandIcon:Zo(Ph),treeTableViewCollapseIcon:Zo(Ph,!0),treeTableViewRowLineVisible:!0,treeTableViewColumnLineVisible:!0,treeTableViewRowLineColor:In,treeTableViewColumnLineColor:In,treeTableViewSelectBackground:dk,tableHeaderLabelColor:nl,tableHeaderLabelFont:Pn,tableHeaderColumnLineVisible:!0,tableHeaderColumnLineColor:wl,tableHeaderBackground:Cq,tableHeaderMoveBackground:nb,tableHeaderInsertColor:dk,tableHeaderSortDescIcon:yq(zp,!0),tableHeaderSortAscIcon:yq(zp),tabViewTabGap:1,tabViewLabelColor:db,tabViewLabelFont:Pn,tabViewTabBackground:dr,tabViewSelectWidth:3,tabViewSelectBackground:dk,tabViewMoveBackground:nb,tabViewInsertColor:dk,toolbarLabelColor:nl,toolbarLabelSelectColor:db,toolbarLabelFont:Pn,toolbarBackground:Cq,toolbarSelectBackground:dk,toolbarItemGap:8,toolbarSeparatorColor:Fe},!0);var hg={translateX:1,sortColumn:1},Mm={sortable:1,sortOrder:1,sortFunc:1},Qo={focusData:1},md={dataModel:1,sortColumn:1,sortFunc:1,visibleFunc:1,rootData:1,rootVisible:1},jn={dataModel:1,sortFunc:1,visibleFunc:1,categorizable:1},$k=function(B,I){I.add(B),B.hasChildren()&&B.eachChild(function(h){$k(h,I)})},Aj=function(U,v,G,g,N,p,k,Y,F,J,O){var $,A=G.getValueType(J),_=G.getAlign(J);if(G.getEnumValues(J)){var Q=G.toEnumLabel(v,J),y=me||0,Z=0,E=p,L=u.getTextSize(g,Q).width;return $=Si(G.toEnumIcon(v,J)),$&&(Z=p+me/2,"center"===_?Z+=(Y-(y+L))/2:"right"===_&&(Z=Z+Y-(y+L)),Ep(U,$,Z,k+F/2,J,O),E=Z+me/2),Q!=q&&($?Cb(U,Q,g,N,E,k,Y-(E-p),F):Cb(U,Q,g,N,p,k,Y,F,_)),void 0}return v=G.formatValue(v),v!=q?A===dg?(Iq(U,p,k,Y,F,v),void 0):A===ih||!A&&go(v)?($=Si(v?Dl:ej),Ep(U,$,p+Y/2,k+F/2,J,O),void 0):(Cb(U,v,g,N,p,k,Y,F,_),void 0):void 0},si=function(e,B){var J=B.view,l=J.getDataModel().getHistoryManager(),M=Bi(e),U=B.column||B.property;l&&l.beginInteraction(),B.editor=e,e.info=B,J.setCurrentEditor(e),J.getView().insertBefore(M,J._79O),cq(e,B.editorRect),e.setFocus?e.setFocus():oi(e),e.commitValue=function(){e._17Q&&(e=e._17Q),J.setValue(B.data,U,e.getValue?e.getValue():e.value),e.close&&e.close(),wg(M)},U.onEditorCreated&&U.onEditorCreated(B)},kk=function(h,y,o,w,X){var k=al(h,o),p=y.value,m=y.view,d=X.getValueType(y.data);return k.onblur=k.onchange=function(){m.endEditing()},"input"===h?(p=X.formatValue(p),p!=q&&(k.value=p),k.onkeydown=function($){Yl($)&&m.endEditing()},(d===Hb||d===Op)&&k.addEventListener(xi,u.numberListener,!1)):h===yn&&w.forEach(function(I){var W=T.createElement("option");W.innerHTML=X.toEnumLabel(I),W.value=I,X.isEnumEqual(p,I)&&(W.selected=!0),Bd(k,W)}),si(k,y),k},Sc=s.widget={},ik=function(Q,R,P){Xd(p+".widget."+Q,R,P)};As(ki,{ms_value:function(J){J.getValue=function(f){var $=this.getItemById(f),a=$.element;return Me(a)?a:a?a.getValue?a.getValue():a.value:$.selected},J.setValue=function(L,D){var x=this.getItemById(L),V=x.element;V&&!Me(V)?V.setValue?V.setValue(D):V.value=D:go(D)?(x.selected=D,this.iv()):(x.element=D,this.iv())},J.v=function(l,Q){var O=this;if(2===arguments.length)O.setValue(l,Q);else{if(!we(l))return O.getValue(l);for(var r in l)O.setValue(r,l[r])}return O}},_46o:function(_){_._icon=q,_._accessType=q,_._valueType=q,_._editable=!1,_._batchEditable=!0,_._align=qg,_._nullable=!0,_._emptiable=!1,_.setParent=Aq,_.formatValue=function(G){var i=this,o=i._valueType;return i.getEnumValues()?i.toEnumLabel(G):o===ih?!!G:G!=q&&o===Hb?Z(G):G},_.setEnum=function(v,$,y,w,g,t,i){var U=this;v&&!Nc(v)&&v.values&&(w=v.editable,y=v.icons,$=v.labels,g=v.strict,t=v.maxHeight,i=v.dropDownWidth,v=v.values),mk(v)&&(v=v._as),mk($)&&($=$._as),mk(y)&&(y=y._as),U._enumValues=v,U._enumLabels=$,U._enumIcons=y,U._enumEditable=w,U._enumStrict=g==q?!0:g,U._enumMaxHeight=t,U._enumDropDownWidth=i,v&&v.length&&_c(v[0])&&(U._valueType=Op),U.fp("enum",!1,!0)},_.getEnumDropDownWidth=function(){return this._enumDropDownWidth},_.getEnumMaxHeight=function(){return this._enumMaxHeight},_.isEnumEditable=function(){return this._enumEditable},_.getEnumValues=function(){return this._enumValues},_.getEnumLabels=function(){return this._enumLabels},_.getEnumIcons=function(){return this._enumIcons},_.isEnumStrict=function(){return this._enumStrict},_.isEnumEqual=function(W,K){return this._enumStrict?W===K:W==K},_.toEnumLabel=function(v,n){var x=this,g=x.getEnumValues(n),I=x.getEnumLabels(n);if(g&&I)for(var R=0;R<g.length;R++)if(x.isEnumEqual(v,g[R]))return I[R];return v},_.toEnumIcon=function(F,v){var n=this,e=n.getEnumValues(v),I=n.getEnumIcons(v);if(e&&I)for(var b=0;b<e.length;b++)if(n.isEnumEqual(F,e[b]))return I[b];return m}},_45o:function(l){l._87o=function(W,L,p,k,J,A){if(W){var Y=this,t=Y._90I,n=Zr(1);Y._columnLineVisible&&(J-=1),Y._rowLineVisible&&(A-=1),0>=J||0>=A||(Y._90I||(t=Y._90I={}),t[L]||(t[L]=new eb),cq(n,Y.tx()+p,Y.ty()+k,J,A),Bd(n,W),Y._view.insertBefore(n,Y._79O),W.onParentAdded&&W.onParentAdded(n),t[L].add(n))}},l._76o=function(){var K=this,I=K._90I;if(I){for(var d in I)I[d].each(function(x){wg(x)});delete K._90I}},l._77o=function(t){var x=this;if(x._90I){var H=x._90I[t];H&&(H.each(function(o){wg(o)}),delete x._90I[t])}}},_47o:function(B){B.getValue=function(G,y){return y.getValue?y.getValue(G,y,this):cr(G,y.getAccessType(),y.getName())},B.setValue=function(b,C,w){if(C.isEmptiable(b)||""!==w||(w=m),C.isNullable(b)||w!=q){var J=this,p=C.getName(b),$=C.getAccessType(b),v=C.getValueType(b);v===Hb&&Me(w)?w=Y(w):v===Op&&Me(w)?w=parseFloat(w):v===ih&&Me(w)&&(w="true"===w),J._batchEditable&&C._batchEditable&&J.isSelected(b)?J.sm().each(function(N){C.setValue?C.setValue(N,C,w,J):tk(N,$,p,w)}):C.setValue?C.setValue(b,C,w,J):tk(b,$,p,w)}},B.setCurrentEditor=function(s){this.endEditing(),this._currentEditor=s,this.redraw()},B.isEditing=function(M,g){var j=this,X=j._currentEditor;if(!X)return!1;if(g){var $=X.info;return $?($.column||$.property)===g&&$.data===M:!1}return!0},B.endEditing=function(){var U=this,d=U._currentEditor,t=U.getDataModel().getHistoryManager();d&&(delete U._currentEditor,d.commitValue&&d.commitValue(d.info),U.redraw(),t&&t.endInteraction())},B.beginEditing=function(s){this.endEditing();var V=this,v=s.column||s.property;if(v.beginEditing)v.beginEditing(s);else{var E=s.data,i=s.value,I=V.getSelectBackground(E),r=v.getEnumValues(E),b=v.getSlider(E),t=v.getColorPicker(E);if(b){var P=Mr(Sc.Slider,b);return P.setValue(i),P.getView().onblur=function(){V.endEditing()},P.isInstant()&&(P.onValueChanged=function(){V.setValue(E,v,P.getValue())}),si(P,s),void 0}if(t||v.getValueType(E)===dg){var L=Mr(Sc.ColorPicker,t);return L.setValue(i),L.onClosed=function(){V.endEditing()},L.isInstant()&&(L.onValueChanged=function(U,T){V.setValue(E,v,T)}),si(L,s),L.open(),void 0}if(r){if(Sc.ComboBox){var O=new Sc.ComboBox;O.setValue(i),O.setValues(r),O.setLabels(v.getEnumLabels(E)),O.setIcons(v.getEnumIcons(E)),O.setEditable(v.isEnumEditable(E)),O.setStrict(v.isEnumStrict(E)),O.setMaxHeight(v.getEnumMaxHeight(E)),O.setDropDownWidth(v.getEnumDropDownWidth(E)),O.onClosed=function(){V.endEditing()},si(O,s),O.open()}else kk(yn,s,I,r,v);return}var o=v.getValueType(E);if(o===ih||go(i))return V.setValue(E,v,!i),void 0;if(v.getItemEditor(E)){var A=dm(v.getItemEditor(E)),G=new A(E,v,V,s),Y=G.getView();return Y._17Q=G,G.setValue(i),yr(Y),si(Y,s),G.editBeginning&&G.editBeginning(),void 0}kk("input",s,I,q,v)}}},_44o:function(z){z.init=function(m){var N=this,O=N.th=new rl(m),e=N._view=uc(1,N);N.tv=N._tableView=m,Bd(e,O.getView()),Bd(e,m.getView()),O.mp(function(T){T.property===qo&&N.iv()}),N.iv()},z.getTableView=function(){return this.tv},z.getTableHeader=function(){return this.th},z.getDataModel=function(){return this.tv.dm()},z.getColumnModel=function(){return this.tv.getColumnModel()},z.setColumns=function(Z){this.tv.setColumns(Z)},z.addColumns=function(h){this.tv.addColumns(h)},z.endEditing=function(){this.tv.endEditing()},z.validateImpl=function(){var x=this,U=x.th,X=Ke(U),T={x:0,y:0,width:x.getWidth(),height:X};cq(U,T),T.y=X,T.height=I(0,x.getHeight()-X),cq(x.tv,T)}},ms_vs:function(y){y._41o=function(){return this._29I.height<this._59I},y._43o=function(){var R=this;R._41o()&&(R._58I||(l(function(){R._94O()},Eg),R.iv()),R._58I=new Date)},y._94O=function(){var A=this;if(A._58I){var H=new Date;H.getTime()-A._58I.getTime()>=Eg?(delete A._58I,A.iv()):l(function(){A._94O()},Eg)}},y._93I=function(){var q=this,r=q._27I;if(q._58I||!q._autoHideScrollBar){r||Bd(q._79O,r=q._27I=Zr());var e=q._29I,D=e.height,Y=q._59I,a=q.getScrollBarSize(),o=e.width-a-2,J=D*(-q.ty()/Y),w=D*(D/Y),W=r.style;Y>D?(le>w&&(J=J+w/2-le/2,0>J&&(J=0),J+le>D&&(J=D-le),w=le),W.visibility=li,W.background=q.getScrollBarColor(),W.borderRadius=a/2+em,cq(r,o,J,a,w)):W.visibility=Sf}else r&&(r.style.visibility=Sf)}},ms_hs:function(Z){Z._40o=function(){return this._29I.width<this._91I},Z._42o=function(){var h=this;h._40o()&&(h._95O||(l(function(){h._94I()},Eg),h.iv()),h._95O=new Date)},Z._94I=function(){var b=this;if(b._95O){var D=new Date;D.getTime()-b._95O.getTime()>=Eg?(delete b._95O,b.iv()):l(function(){b._94I()},Eg)}},Z._92I=function(){var L=this,I=L._28I;if(L._95O||!L._autoHideScrollBar){I||Bd(L._79O,I=L._28I=Zr());var h=L._29I,O=h.width,q=L._91I,r=L.getScrollBarSize(),D=h.height-r-2,w=O*(-L.tx()/q),A=O*(O/q),$=I.style;q>O?(le>A&&(w=w+A/2-le/2,0>w&&(w=0),w+le>O&&(w=O-le),A=le),$.visibility=li,$.background=L.getScrollBarColor(),$.borderRadius=r/2+em,cq(I,w,D,A,r)):$.visibility=Sf}else I&&(I.style.visibility=Sf)}}}),Xm(Dl,Tm(16,16,[{type:Pg,rect:[1,1,14,14],background:dk},{type:Oi,rect:[1,1,14,14],width:1,color:_o},{type:hb,points:[13,3,7,12,4,8],borderWidth:2,borderColor:"#FFF"}])),Xm(ej,Tm(16,16,{type:Oi,rect:[1,1,14,14],width:1,color:_o})),Xm(Kn,Tm(16,16,[{type:us,rect:[2,2,12,12],borderWidth:1,borderColor:_o,background:"#FFF"},{type:us,rect:[4,4,8,8],background:dk}])),Xm(fq,Tm(16,16,{type:us,rect:[2,2,12,12],borderWidth:1,borderColor:_o})),ki._15Q=function(t){t._29I=df,t._59I=0,t._91I=0,t._5o=function(v){var a=this;a._30I=new eb,a._rows=new eb,a._rowMap={},a._31I=0,a._14I=0,a._view=uc(1,a),a._canvas=ho(a._view),Bd(a._view,a._79O=Zr()),a.dm(v?v:new dq)},t.getCheckIcon=function(Z){var L=this.sm(),W=L.co(Z);return L.sg()?Si(W?Kn:fq):Si(W?Dl:ej)},t.checkData=function(B){var L=this.sm(),k=L.co(B);L.sg()&&k||(this._32o=1,k?L.rs(B):L.as(B),delete this._32o)},t.getDataAt=function(W){W.target&&(W=this.lp(W));var n=y(W.y/this._rowHeight),i=this._rows;return 0>n||n>=i.size()?q:i.get(n)},t.onDataDoubleClicked=function(){},t.onDataClicked=function(){},t.adjustTranslateX=function(){return 0},t.adjustTranslateY=function(U){var v=this.getHeight()-this._59I;return v>U&&(U=v),U>0?0:Z(U)},t.onPropertyChanged=function(O){var s=this,k=O.property;md[k]?s.ivm():Qo[k]||s.redraw(),k===Vn?s._42o():k===on&&s._43o()},t.getLabel=function(X){return X.toLabel()},t.getLabelFont=function(){return this._labelFont},t.getLabelColor=function(h){var _=this;if(_.isCheckMode()){if(_._focusData===h)return _._labelSelectColor}else if(_.isSelected(h))return _._labelSelectColor;return _._labelColor},t.getStartRowIndex=function(){return this._31I},t.getEndRowIndex=function(){return this._14I},t.getRowDatas=function(){return this._rows},t.getRowIndex=function($){return this._rowMap[$._id]},t.getRowSize=function(){return this._rows.size()},t.getViewRect=function(){return Ll(this._29I)},t.isVisible=function(X){return this._visibleFunc?this._visibleFunc(X):!0},t.getCurrentSortFunc=function(){return this._sortFunc},t.setDataModel=function(t){var M=this,K=M._dataModel,Q=M._selectionModel;K!==t&&(K&&(K.umm(M.handleDataModelChange,M),K.umd(M.handleDataPropertyChange,M),K.umh(M.handleHierarchyChange,M),Q||K.sm().ums(M.handleSelectionChange,M)),M._dataModel=t,t.mm(M.handleDataModelChange,M),t.md(M.handleDataPropertyChange,M),t.mh(M.handleHierarchyChange,M),Q?Q._21I(t):t.sm().ms(M.handleSelectionChange,M),M.fp("dataModel",K,t))},t.validateModel=function(){var T=this;T._rows.clear(),T._rowMap={},T.buildChildren(T._dataModel._roots);var O=T._rows=T._rows.toList(T.isVisible,T),R=0,o=T.getCurrentSortFunc(),z=O.size();for(o&&O.sort(o);z>R;R++)T._rowMap[O.get(R)._id]=R},t.buildChildren=function(U){var e=this;U.each(function(F){e._rows.add(F),e.buildChildren(F._children)})},t.handleDataModelChange=function(){this.ivm()},t.handleDataPropertyChange=function(m){"parent"===m.property?this.ivm():this.invalidateData(m.data)},t.handleHierarchyChange=function(){this.ivm()},t.handleSelectionChange=function(_){_.datas.each(this.invalidateData,this),this.onSelectionChanged(_)},t.onSelectionChanged=function(D){var o=this,I=o.sm();!o.isAutoMakeVisible()||1!==I.size()||"set"!==D.kind&&"append"!==D.kind||o._32o||o.makeVisible(I.ld())},t.handleBackgroundClick=function(U){rp(U)&&!this.isCheckMode()&&this.sm().cs()},t.makeVisible=function(M){M&&(this._23I=M,this.iv())},t.scrollToIndex=function(a){var z=this,D=z._29I,i=D.height,R=z._rowHeight,x=R*a;a>=0&&a<z._rows.size()&&i>0&&(x+R>D.y+i?z.ty(-x+i-R):x<D.y&&z.ty(-x))},t.autoScroll=function(B,$){var M=this,K=M._rowHeight,f=K,n=K/4,D=M._29I,N=M.lp(B),i={x:M.tx(),y:M.ty()};return K>0&&D&&(N.x-D.x<f?M.translate(n,0):D.x+D.width-N.x<f&&M.translate(-n,0),N.y-D.y<f?M.translate(0,n):D.y+D.height-N.y<f&&M.translate(0,-n)),i.x=M.tx()-i.x,i.y=M.ty()-i.y,$&&($.x+=i.x,$.y+=i.y),i},t.getTopRowOrderSelection=function(){var Q=this.sm().getTopSelection(),H={},e=new eb;return Q.each(function(i){H[i._id]=i}),this._rows.each(function(R){H[R._id]&&e.add(R)}),e},t.getRowOrderSelection=function(){var t=new eb;return this._rows.each(function(e){this.isSelected(e)&&t.add(e)},this),t},t.ivm=function(){this.invalidateModel()},t.invalidateModel=function(){var B=this;B._96I||(B._96I=1,B._32I=1,delete B._24I),B.iv()},t.redraw=function(){var l=this;l._32I||(l._32I=1,delete l._24I,l.iv())},t.invalidateData=function(Q){var t=this;j?t.redraw():t._32I||(t._24I||(t._24I={}),t._24I[Q._id]=Q,t.iv())},t.getFocusData=function(){return this._focusData},t.setFocusDataById=function(n){this.setFocusData(this.dm().getDataById(n))},t.setFocusData=function(e){var H=this,n=H._focusData;n!==e&&(H._focusData=e,H.fp("focusData",n,e),n&&H.invalidateData(n),e&&(H.invalidateData(e),H.isAutoMakeVisible()&&H.makeVisible(e)))},t.drawRowBackground=function(P,k,j,$,w,d,u){var v=this,o=v.isCheckMode();(k===v._focusData&&o||j&&!o)&&Iq(P,$,w,d,u,v.getSelectBackground(k))},t.drawData=function(H,g,K){var i=this,k=i._rowHeight,w=k*K,I=i._29I,f=I.x,W=I.width;H.save(),H.beginPath(),H.rect(f,w,W,k),H.clip(),i._87o(i.drawRow(H,g,i.isSelected(g),f,w,W,k),K,f,w,W,k),H.restore(),i._rowLineVisible&&Iq(H,f,w+k-1,W,1,i._rowLineColor)},t._12I=function(V){var p=this,m=p._31I,$=p._29I,h=$.x,O=$.y,E=$.width,d=$.height;for(V.beginPath(),V.rect(h,O,E,d),V.clip(),V.clearRect(h,O,E,d),p._76o(),p._93db(V);m<p._14I;m++)p.drawData(V,p._rows.get(m),m);p._92db(V)},t._13I=function(w){for(var d,g=this,G=g._rowHeight,X=g._29I,s=X.x,x=X.width,A=g._31I,I=g._30I;A<g._14I;A++)d=g._rows.get(A),g._24I[d._id]&&I.add({data:d,index:A});I.isEmpty()||(w.beginPath(),I.each(function(Q){w.rect(s,Q.index*G,x,G)}),w.clip(),I.each(function(e){w.clearRect(s,e.index*G,x,G)}),I.each(function(w){g._77o(w.index)}),g._93db(w),I.each(function(A){g.drawData(w,A.data,A.index)}),g._92db(w),I.clear())},t.validateImpl=function(){var g=this,Y=g._canvas,C=g.getWidth(),n=g.getHeight(),N=g._rowHeight,t=g._32I;(C!==Y.clientWidth||n!==Y.clientHeight)&&(Dp(Y,C,n),t=1);var z=A&&!X;g._96I&&!z&&g.validateModel();var V=g._29I,$={x:-g.tx(),y:-g.ty(),width:C,height:n},p=g._rows.size(),s=Zh(Y),E=g._23I;t||Mo($,V)||(t=1),g._29I=$,g._59I=p*N,g._31I=y($.y/N),g._14I=D(($.y+$.height)/N),g._31I<0&&(g._31I=0),g._14I>p&&(g._14I=p),g._99I&&t&&g._99I(),vr(s,g.tx(),g.ty(),1),t?g._12I(s):g._24I&&g._13I(s),g._93I(),g._92I(),s.restore(),g._32I=g._24I=g._96I=q,E&&(g.scrollToIndex(g.getRowIndex(E)),delete g._23I),g.tx(g.tx()),g.ty(g.ty())}},ki._48o=function(I){I._rootVisible=!0,I._rootData=q,I._35o=function(){this._expandMap={},this._levelMap={}},I.validateModel=function(){var h=this,v=h._rootData;h._rows.clear(),h._levelMap={},h._rowMap={},h._currentLevel=0,v?h._rootVisible?h.isVisible(v)&&h.buildData(v):h.buildChildren(v):h.buildChildren(),delete h._currentLevel},I.buildData=function(p){var J=this,t=p._id,j=J._rows;J._rowMap[t]=j.size(),j.add(p),J._levelMap[t]=J._currentLevel,J.isExpanded(p)&&(J._currentLevel++,J.buildChildren(p),J._currentLevel--)},I.buildChildren=function(I){var t=this,K=I?I._children:t._dataModel._roots,M=t.getCurrentSortFunc();M&&t.isChildrenSortable(I)?K.toList(t.isVisible,t).sort(M).each(t.buildData,t):K.each(function(C){t.isVisible(C)&&t.buildData(C)})},I.getLevel=function(T){return this._levelMap[T._id]},I.getToggleIcon=function(D){var o=this,e=o._loader,V=o._collapseIcon;return e&&!e.isLoaded(D)?V:D.hasChildren()?o.isExpanded(D)?o._expandIcon:V:q},I.isCheckMode=function(){return this._checkMode!=q},I.isChildrenSortable=function(){return!0},I.handleDataModelChange=function(K){var v=this;K.kind===hr?delete v._expandMap[K.data._id]:K.kind===ao&&(v._expandMap={}),v.ivm()},I.toggle=function(M){var i=this;i.isExpanded(M)?i.collapse(M):i.expand(M)},I.isExpanded=function(H){return 1===this._expandMap[H._id]},I.expand=function(l){var B=this,D=B._loader;B.isExpanded(l)||(D&&!D.isLoaded(l)&&D.load(l),B._expandMap[l._id]=1,B.ivm(),B.onExpanded(l))},I.onExpanded=function(){},I.collapse=function(W){var K=this;K.isExpanded(W)&&(delete K._expandMap[W._id],K.ivm(),K.onCollapsed(W))},I.onCollapsed=function(){},I.expandAll=function(){var w=this;w._dataModel.each(function(q){q.hasChildren()&&(w._expandMap[q._id]=1)}),w.ivm()},I.collapseAll=function(){this._expandMap={},this.ivm()},I.makeVisible=function(Z){if(Z){var M=this;if(!M._rootData||Z.isDescendantOf(M._rootData)){for(var E=Z._parent;E;)M.expand(E),E=E._parent;M._23I=Z,M.iv()}}},I.checkData=function(d){var T,s=this,q=s._checkMode,p=s.sm(),E=p.co(d);if(!p.sg()||!E){if(s._32o=1,q===Fh)E?p.rs(d):p.as(d);else if(q===bb)T=new eb(d),T.addAll(d._children);else if("descendant"===q)T=new eb,$k(d,T);else if("all"===q&&(T=new eb,$k(d,T),!E))for(var O=d._parent;O;)T.add(O),O=O._parent;T&&(E?p.rs(T):p.as(T)),delete s._32o}},I._97I=function(J,l,L,f,X,K,G){var v=this,t=v._indent,R=v._levelMap[l._id],Y=v.getIconWidth(l),A=Si(v.getToggleIcon(l));A?(f+=t*R,Ep(J,A,f+t/2,X+G/2,l,v),f+=t):f+=t*(R+1),v._checkMode&&(Ep(J,v.getCheckIcon(l),f+t/2,X+G/2,l,v),f+=t),v.drawIcon(J,l,f,X,Y,G),v.drawLabel(J,l,f+Y,X,G)}},ki._14Q=function(h){h.getIcon=function(d){return d.getIcon()},h.getIconWidth=function(F){return this.getIcon(F)?this._indent:0},h.drawIcon=function($,H,F,_,C,d){if(C){var P=this,L=P.getBodyColor(H),B=Si(P.getIcon(H),L);B&&(d-=P.isRowLineVisible()?1:0,hn($,B,Il,F,_,C,d,H,P,L),Gr($,P.getBorderColor(H),F,_,C,d))}},h.drawLabel=function(t,k,j,N,G){var D=this;Cb(t,D.getLabel(k),D.getLabelFont(k),D.getLabelColor(k),j,N,0,G)}},ki._50o=function(G){G._98I=function(){var f=this,N=f._39o=new dq;f._60I=new eb,N.mm(f._17o,f),N.md(f._18o,f),N.mh(f._19o,f)},G.setColumns=function(m){this._39o.clear(),this.addColumns(m)},G.addColumns=function(y){var Z=this._39o;y.forEach(function(l){if(!(l instanceof $h)){var C=dm(l.className);l=Mr(C?C:$h,l)}Z.add(l)})},G.onColumnClicked=function(){},G.onCheckColumnClicked=function(){},G._3Q=function(n){for(var $,J=0,y=this._60I,M=y.size();M>J;J++)if($=y.get(J),$.column===n)return $;return q},G.getColumnAt=function(N){var a=this._4Q(N);return a?a.column:q},G._4Q=function(T){for(var b=this,O=T.target?b.lp(T).x:T.x,$=b._60I,P=0;P<$.size();P++){var i=$.get(P),s=i.startX;if(O>=s&&O<s+i.column.getWidth())return i}return q},G.getToolTip=function(X){var V=this,A=V.getDataAt(X),J=V.getColumnAt(X);return A&&J?J.getToolTip(A,V):q},G.adjustTranslateX=function(E){var o=this.getWidth()-this._91I;return o>E&&(E=o),E>0?0:Z(E)},G._99I=function(){var l=this,e=l._29I,h=l._60I;h.clear(),l._91I=0,l._39o._roots.each(function(A){if(A.isVisible()){var $=l._91I+A.getWidth();l._91I<=e.x+e.width&&$>=e.x&&h.add({column:A,startX:l._91I}),l._91I=$}})},G.drawData=function(s,B,Z){var o=this,N=o._rowHeight,R=N*Z,w=o.isSelected(B),A=o._29I,L=A.x,C=A.width;o.drawRowBackground(s,B,w,L,R,C,N),o._60I.each(function(T){var S=T.column,h=T.startX,i=S.getWidth();i>0&&!o.isEditing(B,S)&&(s.save(),s.beginPath(),s.rect(h,R,i,N),s.clip(),o._87o(o.drawCell(s,B,w,S,h,R,i,N),Z,h,R,i,N),o._columnLineVisible&&Iq(s,h+i-1,R,1,N,o._columnLineColor),s.restore())}),o._rowLineVisible&&Iq(s,L,R+N-1,C,1,o._rowLineColor)},G.drawCell=function(C,w,L,c,B,M,b,J){var I=this;if(c.drawCell)return c.drawCell(C,w,L,c,B,M,b,J,I);var R=I.getValue(w,c);Aj(C,R,c,I.getLabelFont(w,c,R),I.getLabelColor(w,c,R),B,M,b,J,w,I)},G.getColumnModel=function(){return this._39o},G._17o=function(){this.redraw()},G._18o=function(P){var C=this;P.data===C._sortColumn&&Mm[P.property]?C.ivm():(C._42o(),C.redraw())},G._19o=function(){this.redraw()},G.getCurrentSortFunc=function(){var h=this,n=h._sortColumn;if(n&&n.isSortable()){var W=n.getSortFunc(),V=cg===n.getSortOrder()?1:-1;return W||(W=Bm),function(w,L){return W.call(h,h.getValue(w,n),h.getValue(L,n),w,L)*V}}return h._sortFunc},G.isCellEditable=function(L,X){return!this.isCheckMode()&&this.isSelected(L)||this.isCheckMode()&&L===this._focusData?X.isEditable()&&this.isEditable():!1},G._37O=function(J,Z){if(rp(Z))for(var w=this,q=w.lp(Z),l=w._60I,B=w._rowHeight,T=w._29I,N=T.x,L=T.y,h=T.width,V=T.height,Q=0;Q<l.size();Q++){var P=l.get(Q),p=P.startX,i=P.column,s=i.getWidth();if(i!==w._31o&&i!==w._4o&&w.isCellEditable(J,i,Z)&&q.x>=p&&q.x<p+s){var o={x:p,y:w.getRowIndex(J)*B,width:s,height:B},Y={x:o.x+w.tx(),y:o.y+w.ty(),width:o.width,height:o.height},R=0,F=0;return o.x<N?R=o.x-N:o.x+o.width>N+h&&(R=o.x+o.width-N-h),R&&(w.tx(w.tx()-R),Y.x-=R),o.y<L?F=o.y-L:o.y+B>L+V&&(F=o.y+B-L-V),F&&(w.ty(w.ty()-F),Y.y-=F),w.beginEditing({data:J,column:i,value:w.getValue(J,i),event:Z,rect:o,editorRect:Y,view:w}),void 0}}}},Sc.BaseItemEditor=function(S,Z,x,Q){this._data=S,this._column=Z,this._master=x,this._editInfo=Q},ik("BaseItemEditor",_,{ms_ac:["data","column","master","editInfo"],editBeginning:function(){},getView:function(){},getValue:function(){},setValue:function(){}});var ok=s.Tab=function(){cn(ok,this)};wj("Tab",Oh,{ms_ac:["view","closable","disabled"],_icon:q,_closable:!1,_disabled:!1,setParent:Aq});var $h=s.Column=function(){cn($h,this)};wj("Column",Oh,{_46o:1,ms_ac:["accessType","valueType",li,of,wn,no,"align",dg,"sortOrder",pp,"sortable","clickable","nullable","emptiable","slider","colorPicker","itemEditor"],_visible:!0,_width:80,_sortOrder:cg,_sortFunc:q,_sortable:!0,_clickable:!0,setWidth:function(q){16>q&&(q=16);var r=this._width;this._width=q,this.fp(no,r,q)},getToolTip:function(d,M){return this.formatValue(M.getValue(d,this))}});var tc=s.Property=function(){cn(tc,this)};wj("Property",Oh,{_46o:1,ms_ac:["accessType","valueType",of,wn,"categoryName",dg,"align","nullable","emptiable","slider","itemEditor","colorPicker"],_categoryName:q,getToolTip:function(g,y,J){var m=this;return y?m.formatValue(J.getValue(g,m)):J.getPropertyName(m)}}),Sc.AccordionView=function(){var H=this;H._20o={},H._21o=new eb,H._10o=q,H._9o=q,H._11o=q,H._view=uc(0,H),H.iv()},ik("AccordionView",_,{ms_v:1,ms_fire:1,ms_ac:[jf,Bo,"titleHeight",Zm,Zf,"titleBackground","selectWidth",hd,"orientation","separatorColor"],_expandIcon:u.accordionViewExpandIcon,_collapseIcon:u.accordionViewCollapseIcon,_titleHeight:Lb,_labelColor:u.accordionViewLabelColor,_labelFont:u.accordionViewLabelFont,_titleBackground:u.accordionViewTitleBackground,_selectBackground:u.accordionViewSelectBackground,_selectWidth:u.accordionViewSelectWidth,_orientation:"v",_separatorColor:u.accordionViewSeparatorColor,onPropertyChanged:function(){this.iv()},getView:function(){return this._view},getTitles:function(){return this._21o},getCurrentTitle:function(){return this._10o},add:function(m,v,S,H){var R=this,a=Zr();if(R._20o[m])throw m+" already exists";a.onmousedown=ak,a.style.cursor=op,a.addEventListener(uh?Vg:Xq,function(U){ak(U)},!1),a.addEventListener(uh?lq:Jp,function(F){ak(F),rp(F)&&(R._10o===m?R.collapse():R.expand(m))},!1),Bd(R._view,a),R._20o[m]={content:v,div:a,canvas:ho(a),icon:H},R._21o.add(m),S&&R.expand(m),R.iv()},remove:function(A){var O=this,J=O._20o[A];J&&(wg(J.div),delete O._20o[A],O._21o.remove(A),O.iv())},clear:function(){var D=this;D._20o={},D._21o.clear(),D.iv()},isExpanded:function(K){return this._10o===K},expand:function(c){var F=this;F._20o[c]&&F._10o!==c&&(F._10o=c,F.onExpanded(c),F.iv())},onExpanded:function(){},collapse:function(){var N=this;N._10o&&(N.onCollapsed(N._10o),delete N._10o,N.iv())},onCollapsed:function(){},initCanvas:function(B,m,S){Dp(B,m,S);var M=Zh(B);return vr(M,0,0,1),M.clearRect(0,0,m,S),M},drawTitle:function(K,s,d,p,q){var P=this,z=Si(q.icon),Z=P.isExpanded(s),r=P._titleHeight,u=P._titleBackground,E=P._selectWidth,v=P._separatorColor,i=Si(Z?P._expandIcon:P._collapseIcon),f=E+4;Iq(K,0,0,d,p,u),Z&&E&&Iq(K,0,0,E,p,P._selectBackground),(Z||P._21o.get(P._21o.size()-1)!==s)&&Iq(K,0,p-1,d,1,v?v:xs(u)),z&&(Ep(K,z,f+re(z)/2,r/2),f+=re(z)+2),Cb(K,s,P.getLabelFont(s),P.getLabelColor(s),f,0,0,r),i&&Ep(K,i,d-re(i)/2-4,r/2)},validateImpl:function(){var L=this,J=L._view,y=0,s=0,l=L.getWidth(),q=L.getHeight(),M=L._titleHeight,g=L._21o.size()*M,u=L._11o,R=L._9o;delete L._11o,delete L._9o,L._21o.each(function(T){var H,N,Z=L._20o[T],G=Z.content,C=L._10o===T;Rk(L)?(cq(Z.div,y,0,M,q),H=L.initCanvas(Z.canvas,M,q),Uf(H,0,q),ck(H,-h),L.drawTitle(H,T,q,M,Z),H.restore(),C?(N=I(0,l-g),G&&(L._11o=G,L._9o=Bi(G),cq(G,y+M,0,N,q)),y+=M+N):y+=M):(cq(Z.div,0,s,l,M),H=L.initCanvas(Z.canvas,l,M),L.drawTitle(H,T,l,M,Z),H.restore(),C?(N=I(0,q-g),G&&(L._11o=G,L._9o=Bi(G),cq(G,0,s+M,l,N)),s+=M+N):s+=M)});var E=L._9o;u&&u!==L._11o&&u.endEditing&&u.endEditing(),E&&E!==R&&Bd(J,E),R&&R!==E&&wg(R)}}),Sc.SplitView=function(p,L,V,E){var K=this,y=K._dividerDiv=Zr(),B=K._60O=ho(),r=K._61O=ho(),$=B.style,O=r.style;K._view=uc(1,K),Bd(K._view,y),$.msTouchAction=he,$.pointerEvents=he,$.cursor=op,O.msTouchAction=he,O.pointerEvents=he,O.cursor=op,p&&K.setLeftView(p),L&&K.setRightView(L),V&&K.setOrientation(V),E!=q&&K.setPosition(E),K.setStatus(nk),new Nm(K)
},ik("SplitView",_,{ms_v:1,ms_fire:1,ms_ac:["continuousLayout","dividerSize","dividerBackground","toggleIcon","togglable","dragOpacity","orientation","draggable","status"],_continuousLayout:!1,_position:.5,_togglable:!0,_orientation:"h",_draggable:!0,_dividerSize:u.splitViewDividerSize,_dividerBackground:u.splitViewDividerBackground,_dragOpacity:u.splitViewDragOpacity,_toggleIcon:u.splitViewToggleIcon,onPropertyChanged:function(){this.iv()},getDividerDiv:function(){return this._dividerDiv},getPosition:function(){return this._position},setPosition:function(m,Z){var K=this,V=K._position;isNaN(m)||(Z||(K._82O=0>m?-1:m>1?1:0),K._position=m,K.fp(Ui,V,m))},getLeftView:function(){return this._leftView},setLeftView:function(F){var X=this,H=X._leftView,W=X._view;if(X._leftView!==F){if(H&&H!==X._rightView){var P=Bi(H);P.parentNode===W&&wg(P)}if(X._leftView=F,F){var B=Bi(F);B.parentNode!==W&&W.insertBefore(B,X._dividerDiv)}X.fp("leftView",H,F)}},getRightView:function(){return this._rightView},setRightView:function(a){var H=this,O=H._rightView,A=H._view;if(H._rightView!==a){if(O&&O!==H._leftView){var P=Bi(O);P.parentNode===A&&wg(P)}if(H._rightView=a,a){var k=Bi(a);k.parentNode!==A&&A.insertBefore(k,H._dividerDiv)}H.fp("rightView",O,a)}},validateImpl:function(){var u=this,p=u._draggable,l=u._position,b=u.getWidth(),$=u.getHeight(),C=u._dividerSize,e=u._dividerBackground,o=uh?18:8,w=u._dividerDiv,Y=u._82O,z=u._60O,J=u._61O,x=u._toggleIcon,i=u._status,j=w.style,Q=null,B=uh?20:4,N=x.comps[0];C>=o||0===C?u._coverDiv&&(wg(u._coverDiv),delete u._coverDiv):u._coverDiv||(u._coverDiv=Zr(),K&&(u._coverDiv.style.background=mh),Bd(w,u._coverDiv)),u._togglable?z.parentNode||(Bd(w,z),Bd(w,J)):(wg(z),wg(J));var r=u._coverDiv,f=u._leftView,d=u._rightView;if(Rk(u)){if(C>b&&(C=b),i===nk)if(1===Y)var H=c(l,b),E=I(0,b-C-H);else-1===Y?(E=c(-l,b),H=I(0,b-C-E)):(H=Z((b-C)*l),E=I(0,b-C-H));else"cl"===i?(H=0,E=I(0,b-C)):"cr"===i&&(E=0,H=I(0,b-C));f&&cq(f,0,0,H,$),d&&cq(d,H+C,0,E,$),cq(w,H,0,C,$),u._22o=H,r&&(cq(r,C/2-o/2,0,o,$),r.style.cursor=p?Ub:""),w.style.cursor=p?Ub:"";var L=w.clientHeight/2,X=w.clientWidth;Dp(z,X,X),cq(z,0,L-X-B,X,X),Q=Zh(z),vr(Q,0,0,1),N.rotation=-h,Ag(Q,x,0,0,X,X),Q.restore(),Dp(J,X,X),cq(J,0,L+B,X,X),Q=Zh(J),vr(Q,0,0,1),N.rotation=h,Ag(Q,x,0,0,X,X),Q.restore()}else{if(C>$&&(C=$),i===nk)if(1===Y)var U=c(l,$),s=I(0,$-C-U);else-1===Y?(s=c(-l,$),U=I(0,$-C-s)):(U=Z(($-C)*l),s=I(0,$-C-U));else"cl"===i?(U=0,s=I(0,$-C)):"cr"===i&&(s=0,U=I(0,$-C));f&&cq(f,0,0,b,U),d&&cq(d,0,U+C,b,s),cq(w,0,U,b,C),u._22o=U,r&&(cq(r,0,C/2-o/2,b,o),r.style.cursor=p?Ck:""),j.cursor=p?Ck:"";var R=w.clientWidth/2,X=w.clientHeight;Dp(z,X,X),cq(z,R-X-B,0,X,X),Q=Zh(z),vr(Q,0,0,1),N.rotation=0,Ag(Q,x,0,0,X,X),Q.restore(),Dp(J,X,X),cq(J,R+B,0,X,X),Q=Zh(J),vr(Q,0,0,1),N.rotation=F,Ag(Q,x,0,0,X,X),Q.restore()}j.background=e}});var Nm=function(q){this.sv=q,this.addListeners()};Xd(Nm,_,{ms_listener:1,getView:function(){return this.sv.getView()},handle_touchstart:function(p){var X=this,G=X.sv,Y=G._dividerDiv,z=G._60O,w=G._61O,S=G._status,U=p.target;if(U===z)S===nk?G.setStatus("cl"):"cr"===S&&G.setStatus(nk);else if(U===w)S===nk?G.setStatus("cr"):"cl"===S&&G.setStatus(nk);else if(Hn(p)&&(U===Y||U===G._coverDiv)&&(ak(p),G.isDraggable())){G.getLeftView(),G.getRightView();var V=X.maskDiv=Zr();if(V.style.left=0,V.style.top=0,V.style.width=G.getWidth()+"px",V.style.height=G.getHeight()+"px",G.getView().appendChild(V),!G.isContinuousLayout()){var c=X.resizeDiv=Zr();c.style.left=Y.style.left,c.style.top=Y.style.top,c.style.width=Y.style.width,c.style.height=Y.style.height,c.style.opacity=G.getDragOpacity(),c.style.background=G.getDividerBackground(),Bd(X.getView(),c)}X._lastAbsPosition=G._22o,X._86o=Rk(G)?Tc(p).x:Tc(p).y,Hk(X,p)}},handleWindowTouchMove:function(k){Hn(k)&&this.update(k,this.sv.isContinuousLayout())},handleWindowTouchEnd:function(I){var V=this;V.update(I,!0),V.sv.setStatus(nk),V.maskDiv&&wg(V.maskDiv),V.resizeDiv&&wg(V.resizeDiv),V.maskDiv=V.resizeDiv=q},handle_mousedown:function(E){rp(E)&&this.handle_touchstart(E)},handleWindowMouseMove:function(y){this.handleWindowTouchMove(y)},handleWindowMouseUp:function(T){this.handleWindowTouchEnd(T)},update:function(u,n){var d=this,i=d.sv,f=Rk(i)?i.getWidth():i.getHeight(),F=i._dividerSize,z=d._lastAbsPosition-d._86o;Rk(i)?(z+=Tc(u).x,z>f-F&&(z=f-F),0>z&&(z=0),d.resizeDiv&&(d.resizeDiv.style.left=z+em)):(z+=Tc(u).y,z>f-F&&(z=f-F),0>z&&(z=0),d.resizeDiv&&(d.resizeDiv.style.top=z+em)),n&&f!==F&&(1===i._82O?i.setPosition(z,1):-1===i._82O?i.setPosition(z-f+F,1):i.setPosition(z/(f-F),1))}}),Sc.TabView=function(){var Q=this,l=Q._view=uc(1,Q),d=Q._91O=Zr(1),v=Q._tabModel=new dq,j=v.sm(),U=Q.invalidate;Q._7o=new eb,Q._canvas=ho(d),Bd(l,d),Bd(l,Q._92O=Zr(1)),j.setSelectionMode(pb),j.ms(U,Q),v.mm(U,Q),v.md(U,Q),v.mh(U,Q),new Cc(Q),Q.iv()},ik("TabView",_,{ms_v:1,ms_fire:1,ms_tx:1,ms_ty:1,ms_lp:1,ms_ac:["movable","tabGap","tabHeight","tabPosition",Zm,Zf,"tabBackground","selectWidth",hd,"moveBackground","insertColor"],_tabPosition:jo,_tabHeight:Lb,_tabGap:u.tabViewTabGap,_labelColor:u.tabViewLabelColor,_labelFont:u.tabViewLabelFont,_tabBackground:u.tabViewTabBackground,_selectWidth:u.tabViewSelectWidth,_selectBackground:u.tabViewSelectBackground,_moveBackground:u.tabViewMoveBackground,_insertColor:u.tabViewInsertColor,_movable:!0,getContentDiv:function(){return this._92O},getTitleDiv:function(){return this._91O},getTabModel:function(){return this._tabModel},add:function(a,P,J){var D=new ok,s=this._tabModel;return D.setName(a),D.setView(P),s.add(D),J&&s.sm().ss(D),D},getLabel:function($){return $.toLabel()},onPropertyChanged:function(){this.iv()},_7Q:function(k){this._23o=k,this.iv()},get:function(t){var A=this,j=A._tabModel;if(_c(t))return j._roots.get(t);if(Me(t)){var N;return j.each(function(E){t===A.getLabel(E)&&(N=E)}),N}return t instanceof ok?t:q},select:function(K){this._tabModel.sm().ss(this.get(K))},remove:function(p){var i=this;if(p=i.get(p)){var r=i._tabModel,W=r._roots.indexOf(p);i._tabModel.remove(p),i._12Q(--W)}},getCurrentTab:function(){return this._8o},hideTabView:function(b,x){x.parentNode===this._92O&&(Ge(x)?(x.style.display=Gd,x._tab_=b):wg(x),er())},showTabView:function(g,W){Ge(W)&&(W.style.display="block",W._tab_=g),W.parentNode!==this._92O&&(Bd(this._92O,W),er())},_24o:function(){var L,i=this,Y=i._8o,B=i._9o,U=i._tabModel.sm().ld();U&&(L=Bi(U.getView())),L!==B&&(B&&(Y.getView()&&Y.getView().endEditing&&Y.getView().endEditing(),i.hideTabView(Y,B)),L&&i.showTabView(U,L)),i._8o=U,i._9o=L,Y!==U&&i.onTabChanged(Y,U)},onTabClosing:function(){return!0},onTabChanged:function(){},onTabClosed:function(q,Y){this._12Q(--Y)},_12Q:function(N){var D=this,h=D._tabModel,J=h.size();if(J&&!h.sm().ld()){N==q&&(N=0),N>=J&&(N=J-1),0>N&&(N=0);for(var Z=N;Z>=0;Z--){var H=D.get(Z);if(!H.isDisabled())return D.select(H),H}for(Z=N+1;J>Z;Z++)if(H=D.get(Z),!H.isDisabled())return D.select(H),H}},getTabWidth:function(A){var N=4,U=Si(A.getIcon());U&&(N+=re(U,A)+4);var a=this.getLabel(A);return a&&(N+=Gp(this.getLabelFont(A),a).width+4),A.isClosable()&&(N+=10),N},drawTab:function(q,N,H,A,n,_,u){var o,C=this,M=C._tabPosition,y=H+4,k=C._selectWidth,j=Si(N.getIcon()),X=N.isDisabled(),l=C.getLabelColor(N),W=C.getLabelFont(N),U=C.getLabel(N),B=C._selectBackground,S=M===qg+"-vertical",x=M===Ai+"-vertical";(S||x)&&(y=A+4),X&&(q.globalAlpha=am),Iq(q,H,A,n,_,u),N===C._8o&&k&&(M===jo?Iq(q,H,A+_-k,n,k,B):M===qg?Iq(q,H+n-k,A,k,_,B):M===Ai?Iq(q,H,A,k,_,B):S?Iq(q,H+n-k,A,k,_,B):x?Iq(q,H,A,k,_,B):Iq(q,H,A,n,k,B));var t=n/2;if(S&&(Uf(q,t,A+_/2),ck(q,F),Uf(q,-t,-A-_/2)),j){var f=Vo(j,N),T=re(j,N);if(S||x){var D=H+n/2,I=y+f/2;Uf(q,D,I),ck(q,h),Uf(q,-D,-I),Ep(q,j,H+n/2,y+f/2,N,C),Uf(q,D,I),ck(q,-h),Uf(q,-D,-I),y+=f+4}else Ep(q,j,y+T/2,A+_/2,N,C),y+=T+4}return S||x?(Uf(q,n/2,y+n/2),ck(q,h),Uf(q,-n/2,-y-n/2),Cb(q,U,W,l,H,y,_,n),Uf(q,n/2,y+n/2),ck(q,-h),Uf(q,-n/2,-y-n/2)):Cb(q,U,W,l,y,A,n,_),S&&(Uf(q,t,A+_/2),ck(q,-F),Uf(q,-t,-A-_/2)),N.isClosable()&&(o=x?{x:H+n-12,y:A+_-12,width:12,height:12}:{x:H+n-12,y:A+2,width:12,height:12},this.drawCloseIcon(N,q,l,o)),X&&(q.globalAlpha=1),o},drawCloseIcon:function(X,Y,x,K){var b=K.x,W=K.y;Y.strokeStyle=x,Y.lineWidth=1,Y.beginPath(),Y.moveTo(b+2,W+8),Y.lineTo(b+8,W+2),Y.moveTo(b+8,W+8),Y.lineTo(b+2,W+2),Y.stroke()},validateImpl:function(){var u=this;u._24o();var R,E=u._canvas,i=u._tabPosition,c=u._91O,D=u._92O,F=u._tabModel,P=u.getWidth(),h=u.getHeight(),$=u._tabHeight,X=u._7o,L=u._tabGap,T=i===jo,t=i===qg,n=i===Ai,Q=i===qg+"-vertical",v=i===Ai+"-vertical",G=u._23o,J=0;if((t||n)&&F._roots.each(function(o){J=I(u.getTabWidth(o),J)}),T?(cq(c,0,0,P,$),R={x:0,y:$,width:P,height:I(0,h-$)}):t?(cq(c,0,0,J,h),R={x:J,y:0,width:I(0,P-J),height:h}):n?(cq(c,P-J,0,J,h),R={x:0,y:0,width:I(0,P-J),height:h}):Q?(cq(c,0,0,$,h),R={x:$,y:0,width:I(0,P-$),height:h}):v?(cq(c,P-$,0,$,h),R={x:0,y:0,width:I(0,P-$),height:h}):(cq(c,0,h-$,P,$),R={x:0,y:0,width:P,height:I(0,h-$)}),cq(D,R),Q||v){u._9o&&(R.x=0,cq(u._8o.getView(),R)),Dp(E,$,h);var U=Zh(E),w=0;if(vr(U,0,u.ty(),1),U.clearRect(0,0,$,h),X.clear(),F._roots.each(function(N){var p,o=u.getTabWidth(N);G&&G.tab===N||(p=u.drawTab(U,N,0,w,$,o,u._tabBackground)),X.add({_75o:p,tab:N,startY:w,endY:w+o,height:o}),w+=o+L}),u._23Q=I(0,w-L),G){var d=G.position;u.drawTab(U,G.tab,0,G.startY,$,G.height,u._moveBackground),Iq(U,0,d,$,1,u._insertColor)}U.restore(),u.ty(u.ty())}else if(t||n){u._9o&&(R.x=0,cq(u._8o.getView(),R)),Dp(E,J,h);var U=Zh(E),w=0;if(vr(U,0,u.ty(),1),U.clearRect(0,0,J,h),X.clear(),F._roots.each(function(m){var e;G&&G.tab===m||(e=u.drawTab(U,m,0,w,J,$,u._tabBackground)),X.add({_75o:e,tab:m,startY:w,endY:w+$,height:$}),w+=$+L}),u._23Q=I(0,w-L),G){var d=G.position;u.drawTab(U,G.tab,0,G.startY,J,G.height,u._moveBackground),Iq(U,0,d,J,1,u._insertColor)}U.restore(),u.ty(u.ty())}else{u._9o&&(R.y=0,cq(u._8o.getView(),R)),Dp(E,P,$);var U=Zh(E),O=0;if(vr(U,u.tx(),0,1),U.clearRect(0,0,P,$),X.clear(),F._roots.each(function(h){var f,e=u.getTabWidth(h);G&&G.tab===h||(f=u.drawTab(U,h,O,0,e,$,u._tabBackground)),X.add({_75o:f,tab:h,startX:O,endX:O+e,width:e}),O+=e+L}),u._64I=I(0,O-L),G){var d=G.position;u.drawTab(U,G.tab,G.startX,0,G.width,$,u._moveBackground),kc(U,u._insertColor,d,0,$)}U.restore(),u.tx(u.tx())}for(var N=[],Z=D.children,z=0;z<Z.length;z++){var r=Z[z],o=r._tab_;o&&!F.contains(o)&&N.push(r)}N.forEach(function(V){D.removeChild(V)})}});var Cc=function(B){this.tv=B,this.addListeners()};Xd(Cc,_,{ms_listener:1,getView:function(){return this.tv._91O},handle_mousewheel:function(x){this.handleScroll(x,10*(x.wheelDelta/40))},handle_DOMMouseScroll:function(y){this.handleScroll(y,10*-y.detail)},handleScroll:function(x,f){ak(x);var G=this.tv,L=G._tabPosition;!G._40o()||L!==jo&&L!==rs||G.tx(this.tv.tx()+f),!G._41o()||L!==qg&&L!==Ai&&L!==qg+"-vertical"&&L!==Ai+"-vertical"||G.ty(this.tv.ty()+f)},_8Q:function(P){var s,D,Q=this.tv,x=Q._tabPosition,g=Q._7o;if(x===jo||x===rs){var z=Q.lp(P).x;for(s=0;s<g.size();s++)if(D=g.get(s),D.startX<=z&&z<=D.endX)return D}else if(x===qg||x===Ai||x===qg+"-vertical"||x===Ai+"-vertical"){var R=Q.lp(P).y;for(s=0;s<g.size();s++)if(D=g.get(s),D.startY<=R&&R<=D.endY)return D}return q},isClickable:function(K){var z=this.tv,w=z._tabPosition,j=this._73o=this._8Q(K);return!z._40o()||w!==jo&&w!==rs?!z._41o()||w!==qg&&w!==Ai&&w!==qg+"-vertical"&&w!==Ai+"-vertical"?j&&(!j.tab.isDisabled()||z.isMovable()):!0:!0},handle_mousemove:function($){var x=this;pm?x._74o=x._8Q($):x.getView().style.cursor=x.isClickable($)?op:""},handle_mousedown:function(G){this.handle_mousemove(G),this.handle_touchstart(G)},handle_touchstart:function(t){var z=this,G=z.tv,T=G._tabPosition;ak(t),z.isClickable(t)&&(T===jo||T===rs?(z.x=Tc(t).x,z.lp=G.lp(t),z.tx=G.tx()):(z.y=Tc(t).y,z.lp=G.lp(t),z.ty=G.ty()),Hk(z,t))},handleWindowMouseMove:function(a){this.handleWindowTouchMove(a)},handleWindowTouchMove:function(D){var U,m=this,d=m.tv,P=d._tabPosition,N=m._73o;if(P===jo||P===rs){if(U=Tc(D).x-m.x,!m._25o&&!m.moving&&E(U)>2&&(d._40o()&&!Sn(D)?m._25o=1:N&&d.isMovable()&&(m.moving=1)),m._25o)d.tx(m.tx+U);else if(m.moving){var e=m.lp.x+U,F=d._tabGap/2;d._7o.each(function($){var B=$.endX,i=e-$.startX<B-e;e>=$.startX&&B>=e&&d._7Q({tab:N.tab,startX:N.startX+U,width:N.width,front:i,insertTab:$.tab,position:i?I(0,$.startX-F):c(d._64I,B+F)})})}}else if(U=Tc(D).y-m.y,!m._25o&&!m.moving&&E(U)>2&&(d._41o()&&!Sn(D)?m._25o=1:N&&d.isMovable()&&(m.moving=1)),m._25o)d.ty(m.ty+U);else if(m.moving){var O=m.lp.y+U,F=d._tabGap/2;d._7o.each(function(Z){var v=Z.endY,$=O-Z.startY<v-O;O>=Z.startY&&v>=O&&d._7Q({tab:N.tab,startY:N.startY+U,height:N.height,front:$,insertTab:Z.tab,position:$?I(0,Z.startY-F):c(d._23Q,v+F)})})}},handleWindowMouseUp:function(M){this.handleWindowTouchEnd(M)},handleWindowTouchEnd:function(){var k=this,A=k.tv,N=A._tabPosition,o=A.getTabModel(),T=o._roots,g=k._73o;if(k.moving){var P=A._23o;if(P&&P.insertTab!==P.tab){var n=P.tab,x=T.remove(n),M=T.indexOf(P.insertTab);M>=0&&(P.front||M++,M<=T.size()&&(T.add(n,M),o._38I(n,x,M)))}A._7Q(q),delete k.moving}else if(!k._25o&&g){n=g.tab;var d=k._74o;if(!d||d.tab===n)if(!n.isDisabled()&&If(g._75o,k.lp)){var e=function(){var u=T.indexOf(n);o.remove(n),A.onTabClosed(n,u)};A.onTabClosing(n,e)&&e()}else n.isDisabled()||A._8o===n||o.sm().ss(n)}k._25o=k._73o=k._74o=N===jo||N===rs?k.x=k.lp=k.tx=q:k.y=k.lp=k.ty=q}}),Sc.PropertyView=function(q){var Z=this;Z._view=uc(1,Z),Z._canvas=ho(Z._view),Bd(Z._view,Z._79O=Zr()),Z._rows=new eb,Z._28o=new eb,Z._26o={},Z._26Q={};var t=Z._propertyModel=new dq,u=Z.ivm;t.mm(u,Z),t.md(u,Z),t.mh(u,Z),Z.dm(q?q:new dq),new Kd(Z)},ik("PropertyView",_,{ms_ac:[Zm,fl,Zf,of,wn,"categorizable",Qc,pp,fr,jf,Bo,cc,Bk,eo,"selectRowIndex",hd,"background",Mi,ii,id,uf,pc],ms_v:1,ms_dm:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,_45o:1,_47o:1,ms_tip:1,_29I:df,_59I:0,_9I:0,_selectRowIndex:-1,_editable:!0,_batchEditable:!0,_categorizable:!0,_indent:me,_background:u.propertyViewBackground,_expandIcon:u.propertyViewExpandIcon,_collapseIcon:u.propertyViewCollapseIcon,_scrollBarColor:Zb,_scrollBarSize:pj,_autoHideScrollBar:sc,_selectBackground:u.propertyViewSelectBackground,_rowHeight:Gi,_rowLineVisible:u.propertyViewRowLineVisible,_rowLineColor:u.propertyViewRowLineColor,_10I:.5,_columnLineVisible:u.propertyViewColumnLineVisible,_columnLineColor:u.propertyViewColumnLineColor,_labelColor:u.propertyViewLabelColor,_labelSelectColor:u.propertyViewLabelSelectColor,_labelFont:u.propertyViewLabelFont,getRows:function(){return this._rows},getColumnPosition:function(){return this._10I},setColumnPosition:function(l){0>l&&(l=0),l>1&&(l=1);var B=this,I=B._10I;B._10I=l,B.fp("columnPosition",I,l)},getPropertyName:function(o){return o.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(K,B,o){return o===this._selectRowIndex?this._labelSelectColor:this._labelColor},getPropertyFont:function(){return this._labelFont},getPropertyColor:function(g,C){return C===this._selectRowIndex?this._labelSelectColor:g.getColor()||this._labelColor},getCategoryFont:function(){return this._labelFont},getCategoryColor:function(){return this._labelColor},adjustTranslateX:function(){return 0},adjustTranslateY:function(r){var c=this.getHeight()-this._59I;return c>r&&(r=c),r>0?0:Z(r)},isExpanded:function(b){if(!b)return!0;var l=this._26o[b];return l?l.isExpanded:!(this._26Q[b]===!1)},toggle:function(G){var N=this;N.isExpanded(G)?N.collapse(G):N.expand(G)},expandAll:function(){this.validate();for(var C in this._26o)this.expand(C)},expand:function(j){if(j&&j!==Gd){var z=this,c=z._26o[j];c&&!c.isExpanded&&(c.isExpanded=!0,z.onExpanded(j),z.ivm())}},onExpanded:function(){},collapseAll:function(){this.validate();for(var q in this._26o)this.collapse(q)},collapse:function(o){if(o&&o!==Gd){var I=this,R=I._26o[o];R&&R.isExpanded&&(R.isExpanded=!1,I.onCollapsed(o),I.ivm())}},onCollapsed:function(){},getCategoryName:function(s){if(!this.isCategorizable())return Gd;var r=s.getCategoryName();return r?r:Gd},getPropertyModel:function(){return this._propertyModel},setDataModel:function(x){var p=this,Q=p._dataModel;Q!==x&&(Q&&(Q.umd(p.handlePropertyChange,p),p._selectionModel||Q.sm().ums(p.ivm,p)),p._dataModel=x,x.md(p.handlePropertyChange,p),p._selectionModel?p._selectionModel._21I(x):x.sm().ms(p.ivm,p),p.fp(Pp,Q,x))},isVisible:function(B){return this._visibleFunc?this._visibleFunc(B):!0},onPropertyChanged:function(N){var r=this,K=N.property;jn[K]?r.ivm():r.iv(),K===on&&r._43o()},getCurrentData:function(){return this._27o},updateCurrentData:function(){this._27o=this.sm().ld()},getRawProperties:function(){return this._27o?this._propertyModel._roots:Ki},handlePropertyChange:function(T){this._27o===T.data&&this.iv()},ivm:function(){this.invalidateModel()},invalidateModel:function(){var M=this;M._96I||(M.setSelectRowIndex(-1),M._96I=1,M.iv())},redraw:function(){this.iv()},validateModel:function(){var p=this,e=p._rows,K=p._28o,W={},v=new eb,S=p._27o;p.updateCurrentData(),S!==p._27o&&p.endEditing(),e.clear(),K.clear(),p.getRawProperties().each(function(R){if(p.isVisible(R)){v.add(R);var y=p.getCategoryName(R);W[y]||(K.add(y,y===Gd?0:m),W[y]={isExpanded:p.isExpanded(y),properties:new eb})}}),p._sortFunc&&v.sort(p._sortFunc);for(var z in p._26o)p._26Q[z]=p.isExpanded(z);p._26o=W,K.each(function(f){f!==Gd&&e.add(f);var m=W[f];m.isExpanded&&v.each(function(h){p.getCategoryName(h)===f&&(m.properties.add(h),e.add({property:h,data:p._27o}))},p)})},validateImpl:function(){var E=this;E._76o(),E._96I&&(E.validateModel(),delete E._96I);var l=E._canvas,R=E.getWidth(),S=E.getHeight(),W=-E.ty(),n=E._rowHeight,U=E._indent,r=R-U,A=E._rows,Z=A.size(),x=E._9I=U+r*E._10I,N=E._59I=Z*n;Dp(l,R,S),E._29I={x:0,y:W,width:R,height:S},E._31I=y(W/n),E._14I=D((W+S)/n),E._31I<0&&(E._31I=0),E._14I>Z&&(E._14I=Z);var a,_=Zh(l),k=E._background;vr(_,0,-W,1),_.beginPath(),_.rect(0,W,R,S),_.clip(),_.clearRect(0,W,R,S),E._93db(_),k&&Iq(_,0,0,U,N,k);for(var G=E._31I;G<E._14I;G++){var d=A.get(G),W=n*G;if(Me(d))k&&Iq(_,U,W,r,n,k),a=Si(E.isExpanded(d)?E._expandIcon:E._collapseIcon),a&&hn(_,a,Il,0,W,U,n),_.save(),_.beginPath(),_.rect(U,W,r,n),_.clip(),E.drawCategoryName(_,d,G,U,W,r,n),_.restore();else{var i=d.property,M=d.data,a=Si(i.getIcon()),F=E._selectRowIndex===G?E.getSelectBackground():q;if(a&&hn(_,a,Il,0,W,U,n),F&&Iq(_,U,W,r,n,F),_.save(),_.beginPath(),_.rect(U,W,x-U,n),_.clip(),E.drawPropertyName(_,i,G,U,W,x-U,n),_.restore(),!E.isEditing(M,i)){var O=x+1,c=R-x-1;_.save(),_.beginPath(),_.rect(O,W,c,n),_.clip(),E._87o(E.drawPropertyValue(_,i,E.getValue(M,i),G,O,W,c,n,M),G,O,W,c,n),_.restore()}}E._rowLineVisible&&Iq(_,U,W+n-1,r,1,E._rowLineColor)}E._columnLineVisible&&(Iq(_,x,0,1,N,E._columnLineColor),Iq(_,R-1,0,1,N)),E._92db(_),E._93I(),_.restore(),E.ty(E.ty())},drawCategoryName:function(v,U,C,r,H,u,G){Cb(v,U,this.getCategoryFont(U),this.getCategoryColor(U),r,H,u,G)},drawPropertyName:function(i,g,A,l,t,c,u){return g.drawPropertyName?(g.drawPropertyName(i,g,A,l,t,c,u,this),void 0):(Cb(i,this.getPropertyName(g),this.getPropertyFont(g,A),this.getPropertyColor(g,A),l,t,c,u),void 0)},drawPropertyValue:function(F,L,X,I,U,Q,x,N,a){return L.drawPropertyValue?L.drawPropertyValue(F,L,X,I,U,Q,x,N,a,this):(Aj(F,X,L,this.getLabelFont(L,X,I),this.getLabelColor(L,X,I),U,Q,x,N,a,this),void 0)},isPropertyEditable:function(u){return u.isEditable()&&this.isEditable()},setProperties:function(E){this._propertyModel.clear(),this.addProperties(E)},addProperties:function(v){if(v){var p=this._propertyModel;v.forEach(function(U){if(!(U instanceof tc)){var X=dm(U.className);U=Mr(X?X:tc,U)}p.add(U)})}},getRowIndexAt:function(V){var S=this,L=y(S.lp(V).y/S._rowHeight);return L>=0&&L<S._rows.size()?L:-1},getPropertyAt:function(a){var M=this,u=M.getRowIndexAt(a);return u>=0?M._rows.get(u).property:q},getToolTip:function(D){var x=this,h=x.getPropertyAt(D),v=x._27o;return h&&v?h.getToolTip(v,x._9I<x.lp(D).x,x):q}});var Kd=function(q){this.pv=q,this.addListeners()};Xd(Kd,_,{ms_listener:1,getView:function(){return this.pv._view},setCursor:function(Y){this.getView().style.cursor=Y},clear:function(){var a=this;a._62O=a.cp=a.ty=a.p=q,a.setCursor(Fh)},handle_mousedown:function(L){this.handle_touchstart(L)},handle_touchstart:function(p){var V=this,m=V.pv;ak(p),m.setFocus(p)&&(rp(p)?(V.cp=Tc(p),V.ty=m.ty(),V.p=m.getColumnPosition(),V.handle_touchmove(p)):m.setSelectRowIndex(m.getRowIndexAt(p)))},handleWindowMouseUp:function(){this.clear()},handleWindowTouchEnd:function(){this.clear()},handle_mouseup:function(M){this.handle_touchend(M)},handle_touchend:function(q){var x=this;if(x.cp&&!x._62O){var Z=x.pv,m=Z.lp(q),w=m.x,e=m.y,j=Z._indent,i=Z.getRowIndexAt(q),a=Z._9I;if(i>=0){var M=Z._rowHeight,H=M*i,p=Z._rows.get(i),I=p.property;if(Me(p))Si(Z.isExpanded(p)?Z._expandIcon:Z._collapseIcon)&&w>=0&&j>=w&&e>=H&&H+M>=e?Z.toggle(p):Ac(q)&&Z.toggle(p);else if(w>a&&Z.isPropertyEditable(I,q)){var d={x:a+1,y:H,width:Z.getWidth()-a-1,height:M},S={x:d.x+Z.tx(),y:d.y+Z.ty(),width:d.width,height:d.height},U=0,$=Z._29I;d.y<$.y?U=d.y-$.y:d.y+M>$.y+$.height&&(U=d.y+M-$.y-$.height),U&&(Z.ty(Z.ty()-U),S.y-=U),Z.beginEditing({data:p.data,property:I,value:Z.getValue(p.data,I),event:q,rect:d,editorRect:S,view:Z})}}Z.setSelectRowIndex(i)}x.clear()},handleWindowMouseMove:function(x){this.handleWindowTouchMove(x)},handleWindowTouchMove:function(T){var D=this,N=D.pv,s=D.ty,R=D.cp,M=Tc(T),h=D._62O;if("p"===h)N.setTranslateY(s+M.y-R.y);else if("c"===h){var _=N.getWidth()-N._indent;if(_>16){var z=D.p-(R.x-M.x)/_,K=16/_;K>z&&(z=K),z>1-K&&(z=1-K),N.setColumnPosition(z)}}else"s"===h&&N.setTranslateY(s+(R.y-M.y)*N._59I/N._29I.height)},handle_mousemove:function(I){this.handle_touchmove(I)},handle_touchmove:function(C){if(!pm&&rp(C)){var K=this,T=K.pv,j=E(T.lp(C).x-T._9I)<=(uh?8:3);K.cp?K._62O||(j?(K._62O="c",Hk(K)):E(Tc(C).y-K.cp.y)>=2&&(K._62O=K.isV(C)?"s":"p",Hk(K))):(j?K.setCursor(Ub):K.setCursor(Fh),K.isV(C)&&T._43o())}},isV:function(S){var X=this.pv,M=X._29I;return X._41o()&&M.x+M.width-X.lp(S).x<dh},handle_mousewheel:function(F){this.handleScroll(F,F.wheelDelta/40)},handle_DOMMouseScroll:function(C){2===C.axis&&this.handleScroll(C,-C.detail)},handleScroll:function(x,w){var T=this.pv;ak(x),T.endEditing(),T.translate(0,w*T.getRowHeight())},handle_keydown:function(V){var Y=this.pv,q=Y._rows.size(),U=Y._selectRowIndex+(cp(V)?-1:1);(cp(V)||nd(V))&&(0>U&&(U=0),U>=q&&(U=q-1),Y.setSelectRowIndex(U))}}),Sc.ListView=function(V){this._5o(V),new zf(this)},ik("ListView",_,{ms_ac:[Zm,fl,Zf,Mi,Qc,ii,id,pp,fr,cc,Bk,eo,jq,hd],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,_14Q:1,ms_dm:1,_45o:1,_checkMode:!1,_indent:me,_rowHeight:Gi,_rowLineVisible:u.listViewRowLineVisible,_rowLineColor:u.listViewRowLineColor,_scrollBarColor:Zb,_scrollBarSize:pj,_autoMakeVisible:Dm,_autoHideScrollBar:sc,_selectBackground:u.listViewSelectBackground,_labelColor:u.listViewLabelColor,_labelSelectColor:u.listViewLabelSelectColor,_labelFont:u.listViewLabelFont,isCheckMode:function(){return this._checkMode},setCheckMode:function(z){var O=this,H=O._checkMode;O._checkMode=z,O.fp(up,H,z)},drawRow:function($,Y,v,o,i,k,p){var J=this,M=0,I=J._indent,L=J.getIconWidth(Y);J.drawRowBackground($,Y,v,o,i,k,p),J._checkMode&&(Ep($,J.getCheckIcon(Y),M+I/2,i+p/2,Y,J),M+=I),J.drawIcon($,Y,M,i,L,p),J.drawLabel($,Y,M+L,i,p)}});var zf=function(U){this.list=U,this._lastSelectDataTime=gn(),this.addListeners()};Xd(zf,_,{ms_listener:1,getView:function(){return this.list._view},clear:function($){var c=this,Q=c.list;$&&"d"===c._62O&&!c.dragCancel&&Q.handleDragAndDrop($,"end"),Q.draggingData&&(Q.draggingData=null,Q.redraw()),c.dragCancel=c._62O=c._isV=c._isH=c.cp=c.tx=c.ty=q},handle_mousedown:function(H){this.handle_touchstart(H)},handle_touchstart:function(t){var l=this,Q=l.list;if(ak(t),Q.setFocus(t)){var $=Q.getDataAt(t);l.cp=Tc(t),l.tx=Q.tx(),l.ty=Q.ty(),rp(t)?$&&Q.handleDragAndDrop&&!l.isV(t)&&!l.isH(t)&&(Q.draggingData=$,Q.redraw(),Q.handleDragAndDrop(t,"prepare")):($&&l._33o(t,$),l.clear(t))}},handleWindowMouseUp:function(I){this.clear(I)},handleWindowTouchEnd:function(h){this.clear(h)},handle_mouseup:function(h){this.handle_touchend(h)},handle_touchend:function(b){var L=this,N=L.list;if(!L._isV&&!L._isH&&L.cp&&!L._62O){var S=N.getDataAt(b);S?(N.isCheckMode()?L._34o(b,S):L._33o(b,S),Ac(b)?N.onDataDoubleClicked(S,b):N.onDataClicked(S,b)):N.handleBackgroundClick(b)}L.clear(b)},handleWindowMouseMove:function(t){this.handleWindowTouchMove(t)},handleWindowTouchMove:function(J){var x=this,p=x.list,X=x._62O,N=x.tx,A=x.ty,g=x.cp,D=Tc(J),n=p._29I;"p"===X?p.setTranslate(N+D.x-g.x,A+D.y-g.y):"v"===X?p.ty(A+(g.y-D.y)*p._59I/n.height):"h"===X?p.tx(N+(g.x-D.x)*p._91I/n.width):"d"===X&&(x.dragCancel||p.handleDragAndDrop(J,"between"))},handle_mousemove:function(h){this.handle_touchmove(h)},handle_touchmove:function(S){if(!pm&&rp(S)){var O=this,v=O.list;if(O._isV=O.isV(S),O._isH=O.isH(S),O.cp){if(!O._62O){if(Yh(Tc(S),O.cp)<2)return;O._isV?O._62O="v":O._isH?O._62O="h":v.draggingData&&!this.dragCancel?(O._62O="d",v.handleDragAndDrop(S,"begin")):O._62O="p",O._62O&&"d"!==O._62O&&v.draggingData&&(v.draggingData=null,v.redraw()),Hk(O)}}else O._isV&&v._43o(),O._isH&&v._42o()}},isV:function(d){var h=this.list,D=h._29I;return h._41o()&&D.x+D.width-h.lp(d).x<dh},isH:function(t){var P=this.list,n=P._29I;return P._40o()&&n.y+n.height-P.lp(t).y<dh},handle_mousewheel:function($){this.handleScroll($,$.wheelDelta/40,$.wheelDelta!==$.wheelDeltaX)},handle_DOMMouseScroll:function(P){this.handleScroll(P,-P.detail,1)},handleScroll:function(f,g,L){var O=this.list;ak(f),O.endEditing&&O.endEditing(),L&&O._41o()?O.translate(0,g*O.getRowHeight()):O._40o()&&O.translate(10*g,0)},handle_keydown:function(s){if(!u.isInput(s.target)){var e,i=this.list,a=i.sm(),C=i._rows,I=C.size();if(hp(s))i.selectAll();else if(dd(s))i.handleDelete&&i.handleDelete(s);else if(_k(s))"d"!==this._62O||this.dragCancel||(i.handleDragAndDrop(s,"cancel"),this.dragCancel=!0);else if(sh(s))i.isCheckMode()&&(e=i.getFocusData(),e&&i.checkData(e));else if(cp(s)||nd(s)){var Z=i.isCheckMode();if(e=Z?i.getFocusData():a.ld()){var g=i.getRowIndex(e);g>=0&&(cp(s)?0!==g&&(e=C.get(g-1),Z?i.setFocusData(e):a.ss(e)):g!==I-1&&(e=C.get(g+1),Z?i.setFocusData(e):a.ss(e)))}else I>0&&(e=C.get(0),Z?i.setFocusData(e):a.ss(e))}}},_34o:function(v,X){var e=this.list,r=e.lp(v).x;return r>=0&&r<=e._indent?(e.checkData(X),void 0):(e.setFocusData(X),void 0)},_33o:function(_,U){var R=this.list,N=R.sm(),v=N.ld();if(Sn(_))R.isSelected(U)?N.rs(U):N.as(U);else if(Ap(_))if(v)for(var E=R.getRowIndex(v),u=R.getRowIndex(U);E!==u;)E+=u>E?1:-1,N.as(R._rows.get(E));else N.ss(U);else if(rp(_)){var Y=gn();if(N.contains(U)){var C=Y-this._lastSelectDataTime;R.handleDataDoubleSelect&&C>500&&1500>C&&R.handleDataDoubleSelect(_,U)}N.ss(U),this._lastSelectDataTime=Y}else N.contains(U)||N.ss(U)}}),Sc.TreeView=function(E){var X=this;X._35o(),X._5o(E),new od(X)},ik("TreeView",_,{ms_ac:[Zm,fl,Zf,"rootVisible",up,"rootData",pp,fr,cc,Bk,eo,Qc,Mi,ii,id,jf,Bo,jq,hd,"loader","doubleClickToToggle"],ms_v:1,ms_bnb:1,ms_tip:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,_48o:1,_14Q:1,_45o:1,_checkMode:q,_indent:me,_rowHeight:Gi,_rowLineVisible:u.treeViewRowLineVisible,_rowLineColor:u.treeViewRowLineColor,_scrollBarColor:Zb,_scrollBarSize:pj,_autoHideScrollBar:sc,_expandIcon:u.treeViewExpandIcon,_collapseIcon:u.treeViewCollapseIcon,_autoMakeVisible:Dm,_selectBackground:u.treeViewSelectBackground,_labelColor:u.treeViewLabelColor,_labelSelectColor:u.treeViewLabelSelectColor,_labelFont:u.treeViewLabelFont,_doubleClickToToggle:u.treeViewDoubleClickToToggle,drawRow:function(u,S,P,c,G,h,J){var k=this;k.drawRowBackground(u,S,P,c,G,h,J),k._97I(u,S,P,0,G,h,J)},isOnToggleIcon:function(L){var $=this.getDataAt(L);if($){var a=this.getIndent(),S=this.lp(L).x;if(Si(this.getToggleIcon($))){var N=a*this.getLevel($);if(S>=N&&N+a>=S)return!0}}return!1}});var od=function(A){cn(od,this,[A])};Xd(od,zf,{toggle:function(W,K,L,g){var n=this.list,a=n.lp(W).x;if(Si(n.getToggleIcon(K))){var F=L*g;if(a>=F&&F+L>=a)return n.toggle(K),!0}return n.isDoubleClickToToggle()&&Ac(W)?(n.toggle(K),!0):!1},_34o:function(B,i){var T=this.list,e=T.lp(B).x,J=T._levelMap[i._id],A=T._indent,g=A*(J+1);return e>=g&&g+A>=e?(T.checkData(i),void 0):(this.toggle(B,i,A,J)||T.setFocusData(i),void 0)},_33o:function(x,t){var T=this,C=T.list;T.toggle(x,t,C._indent,C.getLevel(t))||od.superClass._33o.call(T,x,t)},handle_keydown:function(W){if(Xe(W)||Tb(W)){var I=this.list,o=I._rows,c=I.isCheckMode(),C=I.sm(),$=c?I.getFocusData():C.ld();$?$.hasChildren()&&(Xe(W)?I.collapse($):I.expand($)):o.size()>0&&($=o.get(0),c?I.setFocusData($):C.ss($))}else od.superClass.handle_keydown.call(this,W)}});var lc=Sc.TableView=function(l){this._98I(),this._5o(l),new Uh(this)};ik("TableView",_,{ms_ac:[Zm,fl,Zf,"sortMode",of,wn,Mi,ii,id,uf,pc,"sortColumn",pp,fr,cc,Bk,eo,jq,hd],ms_v:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_45o:1,_47o:1,_sortMode:yg,_editable:!0,_batchEditable:!1,_rowHeight:Gi,_rowLineVisible:u.tableViewRowLineVisible,_rowLineColor:u.tableViewRowLineColor,_columnLineVisible:u.tableViewColumnLineVisible,_columnLineColor:u.tableViewColumnLineColor,_scrollBarColor:Zb,_scrollBarSize:pj,_autoHideScrollBar:sc,_autoMakeVisible:Dm,_selectBackground:u.tableViewSelectBackground,_labelColor:u.tableViewLabelColor,_labelSelectColor:u.tableViewLabelSelectColor,_labelFont:u.tableViewLabelFont,getCheckColumn:function(){var K=this;if(!K._31o){var T=K._31o=new $h;T.setEditable(!0),T.setWidth(40),T.getValue=K.getCheckColumValue,T.drawCell=K.drawCheckColumnCell}return K._31o},isCheckMode:function(){return this._39o.contains(this._31o)},setCheckMode:function(S){var v=this,I=v._39o,o=v.getCheckColumn();S!==v.isCheckMode()&&(S?I.add(o,0):I.remove(o),v.fp(up,!S,S))},getCheckColumValue:function(b,U,$){return $.isSelected(b)},drawCheckColumnCell:function(_,R,i,M,k,l,J,n,g){Ep(_,g.getCheckIcon(R),k+J/2,l+n/2,R,g)}});var Uh=function(c){cn(Uh,this,[c])};Xd(Uh,zf,{_34o:function(r,v){var Z=this.list,G=Z._31o;if(Z.isCellEditable(v,G,r)){var u=Z._3Q(G),t=Z.lp(r).x;if(u&&t>=u.startX&&t<u.startX+G.getWidth())return Z.checkData(v),void 0}Z._37O(v,r),Z.setFocusData(v)},_33o:function(r,A){this.list._37O(A,r),Uh.superClass._33o.apply(this,arguments)}});var _i=Sc.TreeTableView=function(O){var $=this,R=$._4o=new $h;$._35o(),$._98I(),$._5o(O),R.setDisplayName("Name"),R.setEditable(!0),R.setWidth(180),R.drawCell=Un,R.getValue=Tj,$._39o.add(R),new Rq($)},Un=function(p,y,c,T,u,K,n,v,H){H._97I(p,y,c,u,K,n,v)},Tj=function(N,s,c){return c.getLabel(N)};ik("TreeTableView",_,{ms_ac:[Zm,fl,Zf,"sortMode",of,wn,Qc,up,"rootData","rootVisible",pp,fr,"sortColumn",jf,Bo,cc,Bk,eo,jq,id,Mi,ii,uf,pc,hd,"loader"],ms_v:1,ms_bnb:1,ms_fire:1,ms_sm:1,_49o:1,ms_txy:1,ms_lp:1,ms_vs:1,ms_hs:1,_15Q:1,ms_dm:1,ms_tip:1,_50o:1,_48o:1,_14Q:1,_45o:1,_47o:1,_sortMode:yg,_checkMode:q,_editable:!0,_batchEditable:!1,_indent:me,_rowHeight:Gi,_rowLineVisible:u.treeTableViewRowLineVisible,_rowLineColor:u.treeTableViewRowLineColor,_columnLineVisible:u.treeTableViewColumnLineVisible,_columnLineColor:u.treeTableViewColumnLineColor,_expandIcon:u.treeTableViewExpandIcon,_collapseIcon:u.treeTableViewCollapseIcon,_scrollBarColor:Zb,_scrollBarSize:pj,_autoHideScrollBar:sc,_autoMakeVisible:Dm,_selectBackground:u.treeTableViewSelectBackground,_labelColor:u.treeTableViewLabelColor,_labelSelectColor:u.treeTableViewLabelSelectColor,_labelFont:u.treeTableViewLabelFont,getTreeColumn:function(){return this._4o}});var Rq=function(i){cn(Rq,this,[i])};Xd(Rq,zf,{_34o:function(o,S){var c=this.list,j=c._4o,U=c._3Q(j),d=c.lp(o).x;if(U){var Q=c._indent,s=U.startX+Q*c.getLevel(S);if(Si(c.getToggleIcon(S))&&d>=s&&s+Q>=d)return c.toggle(S),void 0;if(c.isCellEditable(S,j)&&(s+=Q,d>=s&&s+Q>=d))return c.checkData(S),void 0}c._37O(S,o),c.setFocusData(S)},_33o:function(a,I){var L=this.list,X=L.lp(a).x;if(Si(L.getToggleIcon(I))){var v=L._3Q(L._4o);if(v){var g=L._indent,u=v.startX+g*L.getLevel(I);if(X>=u&&u+g>=X)return L.toggle(I),void 0}}L._37O(I,a),Rq.superClass._33o.apply(this,arguments)
}});var rl=Sc.TableHeader=function(X){var F=this,c=F._view=uc(1,F),Y=F._39o=X.getColumnModel(),C=F.iv;F.tv=F._tableView=X,F._60I=new eb,F._canvas=ho(c),c.style.background=u.tableHeaderBackground||"",c.style.height=Qg+em,Y.mm(C,F),Y.md(C,F),Y.mh(C,F),X.mp(function(G){hg[G.property]&&F.iv()},F),new Oe(F),F.iv()};ik("TableHeader",_,{ms_v:1,ms_lp:1,ms_fire:1,ms_ac:["checkIcon","sortDescIcon","sortAscIcon",Zm,Zf,Qc,"moveBackground","insertColor",uf,pc,"resizable","movable"],_checkIcon:ej,_movable:!0,_resizable:!0,_labelColor:u.tableHeaderLabelColor,_labelFont:u.tableHeaderLabelFont,_columnLineColor:u.tableHeaderColumnLineColor,_columnLineVisible:u.tableHeaderColumnLineVisible,_sortDescIcon:u.tableHeaderSortDescIcon,_sortAscIcon:u.tableHeaderSortAscIcon,_moveBackground:u.tableHeaderMoveBackground,_insertColor:u.tableHeaderInsertColor,_indent:me,getCheckIcon:function(){return this._checkIcon},getTableView:function(){return this.tv},getLabel:function(S){return S.toLabel()},getLabelFont:function(){return this._labelFont},getLabelColor:function(C){return C.getColor()||this._labelColor},getLabelAlign:function(G){return G._align},onPropertyChanged:function(){this.iv()},_5Q:function(w){this._61I=w,this.iv()},getLogicalPoint:function(b){return uj(b,this._canvas,this.tv.tx())},validateImpl:function(){var U=this,A=U._canvas,v=U.getWidth(),H=U.getHeight(),j=U.tv,C=U._60I,X=U._61I,k=-j.tx(),a=0;(v!==A.clientWidth||H!==A.clientHeight)&&Dp(A,v,H),C.clear(),U._39o._roots.each(function(l){if(l.isVisible()){var T=a+l.getWidth();k+v>=a&&T>=k&&C.add({column:l,startX:a}),a=T}});var q=Zh(A);if(vr(q,-k,0,1),q.beginPath(),q.rect(k,0,v,H),q.clip(),q.clearRect(k,0,v,H),C.each(function(V){var r=V.column,t=V.startX,d=r.getWidth();d>0&&(q.save(),q.beginPath(),q.rect(t,0,d,H),q.clip(),X&&X.column===r||U.drawColumn(q,r,t,0,d,H),U._columnLineVisible&&Iq(q,t+d-1,0,1,H,U._columnLineColor),q.restore())}),X){var u=X.column,a=X.startX,g=X.position,G=u.getWidth();q.save(),q.beginPath(),q.rect(a,0,G,H),q.clip(),q.fillStyle=U._moveBackground,q.fill(),U.drawColumn(q,u,a,0,G,H),q.restore(),kc(q,U._insertColor,g,0,H)}q.restore()},_6Q:function(P){var c=this.tv;return c._31o===P&&c.sm().getSelectionMode()===Pq},drawColumn:function(E,q,x,s,y,O){var n=this,F=n.tv,k=Si(q.getIcon()),K=n.getLabelAlign(q);if(n._6Q(q)){var g=Si(n._checkIcon);Ep(E,g,x+y/2,s+O/2,q,n)}else{var l=n.getLabel(q),U=n.getLabelFont(q),w=n.getLabelColor(q),f=Gp(U,l).width,N=k?n._indent:0;K===qg?(k&&hn(E,k,Il,x,s,N,O),Cb(E,l,U,w,x+N,s,y,O,qg)):K===Ai?(k&&hn(E,k,Il,x+y-f-N,s,N,O),Cb(E,l,U,w,x,s,y,O,Ai)):(k&&hn(E,k,Il,x+(y-f-N)/2,s,N,O),Cb(E,l,U,w,x+(y-f+N)/2,s,0,O,qg))}if(q.isSortable()&&F.getSortColumn()===q&&(k=Si(q.getSortOrder()===cg?n._sortAscIcon:n._sortDescIcon))){var V=re(k,q)/2+2;Ep(E,k,K===Ai?x+V:x+y-V,s+O/2,q,F)}}});var Oe=function(G){var g=this;g.th=G,g.tv=G._tableView,g.addListeners()};Xd(Oe,_,{ms_listener:1,getView:function(){return this.th.getView()},setCursor:function(c){this.getView().style.cursor=c},handle_mousemove:function(G){if(!pm){var Q=this;delete Q._29o,Q.setCursor(Fh);for(var H=Q.th,R=H._60I,c=H.lp(G).x,h=R.size()-1;h>=0;h--){var b=R.get(h),y=b.column,q=b.startX+y.getWidth();if(H.isResizable()&&E(q-c)<=(uh?10:3))return Q._29o=b,Q.setCursor(Ub),void 0;c>b.startX&&q>c&&(Q._29o=b),(y.isClickable()||y.isSortable()||H.isMovable()||Q.tv.getCheckColumn&&y===Q.tv.getCheckColumn())&&c>b.startX&&q>c&&Q.setCursor(op)}}},handle_mousedown:function(L){this.handle_touchstart(L)},handle_touchstart:function(a){var x=this;ak(a),x.tv.endEditing(),x.handle_mousemove(a),x._29o&&(x.x=Tc(a).x,x.lx=x.th.lp(a).x,x.w=x._29o.column.getWidth(),Hk(x,a))},handleWindowMouseMove:function(E){this.handleWindowTouchMove(E)},handleWindowTouchMove:function(C){var Z=this,R=Z.th,F=Z.getView().style.cursor,h=Z._29o,M=Tc(C).x-Z.x;if(Z.resizing||Z.moving||(F===Ub?Z.resizing=1:R.isMovable()&&F===op&&E(M)>2&&(Z.moving=1)),Z.resizing)h.column.setWidth(Z.w+M);else if(Z.moving){var Q=Z.lx+M;R._60I.each(function(F){var B=F.startX,T=B+F.column.getWidth();if(Q>=B&&T>=Q){var q={column:h.column,startX:h.startX+M,front:T-Q>Q-B,insertColumn:F.column};q.position=q.front?B:T,R._5Q(q)}})}},_16Q:function(s,A){var O=this,T=O.tv,g=O.th,N=g._checkIcon;if(g._6Q(s)){var L=Si(N),X=O.lx,p=s.getWidth(),J=re(L,s);if(X>=A+p/2-J&&A+p/2+J>=X){g.setCheckIcon(N===Dl?ej:Dl);var o=T.sm(),b=T._rows;return N===Dl?o.rs(b):o.ss(b),T.onCheckColumnClicked(s),!0}}return!1},handleWindowMouseUp:function(_){this.handleWindowTouchEnd(_)},handleWindowTouchEnd:function(z){var _=this,t=_.tv,R=_.th,U=_._29o;if(_.moving){var x=R._61I;if(x&&x.insertColumn!==x.column){var s=x.column,b=t.getColumnModel()._roots,p=b.remove(s),G=b.indexOf(x.insertColumn);G>=0&&(x.front||G++,G<=b.size()&&(b.add(s,G),t.getColumnModel()._38I(s,p,G)))}R._5Q(q),delete _.moving}else if(!_.resizing&&U){s=U.column;var m=R.lp(z).x,W=U.startX,T=!0;if(R.onColumnClicked){var V=R.onColumnClicked(s,z,W);V===!1&&(T=!1)}if(T&&m>=W&&m<=W+s.getWidth()&&!_._16Q(s,W)){if(s.isSortable()){var Q=t.getSortMode(),L=s.getSortOrder();Q===yg?t.getSortColumn()===s?(L===te&&t.setSortColumn(q),s.setSortOrder(L===cg?te:cg)):t.setSortColumn(s):"bistate"===Q&&(t.getSortColumn()===s?s.setSortOrder(L===cg?te:cg):t.setSortColumn(s))}t.onColumnClicked(s,z,W)}}_._29o=_.resizing=_.x=_.lx=_.w=q}}),Sc.TablePane=function(B){this.init(new lc(B))},ik("TablePane",_,{ms_v:1,_44o:1}),Sc.TreeTablePane=function(h){this.init(new _i(h))},ik("TreeTablePane",_,{ms_v:1,_44o:1}),Sc.Toolbar=function(Y){var G=this,A=G._view=uc(1,G),K=A.style;K.background=u.toolbarBackground||"",K.height=Lb+em,G._canvas=ho(A),G._30o=new eb,G._90I=new eb,G.setItems(Y||[]),A.handleGroupSelectedChanged=function(V){if(V.isSelected()){var J=V.getGroupId();null!=J&&G._items.forEach(function(O){var E=O.element;E&&E!==V&&E.setSelected&&E.getGroupId&&E.getGroupId()===J&&E.setSelected(!1)})}},new ad(G)},ik("Toolbar",_,{ms_v:1,ms_fire:1,ms_tx:1,ms_lp:1,ms_tip:1,ms_value:1,ms_ac:[vh,Zm,Zf,fl,hd,"itemGap","separatorColor","currentItem","stickToRight"],_labelColor:u.toolbarLabelColor,_labelSelectColor:u.toolbarLabelSelectColor,_labelFont:u.toolbarLabelFont,_selectBackground:u.toolbarSelectBackground,_itemGap:u.toolbarItemGap,_separatorColor:u.toolbarSeparatorColor,_stickToRight:!1,getSumWidth:function(){return this._64I},getToolTip:function(c){var x=this.getItemInfoAt(c);return x?x.item.toolTip:q},getLabelColor:function(Q){return Q&&Q.selected&&Q.type!==Dl&&Q.type!==hh?this._labelSelectColor:this._labelColor},onPropertyChanged:function(H){this.iv(),H.property===vh&&this._items.forEach(function(O){mj(O)})},redraw:function(){this.iv()},addItem:function(B,$){var i=this._items;$==q?i.push(B):i.splice($,0,B),this.fp(vh,q,i)},removeItem:function(W){if(W)for(var a=this._items,M=0;M<a.length;M++)W===a[M]&&(a.splice(M,1),this.fp(vh,q,a))},removeItemById:function(n){if(n!=q)for(var u=this._items,s=0;s<u.length;s++)if(n===u[s].id){var d=u.splice(s,1)[0];return this.fp(vh,q,u),d}},getItemById:function(c){if(c!=q)for(var z=this._items,J=0;J<z.length;J++){var b=z[J];if(c===b.id)return b}},setItemVisible:function(v,m){var A=this.getItemById(v);A&&(A.visible=m)},getItemInfos:function(){return this._30o},getItemInfoAt:function(T){var L=this,E=0,I=L._30o,w=L.lp(T),M=w.x,K=w.y;if(K>=0&&K<=L.getHeight())for(;E<I.size();E++){var Q=I.get(E);if(Q.startX<=M&&M<=Q.endX)return Q}return q},drawItem:function(Z,l,y,q,H){if(l.visible===!1)return 0;if(Gf(l.visible)&&!l.visible())return 0;var I=this,e=l.disabled;e&&(Z.globalAlpha=am);var d=I.drawItemImpl(Z,l,y,q,H),f=I._itemGap;return e&&(Z.globalAlpha=1),this._currentItem!==l||"separator"===l||l.separator===!0||l.unfocusable||Gr(Z,I._separatorColor,y-f/2,0,d+f,q),d},drawItemImpl:function(d,X,m,k,f){var F=this,_=F._view,y=F._itemGap,w=k/2,t=X.type,I=X.element,M=X.label;Me(I)&&(M=I,I=q);var r,Q=F.getLabelFont(X),T=F.getLabelColor(X),z=X.selected,x=Si(X.icon),V=re(x,X),W=0,j=V+(M?Gp(Q,M).width:0);if("separator"===X||X.separator===!0)return kc(d,F._separatorColor,m,k/4,w),1;if(I){x&&Ep(d,x,m+V/2,w,X,F),Cb(d,M,Q,T,m+V,0,0,k);var N=Bi(I);f||F._90I.add(N),N.parentNode!==_&&Bd(_,N),I.iv&&I.iv(),I.validate&&I.validate();var b=N.getBoundingClientRect(),l=b.width,L=N.style;return yr(N),L.left=F.tx()+m+j+em,L.top=(k-b.height)/2+em,j+l}return t===hh?r=Si(z?Kn:fq):t===Dl&&(r=Si(z?Dl:ej)),r?(W=re(r,X),Ep(d,r,m+W/2,w,X,F),m+=W,j+=W):z&&Iq(d,m-y/2,0,j+y,k,F.getSelectBackground(X)),x&&Ep(d,x,m+V/2,w,X,F),Cb(d,M,Q,T,m+V,0,0,k),j},validateImpl:function(){var w=this,S=w._canvas,v=w.getWidth(),U=w.getHeight(),y=w._30o,Z=w._items;Dp(S,v,U);var V=Zh(S),H=w._itemGap,o=H/2;vr(V,w.tx(),0,1),V.clearRect(0,0,v,U);var $=w._90I;w._90I=new eb,y.clear(),Z.forEach(function(d){var K=w.drawItem(V,d,o,U);y.add({item:d,startX:o,endX:o+K,width:K}),K&&(o+=K+H)}),$.each(function(U){w._90I.contains(U)||wg(U)});var j=w._64I;w._64I=I(0,o),V.restore(),w._stickToRight?(w._65O=0,V=Zh(S),o=v-w._64I+H,vr(V,0,0,1),V.clearRect(0,0,v,U),y.clear(),Z.forEach(function(h){var S=w.drawItem(V,h,o,U,!0);y.add({item:h,startX:o,endX:o+S,width:S}),S&&(o+=S+H)}),V.restore()):w.tx(w.tx()),j!==w._64I&&w.onSumWidthChanged(j,w._64I)},onSumWidthChanged:function(){},handleClick:function(B,M){var l=this,a=B.type,s=B.action,y=B.groupId,U=B.selected;B.disabled||(y!=q?U||(B.selected=!0,this._items.forEach(function(V){V.groupId===y&&B!==V&&(V.selected=!1)}),s&&B.action(B,l,M)):a===Dl||"toggle"===a?(B.selected=!U,s&&B.action(B,l,M)):s&&B.action(B,l,M)),er(),l.iv()}});var ad=function(f){this.tb=f,this.addListeners()};Xd(ad,_,{ms_listener:1,getView:function(){return this.tb._view},handle_mousewheel:function(P){this.handleScroll(P,10*(P.wheelDelta/40))},handle_DOMMouseScroll:function(v){this.handleScroll(v,10*-v.detail)},handleScroll:function(z,A){ak(z);var m=this.tb;m.isScrollable()&&!m._stickToRight&&(m.tx(m.tx()+A),ye())},handle_mousemove:function(B){var C=this;pm||C.setItem(B)},handle_mouseout:function(M){var $=this;M.target===$.getView()?$.tb.setCurrentItem(q):$.handle_mousemove(M)},handle_mousedown:function($){this.handle_mousemove($),this.handle_touchstart($)},handle_touchstart:function(D){var f=this,T=f.tb,j=D.target;rp(D)&&(j===f.getView()||j===T._canvas)&&(ak(D),T.setFocus(D)&&(this.setItem(D,!0),(T.isScrollable()||f.info&&!f.info.item.disabled)&&(f.x=Tc(D).x,f.tx=T.tx(),Hk(f,D))))},handleWindowMouseMove:function(A){this.handleWindowTouchMove(A)},handleWindowTouchMove:function(t){var p=this,Q=p.tb;if(!Q._stickToRight){var j=Tc(t).x-p.x;!p._25o&&E(j)>2&&Q.isScrollable()&&(p._25o=1),p._25o&&Q.tx(p.tx+j)}},handleWindowMouseUp:function(U){this.handleWindowTouchEnd(U)},handleWindowTouchEnd:function(U){var w=this,k=w.tb,l=w.info,s=w.tb.getItemInfoAt(U);if(!w._25o&&l){var h=l.item;s&&s.item===h&&k.handleClick(h,U)}w._25o=w.x=w.tx=q,w.setItem()},setItem:function(H,d){var X=this,r=X.tb,e=X.info=H?r.getItemInfoAt(H):q,G=e?e.item:q;r.setCurrentItem(G),d&&G&&Gf(G.onDown)&&G.onDown(H)}}),Sc.BorderPane=function(){this._view=uc(1,this),this.iv()},ik("BorderPane",_,{ms_v:1,ms_ac:["topHeight","bottomHeight","leftWidth","rightWidth"],ms_fire:1,getLeftView:function(){return this._leftView},setLeftView:function(p,Q){this._12o("leftView",p),Q!=q&&this.setLeftWidth(Q)},getRightView:function(){return this._rightView},setRightView:function(z,v){this._12o("rightView",z),v!=q&&this.setRightWidth(v)},getTopView:function(){return this._topView},setTopView:function(N,f){this._12o("topView",N),f!=q&&this.setTopHeight(f)},getBottomView:function(){return this._bottomView},setBottomView:function(g,b){this._12o("bottomView",g),b!=q&&this.setBottomHeight(b)},getCenterView:function(){return this._centerView},setCenterView:function(h){this._12o("centerView",h)},_12o:function(m,I){var W=this,s="_"+m,K=W._view,c=W[s];c!==I&&(c&&(c.getView?wg(c.getView()):wg(c)),W[s]=I,I&&(I.getView?Bd(K,I.getView(),1):Bd(K,I,1)),W.fp(m,c,I))},onPropertyChanged:function(){this.iv()},validateImpl:function(){var d=this,E=d._topView,R=d._bottomView,m=d._leftView,c=d._rightView,S=d._centerView,U=d.getWidth(),Q=d.getHeight(),w=0,h=0,e=U,L=Q,a=0,f=0,k=0,o=0;E&&(a=d._topHeight==q?Ke(E):d._topHeight,h=a),R&&(f=d._bottomHeight==q?Ke(R):d._bottomHeight,L=Q-f),m&&(k=d._leftWidth==q?yh(m):d._leftWidth,w=k),c&&(o=d._rightWidth==q?yh(c):d._rightWidth,e=U-o);var G=I(0,e-w),F=I(0,L-h);E&&cq(E,0,0,U,a),R&&cq(R,0,L,U,f),m&&cq(m,0,h,k,F),c&&cq(c,e,h,o,F),S&&cq(S,w,h,G,F)}})}}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);