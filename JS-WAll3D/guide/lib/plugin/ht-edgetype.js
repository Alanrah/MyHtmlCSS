!function(C){"use strict";var L="ht",J=C[L],y=Math,j=y.max,W=y.min,s=y.abs,b=y.atan2,t=(y.cos,y.sin,y.ceil),U=J.Default,A=U.getInternal(),B=J.List,d=A.Mat,g=A.getNodeRect,Q=A.intersectionLineRect,r=U.getDistance,n=U.setEdgeType,Z="left",_="right",O="top",M="bottom",V="edge.type",K="edge.gap",R="edge.center",S="edge.extend",e=function(I,c){return g(I,c).width},D=function(k,c){return g(k,c).height},l=function(W,o){return A.getEdgeAgentPosition(W,o._40I,o.s("edge.source.position"),o.s("edge.source.offset.x"),o.s("edge.source.offset.y"),o.s("edge.source.anchor.x"),o.s("edge.source.anchor.y"))},c=function(q,x){return A.getEdgeAgentPosition(q,x._41I,x.s("edge.target.position"),x.s("edge.target.offset.x"),x.s("edge.target.offset.y"),x.s("edge.target.anchor.x"),x.s("edge.target.anchor.y"))},$=function(d,k){var R=d.s(V),c=d.getEdgeGroup();if(c){var j=0;if(c.eachSiblingEdge(function(v){k.isVisible(v)&&v.s(V)==R&&j++}),j>1)return d.s(K)*(j-1)/2}return 0},P=function(w,h){var R=w.s(V),e=w.isLooped();if(!w.getEdgeGroup())return e?w.s(K):0;var Z,r=0,Y=0,O=0;return w.getEdgeGroup().getSiblings().each(function(d){d.each(function(G){if(G._40I===w._40I&&G.s(V)==R&&h.isVisible(G)){var c=G.s(K);Z?(Y+=O/2+c/2,O=c):(Z=G,O=c),G===w&&(r=Y)}})}),e?Y-r+O:r-Y/2},o=function(l,s){var b=s.s("edge.corner.radius");return U.toRoundedCorner(l,b)};A.addMethod(J.Style,{"edge.ripple.elevation":-20,"edge.ripple.size":1,"edge.ripple.both":!1,"edge.ripple.straight":!1,"edge.ripple.length":-1,"edge.corner.radius":-1,"edge.ortho":.5,"edge.flex":20,"edge.extend":20},!0),n("boundary",function(t,m,s,E){E||(m=-m);var k,I=l(s,t),M=c(s,t),P=g(s,t._40I),f=g(s,t._41I),U=new d(b(M.y-I.y,M.x-I.x)),q=r(I,M),T=I.x,v=I.y;return k=U.tf(0,m),I={x:k.x+T,y:k.y+v},k=U.tf(q,m),M={x:k.x+T,y:k.y+v},k=Q(I,M,P),k&&(I={x:k[0],y:k[1]}),k=Q(I,M,f),k&&(M={x:k[0],y:k[1]}),{points:new B([I,M])}}),n("ripple",function(g,m,w,P){P||(m=-m);var n=l(w,g),F=c(w,g),k=r(n,F),A=W(g.s("edge.offset"),k/2),p=g.s("edge.ripple.size"),C=g.s("edge.ripple.length"),j=g.s("edge.ripple.both"),D=g.s(R),e=g.s("edge.ripple.elevation"),M=new B,G=g.s("edge.ripple.straight")?null:new B,q=new d(b(F.y-n.y,F.x-n.x));P||(e=-e),k-=2*A,C>0&&(p=t(k/C));var v=k/p;G&&G.add(1);for(var x=0;p>x;x++)G&&G.add(3),0===x?M.add({x:A+v*x,y:D?0:m}):M.add({x:A+v*x,y:m}),M.add({x:A+v*x+v/2,y:e+m}),j&&(e=-e);for(M.add({x:A+k,y:D?0:m}),x=0;x<M.size();x++){var J=q.tf(M.get(x));J.x+=n.x,J.y+=n.y,M.set(x,J)}return{points:M,segments:G}}),n("h.v",function(w,K,S){K=P(w,S);var T=new B,V=w.s(R),G=l(S,w),J=G.x,y=G.y,u=c(S,w),q=u.x,r=u.y,A=0,Y=0,v=q-J,b=r-y;return V||(A=e(S,w._40I)/2,Y=D(S,w._41I)/2),v>=0&&0>=b?(T.add({x:J+A,y:y+K}),T.add({x:q+K,y:y+K}),T.add({x:q+K,y:r+Y})):0>=v&&b>=0?(T.add({x:J-A,y:y+K}),T.add({x:q+K,y:y+K}),T.add({x:q+K,y:r-Y})):v>=0&&b>=0?(T.add({x:J+A,y:y+K}),T.add({x:q-K,y:y+K}),T.add({x:q-K,y:r-Y})):(T.add({x:J-A,y:y+K}),T.add({x:q-K,y:y+K}),T.add({x:q-K,y:r+Y})),o(T,w)}),n("v.h",function(E,Z,j){Z=P(E,j);var W=new B,A=E.s(R),f=l(j,E),J=f.x,b=f.y,S=c(j,E),V=S.x,_=S.y,L=0,G=0,y=V-J,T=_-b;return A||(L=e(j,E._41I)/2,G=D(j,E._40I)/2),y>=0&&0>=T?(W.add({x:J+Z,y:b-G}),W.add({x:J+Z,y:_+Z}),W.add({x:V-L,y:_+Z})):0>=y&&T>=0?(W.add({x:J+Z,y:b+G}),W.add({x:J+Z,y:_+Z}),W.add({x:V+L,y:_+Z})):y>=0&&T>=0?(W.add({x:J-Z,y:b+G}),W.add({x:J-Z,y:_+Z}),W.add({x:V-L,y:_+Z})):(W.add({x:J-Z,y:b-G}),W.add({x:J-Z,y:_+Z}),W.add({x:V+L,y:_+Z})),o(W,E)}),n("ortho",function(X,p,S){var Q=new B,N=X.s(R),a=X.s("edge.ortho"),W=X._40I,y=X._41I,j=l(S,X),I=j.x,E=j.y,w=c(S,X),r=w.x,u=w.y,q=r-I,L=u-E,n=N?0:e(S,W)/2,Z=N?0:D(S,W)/2,P=N?0:e(S,y)/2,x=N?0:D(S,y)/2,O=(q-(n+P)*(q>0?1:-1))*a,d=(L-(Z+x)*(L>0?1:-1))*a;return s(q)<s(L)?q>=0&&0>=L?(Q.add({x:I+p,y:E-Z}),Q.add({x:I+p,y:E+d+p-Z}),Q.add({x:r+p,y:E+d+p-Z}),Q.add({x:r+p,y:u+x})):0>=q&&L>=0?(Q.add({x:I+p,y:E+Z}),Q.add({x:I+p,y:E+d+p+Z}),Q.add({x:r+p,y:E+d+p+Z}),Q.add({x:r+p,y:u-x})):q>=0&&L>=0?(Q.add({x:I+p,y:E+Z}),Q.add({x:I+p,y:E+d-p+Z}),Q.add({x:r+p,y:E+d-p+Z}),Q.add({x:r+p,y:u-x})):(Q.add({x:I+p,y:E-Z}),Q.add({x:I+p,y:E+d-p-Z}),Q.add({x:r+p,y:E+d-p-Z}),Q.add({x:r+p,y:u+x})):q>=0&&0>=L?(Q.add({x:I+n,y:E+p}),Q.add({x:I+O+p+n,y:E+p}),Q.add({x:I+O+p+n,y:u+p}),Q.add({x:r-P,y:u+p})):0>=q&&L>=0?(Q.add({x:I-n,y:E+p}),Q.add({x:I+O+p-n,y:E+p}),Q.add({x:I+O+p-n,y:u+p}),Q.add({x:r+P,y:u+p})):q>=0&&L>=0?(Q.add({x:I+n,y:E+p}),Q.add({x:I+O-p+n,y:E+p}),Q.add({x:I+O-p+n,y:u+p}),Q.add({x:r-P,y:u+p})):(Q.add({x:I-n,y:E+p}),Q.add({x:I+O-p-n,y:E+p}),Q.add({x:I+O-p-n,y:u+p}),Q.add({x:r+P,y:u+p})),o(Q,X)}),n("flex",function(r,M,X){var z=new B,W=r.s("edge.flex")+$(r,X),L=r.s(R),p=r._40I,S=r._41I,G=l(X,r),_=G.x,Y=G.y,J=c(X,r),A=J.x,x=J.y,f=A-_,n=x-Y,y=L?0:e(X,p)/2,j=L?0:D(X,p)/2,E=L?0:e(X,S)/2,b=L?0:D(X,S)/2,h=f>0?W:-W,u=n>0?W:-W;return s(f)<s(n)?f>=0&&0>=n?(z.add({x:_+M,y:Y-j}),z.add({x:_+M,y:Y+u+M-j}),z.add({x:A+M,y:x-u+M+b}),z.add({x:A+M,y:x+b})):0>=f&&n>=0?(z.add({x:_+M,y:Y+j}),z.add({x:_+M,y:Y+u+M+j}),z.add({x:A+M,y:x-u+M-b}),z.add({x:A+M,y:x-b})):f>=0&&n>=0?(z.add({x:_+M,y:Y+j}),z.add({x:_+M,y:Y+u-M+j}),z.add({x:A+M,y:x-u-M-b}),z.add({x:A+M,y:x-b})):(z.add({x:_+M,y:Y-j}),z.add({x:_+M,y:Y+u-M-j}),z.add({x:A+M,y:x-u-M+b}),z.add({x:A+M,y:x+b})):f>=0&&0>=n?(z.add({x:_+y,y:Y+M}),z.add({x:_+h+M+y,y:Y+M}),z.add({x:A-h+M-E,y:x+M}),z.add({x:A-E,y:x+M})):0>=f&&n>=0?(z.add({x:_-y,y:Y+M}),z.add({x:_+h+M-y,y:Y+M}),z.add({x:A-h+M+E,y:x+M}),z.add({x:A+E,y:x+M})):f>=0&&n>=0?(z.add({x:_+y,y:Y+M}),z.add({x:_+h-M+y,y:Y+M}),z.add({x:A-h-M-E,y:x+M}),z.add({x:A-E,y:x+M})):(z.add({x:_-y,y:Y+M}),z.add({x:_+h-M-y,y:Y+M}),z.add({x:A-h-M+E,y:x+M}),z.add({x:A+E,y:x+M})),o(z,r)}),n("extend.east",function(E,O,v){var n=new B,g=E.s(S)+$(E,v),J=E.s(R),x=l(v,E),_=x.x+(J?0:e(v,E._40I)/2),d=x.y,i=c(v,E),L=i.x+(J?0:e(v,E._41I)/2),P=i.y,U=j(_,L)+g;return d>P?(n.add({x:_,y:d+O}),n.add({x:U+O,y:d+O}),n.add({x:U+O,y:P-O}),n.add({x:L,y:P-O})):(n.add({x:_,y:d-O}),n.add({x:U+O,y:d-O}),n.add({x:U+O,y:P+O}),n.add({x:L,y:P+O})),o(n,E)}),n("extend.west",function(E,n,L){var Z=new B,a=E.s(S)+$(E,L),i=E.s(R),H=l(L,E),h=H.x-(i?0:e(L,E._40I)/2),f=H.y,z=c(L,E),_=z.x-(i?0:e(L,E._41I)/2),M=z.y,T=W(h,_)-a;return f>M?(Z.add({x:h,y:f+n}),Z.add({x:T-n,y:f+n}),Z.add({x:T-n,y:M-n}),Z.add({x:_,y:M-n})):(Z.add({x:h,y:f-n}),Z.add({x:T-n,y:f-n}),Z.add({x:T-n,y:M+n}),Z.add({x:_,y:M+n})),o(Z,E)}),n("extend.north",function(T,M,k){var P=new B,I=T.s(S)+$(T,k),w=T.s(R),p=l(k,T),A=p.x,i=p.y-(w?0:D(k,T._40I)/2),u=c(k,T),N=u.x,X=u.y-(w?0:D(k,T._41I)/2),n=W(i,X)-I;return A>N?(P.add({y:i,x:A+M}),P.add({y:n-M,x:A+M}),P.add({y:n-M,x:N-M}),P.add({y:X,x:N-M})):(P.add({y:i,x:A-M}),P.add({y:n-M,x:A-M}),P.add({y:n-M,x:N+M}),P.add({y:X,x:N+M})),o(P,T)}),n("extend.south",function(k,r,F){var g=new B,Z=k.s(S)+$(k,F),x=k.s(R),s=l(F,k),m=s.x,z=s.y+(x?0:D(F,k._40I)/2),L=c(F,k),f=L.x,P=L.y+(x?0:D(F,k._41I)/2),u=j(z,P)+Z;return m>f?(g.add({y:z,x:m+r}),g.add({y:u+r,x:m+r}),g.add({y:u+r,x:f-r}),g.add({y:P,x:f-r})):(g.add({y:z,x:m-r}),g.add({y:u+r,x:m-r}),g.add({y:u+r,x:f+r}),g.add({y:P,x:f+r})),o(g,k)});var T=function(o,u,d,R,Y){if(R.sort(function(l,p){var Q=l.getSourceAgent()===u?l.getTargetAgent():l.getSourceAgent(),F=p.getSourceAgent()===u?p.getTargetAgent():p.getSourceAgent(),g=Q.p(),f=F.p();if(d===Z||d===_){if(g.y>f.y)return 1;if(g.y<f.y)return-1}else{if(g.x>f.x)return 1;if(g.x<f.x)return-1}return U.sortFunc(l.getId(),p.getId())}),Y){for(var F,e,A,T=o.getSourceAgent(),E=o.getTargetAgent(),a=0;a<R.size();a++){var V=R.get(a);V.getSourceAgent()===T&&V.getTargetAgent()===E||V.getTargetAgent()===T&&V.getSourceAgent()===E?(e||(e=new B),e.add(V,0)):e?(A||(A=new B),A.add(V)):(F||(F=new B),F.add(V))}R.clear(),F&&R.addAll(F),e&&R.addAll(e),A&&R.addAll(A)}var P=R.indexOf(o),q=R.size(),M=o.s(K);return{side:d,index:P,size:q,offset:-M*(q-1)/2+M*P}},i=function(f,w,b,o,B){var j=w.s(V);return T(w,b,o,b.getAgentEdges().toList(function(L){return f.isVisible(L)&&L.s(V)===j}),B)},f=function(p,m){var R=p.getSourceAgent()===m?p.getTargetAgent():p.getSourceAgent(),h=m.p(),r=R.p(),o=r.x-h.x,c=r.y-h.y;return o>0&&s(c)<=o?_:0>o&&s(c)<=-o?Z:c>0&&s(o)<=c?M:O},F=function(S,z,e){var b=z.s(V),C=f(z,e);return T(z,e,C,e.getAgentEdges().toList(function(d){return S.isVisible(d)&&d.s(V)===b&&f(d,e)===C}))},N=function(Q,U){var K=Q.getSourceAgent()===U,s=K?Q.getTargetAgent():Q.getSourceAgent(),T=U.p(),n=s.p();return K?T.y>n.y?O:M:T.x<n.x?_:Z},I=function(h,d,f){var z=d.s(V),u=N(d,f);return T(d,f,u,f.getAgentEdges().toList(function(_){return h.isVisible(_)&&_.s(V)===z&&N(_,f)===u}),u===_||u===M)},H=function(H,z){var v=H.getSourceAgent()===z,E=v?H.getTargetAgent():H.getSourceAgent(),J=z.p(),T=E.p();return v?J.x<T.x?_:Z:J.y>T.y?O:M},v=function(B,p,A){var o=p.s(V),$=H(p,A);return T(p,A,$,A.getAgentEdges().toList(function(f){return B.isVisible(f)&&f.s(V)===o&&H(f,A)===$}),$===_||$===M)},E=function(C,H,T){var J=C.getSourceAgent(),G=C.getTargetAgent(),r=J.getId()>G.getId(),V=r?G:J,j=r?J:G,K=V.p(),S=j.p(),I=T(H,C,V),P=T(H,C,j),u=C.s(R),q=u?0:e(H,V)/2,c=u?0:e(H,j)/2,Q=u?0:D(H,V)/2,X=u?0:D(H,j)/2,F=I.offset,i=P.offset,b=I.side,f=P.side,z=new B;return b===O?(z.add({x:K.x+F,y:K.y-Q}),z.add({x:K.x+F,y:S.y+i}),f===Z?z.add({x:S.x-c,y:S.y+i}):z.add({x:S.x+c,y:S.y+i})):b===M?(z.add({x:K.x+F,y:K.y+Q}),z.add({x:K.x+F,y:S.y+i}),f===Z?z.add({x:S.x-c,y:S.y+i}):z.add({x:S.x+c,y:S.y+i})):b===Z?(z.add({x:K.x-q,y:K.y+F}),z.add({x:S.x+i,y:K.y+F}),f===M?z.add({x:S.x+i,y:S.y+X}):z.add({x:S.x+i,y:S.y-X})):b===_&&(z.add({x:K.x+q,y:K.y+F}),z.add({x:S.x+i,y:K.y+F}),f===M?z.add({x:S.x+i,y:S.y+X}):z.add({x:S.x+i,y:S.y-X})),r&&z.reverse(),o(z,C)};n("ortho2",function(v,H,T){var W,t,p=v.s(R),a=v.s("edge.ortho"),m=v.getSourceAgent(),q=v.getTargetAgent(),i=m.getId()>q.getId(),Y=i?q:m,X=i?m:q,g=Y.p(),U=X.p(),N=F(T,v,Y),G=F(T,v,X),s=p?0:e(T,Y)/2,d=p?0:D(T,Y)/2,S=p?0:e(T,X)/2,V=p?0:D(T,X)/2,n=new B,E=N.offset,k=G.offset,b=N.side;return b===_?(W=U.y>g.y?-E:E,t=g.x+s+(U.x-S-g.x-s)*a,n.add({x:g.x+s,y:g.y+E}),n.add({x:t+W,y:g.y+E}),n.add({x:t+W,y:U.y+k}),n.add({x:U.x-S,y:U.y+k})):b===Z?(W=U.y>g.y?-E:E,t=g.x-s-(g.x-s-U.x-S)*a,n.add({x:g.x-s,y:g.y+E}),n.add({x:t-W,y:g.y+E}),n.add({x:t-W,y:U.y+k}),n.add({x:U.x+S,y:U.y+k})):b===M?(W=U.x>g.x?-E:E,t=g.y+d+(U.y-V-g.y-d)*a,n.add({x:g.x+E,y:g.y+d}),n.add({x:g.x+E,y:t+W}),n.add({x:U.x+k,y:t+W}),n.add({x:U.x+k,y:U.y-V})):b===O&&(W=U.x>g.x?-E:E,t=g.y-d-(g.y-d-U.y-V)*a,n.add({x:g.x+E,y:g.y-d}),n.add({x:g.x+E,y:t-W}),n.add({x:U.x+k,y:t-W}),n.add({x:U.x+k,y:U.y+V})),i&&n.reverse(),o(n,v)},!0),n("flex2",function(I,g,A){var u,z=I.getSourceAgent(),t=I.getTargetAgent(),W=z.getId()>t.getId(),T=W?t:z,x=W?z:t,S=T.p(),l=x.p(),f=F(A,I,T),b=F(A,I,x),H=I.s(R),v=I.s("edge.flex")+(f.size-1)/2*I.s(K),r=H?0:e(A,T)/2,d=H?0:D(A,T)/2,q=H?0:e(A,x)/2,L=H?0:D(A,x)/2,n=new B,p=f.offset,i=b.offset,V=f.side;return V===_?(u=l.y>S.y?-p:p,n.add({x:S.x+r,y:S.y+p}),n.add({x:S.x+r+v+u,y:S.y+p}),n.add({x:l.x-q-v+u,y:l.y+i}),n.add({x:l.x-q,y:l.y+i})):V===Z?(u=l.y>S.y?-p:p,n.add({x:S.x-r,y:S.y+p}),n.add({x:S.x-r-v-u,y:S.y+p}),n.add({x:l.x+q+v-u,y:l.y+i}),n.add({x:l.x+q,y:l.y+i})):V===M?(u=l.x>S.x?-p:p,n.add({x:S.x+p,y:S.y+d}),n.add({x:S.x+p,y:S.y+d+v+u}),n.add({x:l.x+i,y:l.y-L-v+u}),n.add({x:l.x+i,y:l.y-L})):V===O&&(u=l.x>S.x?-p:p,n.add({x:S.x+p,y:S.y-d}),n.add({x:S.x+p,y:S.y-d-v-u}),n.add({x:l.x+i,y:l.y+L+v-u}),n.add({x:l.x+i,y:l.y+L})),W&&n.reverse(),o(n,I)},!0),n("extend.north2",function(E,g,G){var b=E.getSourceAgent(),f=E.getTargetAgent(),n=b.getId()>f.getId(),t=n?f:b,q=n?b:f,h=t.p(),r=q.p(),j=i(G,E,t,O),k=i(G,E,q,O,!0),P=E.s(R),Y=P?0:D(G,t)/2,u=P?0:D(G,q)/2,A=j.offset,m=k.offset,U=E.s(S)+(j.size-1)/2*E.s(K),M=W(h.y-Y,r.y-u)-U+(h.x<r.x?A:-A),s=new B;return s.add({x:h.x+A,y:h.y-Y}),s.add({x:h.x+A,y:M}),s.add({x:r.x+m,y:M}),s.add({x:r.x+m,y:r.y-u}),n&&s.reverse(),o(s,E)},!0),n("extend.south2",function(W,l,e){var n=W.getSourceAgent(),v=W.getTargetAgent(),G=n.getId()>v.getId(),E=G?v:n,Q=G?n:v,z=E.p(),k=Q.p(),V=i(e,W,E,M),O=i(e,W,Q,M,!0),A=W.s(R),C=A?0:D(e,E)/2,x=A?0:D(e,Q)/2,Y=V.offset,r=O.offset,g=W.s(S)+(V.size-1)/2*W.s(K),m=j(z.y+C,k.y+x)+g+(z.x>k.x?Y:-Y),J=new B;return J.add({x:z.x+Y,y:z.y+C}),J.add({x:z.x+Y,y:m}),J.add({x:k.x+r,y:m}),J.add({x:k.x+r,y:k.y+x}),G&&J.reverse(),o(J,W)},!0),n("extend.west2",function(x,w,$){var C=x.getSourceAgent(),c=x.getTargetAgent(),M=C.getId()>c.getId(),Y=M?c:C,I=M?C:c,D=Y.p(),u=I.p(),X=i($,x,Y,O),y=i($,x,I,O,!0),J=x.s(R),A=J?0:e($,Y)/2,Q=J?0:e($,I)/2,g=X.offset,s=y.offset,F=x.s(S)+(X.size-1)/2*x.s(K),j=W(D.x-A,u.x-Q)-F+(D.y<u.y?g:-g),k=new B;return k.add({x:D.x-A,y:D.y+g}),k.add({x:j,y:D.y+g}),k.add({x:j,y:u.y+s}),k.add({x:u.x-Q,y:u.y+s}),M&&k.reverse(),o(k,x)},!0),n("extend.east2",function(H,C,F){var y=H.getSourceAgent(),n=H.getTargetAgent(),c=y.getId()>n.getId(),Z=c?n:y,w=c?y:n,r=Z.p(),G=w.p(),u=i(F,H,Z,O),k=i(F,H,w,O,!0),P=H.s(R),W=P?0:e(F,Z)/2,p=P?0:e(F,w)/2,z=u.offset,g=k.offset,v=H.s(S)+(u.size-1)/2*H.s(K),D=j(r.x+W,G.x+p)+v+(r.y>G.y?z:-z),M=new B;return M.add({x:r.x+W,y:r.y+z}),M.add({x:D,y:r.y+z}),M.add({x:D,y:G.y+g}),M.add({x:G.x+p,y:G.y+g}),c&&M.reverse(),o(M,H)},!0),n("v.h2",function(P,o,w){return E(P,w,I)},!0),n("h.v2",function(I,f,n){return E(I,n,v)},!0)}("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:(0,eval)("this"),Object);